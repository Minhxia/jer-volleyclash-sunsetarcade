/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={543:function(e,t,i){var r;e=i.nmd(e),function(){var n,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",l=32,h=128,c=1/0,u=9007199254740991,p=NaN,d=4294967295,f=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],g="[object Arguments]",y="[object Array]",m="[object Boolean]",S="[object Date]",v="[object Error]",_="[object Function]",b="[object GeneratorFunction]",x="[object Map]",w="[object Number]",T="[object Object]",E="[object Promise]",A="[object RegExp]",O="[object Set]",I="[object String]",R="[object Symbol]",C="[object WeakMap]",N="[object ArrayBuffer]",P="[object DataView]",k="[object Float32Array]",U="[object Float64Array]",B="[object Int8Array]",L="[object Int16Array]",M="[object Int32Array]",j="[object Uint8Array]",D="[object Uint8ClampedArray]",F="[object Uint16Array]",V="[object Uint32Array]",z=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,G=RegExp(K.source),$=RegExp(J.source),X=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,q=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(te.source),re=/^\s+/,ne=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,de=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,me=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ve=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,be="\\ud800-\\udfff",xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",we="\\u2700-\\u27bf",Te="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="["+be+"]",Re="["+Oe+"]",Ce="["+xe+"]",Ne="\\d+",Pe="["+we+"]",ke="["+Te+"]",Ue="[^"+be+Oe+Ne+we+Te+Ee+"]",Be="\\ud83c[\\udffb-\\udfff]",Le="[^"+be+"]",Me="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",De="["+Ee+"]",Fe="\\u200d",Ve="(?:"+ke+"|"+Ue+")",ze="(?:"+De+"|"+Ue+")",We="(?:['’](?:d|ll|m|re|s|t|ve))?",He="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Ce+"|"+Be+")?",Je="["+Ae+"]?",Ge=Je+Ke+"(?:"+Fe+"(?:"+[Le,Me,je].join("|")+")"+Je+Ke+")*",$e="(?:"+[Pe,Me,je].join("|")+")"+Ge,Xe="(?:"+[Le+Ce+"?",Ce,Me,je,Ie].join("|")+")",Ye=RegExp("['’]","g"),qe=RegExp(Ce,"g"),Ze=RegExp(Be+"(?="+Be+")|"+Xe+Ge,"g"),Qe=RegExp([De+"?"+ke+"+"+We+"(?="+[Re,De,"$"].join("|")+")",ze+"+"+He+"(?="+[Re,De+Ve,"$"].join("|")+")",De+"?"+Ve+"+"+We,De+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,$e].join("|"),"g"),et=RegExp("["+Fe+be+xe+Ae+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rt=-1,nt={};nt[k]=nt[U]=nt[B]=nt[L]=nt[M]=nt[j]=nt[D]=nt[F]=nt[V]=!0,nt[g]=nt[y]=nt[N]=nt[m]=nt[P]=nt[S]=nt[v]=nt[_]=nt[x]=nt[w]=nt[T]=nt[A]=nt[O]=nt[I]=nt[C]=!1;var st={};st[g]=st[y]=st[N]=st[P]=st[m]=st[S]=st[k]=st[U]=st[B]=st[L]=st[M]=st[x]=st[w]=st[T]=st[A]=st[O]=st[I]=st[R]=st[j]=st[D]=st[F]=st[V]=!0,st[v]=st[_]=st[C]=!1;var ot={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,lt=parseInt,ht="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,ct="object"==typeof self&&self&&self.Object===Object&&self,ut=ht||ct||Function("return this")(),pt=t&&!t.nodeType&&t,dt=pt&&e&&!e.nodeType&&e,ft=dt&&dt.exports===pt,gt=ft&&ht.process,yt=function(){try{return dt&&dt.require&&dt.require("util").types||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),mt=yt&&yt.isArrayBuffer,St=yt&&yt.isDate,vt=yt&&yt.isMap,_t=yt&&yt.isRegExp,bt=yt&&yt.isSet,xt=yt&&yt.isTypedArray;function wt(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function Tt(e,t,i,r){for(var n=-1,s=null==e?0:e.length;++n<s;){var o=e[n];t(r,o,i(o),e)}return r}function Et(e,t){for(var i=-1,r=null==e?0:e.length;++i<r&&!1!==t(e[i],i,e););return e}function At(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function Ot(e,t){for(var i=-1,r=null==e?0:e.length;++i<r;)if(!t(e[i],i,e))return!1;return!0}function It(e,t){for(var i=-1,r=null==e?0:e.length,n=0,s=[];++i<r;){var o=e[i];t(o,i,e)&&(s[n++]=o)}return s}function Rt(e,t){return!(null==e||!e.length)&&Dt(e,t,0)>-1}function Ct(e,t,i){for(var r=-1,n=null==e?0:e.length;++r<n;)if(i(t,e[r]))return!0;return!1}function Nt(e,t){for(var i=-1,r=null==e?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}function Pt(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}function kt(e,t,i,r){var n=-1,s=null==e?0:e.length;for(r&&s&&(i=e[++n]);++n<s;)i=t(i,e[n],n,e);return i}function Ut(e,t,i,r){var n=null==e?0:e.length;for(r&&n&&(i=e[--n]);n--;)i=t(i,e[n],n,e);return i}function Bt(e,t){for(var i=-1,r=null==e?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}var Lt=Wt("length");function Mt(e,t,i){var r;return i(e,function(e,i,n){if(t(e,i,n))return r=i,!1}),r}function jt(e,t,i,r){for(var n=e.length,s=i+(r?1:-1);r?s--:++s<n;)if(t(e[s],s,e))return s;return-1}function Dt(e,t,i){return t==t?function(e,t,i){for(var r=i-1,n=e.length;++r<n;)if(e[r]===t)return r;return-1}(e,t,i):jt(e,Vt,i)}function Ft(e,t,i,r){for(var n=i-1,s=e.length;++n<s;)if(r(e[n],t))return n;return-1}function Vt(e){return e!=e}function zt(e,t){var i=null==e?0:e.length;return i?Jt(e,t)/i:p}function Wt(e){return function(t){return null==t?n:t[e]}}function Ht(e){return function(t){return null==e?n:e[t]}}function Kt(e,t,i,r,n){return n(e,function(e,n,s){i=r?(r=!1,e):t(i,e,n,s)}),i}function Jt(e,t){for(var i,r=-1,s=e.length;++r<s;){var o=t(e[r]);o!==n&&(i=i===n?o:i+o)}return i}function Gt(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}function $t(e){return e?e.slice(0,ui(e)+1).replace(re,""):e}function Xt(e){return function(t){return e(t)}}function Yt(e,t){return Nt(t,function(t){return e[t]})}function qt(e,t){return e.has(t)}function Zt(e,t){for(var i=-1,r=e.length;++i<r&&Dt(t,e[i],0)>-1;);return i}function Qt(e,t){for(var i=e.length;i--&&Dt(t,e[i],0)>-1;);return i}var ei=Ht({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),ti=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ii(e){return"\\"+ot[e]}function ri(e){return et.test(e)}function ni(e){var t=-1,i=Array(e.size);return e.forEach(function(e,r){i[++t]=[r,e]}),i}function si(e,t){return function(i){return e(t(i))}}function oi(e,t){for(var i=-1,r=e.length,n=0,s=[];++i<r;){var o=e[i];o!==t&&o!==a||(e[i]=a,s[n++]=i)}return s}function ai(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function li(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=[e,e]}),i}function hi(e){return ri(e)?function(e){for(var t=Ze.lastIndex=0;Ze.test(e);)++t;return t}(e):Lt(e)}function ci(e){return ri(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}function ui(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var pi=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),di=function e(t){var i,r=(t=null==t?ut:di.defaults(ut.Object(),t,di.pick(ut,it))).Array,ne=t.Date,be=t.Error,xe=t.Function,we=t.Math,Te=t.Object,Ee=t.RegExp,Ae=t.String,Oe=t.TypeError,Ie=r.prototype,Re=xe.prototype,Ce=Te.prototype,Ne=t["__core-js_shared__"],Pe=Re.toString,ke=Ce.hasOwnProperty,Ue=0,Be=(i=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Le=Ce.toString,Me=Pe.call(Te),je=ut._,De=Ee("^"+Pe.call(ke).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fe=ft?t.Buffer:n,Ve=t.Symbol,ze=t.Uint8Array,We=Fe?Fe.allocUnsafe:n,He=si(Te.getPrototypeOf,Te),Ke=Te.create,Je=Ce.propertyIsEnumerable,Ge=Ie.splice,$e=Ve?Ve.isConcatSpreadable:n,Xe=Ve?Ve.iterator:n,Ze=Ve?Ve.toStringTag:n,et=function(){try{var e=ls(Te,"defineProperty");return e({},"",{}),e}catch(e){}}(),ot=t.clearTimeout!==ut.clearTimeout&&t.clearTimeout,ht=ne&&ne.now!==ut.Date.now&&ne.now,ct=t.setTimeout!==ut.setTimeout&&t.setTimeout,pt=we.ceil,dt=we.floor,gt=Te.getOwnPropertySymbols,yt=Fe?Fe.isBuffer:n,Lt=t.isFinite,Ht=Ie.join,fi=si(Te.keys,Te),gi=we.max,yi=we.min,mi=ne.now,Si=t.parseInt,vi=we.random,_i=Ie.reverse,bi=ls(t,"DataView"),xi=ls(t,"Map"),wi=ls(t,"Promise"),Ti=ls(t,"Set"),Ei=ls(t,"WeakMap"),Ai=ls(Te,"create"),Oi=Ei&&new Ei,Ii={},Ri=Ls(bi),Ci=Ls(xi),Ni=Ls(wi),Pi=Ls(Ti),ki=Ls(Ei),Ui=Ve?Ve.prototype:n,Bi=Ui?Ui.valueOf:n,Li=Ui?Ui.toString:n;function Mi(e){if(ea(e)&&!Wo(e)&&!(e instanceof Vi)){if(e instanceof Fi)return e;if(ke.call(e,"__wrapped__"))return Ms(e)}return new Fi(e)}var ji=function(){function e(){}return function(t){if(!Qo(t))return{};if(Ke)return Ke(t);e.prototype=t;var i=new e;return e.prototype=n,i}}();function Di(){}function Fi(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Vi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function zi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function Wi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function Hi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function Ki(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Hi;++t<i;)this.add(e[t])}function Ji(e){var t=this.__data__=new Wi(e);this.size=t.size}function Gi(e,t){var i=Wo(e),r=!i&&zo(e),n=!i&&!r&&Go(e),s=!i&&!r&&!n&&la(e),o=i||r||n||s,a=o?Gt(e.length,Ae):[],l=a.length;for(var h in e)!t&&!ke.call(e,h)||o&&("length"==h||n&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||gs(h,l))||a.push(h);return a}function $i(e){var t=e.length;return t?e[Hr(0,t-1)]:n}function Xi(e,t){return Ns(An(e),nr(t,0,e.length))}function Yi(e){return Ns(An(e))}function qi(e,t,i){(i!==n&&!Do(e[t],i)||i===n&&!(t in e))&&ir(e,t,i)}function Zi(e,t,i){var r=e[t];ke.call(e,t)&&Do(r,i)&&(i!==n||t in e)||ir(e,t,i)}function Qi(e,t){for(var i=e.length;i--;)if(Do(e[i][0],t))return i;return-1}function er(e,t,i,r){return hr(e,function(e,n,s){t(r,e,i(e),s)}),r}function tr(e,t){return e&&On(t,Ca(t),e)}function ir(e,t,i){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function rr(e,t){for(var i=-1,s=t.length,o=r(s),a=null==e;++i<s;)o[i]=a?n:Ea(e,t[i]);return o}function nr(e,t,i){return e==e&&(i!==n&&(e=e<=i?e:i),t!==n&&(e=e>=t?e:t)),e}function sr(e,t,i,r,s,o){var a,l=1&t,h=2&t,c=4&t;if(i&&(a=s?i(e,r,s,o):i(e)),a!==n)return a;if(!Qo(e))return e;var u=Wo(e);if(u){if(a=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&ke.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!l)return An(e,a)}else{var p=us(e),d=p==_||p==b;if(Go(e))return _n(e,l);if(p==T||p==g||d&&!s){if(a=h||d?{}:ds(e),!l)return h?function(e,t){return On(e,cs(e),t)}(e,function(e,t){return e&&On(t,Na(t),e)}(a,e)):function(e,t){return On(e,hs(e),t)}(e,tr(a,e))}else{if(!st[p])return s?e:{};a=function(e,t,i){var r,n=e.constructor;switch(t){case N:return bn(e);case m:case S:return new n(+e);case P:return function(e,t){var i=t?bn(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case k:case U:case B:case L:case M:case j:case D:case F:case V:return xn(e,i);case x:return new n;case w:case I:return new n(e);case A:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new n;case R:return r=e,Bi?Te(Bi.call(r)):{}}}(e,p,l)}}o||(o=new Ji);var f=o.get(e);if(f)return f;o.set(e,a),sa(e)?e.forEach(function(r){a.add(sr(r,t,i,r,e,o))}):ta(e)&&e.forEach(function(r,n){a.set(n,sr(r,t,i,n,e,o))});var y=u?n:(c?h?ts:es:h?Na:Ca)(e);return Et(y||e,function(r,n){y&&(r=e[n=r]),Zi(a,n,sr(r,t,i,n,e,o))}),a}function or(e,t,i){var r=i.length;if(null==e)return!r;for(e=Te(e);r--;){var s=i[r],o=t[s],a=e[s];if(a===n&&!(s in e)||!o(a))return!1}return!0}function ar(e,t,i){if("function"!=typeof e)throw new Oe(s);return Os(function(){e.apply(n,i)},t)}function lr(e,t,i,r){var n=-1,s=Rt,o=!0,a=e.length,l=[],h=t.length;if(!a)return l;i&&(t=Nt(t,Xt(i))),r?(s=Ct,o=!1):t.length>=200&&(s=qt,o=!1,t=new Ki(t));e:for(;++n<a;){var c=e[n],u=null==i?c:i(c);if(c=r||0!==c?c:0,o&&u==u){for(var p=h;p--;)if(t[p]===u)continue e;l.push(c)}else s(t,u,r)||l.push(c)}return l}Mi.templateSettings={escape:X,evaluate:Y,interpolate:q,variable:"",imports:{_:Mi}},Mi.prototype=Di.prototype,Mi.prototype.constructor=Mi,Fi.prototype=ji(Di.prototype),Fi.prototype.constructor=Fi,Vi.prototype=ji(Di.prototype),Vi.prototype.constructor=Vi,zi.prototype.clear=function(){this.__data__=Ai?Ai(null):{},this.size=0},zi.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zi.prototype.get=function(e){var t=this.__data__;if(Ai){var i=t[e];return i===o?n:i}return ke.call(t,e)?t[e]:n},zi.prototype.has=function(e){var t=this.__data__;return Ai?t[e]!==n:ke.call(t,e)},zi.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ai&&t===n?o:t,this},Wi.prototype.clear=function(){this.__data__=[],this.size=0},Wi.prototype.delete=function(e){var t=this.__data__,i=Qi(t,e);return!(i<0||(i==t.length-1?t.pop():Ge.call(t,i,1),--this.size,0))},Wi.prototype.get=function(e){var t=this.__data__,i=Qi(t,e);return i<0?n:t[i][1]},Wi.prototype.has=function(e){return Qi(this.__data__,e)>-1},Wi.prototype.set=function(e,t){var i=this.__data__,r=Qi(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this},Hi.prototype.clear=function(){this.size=0,this.__data__={hash:new zi,map:new(xi||Wi),string:new zi}},Hi.prototype.delete=function(e){var t=os(this,e).delete(e);return this.size-=t?1:0,t},Hi.prototype.get=function(e){return os(this,e).get(e)},Hi.prototype.has=function(e){return os(this,e).has(e)},Hi.prototype.set=function(e,t){var i=os(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this},Ki.prototype.add=Ki.prototype.push=function(e){return this.__data__.set(e,o),this},Ki.prototype.has=function(e){return this.__data__.has(e)},Ji.prototype.clear=function(){this.__data__=new Wi,this.size=0},Ji.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Ji.prototype.get=function(e){return this.__data__.get(e)},Ji.prototype.has=function(e){return this.__data__.has(e)},Ji.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Wi){var r=i.__data__;if(!xi||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Hi(r)}return i.set(e,t),this.size=i.size,this};var hr=Cn(mr),cr=Cn(Sr,!0);function ur(e,t){var i=!0;return hr(e,function(e,r,n){return i=!!t(e,r,n)}),i}function pr(e,t,i){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=t(o);if(null!=a&&(l===n?a==a&&!aa(a):i(a,l)))var l=a,h=o}return h}function dr(e,t){var i=[];return hr(e,function(e,r,n){t(e,r,n)&&i.push(e)}),i}function fr(e,t,i,r,n){var s=-1,o=e.length;for(i||(i=fs),n||(n=[]);++s<o;){var a=e[s];t>0&&i(a)?t>1?fr(a,t-1,i,r,n):Pt(n,a):r||(n[n.length]=a)}return n}var gr=Nn(),yr=Nn(!0);function mr(e,t){return e&&gr(e,t,Ca)}function Sr(e,t){return e&&yr(e,t,Ca)}function vr(e,t){return It(t,function(t){return Yo(e[t])})}function _r(e,t){for(var i=0,r=(t=yn(t,e)).length;null!=e&&i<r;)e=e[Bs(t[i++])];return i&&i==r?e:n}function br(e,t,i){var r=t(e);return Wo(e)?r:Pt(r,i(e))}function xr(e){return null==e?e===n?"[object Undefined]":"[object Null]":Ze&&Ze in Te(e)?function(e){var t=ke.call(e,Ze),i=e[Ze];try{e[Ze]=n;var r=!0}catch(e){}var s=Le.call(e);return r&&(t?e[Ze]=i:delete e[Ze]),s}(e):function(e){return Le.call(e)}(e)}function wr(e,t){return e>t}function Tr(e,t){return null!=e&&ke.call(e,t)}function Er(e,t){return null!=e&&t in Te(e)}function Ar(e,t,i){for(var s=i?Ct:Rt,o=e[0].length,a=e.length,l=a,h=r(a),c=1/0,u=[];l--;){var p=e[l];l&&t&&(p=Nt(p,Xt(t))),c=yi(p.length,c),h[l]=!i&&(t||o>=120&&p.length>=120)?new Ki(l&&p):n}p=e[0];var d=-1,f=h[0];e:for(;++d<o&&u.length<c;){var g=p[d],y=t?t(g):g;if(g=i||0!==g?g:0,!(f?qt(f,y):s(u,y,i))){for(l=a;--l;){var m=h[l];if(!(m?qt(m,y):s(e[l],y,i)))continue e}f&&f.push(y),u.push(g)}}return u}function Or(e,t,i){var r=null==(e=Ts(e,t=yn(t,e)))?e:e[Bs($s(t))];return null==r?n:wt(r,e,i)}function Ir(e){return ea(e)&&xr(e)==g}function Rr(e,t,i,r,s){return e===t||(null==e||null==t||!ea(e)&&!ea(t)?e!=e&&t!=t:function(e,t,i,r,s,o){var a=Wo(e),l=Wo(t),h=a?y:us(e),c=l?y:us(t),u=(h=h==g?T:h)==T,p=(c=c==g?T:c)==T,d=h==c;if(d&&Go(e)){if(!Go(t))return!1;a=!0,u=!1}if(d&&!u)return o||(o=new Ji),a||la(e)?Zn(e,t,i,r,s,o):function(e,t,i,r,n,s,o){switch(i){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!s(new ze(e),new ze(t)));case m:case S:case w:return Do(+e,+t);case v:return e.name==t.name&&e.message==t.message;case A:case I:return e==t+"";case x:var a=ni;case O:var l=1&r;if(a||(a=ai),e.size!=t.size&&!l)return!1;var h=o.get(e);if(h)return h==t;r|=2,o.set(e,t);var c=Zn(a(e),a(t),r,n,s,o);return o.delete(e),c;case R:if(Bi)return Bi.call(e)==Bi.call(t)}return!1}(e,t,h,i,r,s,o);if(!(1&i)){var f=u&&ke.call(e,"__wrapped__"),_=p&&ke.call(t,"__wrapped__");if(f||_){var b=f?e.value():e,E=_?t.value():t;return o||(o=new Ji),s(b,E,i,r,o)}}return!!d&&(o||(o=new Ji),function(e,t,i,r,s,o){var a=1&i,l=es(e),h=l.length;if(h!=es(t).length&&!a)return!1;for(var c=h;c--;){var u=l[c];if(!(a?u in t:ke.call(t,u)))return!1}var p=o.get(e),d=o.get(t);if(p&&d)return p==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var g=a;++c<h;){var y=e[u=l[c]],m=t[u];if(r)var S=a?r(m,y,u,t,e,o):r(y,m,u,e,t,o);if(!(S===n?y===m||s(y,m,i,r,o):S)){f=!1;break}g||(g="constructor"==u)}if(f&&!g){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,i,r,s,o))}(e,t,i,r,Rr,s))}function Cr(e,t,i,r){var s=i.length,o=s,a=!r;if(null==e)return!o;for(e=Te(e);s--;){var l=i[s];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<o;){var h=(l=i[s])[0],c=e[h],u=l[1];if(a&&l[2]){if(c===n&&!(h in e))return!1}else{var p=new Ji;if(r)var d=r(c,u,h,e,t,p);if(!(d===n?Rr(u,c,3,r,p):d))return!1}}return!0}function Nr(e){return!(!Qo(e)||(t=e,Be&&Be in t))&&(Yo(e)?De:ge).test(Ls(e));var t}function Pr(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?Wo(e)?Mr(e[0],e[1]):Lr(e):ul(e)}function kr(e){if(!_s(e))return fi(e);var t=[];for(var i in Te(e))ke.call(e,i)&&"constructor"!=i&&t.push(i);return t}function Ur(e,t){return e<t}function Br(e,t){var i=-1,n=Ko(e)?r(e.length):[];return hr(e,function(e,r,s){n[++i]=t(e,r,s)}),n}function Lr(e){var t=as(e);return 1==t.length&&t[0][2]?xs(t[0][0],t[0][1]):function(i){return i===e||Cr(i,e,t)}}function Mr(e,t){return ms(e)&&bs(t)?xs(Bs(e),t):function(i){var r=Ea(i,e);return r===n&&r===t?Aa(i,e):Rr(t,r,3)}}function jr(e,t,i,r,s){e!==t&&gr(t,function(o,a){if(s||(s=new Ji),Qo(o))!function(e,t,i,r,s,o,a){var l=Es(e,i),h=Es(t,i),c=a.get(h);if(c)qi(e,i,c);else{var u=o?o(l,h,i+"",e,t,a):n,p=u===n;if(p){var d=Wo(h),f=!d&&Go(h),g=!d&&!f&&la(h);u=h,d||f||g?Wo(l)?u=l:Jo(l)?u=An(l):f?(p=!1,u=_n(h,!0)):g?(p=!1,u=xn(h,!0)):u=[]:ra(h)||zo(h)?(u=l,zo(l)?u=ya(l):Qo(l)&&!Yo(l)||(u=ds(h))):p=!1}p&&(a.set(h,u),s(u,h,r,o,a),a.delete(h)),qi(e,i,u)}}(e,t,a,i,jr,r,s);else{var l=r?r(Es(e,a),o,a+"",e,t,s):n;l===n&&(l=o),qi(e,a,l)}},Na)}function Dr(e,t){var i=e.length;if(i)return gs(t+=t<0?i:0,i)?e[t]:n}function Fr(e,t,i){t=t.length?Nt(t,function(e){return Wo(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e}):[il];var r=-1;t=Nt(t,Xt(ss()));var n=Br(e,function(e,i,n){var s=Nt(t,function(t){return t(e)});return{criteria:s,index:++r,value:e}});return function(e){var t=e.length;for(e.sort(function(e,t){return function(e,t,i){for(var r=-1,n=e.criteria,s=t.criteria,o=n.length,a=i.length;++r<o;){var l=wn(n[r],s[r]);if(l)return r>=a?l:l*("desc"==i[r]?-1:1)}return e.index-t.index}(e,t,i)});t--;)e[t]=e[t].value;return e}(n)}function Vr(e,t,i){for(var r=-1,n=t.length,s={};++r<n;){var o=t[r],a=_r(e,o);i(a,o)&&Xr(s,yn(o,e),a)}return s}function zr(e,t,i,r){var n=r?Ft:Dt,s=-1,o=t.length,a=e;for(e===t&&(t=An(t)),i&&(a=Nt(e,Xt(i)));++s<o;)for(var l=0,h=t[s],c=i?i(h):h;(l=n(a,c,l,r))>-1;)a!==e&&Ge.call(a,l,1),Ge.call(e,l,1);return e}function Wr(e,t){for(var i=e?t.length:0,r=i-1;i--;){var n=t[i];if(i==r||n!==s){var s=n;gs(n)?Ge.call(e,n,1):ln(e,n)}}return e}function Hr(e,t){return e+dt(vi()*(t-e+1))}function Kr(e,t){var i="";if(!e||t<1||t>u)return i;do{t%2&&(i+=e),(t=dt(t/2))&&(e+=e)}while(t);return i}function Jr(e,t){return Is(ws(e,t,il),e+"")}function Gr(e){return $i(Da(e))}function $r(e,t){var i=Da(e);return Ns(i,nr(t,0,i.length))}function Xr(e,t,i,r){if(!Qo(e))return e;for(var s=-1,o=(t=yn(t,e)).length,a=o-1,l=e;null!=l&&++s<o;){var h=Bs(t[s]),c=i;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(s!=a){var u=l[h];(c=r?r(u,h,l):n)===n&&(c=Qo(u)?u:gs(t[s+1])?[]:{})}Zi(l,h,c),l=l[h]}return e}var Yr=Oi?function(e,t){return Oi.set(e,t),e}:il,qr=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Qa(t),writable:!0})}:il;function Zr(e){return Ns(Da(e))}function Qr(e,t,i){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(i=i>s?s:i)<0&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var o=r(s);++n<s;)o[n]=e[n+t];return o}function en(e,t){var i;return hr(e,function(e,r,n){return!(i=t(e,r,n))}),!!i}function tn(e,t,i){var r=0,n=null==e?r:e.length;if("number"==typeof t&&t==t&&n<=2147483647){for(;r<n;){var s=r+n>>>1,o=e[s];null!==o&&!aa(o)&&(i?o<=t:o<t)?r=s+1:n=s}return n}return rn(e,t,il,i)}function rn(e,t,i,r){var s=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=i(t))!=t,l=null===t,h=aa(t),c=t===n;s<o;){var u=dt((s+o)/2),p=i(e[u]),d=p!==n,f=null===p,g=p==p,y=aa(p);if(a)var m=r||g;else m=c?g&&(r||d):l?g&&d&&(r||!f):h?g&&d&&!f&&(r||!y):!f&&!y&&(r?p<=t:p<t);m?s=u+1:o=u}return yi(o,4294967294)}function nn(e,t){for(var i=-1,r=e.length,n=0,s=[];++i<r;){var o=e[i],a=t?t(o):o;if(!i||!Do(a,l)){var l=a;s[n++]=0===o?0:o}}return s}function sn(e){return"number"==typeof e?e:aa(e)?p:+e}function on(e){if("string"==typeof e)return e;if(Wo(e))return Nt(e,on)+"";if(aa(e))return Li?Li.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function an(e,t,i){var r=-1,n=Rt,s=e.length,o=!0,a=[],l=a;if(i)o=!1,n=Ct;else if(s>=200){var h=t?null:Jn(e);if(h)return ai(h);o=!1,n=qt,l=new Ki}else l=t?[]:a;e:for(;++r<s;){var c=e[r],u=t?t(c):c;if(c=i||0!==c?c:0,o&&u==u){for(var p=l.length;p--;)if(l[p]===u)continue e;t&&l.push(u),a.push(c)}else n(l,u,i)||(l!==a&&l.push(u),a.push(c))}return a}function ln(e,t){return null==(e=Ts(e,t=yn(t,e)))||delete e[Bs($s(t))]}function hn(e,t,i,r){return Xr(e,t,i(_r(e,t)),r)}function cn(e,t,i,r){for(var n=e.length,s=r?n:-1;(r?s--:++s<n)&&t(e[s],s,e););return i?Qr(e,r?0:s,r?s+1:n):Qr(e,r?s+1:0,r?n:s)}function un(e,t){var i=e;return i instanceof Vi&&(i=i.value()),kt(t,function(e,t){return t.func.apply(t.thisArg,Pt([e],t.args))},i)}function pn(e,t,i){var n=e.length;if(n<2)return n?an(e[0]):[];for(var s=-1,o=r(n);++s<n;)for(var a=e[s],l=-1;++l<n;)l!=s&&(o[s]=lr(o[s]||a,e[l],t,i));return an(fr(o,1),t,i)}function dn(e,t,i){for(var r=-1,s=e.length,o=t.length,a={};++r<s;){var l=r<o?t[r]:n;i(a,e[r],l)}return a}function fn(e){return Jo(e)?e:[]}function gn(e){return"function"==typeof e?e:il}function yn(e,t){return Wo(e)?e:ms(e,t)?[e]:Us(ma(e))}var mn=Jr;function Sn(e,t,i){var r=e.length;return i=i===n?r:i,!t&&i>=r?e:Qr(e,t,i)}var vn=ot||function(e){return ut.clearTimeout(e)};function _n(e,t){if(t)return e.slice();var i=e.length,r=We?We(i):new e.constructor(i);return e.copy(r),r}function bn(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function xn(e,t){var i=t?bn(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function wn(e,t){if(e!==t){var i=e!==n,r=null===e,s=e==e,o=aa(e),a=t!==n,l=null===t,h=t==t,c=aa(t);if(!l&&!c&&!o&&e>t||o&&a&&h&&!l&&!c||r&&a&&h||!i&&h||!s)return 1;if(!r&&!o&&!c&&e<t||c&&i&&s&&!r&&!o||l&&i&&s||!a&&s||!h)return-1}return 0}function Tn(e,t,i,n){for(var s=-1,o=e.length,a=i.length,l=-1,h=t.length,c=gi(o-a,0),u=r(h+c),p=!n;++l<h;)u[l]=t[l];for(;++s<a;)(p||s<o)&&(u[i[s]]=e[s]);for(;c--;)u[l++]=e[s++];return u}function En(e,t,i,n){for(var s=-1,o=e.length,a=-1,l=i.length,h=-1,c=t.length,u=gi(o-l,0),p=r(u+c),d=!n;++s<u;)p[s]=e[s];for(var f=s;++h<c;)p[f+h]=t[h];for(;++a<l;)(d||s<o)&&(p[f+i[a]]=e[s++]);return p}function An(e,t){var i=-1,n=e.length;for(t||(t=r(n));++i<n;)t[i]=e[i];return t}function On(e,t,i,r){var s=!i;i||(i={});for(var o=-1,a=t.length;++o<a;){var l=t[o],h=r?r(i[l],e[l],l,i,e):n;h===n&&(h=e[l]),s?ir(i,l,h):Zi(i,l,h)}return i}function In(e,t){return function(i,r){var n=Wo(i)?Tt:er,s=t?t():{};return n(i,e,ss(r,2),s)}}function Rn(e){return Jr(function(t,i){var r=-1,s=i.length,o=s>1?i[s-1]:n,a=s>2?i[2]:n;for(o=e.length>3&&"function"==typeof o?(s--,o):n,a&&ys(i[0],i[1],a)&&(o=s<3?n:o,s=1),t=Te(t);++r<s;){var l=i[r];l&&e(t,l,r,o)}return t})}function Cn(e,t){return function(i,r){if(null==i)return i;if(!Ko(i))return e(i,r);for(var n=i.length,s=t?n:-1,o=Te(i);(t?s--:++s<n)&&!1!==r(o[s],s,o););return i}}function Nn(e){return function(t,i,r){for(var n=-1,s=Te(t),o=r(t),a=o.length;a--;){var l=o[e?a:++n];if(!1===i(s[l],l,s))break}return t}}function Pn(e){return function(t){var i=ri(t=ma(t))?ci(t):n,r=i?i[0]:t.charAt(0),s=i?Sn(i,1).join(""):t.slice(1);return r[e]()+s}}function kn(e){return function(t){return kt(Ya(za(t).replace(Ye,"")),e,"")}}function Un(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=ji(e.prototype),r=e.apply(i,t);return Qo(r)?r:i}}function Bn(e){return function(t,i,r){var s=Te(t);if(!Ko(t)){var o=ss(i,3);t=Ca(t),i=function(e){return o(s[e],e,s)}}var a=e(t,i,r);return a>-1?s[o?t[a]:a]:n}}function Ln(e){return Qn(function(t){var i=t.length,r=i,o=Fi.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Oe(s);if(o&&!l&&"wrapper"==rs(a))var l=new Fi([],!0)}for(r=l?r:i;++r<i;){var h=rs(a=t[r]),c="wrapper"==h?is(a):n;l=c&&Ss(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[rs(c[0])].apply(l,c[3]):1==a.length&&Ss(a)?l[h]():l.thru(a)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Wo(r))return l.plant(r).value();for(var n=0,s=i?t[n].apply(this,e):r;++n<i;)s=t[n].call(this,s);return s}})}function Mn(e,t,i,s,o,a,l,c,u,p){var d=t&h,f=1&t,g=2&t,y=24&t,m=512&t,S=g?n:Un(e);return function h(){for(var v=arguments.length,_=r(v),b=v;b--;)_[b]=arguments[b];if(y)var x=ns(h),w=function(e,t){for(var i=e.length,r=0;i--;)e[i]===t&&++r;return r}(_,x);if(s&&(_=Tn(_,s,o,y)),a&&(_=En(_,a,l,y)),v-=w,y&&v<p){var T=oi(_,x);return Hn(e,t,Mn,h.placeholder,i,_,T,c,u,p-v)}var E=f?i:this,A=g?E[e]:e;return v=_.length,c?_=function(e,t){for(var i=e.length,r=yi(t.length,i),s=An(e);r--;){var o=t[r];e[r]=gs(o,i)?s[o]:n}return e}(_,c):m&&v>1&&_.reverse(),d&&u<v&&(_.length=u),this&&this!==ut&&this instanceof h&&(A=S||Un(A)),A.apply(E,_)}}function jn(e,t){return function(i,r){return function(e,t,i,r){return mr(e,function(e,n,s){t(r,i(e),n,s)}),r}(i,e,t(r),{})}}function Dn(e,t){return function(i,r){var s;if(i===n&&r===n)return t;if(i!==n&&(s=i),r!==n){if(s===n)return r;"string"==typeof i||"string"==typeof r?(i=on(i),r=on(r)):(i=sn(i),r=sn(r)),s=e(i,r)}return s}}function Fn(e){return Qn(function(t){return t=Nt(t,Xt(ss())),Jr(function(i){var r=this;return e(t,function(e){return wt(e,r,i)})})})}function Vn(e,t){var i=(t=t===n?" ":on(t)).length;if(i<2)return i?Kr(t,e):t;var r=Kr(t,pt(e/hi(t)));return ri(t)?Sn(ci(r),0,e).join(""):r.slice(0,e)}function zn(e){return function(t,i,s){return s&&"number"!=typeof s&&ys(t,i,s)&&(i=s=n),t=pa(t),i===n?(i=t,t=0):i=pa(i),function(e,t,i,n){for(var s=-1,o=gi(pt((t-e)/(i||1)),0),a=r(o);o--;)a[n?o:++s]=e,e+=i;return a}(t,i,s=s===n?t<i?1:-1:pa(s),e)}}function Wn(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=ga(t),i=ga(i)),e(t,i)}}function Hn(e,t,i,r,s,o,a,h,c,u){var p=8&t;t|=p?l:64,4&(t&=~(p?64:l))||(t&=-4);var d=[e,t,s,p?o:n,p?a:n,p?n:o,p?n:a,h,c,u],f=i.apply(n,d);return Ss(e)&&As(f,d),f.placeholder=r,Rs(f,e,t)}function Kn(e){var t=we[e];return function(e,i){if(e=ga(e),(i=null==i?0:yi(da(i),292))&&Lt(e)){var r=(ma(e)+"e").split("e");return+((r=(ma(t(r[0]+"e"+(+r[1]+i)))+"e").split("e"))[0]+"e"+(+r[1]-i))}return t(e)}}var Jn=Ti&&1/ai(new Ti([,-0]))[1]==c?function(e){return new Ti(e)}:al;function Gn(e){return function(t){var i=us(t);return i==x?ni(t):i==O?li(t):function(e,t){return Nt(t,function(t){return[t,e[t]]})}(t,e(t))}}function $n(e,t,i,o,c,u,p,d){var f=2&t;if(!f&&"function"!=typeof e)throw new Oe(s);var g=o?o.length:0;if(g||(t&=-97,o=c=n),p=p===n?p:gi(da(p),0),d=d===n?d:da(d),g-=c?c.length:0,64&t){var y=o,m=c;o=c=n}var S=f?n:is(e),v=[e,t,i,o,c,y,m,u,p,d];if(S&&function(e,t){var i=e[1],r=t[1],n=i|r,s=n<131,o=r==h&&8==i||r==h&&256==i&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==i;if(!s&&!o)return e;1&r&&(e[2]=t[2],n|=1&i?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Tn(c,l,t[4]):l,e[4]=c?oi(e[3],a):t[4]}(l=t[5])&&(c=e[5],e[5]=c?En(c,l,t[6]):l,e[6]=c?oi(e[5],a):t[6]),(l=t[7])&&(e[7]=l),r&h&&(e[8]=null==e[8]?t[8]:yi(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n}(v,S),e=v[0],t=v[1],i=v[2],o=v[3],c=v[4],!(d=v[9]=v[9]===n?f?0:e.length:gi(v[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||16==t?function(e,t,i){var s=Un(e);return function o(){for(var a=arguments.length,l=r(a),h=a,c=ns(o);h--;)l[h]=arguments[h];var u=a<3&&l[0]!==c&&l[a-1]!==c?[]:oi(l,c);return(a-=u.length)<i?Hn(e,t,Mn,o.placeholder,n,l,u,n,n,i-a):wt(this&&this!==ut&&this instanceof o?s:e,this,l)}}(e,t,d):t!=l&&33!=t||c.length?Mn.apply(n,v):function(e,t,i,n){var s=1&t,o=Un(e);return function t(){for(var a=-1,l=arguments.length,h=-1,c=n.length,u=r(c+l),p=this&&this!==ut&&this instanceof t?o:e;++h<c;)u[h]=n[h];for(;l--;)u[h++]=arguments[++a];return wt(p,s?i:this,u)}}(e,t,i,o);else var _=function(e,t,i){var r=1&t,n=Un(e);return function t(){return(this&&this!==ut&&this instanceof t?n:e).apply(r?i:this,arguments)}}(e,t,i);return Rs((S?Yr:As)(_,v),e,t)}function Xn(e,t,i,r){return e===n||Do(e,Ce[i])&&!ke.call(r,i)?t:e}function Yn(e,t,i,r,s,o){return Qo(e)&&Qo(t)&&(o.set(t,e),jr(e,t,n,Yn,o),o.delete(t)),e}function qn(e){return ra(e)?n:e}function Zn(e,t,i,r,s,o){var a=1&i,l=e.length,h=t.length;if(l!=h&&!(a&&h>l))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var p=-1,d=!0,f=2&i?new Ki:n;for(o.set(e,t),o.set(t,e);++p<l;){var g=e[p],y=t[p];if(r)var m=a?r(y,g,p,t,e,o):r(g,y,p,e,t,o);if(m!==n){if(m)continue;d=!1;break}if(f){if(!Bt(t,function(e,t){if(!qt(f,t)&&(g===e||s(g,e,i,r,o)))return f.push(t)})){d=!1;break}}else if(g!==y&&!s(g,y,i,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function Qn(e){return Is(ws(e,n,Ws),e+"")}function es(e){return br(e,Ca,hs)}function ts(e){return br(e,Na,cs)}var is=Oi?function(e){return Oi.get(e)}:al;function rs(e){for(var t=e.name+"",i=Ii[t],r=ke.call(Ii,t)?i.length:0;r--;){var n=i[r],s=n.func;if(null==s||s==e)return n.name}return t}function ns(e){return(ke.call(Mi,"placeholder")?Mi:e).placeholder}function ss(){var e=Mi.iteratee||rl;return e=e===rl?Pr:e,arguments.length?e(arguments[0],arguments[1]):e}function os(e,t){var i,r,n=e.__data__;return("string"==(r=typeof(i=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?n["string"==typeof t?"string":"hash"]:n.map}function as(e){for(var t=Ca(e),i=t.length;i--;){var r=t[i],n=e[r];t[i]=[r,n,bs(n)]}return t}function ls(e,t){var i=function(e,t){return null==e?n:e[t]}(e,t);return Nr(i)?i:n}var hs=gt?function(e){return null==e?[]:(e=Te(e),It(gt(e),function(t){return Je.call(e,t)}))}:fl,cs=gt?function(e){for(var t=[];e;)Pt(t,hs(e)),e=He(e);return t}:fl,us=xr;function ps(e,t,i){for(var r=-1,n=(t=yn(t,e)).length,s=!1;++r<n;){var o=Bs(t[r]);if(!(s=null!=e&&i(e,o)))break;e=e[o]}return s||++r!=n?s:!!(n=null==e?0:e.length)&&Zo(n)&&gs(o,n)&&(Wo(e)||zo(e))}function ds(e){return"function"!=typeof e.constructor||_s(e)?{}:ji(He(e))}function fs(e){return Wo(e)||zo(e)||!!($e&&e&&e[$e])}function gs(e,t){var i=typeof e;return!!(t=null==t?u:t)&&("number"==i||"symbol"!=i&&me.test(e))&&e>-1&&e%1==0&&e<t}function ys(e,t,i){if(!Qo(i))return!1;var r=typeof t;return!!("number"==r?Ko(i)&&gs(t,i.length):"string"==r&&t in i)&&Do(i[t],e)}function ms(e,t){if(Wo(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!aa(e))||Q.test(e)||!Z.test(e)||null!=t&&e in Te(t)}function Ss(e){var t=rs(e),i=Mi[t];if("function"!=typeof i||!(t in Vi.prototype))return!1;if(e===i)return!0;var r=is(i);return!!r&&e===r[0]}(bi&&us(new bi(new ArrayBuffer(1)))!=P||xi&&us(new xi)!=x||wi&&us(wi.resolve())!=E||Ti&&us(new Ti)!=O||Ei&&us(new Ei)!=C)&&(us=function(e){var t=xr(e),i=t==T?e.constructor:n,r=i?Ls(i):"";if(r)switch(r){case Ri:return P;case Ci:return x;case Ni:return E;case Pi:return O;case ki:return C}return t});var vs=Ne?Yo:gl;function _s(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ce)}function bs(e){return e==e&&!Qo(e)}function xs(e,t){return function(i){return null!=i&&i[e]===t&&(t!==n||e in Te(i))}}function ws(e,t,i){return t=gi(t===n?e.length-1:t,0),function(){for(var n=arguments,s=-1,o=gi(n.length-t,0),a=r(o);++s<o;)a[s]=n[t+s];s=-1;for(var l=r(t+1);++s<t;)l[s]=n[s];return l[t]=i(a),wt(e,this,l)}}function Ts(e,t){return t.length<2?e:_r(e,Qr(t,0,-1))}function Es(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var As=Cs(Yr),Os=ct||function(e,t){return ut.setTimeout(e,t)},Is=Cs(qr);function Rs(e,t,i){var r=t+"";return Is(e,function(e,t){var i=t.length;if(!i)return e;var r=i-1;return t[r]=(i>1?"& ":"")+t[r],t=t.join(i>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Et(f,function(i){var r="_."+i[0];t&i[1]&&!Rt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(ae):[]}(r),i)))}function Cs(e){var t=0,i=0;return function(){var r=mi(),s=16-(r-i);if(i=r,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Ns(e,t){var i=-1,r=e.length,s=r-1;for(t=t===n?r:t;++i<t;){var o=Hr(i,s),a=e[o];e[o]=e[i],e[i]=a}return e.length=t,e}var Ps,ks,Us=(Ps=ko(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,function(e,i,r,n){t.push(r?n.replace(ce,"$1"):i||e)}),t},function(e){return 500===ks.size&&ks.clear(),e}),ks=Ps.cache,Ps);function Bs(e){if("string"==typeof e||aa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ls(e){if(null!=e){try{return Pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ms(e){if(e instanceof Vi)return e.clone();var t=new Fi(e.__wrapped__,e.__chain__);return t.__actions__=An(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var js=Jr(function(e,t){return Jo(e)?lr(e,fr(t,1,Jo,!0)):[]}),Ds=Jr(function(e,t){var i=$s(t);return Jo(i)&&(i=n),Jo(e)?lr(e,fr(t,1,Jo,!0),ss(i,2)):[]}),Fs=Jr(function(e,t){var i=$s(t);return Jo(i)&&(i=n),Jo(e)?lr(e,fr(t,1,Jo,!0),n,i):[]});function Vs(e,t,i){var r=null==e?0:e.length;if(!r)return-1;var n=null==i?0:da(i);return n<0&&(n=gi(r+n,0)),jt(e,ss(t,3),n)}function zs(e,t,i){var r=null==e?0:e.length;if(!r)return-1;var s=r-1;return i!==n&&(s=da(i),s=i<0?gi(r+s,0):yi(s,r-1)),jt(e,ss(t,3),s,!0)}function Ws(e){return null!=e&&e.length?fr(e,1):[]}function Hs(e){return e&&e.length?e[0]:n}var Ks=Jr(function(e){var t=Nt(e,fn);return t.length&&t[0]===e[0]?Ar(t):[]}),Js=Jr(function(e){var t=$s(e),i=Nt(e,fn);return t===$s(i)?t=n:i.pop(),i.length&&i[0]===e[0]?Ar(i,ss(t,2)):[]}),Gs=Jr(function(e){var t=$s(e),i=Nt(e,fn);return(t="function"==typeof t?t:n)&&i.pop(),i.length&&i[0]===e[0]?Ar(i,n,t):[]});function $s(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Xs=Jr(Ys);function Ys(e,t){return e&&e.length&&t&&t.length?zr(e,t):e}var qs=Qn(function(e,t){var i=null==e?0:e.length,r=rr(e,t);return Wr(e,Nt(t,function(e){return gs(e,i)?+e:e}).sort(wn)),r});function Zs(e){return null==e?e:_i.call(e)}var Qs=Jr(function(e){return an(fr(e,1,Jo,!0))}),eo=Jr(function(e){var t=$s(e);return Jo(t)&&(t=n),an(fr(e,1,Jo,!0),ss(t,2))}),to=Jr(function(e){var t=$s(e);return t="function"==typeof t?t:n,an(fr(e,1,Jo,!0),n,t)});function io(e){if(!e||!e.length)return[];var t=0;return e=It(e,function(e){if(Jo(e))return t=gi(e.length,t),!0}),Gt(t,function(t){return Nt(e,Wt(t))})}function ro(e,t){if(!e||!e.length)return[];var i=io(e);return null==t?i:Nt(i,function(e){return wt(t,n,e)})}var no=Jr(function(e,t){return Jo(e)?lr(e,t):[]}),so=Jr(function(e){return pn(It(e,Jo))}),oo=Jr(function(e){var t=$s(e);return Jo(t)&&(t=n),pn(It(e,Jo),ss(t,2))}),ao=Jr(function(e){var t=$s(e);return t="function"==typeof t?t:n,pn(It(e,Jo),n,t)}),lo=Jr(io),ho=Jr(function(e){var t=e.length,i=t>1?e[t-1]:n;return i="function"==typeof i?(e.pop(),i):n,ro(e,i)});function co(e){var t=Mi(e);return t.__chain__=!0,t}function uo(e,t){return t(e)}var po=Qn(function(e){var t=e.length,i=t?e[0]:0,r=this.__wrapped__,s=function(t){return rr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Vi&&gs(i)?((r=r.slice(i,+i+(t?1:0))).__actions__.push({func:uo,args:[s],thisArg:n}),new Fi(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(s)}),fo=In(function(e,t,i){ke.call(e,i)?++e[i]:ir(e,i,1)}),go=Bn(Vs),yo=Bn(zs);function mo(e,t){return(Wo(e)?Et:hr)(e,ss(t,3))}function So(e,t){return(Wo(e)?At:cr)(e,ss(t,3))}var vo=In(function(e,t,i){ke.call(e,i)?e[i].push(t):ir(e,i,[t])}),_o=Jr(function(e,t,i){var n=-1,s="function"==typeof t,o=Ko(e)?r(e.length):[];return hr(e,function(e){o[++n]=s?wt(t,e,i):Or(e,t,i)}),o}),bo=In(function(e,t,i){ir(e,i,t)});function xo(e,t){return(Wo(e)?Nt:Br)(e,ss(t,3))}var wo=In(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]}),To=Jr(function(e,t){if(null==e)return[];var i=t.length;return i>1&&ys(e,t[0],t[1])?t=[]:i>2&&ys(t[0],t[1],t[2])&&(t=[t[0]]),Fr(e,fr(t,1),[])}),Eo=ht||function(){return ut.Date.now()};function Ao(e,t,i){return t=i?n:t,t=e&&null==t?e.length:t,$n(e,h,n,n,n,n,t)}function Oo(e,t){var i;if("function"!=typeof t)throw new Oe(s);return e=da(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Io=Jr(function(e,t,i){var r=1;if(i.length){var n=oi(i,ns(Io));r|=l}return $n(e,r,t,i,n)}),Ro=Jr(function(e,t,i){var r=3;if(i.length){var n=oi(i,ns(Ro));r|=l}return $n(t,r,e,i,n)});function Co(e,t,i){var r,o,a,l,h,c,u=0,p=!1,d=!1,f=!0;if("function"!=typeof e)throw new Oe(s);function g(t){var i=r,s=o;return r=o=n,u=t,l=e.apply(s,i)}function y(e){var i=e-c;return c===n||i>=t||i<0||d&&e-u>=a}function m(){var e=Eo();if(y(e))return S(e);h=Os(m,function(e){var i=t-(e-c);return d?yi(i,a-(e-u)):i}(e))}function S(e){return h=n,f&&r?g(e):(r=o=n,l)}function v(){var e=Eo(),i=y(e);if(r=arguments,o=this,c=e,i){if(h===n)return function(e){return u=e,h=Os(m,t),p?g(e):l}(c);if(d)return vn(h),h=Os(m,t),g(c)}return h===n&&(h=Os(m,t)),l}return t=ga(t)||0,Qo(i)&&(p=!!i.leading,a=(d="maxWait"in i)?gi(ga(i.maxWait)||0,t):a,f="trailing"in i?!!i.trailing:f),v.cancel=function(){h!==n&&vn(h),u=0,r=c=o=h=n},v.flush=function(){return h===n?l:S(Eo())},v}var No=Jr(function(e,t){return ar(e,1,t)}),Po=Jr(function(e,t,i){return ar(e,ga(t)||0,i)});function ko(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(s);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var o=e.apply(this,r);return i.cache=s.set(n,o)||s,o};return i.cache=new(ko.Cache||Hi),i}function Uo(e){if("function"!=typeof e)throw new Oe(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ko.Cache=Hi;var Bo=mn(function(e,t){var i=(t=1==t.length&&Wo(t[0])?Nt(t[0],Xt(ss())):Nt(fr(t,1),Xt(ss()))).length;return Jr(function(r){for(var n=-1,s=yi(r.length,i);++n<s;)r[n]=t[n].call(this,r[n]);return wt(e,this,r)})}),Lo=Jr(function(e,t){var i=oi(t,ns(Lo));return $n(e,l,n,t,i)}),Mo=Jr(function(e,t){var i=oi(t,ns(Mo));return $n(e,64,n,t,i)}),jo=Qn(function(e,t){return $n(e,256,n,n,n,t)});function Do(e,t){return e===t||e!=e&&t!=t}var Fo=Wn(wr),Vo=Wn(function(e,t){return e>=t}),zo=Ir(function(){return arguments}())?Ir:function(e){return ea(e)&&ke.call(e,"callee")&&!Je.call(e,"callee")},Wo=r.isArray,Ho=mt?Xt(mt):function(e){return ea(e)&&xr(e)==N};function Ko(e){return null!=e&&Zo(e.length)&&!Yo(e)}function Jo(e){return ea(e)&&Ko(e)}var Go=yt||gl,$o=St?Xt(St):function(e){return ea(e)&&xr(e)==S};function Xo(e){if(!ea(e))return!1;var t=xr(e);return t==v||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ra(e)}function Yo(e){if(!Qo(e))return!1;var t=xr(e);return t==_||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function qo(e){return"number"==typeof e&&e==da(e)}function Zo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function Qo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ea(e){return null!=e&&"object"==typeof e}var ta=vt?Xt(vt):function(e){return ea(e)&&us(e)==x};function ia(e){return"number"==typeof e||ea(e)&&xr(e)==w}function ra(e){if(!ea(e)||xr(e)!=T)return!1;var t=He(e);if(null===t)return!0;var i=ke.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Pe.call(i)==Me}var na=_t?Xt(_t):function(e){return ea(e)&&xr(e)==A},sa=bt?Xt(bt):function(e){return ea(e)&&us(e)==O};function oa(e){return"string"==typeof e||!Wo(e)&&ea(e)&&xr(e)==I}function aa(e){return"symbol"==typeof e||ea(e)&&xr(e)==R}var la=xt?Xt(xt):function(e){return ea(e)&&Zo(e.length)&&!!nt[xr(e)]},ha=Wn(Ur),ca=Wn(function(e,t){return e<=t});function ua(e){if(!e)return[];if(Ko(e))return oa(e)?ci(e):An(e);if(Xe&&e[Xe])return function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}(e[Xe]());var t=us(e);return(t==x?ni:t==O?ai:Da)(e)}function pa(e){return e?(e=ga(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function da(e){var t=pa(e),i=t%1;return t==t?i?t-i:t:0}function fa(e){return e?nr(da(e),0,d):0}function ga(e){if("number"==typeof e)return e;if(aa(e))return p;if(Qo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$t(e);var i=fe.test(e);return i||ye.test(e)?lt(e.slice(2),i?2:8):de.test(e)?p:+e}function ya(e){return On(e,Na(e))}function ma(e){return null==e?"":on(e)}var Sa=Rn(function(e,t){if(_s(t)||Ko(t))On(t,Ca(t),e);else for(var i in t)ke.call(t,i)&&Zi(e,i,t[i])}),va=Rn(function(e,t){On(t,Na(t),e)}),_a=Rn(function(e,t,i,r){On(t,Na(t),e,r)}),ba=Rn(function(e,t,i,r){On(t,Ca(t),e,r)}),xa=Qn(rr),wa=Jr(function(e,t){e=Te(e);var i=-1,r=t.length,s=r>2?t[2]:n;for(s&&ys(t[0],t[1],s)&&(r=1);++i<r;)for(var o=t[i],a=Na(o),l=-1,h=a.length;++l<h;){var c=a[l],u=e[c];(u===n||Do(u,Ce[c])&&!ke.call(e,c))&&(e[c]=o[c])}return e}),Ta=Jr(function(e){return e.push(n,Yn),wt(ka,n,e)});function Ea(e,t,i){var r=null==e?n:_r(e,t);return r===n?i:r}function Aa(e,t){return null!=e&&ps(e,t,Er)}var Oa=jn(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),e[t]=i},Qa(il)),Ia=jn(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),ke.call(e,t)?e[t].push(i):e[t]=[i]},ss),Ra=Jr(Or);function Ca(e){return Ko(e)?Gi(e):kr(e)}function Na(e){return Ko(e)?Gi(e,!0):function(e){if(!Qo(e))return function(e){var t=[];if(null!=e)for(var i in Te(e))t.push(i);return t}(e);var t=_s(e),i=[];for(var r in e)("constructor"!=r||!t&&ke.call(e,r))&&i.push(r);return i}(e)}var Pa=Rn(function(e,t,i){jr(e,t,i)}),ka=Rn(function(e,t,i,r){jr(e,t,i,r)}),Ua=Qn(function(e,t){var i={};if(null==e)return i;var r=!1;t=Nt(t,function(t){return t=yn(t,e),r||(r=t.length>1),t}),On(e,ts(e),i),r&&(i=sr(i,7,qn));for(var n=t.length;n--;)ln(i,t[n]);return i}),Ba=Qn(function(e,t){return null==e?{}:function(e,t){return Vr(e,t,function(t,i){return Aa(e,i)})}(e,t)});function La(e,t){if(null==e)return{};var i=Nt(ts(e),function(e){return[e]});return t=ss(t),Vr(e,i,function(e,i){return t(e,i[0])})}var Ma=Gn(Ca),ja=Gn(Na);function Da(e){return null==e?[]:Yt(e,Ca(e))}var Fa=kn(function(e,t,i){return t=t.toLowerCase(),e+(i?Va(t):t)});function Va(e){return Xa(ma(e).toLowerCase())}function za(e){return(e=ma(e))&&e.replace(Se,ei).replace(qe,"")}var Wa=kn(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Ha=kn(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Ka=Pn("toLowerCase"),Ja=kn(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}),Ga=kn(function(e,t,i){return e+(i?" ":"")+Xa(t)}),$a=kn(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),Xa=Pn("toUpperCase");function Ya(e,t,i){return e=ma(e),(t=i?n:t)===n?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var qa=Jr(function(e,t){try{return wt(e,n,t)}catch(e){return Xo(e)?e:new be(e)}}),Za=Qn(function(e,t){return Et(t,function(t){t=Bs(t),ir(e,t,Io(e[t],e))}),e});function Qa(e){return function(){return e}}var el=Ln(),tl=Ln(!0);function il(e){return e}function rl(e){return Pr("function"==typeof e?e:sr(e,1))}var nl=Jr(function(e,t){return function(i){return Or(i,e,t)}}),sl=Jr(function(e,t){return function(i){return Or(e,i,t)}});function ol(e,t,i){var r=Ca(t),n=vr(t,r);null!=i||Qo(t)&&(n.length||!r.length)||(i=t,t=e,e=this,n=vr(t,Ca(t)));var s=!(Qo(i)&&"chain"in i&&!i.chain),o=Yo(e);return Et(n,function(i){var r=t[i];e[i]=r,o&&(e.prototype[i]=function(){var t=this.__chain__;if(s||t){var i=e(this.__wrapped__);return(i.__actions__=An(this.__actions__)).push({func:r,args:arguments,thisArg:e}),i.__chain__=t,i}return r.apply(e,Pt([this.value()],arguments))})}),e}function al(){}var ll=Fn(Nt),hl=Fn(Ot),cl=Fn(Bt);function ul(e){return ms(e)?Wt(Bs(e)):function(e){return function(t){return _r(t,e)}}(e)}var pl=zn(),dl=zn(!0);function fl(){return[]}function gl(){return!1}var yl,ml=Dn(function(e,t){return e+t},0),Sl=Kn("ceil"),vl=Dn(function(e,t){return e/t},1),_l=Kn("floor"),bl=Dn(function(e,t){return e*t},1),xl=Kn("round"),wl=Dn(function(e,t){return e-t},0);return Mi.after=function(e,t){if("function"!=typeof t)throw new Oe(s);return e=da(e),function(){if(--e<1)return t.apply(this,arguments)}},Mi.ary=Ao,Mi.assign=Sa,Mi.assignIn=va,Mi.assignInWith=_a,Mi.assignWith=ba,Mi.at=xa,Mi.before=Oo,Mi.bind=Io,Mi.bindAll=Za,Mi.bindKey=Ro,Mi.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wo(e)?e:[e]},Mi.chain=co,Mi.chunk=function(e,t,i){t=(i?ys(e,t,i):t===n)?1:gi(da(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var o=0,a=0,l=r(pt(s/t));o<s;)l[a++]=Qr(e,o,o+=t);return l},Mi.compact=function(e){for(var t=-1,i=null==e?0:e.length,r=0,n=[];++t<i;){var s=e[t];s&&(n[r++]=s)}return n},Mi.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),i=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Pt(Wo(i)?An(i):[i],fr(t,1))},Mi.cond=function(e){var t=null==e?0:e.length,i=ss();return e=t?Nt(e,function(e){if("function"!=typeof e[1])throw new Oe(s);return[i(e[0]),e[1]]}):[],Jr(function(i){for(var r=-1;++r<t;){var n=e[r];if(wt(n[0],this,i))return wt(n[1],this,i)}})},Mi.conforms=function(e){return function(e){var t=Ca(e);return function(i){return or(i,e,t)}}(sr(e,1))},Mi.constant=Qa,Mi.countBy=fo,Mi.create=function(e,t){var i=ji(e);return null==t?i:tr(i,t)},Mi.curry=function e(t,i,r){var s=$n(t,8,n,n,n,n,n,i=r?n:i);return s.placeholder=e.placeholder,s},Mi.curryRight=function e(t,i,r){var s=$n(t,16,n,n,n,n,n,i=r?n:i);return s.placeholder=e.placeholder,s},Mi.debounce=Co,Mi.defaults=wa,Mi.defaultsDeep=Ta,Mi.defer=No,Mi.delay=Po,Mi.difference=js,Mi.differenceBy=Ds,Mi.differenceWith=Fs,Mi.drop=function(e,t,i){var r=null==e?0:e.length;return r?Qr(e,(t=i||t===n?1:da(t))<0?0:t,r):[]},Mi.dropRight=function(e,t,i){var r=null==e?0:e.length;return r?Qr(e,0,(t=r-(t=i||t===n?1:da(t)))<0?0:t):[]},Mi.dropRightWhile=function(e,t){return e&&e.length?cn(e,ss(t,3),!0,!0):[]},Mi.dropWhile=function(e,t){return e&&e.length?cn(e,ss(t,3),!0):[]},Mi.fill=function(e,t,i,r){var s=null==e?0:e.length;return s?(i&&"number"!=typeof i&&ys(e,t,i)&&(i=0,r=s),function(e,t,i,r){var s=e.length;for((i=da(i))<0&&(i=-i>s?0:s+i),(r=r===n||r>s?s:da(r))<0&&(r+=s),r=i>r?0:fa(r);i<r;)e[i++]=t;return e}(e,t,i,r)):[]},Mi.filter=function(e,t){return(Wo(e)?It:dr)(e,ss(t,3))},Mi.flatMap=function(e,t){return fr(xo(e,t),1)},Mi.flatMapDeep=function(e,t){return fr(xo(e,t),c)},Mi.flatMapDepth=function(e,t,i){return i=i===n?1:da(i),fr(xo(e,t),i)},Mi.flatten=Ws,Mi.flattenDeep=function(e){return null!=e&&e.length?fr(e,c):[]},Mi.flattenDepth=function(e,t){return null!=e&&e.length?fr(e,t=t===n?1:da(t)):[]},Mi.flip=function(e){return $n(e,512)},Mi.flow=el,Mi.flowRight=tl,Mi.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,r={};++t<i;){var n=e[t];r[n[0]]=n[1]}return r},Mi.functions=function(e){return null==e?[]:vr(e,Ca(e))},Mi.functionsIn=function(e){return null==e?[]:vr(e,Na(e))},Mi.groupBy=vo,Mi.initial=function(e){return null!=e&&e.length?Qr(e,0,-1):[]},Mi.intersection=Ks,Mi.intersectionBy=Js,Mi.intersectionWith=Gs,Mi.invert=Oa,Mi.invertBy=Ia,Mi.invokeMap=_o,Mi.iteratee=rl,Mi.keyBy=bo,Mi.keys=Ca,Mi.keysIn=Na,Mi.map=xo,Mi.mapKeys=function(e,t){var i={};return t=ss(t,3),mr(e,function(e,r,n){ir(i,t(e,r,n),e)}),i},Mi.mapValues=function(e,t){var i={};return t=ss(t,3),mr(e,function(e,r,n){ir(i,r,t(e,r,n))}),i},Mi.matches=function(e){return Lr(sr(e,1))},Mi.matchesProperty=function(e,t){return Mr(e,sr(t,1))},Mi.memoize=ko,Mi.merge=Pa,Mi.mergeWith=ka,Mi.method=nl,Mi.methodOf=sl,Mi.mixin=ol,Mi.negate=Uo,Mi.nthArg=function(e){return e=da(e),Jr(function(t){return Dr(t,e)})},Mi.omit=Ua,Mi.omitBy=function(e,t){return La(e,Uo(ss(t)))},Mi.once=function(e){return Oo(2,e)},Mi.orderBy=function(e,t,i,r){return null==e?[]:(Wo(t)||(t=null==t?[]:[t]),Wo(i=r?n:i)||(i=null==i?[]:[i]),Fr(e,t,i))},Mi.over=ll,Mi.overArgs=Bo,Mi.overEvery=hl,Mi.overSome=cl,Mi.partial=Lo,Mi.partialRight=Mo,Mi.partition=wo,Mi.pick=Ba,Mi.pickBy=La,Mi.property=ul,Mi.propertyOf=function(e){return function(t){return null==e?n:_r(e,t)}},Mi.pull=Xs,Mi.pullAll=Ys,Mi.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?zr(e,t,ss(i,2)):e},Mi.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?zr(e,t,n,i):e},Mi.pullAt=qs,Mi.range=pl,Mi.rangeRight=dl,Mi.rearg=jo,Mi.reject=function(e,t){return(Wo(e)?It:dr)(e,Uo(ss(t,3)))},Mi.remove=function(e,t){var i=[];if(!e||!e.length)return i;var r=-1,n=[],s=e.length;for(t=ss(t,3);++r<s;){var o=e[r];t(o,r,e)&&(i.push(o),n.push(r))}return Wr(e,n),i},Mi.rest=function(e,t){if("function"!=typeof e)throw new Oe(s);return Jr(e,t=t===n?t:da(t))},Mi.reverse=Zs,Mi.sampleSize=function(e,t,i){return t=(i?ys(e,t,i):t===n)?1:da(t),(Wo(e)?Xi:$r)(e,t)},Mi.set=function(e,t,i){return null==e?e:Xr(e,t,i)},Mi.setWith=function(e,t,i,r){return r="function"==typeof r?r:n,null==e?e:Xr(e,t,i,r)},Mi.shuffle=function(e){return(Wo(e)?Yi:Zr)(e)},Mi.slice=function(e,t,i){var r=null==e?0:e.length;return r?(i&&"number"!=typeof i&&ys(e,t,i)?(t=0,i=r):(t=null==t?0:da(t),i=i===n?r:da(i)),Qr(e,t,i)):[]},Mi.sortBy=To,Mi.sortedUniq=function(e){return e&&e.length?nn(e):[]},Mi.sortedUniqBy=function(e,t){return e&&e.length?nn(e,ss(t,2)):[]},Mi.split=function(e,t,i){return i&&"number"!=typeof i&&ys(e,t,i)&&(t=i=n),(i=i===n?d:i>>>0)?(e=ma(e))&&("string"==typeof t||null!=t&&!na(t))&&!(t=on(t))&&ri(e)?Sn(ci(e),0,i):e.split(t,i):[]},Mi.spread=function(e,t){if("function"!=typeof e)throw new Oe(s);return t=null==t?0:gi(da(t),0),Jr(function(i){var r=i[t],n=Sn(i,0,t);return r&&Pt(n,r),wt(e,this,n)})},Mi.tail=function(e){var t=null==e?0:e.length;return t?Qr(e,1,t):[]},Mi.take=function(e,t,i){return e&&e.length?Qr(e,0,(t=i||t===n?1:da(t))<0?0:t):[]},Mi.takeRight=function(e,t,i){var r=null==e?0:e.length;return r?Qr(e,(t=r-(t=i||t===n?1:da(t)))<0?0:t,r):[]},Mi.takeRightWhile=function(e,t){return e&&e.length?cn(e,ss(t,3),!1,!0):[]},Mi.takeWhile=function(e,t){return e&&e.length?cn(e,ss(t,3)):[]},Mi.tap=function(e,t){return t(e),e},Mi.throttle=function(e,t,i){var r=!0,n=!0;if("function"!=typeof e)throw new Oe(s);return Qo(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),Co(e,t,{leading:r,maxWait:t,trailing:n})},Mi.thru=uo,Mi.toArray=ua,Mi.toPairs=Ma,Mi.toPairsIn=ja,Mi.toPath=function(e){return Wo(e)?Nt(e,Bs):aa(e)?[e]:An(Us(ma(e)))},Mi.toPlainObject=ya,Mi.transform=function(e,t,i){var r=Wo(e),n=r||Go(e)||la(e);if(t=ss(t,4),null==i){var s=e&&e.constructor;i=n?r?new s:[]:Qo(e)&&Yo(s)?ji(He(e)):{}}return(n?Et:mr)(e,function(e,r,n){return t(i,e,r,n)}),i},Mi.unary=function(e){return Ao(e,1)},Mi.union=Qs,Mi.unionBy=eo,Mi.unionWith=to,Mi.uniq=function(e){return e&&e.length?an(e):[]},Mi.uniqBy=function(e,t){return e&&e.length?an(e,ss(t,2)):[]},Mi.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?an(e,n,t):[]},Mi.unset=function(e,t){return null==e||ln(e,t)},Mi.unzip=io,Mi.unzipWith=ro,Mi.update=function(e,t,i){return null==e?e:hn(e,t,gn(i))},Mi.updateWith=function(e,t,i,r){return r="function"==typeof r?r:n,null==e?e:hn(e,t,gn(i),r)},Mi.values=Da,Mi.valuesIn=function(e){return null==e?[]:Yt(e,Na(e))},Mi.without=no,Mi.words=Ya,Mi.wrap=function(e,t){return Lo(gn(t),e)},Mi.xor=so,Mi.xorBy=oo,Mi.xorWith=ao,Mi.zip=lo,Mi.zipObject=function(e,t){return dn(e||[],t||[],Zi)},Mi.zipObjectDeep=function(e,t){return dn(e||[],t||[],Xr)},Mi.zipWith=ho,Mi.entries=Ma,Mi.entriesIn=ja,Mi.extend=va,Mi.extendWith=_a,ol(Mi,Mi),Mi.add=ml,Mi.attempt=qa,Mi.camelCase=Fa,Mi.capitalize=Va,Mi.ceil=Sl,Mi.clamp=function(e,t,i){return i===n&&(i=t,t=n),i!==n&&(i=(i=ga(i))==i?i:0),t!==n&&(t=(t=ga(t))==t?t:0),nr(ga(e),t,i)},Mi.clone=function(e){return sr(e,4)},Mi.cloneDeep=function(e){return sr(e,5)},Mi.cloneDeepWith=function(e,t){return sr(e,5,t="function"==typeof t?t:n)},Mi.cloneWith=function(e,t){return sr(e,4,t="function"==typeof t?t:n)},Mi.conformsTo=function(e,t){return null==t||or(e,t,Ca(t))},Mi.deburr=za,Mi.defaultTo=function(e,t){return null==e||e!=e?t:e},Mi.divide=vl,Mi.endsWith=function(e,t,i){e=ma(e),t=on(t);var r=e.length,s=i=i===n?r:nr(da(i),0,r);return(i-=t.length)>=0&&e.slice(i,s)==t},Mi.eq=Do,Mi.escape=function(e){return(e=ma(e))&&$.test(e)?e.replace(J,ti):e},Mi.escapeRegExp=function(e){return(e=ma(e))&&ie.test(e)?e.replace(te,"\\$&"):e},Mi.every=function(e,t,i){var r=Wo(e)?Ot:ur;return i&&ys(e,t,i)&&(t=n),r(e,ss(t,3))},Mi.find=go,Mi.findIndex=Vs,Mi.findKey=function(e,t){return Mt(e,ss(t,3),mr)},Mi.findLast=yo,Mi.findLastIndex=zs,Mi.findLastKey=function(e,t){return Mt(e,ss(t,3),Sr)},Mi.floor=_l,Mi.forEach=mo,Mi.forEachRight=So,Mi.forIn=function(e,t){return null==e?e:gr(e,ss(t,3),Na)},Mi.forInRight=function(e,t){return null==e?e:yr(e,ss(t,3),Na)},Mi.forOwn=function(e,t){return e&&mr(e,ss(t,3))},Mi.forOwnRight=function(e,t){return e&&Sr(e,ss(t,3))},Mi.get=Ea,Mi.gt=Fo,Mi.gte=Vo,Mi.has=function(e,t){return null!=e&&ps(e,t,Tr)},Mi.hasIn=Aa,Mi.head=Hs,Mi.identity=il,Mi.includes=function(e,t,i,r){e=Ko(e)?e:Da(e),i=i&&!r?da(i):0;var n=e.length;return i<0&&(i=gi(n+i,0)),oa(e)?i<=n&&e.indexOf(t,i)>-1:!!n&&Dt(e,t,i)>-1},Mi.indexOf=function(e,t,i){var r=null==e?0:e.length;if(!r)return-1;var n=null==i?0:da(i);return n<0&&(n=gi(r+n,0)),Dt(e,t,n)},Mi.inRange=function(e,t,i){return t=pa(t),i===n?(i=t,t=0):i=pa(i),function(e,t,i){return e>=yi(t,i)&&e<gi(t,i)}(e=ga(e),t,i)},Mi.invoke=Ra,Mi.isArguments=zo,Mi.isArray=Wo,Mi.isArrayBuffer=Ho,Mi.isArrayLike=Ko,Mi.isArrayLikeObject=Jo,Mi.isBoolean=function(e){return!0===e||!1===e||ea(e)&&xr(e)==m},Mi.isBuffer=Go,Mi.isDate=$o,Mi.isElement=function(e){return ea(e)&&1===e.nodeType&&!ra(e)},Mi.isEmpty=function(e){if(null==e)return!0;if(Ko(e)&&(Wo(e)||"string"==typeof e||"function"==typeof e.splice||Go(e)||la(e)||zo(e)))return!e.length;var t=us(e);if(t==x||t==O)return!e.size;if(_s(e))return!kr(e).length;for(var i in e)if(ke.call(e,i))return!1;return!0},Mi.isEqual=function(e,t){return Rr(e,t)},Mi.isEqualWith=function(e,t,i){var r=(i="function"==typeof i?i:n)?i(e,t):n;return r===n?Rr(e,t,n,i):!!r},Mi.isError=Xo,Mi.isFinite=function(e){return"number"==typeof e&&Lt(e)},Mi.isFunction=Yo,Mi.isInteger=qo,Mi.isLength=Zo,Mi.isMap=ta,Mi.isMatch=function(e,t){return e===t||Cr(e,t,as(t))},Mi.isMatchWith=function(e,t,i){return i="function"==typeof i?i:n,Cr(e,t,as(t),i)},Mi.isNaN=function(e){return ia(e)&&e!=+e},Mi.isNative=function(e){if(vs(e))throw new be("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Mi.isNil=function(e){return null==e},Mi.isNull=function(e){return null===e},Mi.isNumber=ia,Mi.isObject=Qo,Mi.isObjectLike=ea,Mi.isPlainObject=ra,Mi.isRegExp=na,Mi.isSafeInteger=function(e){return qo(e)&&e>=-9007199254740991&&e<=u},Mi.isSet=sa,Mi.isString=oa,Mi.isSymbol=aa,Mi.isTypedArray=la,Mi.isUndefined=function(e){return e===n},Mi.isWeakMap=function(e){return ea(e)&&us(e)==C},Mi.isWeakSet=function(e){return ea(e)&&"[object WeakSet]"==xr(e)},Mi.join=function(e,t){return null==e?"":Ht.call(e,t)},Mi.kebabCase=Wa,Mi.last=$s,Mi.lastIndexOf=function(e,t,i){var r=null==e?0:e.length;if(!r)return-1;var s=r;return i!==n&&(s=(s=da(i))<0?gi(r+s,0):yi(s,r-1)),t==t?function(e,t,i){for(var r=i+1;r--;)if(e[r]===t)return r;return r}(e,t,s):jt(e,Vt,s,!0)},Mi.lowerCase=Ha,Mi.lowerFirst=Ka,Mi.lt=ha,Mi.lte=ca,Mi.max=function(e){return e&&e.length?pr(e,il,wr):n},Mi.maxBy=function(e,t){return e&&e.length?pr(e,ss(t,2),wr):n},Mi.mean=function(e){return zt(e,il)},Mi.meanBy=function(e,t){return zt(e,ss(t,2))},Mi.min=function(e){return e&&e.length?pr(e,il,Ur):n},Mi.minBy=function(e,t){return e&&e.length?pr(e,ss(t,2),Ur):n},Mi.stubArray=fl,Mi.stubFalse=gl,Mi.stubObject=function(){return{}},Mi.stubString=function(){return""},Mi.stubTrue=function(){return!0},Mi.multiply=bl,Mi.nth=function(e,t){return e&&e.length?Dr(e,da(t)):n},Mi.noConflict=function(){return ut._===this&&(ut._=je),this},Mi.noop=al,Mi.now=Eo,Mi.pad=function(e,t,i){e=ma(e);var r=(t=da(t))?hi(e):0;if(!t||r>=t)return e;var n=(t-r)/2;return Vn(dt(n),i)+e+Vn(pt(n),i)},Mi.padEnd=function(e,t,i){e=ma(e);var r=(t=da(t))?hi(e):0;return t&&r<t?e+Vn(t-r,i):e},Mi.padStart=function(e,t,i){e=ma(e);var r=(t=da(t))?hi(e):0;return t&&r<t?Vn(t-r,i)+e:e},Mi.parseInt=function(e,t,i){return i||null==t?t=0:t&&(t=+t),Si(ma(e).replace(re,""),t||0)},Mi.random=function(e,t,i){if(i&&"boolean"!=typeof i&&ys(e,t,i)&&(t=i=n),i===n&&("boolean"==typeof t?(i=t,t=n):"boolean"==typeof e&&(i=e,e=n)),e===n&&t===n?(e=0,t=1):(e=pa(e),t===n?(t=e,e=0):t=pa(t)),e>t){var r=e;e=t,t=r}if(i||e%1||t%1){var s=vi();return yi(e+s*(t-e+at("1e-"+((s+"").length-1))),t)}return Hr(e,t)},Mi.reduce=function(e,t,i){var r=Wo(e)?kt:Kt,n=arguments.length<3;return r(e,ss(t,4),i,n,hr)},Mi.reduceRight=function(e,t,i){var r=Wo(e)?Ut:Kt,n=arguments.length<3;return r(e,ss(t,4),i,n,cr)},Mi.repeat=function(e,t,i){return t=(i?ys(e,t,i):t===n)?1:da(t),Kr(ma(e),t)},Mi.replace=function(){var e=arguments,t=ma(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mi.result=function(e,t,i){var r=-1,s=(t=yn(t,e)).length;for(s||(s=1,e=n);++r<s;){var o=null==e?n:e[Bs(t[r])];o===n&&(r=s,o=i),e=Yo(o)?o.call(e):o}return e},Mi.round=xl,Mi.runInContext=e,Mi.sample=function(e){return(Wo(e)?$i:Gr)(e)},Mi.size=function(e){if(null==e)return 0;if(Ko(e))return oa(e)?hi(e):e.length;var t=us(e);return t==x||t==O?e.size:kr(e).length},Mi.snakeCase=Ja,Mi.some=function(e,t,i){var r=Wo(e)?Bt:en;return i&&ys(e,t,i)&&(t=n),r(e,ss(t,3))},Mi.sortedIndex=function(e,t){return tn(e,t)},Mi.sortedIndexBy=function(e,t,i){return rn(e,t,ss(i,2))},Mi.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var r=tn(e,t);if(r<i&&Do(e[r],t))return r}return-1},Mi.sortedLastIndex=function(e,t){return tn(e,t,!0)},Mi.sortedLastIndexBy=function(e,t,i){return rn(e,t,ss(i,2),!0)},Mi.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var i=tn(e,t,!0)-1;if(Do(e[i],t))return i}return-1},Mi.startCase=Ga,Mi.startsWith=function(e,t,i){return e=ma(e),i=null==i?0:nr(da(i),0,e.length),t=on(t),e.slice(i,i+t.length)==t},Mi.subtract=wl,Mi.sum=function(e){return e&&e.length?Jt(e,il):0},Mi.sumBy=function(e,t){return e&&e.length?Jt(e,ss(t,2)):0},Mi.template=function(e,t,i){var r=Mi.templateSettings;i&&ys(e,t,i)&&(t=n),e=ma(e),t=_a({},t,r,Xn);var s,o,a=_a({},t.imports,r.imports,Xn),l=Ca(a),h=Yt(a,l),c=0,u=t.interpolate||ve,p="__p += '",d=Ee((t.escape||ve).source+"|"+u.source+"|"+(u===q?ue:ve).source+"|"+(t.evaluate||ve).source+"|$","g"),f="//# sourceURL="+(ke.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rt+"]")+"\n";e.replace(d,function(t,i,r,n,a,l){return r||(r=n),p+=e.slice(c,l).replace(_e,ii),i&&(s=!0,p+="' +\n__e("+i+") +\n'"),a&&(o=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),p+="';\n";var g=ke.call(t,"variable")&&t.variable;if(g){if(he.test(g))throw new be("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(o?p.replace(z,""):p).replace(W,"$1").replace(H,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=qa(function(){return xe(l,f+"return "+p).apply(n,h)});if(y.source=p,Xo(y))throw y;return y},Mi.times=function(e,t){if((e=da(e))<1||e>u)return[];var i=d,r=yi(e,d);t=ss(t),e-=d;for(var n=Gt(r,t);++i<e;)t(i);return n},Mi.toFinite=pa,Mi.toInteger=da,Mi.toLength=fa,Mi.toLower=function(e){return ma(e).toLowerCase()},Mi.toNumber=ga,Mi.toSafeInteger=function(e){return e?nr(da(e),-9007199254740991,u):0===e?e:0},Mi.toString=ma,Mi.toUpper=function(e){return ma(e).toUpperCase()},Mi.trim=function(e,t,i){if((e=ma(e))&&(i||t===n))return $t(e);if(!e||!(t=on(t)))return e;var r=ci(e),s=ci(t);return Sn(r,Zt(r,s),Qt(r,s)+1).join("")},Mi.trimEnd=function(e,t,i){if((e=ma(e))&&(i||t===n))return e.slice(0,ui(e)+1);if(!e||!(t=on(t)))return e;var r=ci(e);return Sn(r,0,Qt(r,ci(t))+1).join("")},Mi.trimStart=function(e,t,i){if((e=ma(e))&&(i||t===n))return e.replace(re,"");if(!e||!(t=on(t)))return e;var r=ci(e);return Sn(r,Zt(r,ci(t))).join("")},Mi.truncate=function(e,t){var i=30,r="...";if(Qo(t)){var s="separator"in t?t.separator:s;i="length"in t?da(t.length):i,r="omission"in t?on(t.omission):r}var o=(e=ma(e)).length;if(ri(e)){var a=ci(e);o=a.length}if(i>=o)return e;var l=i-hi(r);if(l<1)return r;var h=a?Sn(a,0,l).join(""):e.slice(0,l);if(s===n)return h+r;if(a&&(l+=h.length-l),na(s)){if(e.slice(l).search(s)){var c,u=h;for(s.global||(s=Ee(s.source,ma(pe.exec(s))+"g")),s.lastIndex=0;c=s.exec(u);)var p=c.index;h=h.slice(0,p===n?l:p)}}else if(e.indexOf(on(s),l)!=l){var d=h.lastIndexOf(s);d>-1&&(h=h.slice(0,d))}return h+r},Mi.unescape=function(e){return(e=ma(e))&&G.test(e)?e.replace(K,pi):e},Mi.uniqueId=function(e){var t=++Ue;return ma(e)+t},Mi.upperCase=$a,Mi.upperFirst=Xa,Mi.each=mo,Mi.eachRight=So,Mi.first=Hs,ol(Mi,(yl={},mr(Mi,function(e,t){ke.call(Mi.prototype,t)||(yl[t]=e)}),yl),{chain:!1}),Mi.VERSION="4.17.21",Et(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Mi[e].placeholder=Mi}),Et(["drop","take"],function(e,t){Vi.prototype[e]=function(i){i=i===n?1:gi(da(i),0);var r=this.__filtered__&&!t?new Vi(this):this.clone();return r.__filtered__?r.__takeCount__=yi(i,r.__takeCount__):r.__views__.push({size:yi(i,d),type:e+(r.__dir__<0?"Right":"")}),r},Vi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Et(["filter","map","takeWhile"],function(e,t){var i=t+1,r=1==i||3==i;Vi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ss(e,3),type:i}),t.__filtered__=t.__filtered__||r,t}}),Et(["head","last"],function(e,t){var i="take"+(t?"Right":"");Vi.prototype[e]=function(){return this[i](1).value()[0]}}),Et(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");Vi.prototype[e]=function(){return this.__filtered__?new Vi(this):this[i](1)}}),Vi.prototype.compact=function(){return this.filter(il)},Vi.prototype.find=function(e){return this.filter(e).head()},Vi.prototype.findLast=function(e){return this.reverse().find(e)},Vi.prototype.invokeMap=Jr(function(e,t){return"function"==typeof e?new Vi(this):this.map(function(i){return Or(i,e,t)})}),Vi.prototype.reject=function(e){return this.filter(Uo(ss(e)))},Vi.prototype.slice=function(e,t){e=da(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Vi(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==n&&(i=(t=da(t))<0?i.dropRight(-t):i.take(t-e)),i)},Vi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vi.prototype.toArray=function(){return this.take(d)},mr(Vi.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=Mi[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);s&&(Mi.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,l=t instanceof Vi,h=a[0],c=l||Wo(t),u=function(e){var t=s.apply(Mi,Pt([e],a));return r&&p?t[0]:t};c&&i&&"function"==typeof h&&1!=h.length&&(l=c=!1);var p=this.__chain__,d=!!this.__actions__.length,f=o&&!p,g=l&&!d;if(!o&&c){t=g?t:new Vi(this);var y=e.apply(t,a);return y.__actions__.push({func:uo,args:[u],thisArg:n}),new Fi(y,p)}return f&&g?e.apply(this,a):(y=this.thru(u),f?r?y.value()[0]:y.value():y)})}),Et(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ie[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Mi.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var n=this.value();return t.apply(Wo(n)?n:[],e)}return this[i](function(i){return t.apply(Wo(i)?i:[],e)})}}),mr(Vi.prototype,function(e,t){var i=Mi[t];if(i){var r=i.name+"";ke.call(Ii,r)||(Ii[r]=[]),Ii[r].push({name:t,func:i})}}),Ii[Mn(n,2).name]=[{name:"wrapper",func:n}],Vi.prototype.clone=function(){var e=new Vi(this.__wrapped__);return e.__actions__=An(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=An(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=An(this.__views__),e},Vi.prototype.reverse=function(){if(this.__filtered__){var e=new Vi(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vi.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=Wo(e),r=t<0,n=i?e.length:0,s=function(e,t,i){for(var r=-1,n=i.length;++r<n;){var s=i[r],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=yi(t,e+o);break;case"takeRight":e=gi(e,t-o)}}return{start:e,end:t}}(0,n,this.__views__),o=s.start,a=s.end,l=a-o,h=r?a:o-1,c=this.__iteratees__,u=c.length,p=0,d=yi(l,this.__takeCount__);if(!i||!r&&n==l&&d==l)return un(e,this.__actions__);var f=[];e:for(;l--&&p<d;){for(var g=-1,y=e[h+=t];++g<u;){var m=c[g],S=m.iteratee,v=m.type,_=S(y);if(2==v)y=_;else if(!_){if(1==v)continue e;break e}}f[p++]=y}return f},Mi.prototype.at=po,Mi.prototype.chain=function(){return co(this)},Mi.prototype.commit=function(){return new Fi(this.value(),this.__chain__)},Mi.prototype.next=function(){this.__values__===n&&(this.__values__=ua(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},Mi.prototype.plant=function(e){for(var t,i=this;i instanceof Di;){var r=Ms(i);r.__index__=0,r.__values__=n,t?s.__wrapped__=r:t=r;var s=r;i=i.__wrapped__}return s.__wrapped__=e,t},Mi.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vi){var t=e;return this.__actions__.length&&(t=new Vi(this)),(t=t.reverse()).__actions__.push({func:uo,args:[Zs],thisArg:n}),new Fi(t,this.__chain__)}return this.thru(Zs)},Mi.prototype.toJSON=Mi.prototype.valueOf=Mi.prototype.value=function(){return un(this.__wrapped__,this.__actions__)},Mi.prototype.first=Mi.prototype.head,Xe&&(Mi.prototype[Xe]=function(){return this}),Mi}();ut._=di,(r=function(){return di}.call(t,i,t,e))===n||(e.exports=r)}.call(this)}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";const e=Phaser;var t=i.n(e);const r="sfxVolume",n="musicVolume",s="globalVolume",o="volume";function a(e,i){const r=Number.parseFloat(e??String(i));return Number.isFinite(r)?t().Math.Clamp(r,0,1):i}function l(e,i,r=1){const n=localStorage.getItem(e);if(null!==n)return a(n,r);const s=i?localStorage.getItem(i):null;return null!==s?a(s,r):t().Math.Clamp(r,0,1)}function h(e=1){return l(r,o,e)}function c(e=1){return l(n,o,e)}function u(e=1){return l(s,null,e)}function p(e,i={}){let r=u(),n=h(),s=c();"number"==typeof i?(n=t().Math.Clamp(Number(i),0,1),s=n):(n=i.sfxVolume??n,s=i.musicVolume??s),e.sound.volume=r;const o=e.game.globals.music;o&&"setVolume"in o&&o.setVolume(s)}function d(e,t="sonidoClick"){e.sound.play(t,{volume:h()})}function f(e,{x:t,y:i,label:r,onClick:n,textureNormal:s="botonSinSeleccionar",textureHover:o="botonSeleccionado",scale:a=2,textStyle:l={},clickSoundKey:h="sonidoClick"}){const c=e.add.sprite(t,i,s).setScale(a).setInteractive({useHandCursor:!0}),u=e.add.text(t,i,r,l).setOrigin(.5),p=()=>c.setTexture(s),f=()=>c.setTexture(o);return c.on("pointerover",f),c.on("pointerout",p),c.on("pointerdown",()=>{f(),d(e,h)}),c.on("pointerup",e=>{c.getBounds().contains(e.x,e.y)?(f(),n?.()):p()}),{button:c,text:u}}function g(e,t){const{x:i,y:r,texture:n,onClick:s,scale:o=1,hoverScale:a=1.1,clickSoundKey:l="sonidoClick"}=t,h=e.add.sprite(i,r,n).setScale(o).setInteractive({useHandCursor:!0});return h.on("pointerover",()=>h.setScale(o*a)),h.on("pointerout",()=>h.setScale(o)),h.on("pointerdown",()=>{d(e,l)}),h.on("pointerup",e=>{h.getBounds().contains(e.x,e.y)&&s()}),h}class y extends t().Scene{constructor(){super("Menu_Scene")}preload(){this.load.image("fondoMenuPrincipal","ASSETS/FONDOS/MENU_PRINCIPAL.png"),this.load.image("botonSeleccionado","ASSETS/UI/BOTONES/BOTON_BASE_G_SELECCIONADO.png"),this.load.image("botonSinSeleccionar","ASSETS/UI/BOTONES/BOTON_BASE_G.png"),this.load.image("logoEmpresa","ASSETS/LOGO/logo_empresa.png"),this.load.audio("sonidoGeneral","ASSETS/SONIDO/SONIDO1.mp3"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3")}create(){p(this),function(e,t,{loop:i=!0}={}){const r=c();let n=e.game.globals.music;n||(n=e.sound.add(t,{loop:i,volume:r}),e.game.globals.music=n),n&&"setVolume"in n&&n.setVolume(r);const s=()=>{if(n&&"play"in n&&(!("isPlaying"in n)||!n.isPlaying))try{n.play()}catch(e){console.warn("[Audio.js] No se ha podido reproducir todav?a la m?sica.",e)}};s(),e.input.once("pointerdown",async()=>{const t=e.sound.context;if(t&&"suspended"===t.state)try{await t.resume()}catch{}s()})}(this,"sonidoGeneral",{loop:!0});const e=this.game.globals?.defaultTextStyle??{fontFamily:"Arial",fontSize:"20px",color:"#ffffff"},{width:t,height:i}=this.scale,r=t/2,n=r+r/2;this.add.image(0,0,"fondoMenuPrincipal").setOrigin(0).setDepth(-1).setDisplaySize(t,i),this.add.text(n,115,"Volley Clash",{...e,fontSize:"68px",color:"#ffffff"}).setOrigin(.5);const s=i/2-63,o={...e,fontSize:"28px",color:"#000000"};f(this,{x:n,y:s,label:"Jugar",onClick:()=>this.scene.start("ModeGame_Scene"),textStyle:o,clickSoundKey:"sonidoClick"}),f(this,{x:n,y:s+70,label:"Tutorial",onClick:()=>this.scene.start("Tutorial_Scene",{returnScene:"Menu_Scene"}),textStyle:o,clickSoundKey:"sonidoClick"}),f(this,{x:n,y:s+140,label:"Configuración",onClick:()=>this.scene.start("Configuration_Scene"),textStyle:o,clickSoundKey:"sonidoClick"}),f(this,{x:n,y:s+210,label:"Créditos",onClick:()=>this.scene.start("Credits_Scene"),textStyle:o,clickSoundKey:"sonidoClick"}),f(this,{x:t-115,y:40,label:"Cerrar Sesión",onClick:()=>{this.handleLogout()},textStyle:o,clickSoundKey:"sonidoClick"}),this.add.image(this.scale.width-20,this.scale.height-20,"logoEmpresa").setScale(.42).setOrigin(1,1),this.connectionText=this.add.text(20,20,"Servidor: ONLINE",{fontSize:"16px",color:"#00ff00"});const a=e=>{this.connectionText.active&&this.connectionText&&this.connectionText.setText(`Servidor: ONLINE | Usuarios: ${e}`)};this.game.events.on("update_online_count",a),this.events.once("shutdown",()=>{this.game.events.off("update_online_count",a)})}async handleLogout(){const e=this.registry.get("username");try{await fetch("/api/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})})}catch(e){console.error("Error en logout")}sessionStorage.removeItem("voley_username"),sessionStorage.removeItem("voley_session_token"),this.registry.destroy(),this.scene.stop("Connection_Scene"),this.scene.start("Logging_Scene")}}const m={velocidad:4e3,ralentizar:4e3,paralizar:2500,por2:4e3,por3:4e3};class S{constructor(e,t,i,r,n){this.scene=e,this.id=t,this.characterType=n,this.baseMoveSpeed=250,this.moveSpeed=this.baseMoveSpeed,this.jumpSpeed=275,this.activePowerUps={},this.isParalyzed=!1,this.paralysisTween=null,this.speedEffectActive=!1,this.slowEffectActive=!1,this.scoreMultiplier=1,this.multiplierText=this.scene.add.text(i,r-50,"",{fontFamily:"Arial",fontSize:"20px",color:"#ffffff",stroke:"#000000",strokeThickness:4}).setOrigin(.5,1).setDepth(20).setVisible(!1),this.powerUpInventory=[],this.isReceiving=!1,this.boundsLeft=0,this.boundsRight=960,this.boundsTop=0,this.boundsBottom=540;const s={characterA:{textureKey:"charA_move",startFrame:0,idleLeftAnim:"charA_idleLeft",idleRightAnim:"charA_idleRight",runLeftAnim:"charA_runLeft",runRightAnim:"charA_runRight",jumpLeftAnim:"charA_jumpLeft",jumpRightAnim:"charA_jumpRight",receiveLeftAnim:"charA_receiveLeft",receiveRightAnim:"charA_receiveRight",victory:"charA_victory"},characterB:{textureKey:"charB_move",startFrame:0,idleLeftAnim:"charB_idleLeft",idleRightAnim:"charB_idleRight",runLeftAnim:"charB_runLeft",runRightAnim:"charB_runRight",jumpLeftAnim:"charB_jumpLeft",jumpRightAnim:"charB_jumpRight",receiveLeftAnim:"charB_receiveLeft",receiveRightAnim:"charB_receiveRight",victory:"charB_victory"},characterC:{textureKey:"charC_move",startFrame:0,idleLeftAnim:"charC_idleLeft",idleRightAnim:"charC_idleRight",runLeftAnim:"charC_runLeft",runRightAnim:"charC_runRight",jumpLeftAnim:"charC_jumpLeft",jumpRightAnim:"charC_jumpRight",receiveLeftAnim:"charC_receiveLeft",receiveRightAnim:"charC_receiveRight",victory:"charC_victory"}};this.config=s[n]||s.characterA,this.sprite=this.scene.physics.add.sprite(i,r,this.config.textureKey,this.config.startFrame),this.sprite.setScale(2.5),this.sprite.body.setSize(.9*this.sprite.width,.9*this.sprite.height,!0),this.sprite.setData("player",this),this.facing="right",this.isOnGround=!1,this.isJumping=!1,this.jumpStartTime=0,this.sprite.on("animationcomplete",e=>{try{e.key!==this.config.receiveLeftAnim&&e.key!==this.config.receiveRightAnim||(this.isReceiving=!1)}catch(t){console.error(`Animation complete handler error for ${e.key}:`,t)}})}isGrounded(){const e=this.sprite.body;return!!e&&(e.blocked.down||e.touching.down)}isNearGround(e=12){const t=this.sprite.body;if(!t)return!1;if("number"!=typeof this.scene.groundY)return!1;const i=t.y+t.height;return Math.abs(i-this.scene.groundY)<=e}moveLeft(){this.isParalyzed||this.isReceiving||(this.sprite.setVelocityX(-this.moveSpeed),this.facing="left",this.playAnimation(this.config.runLeftAnim))}moveRight(){this.isParalyzed||this.isReceiving||(this.sprite.setVelocityX(this.moveSpeed),this.facing="right",this.playAnimation(this.config.runRightAnim))}jumpLeft(){this.isParalyzed||(this.isGrounded()||this.isNearGround(20))&&(this.isReceiving=!1,this.isJumping=!0,this.jumpStartTime=this.scene.time.now,this.sprite.setVelocityY(-this.jumpSpeed),this.facing="left",this.playAnimation(this.config.jumpLeftAnim),this.scene?.playSfx?.(this.scene?.sfx?.jump))}jumpRight(){this.isParalyzed||(this.isGrounded()||this.isNearGround(20))&&(this.isReceiving=!1,this.isJumping=!0,this.jumpStartTime=this.scene.time.now,this.sprite.setVelocityY(-this.jumpSpeed),this.facing="right",this.playAnimation(this.config.jumpRightAnim),this.scene?.playSfx?.(this.scene?.sfx?.jump))}receiveLeft(){this.isParalyzed||this.isReceiving||(this.isGrounded()||this.isNearGround(20))&&(this.isReceiving=!0,this.sprite.setVelocityX(0),this.facing="left",this.playAnimation(this.config.receiveLeftAnim))}receiveRight(){this.isParalyzed||this.isReceiving||(this.isGrounded()||this.isNearGround(20))&&(this.isReceiving=!0,this.sprite.setVelocityX(0),this.facing="right",this.playAnimation(this.config.receiveRightAnim))}idleLeft(){this.isReceiving||(this.sprite.setVelocityX(0),this.facing="left",this.playAnimation(this.config.idleLeftAnim))}idleRight(){this.isReceiving||(this.sprite.setVelocityX(0),this.facing="right",this.playAnimation(this.config.idleRightAnim))}setBounds(e,t,i,r){this.boundsLeft=e,this.boundsRight=t,this.boundsTop=i,this.boundsBottom=r}clampWithinBounds(){const e=this.sprite.width/2;this.sprite.x-e<this.boundsLeft&&(this.sprite.x=this.boundsLeft+e,this.sprite.setVelocityX(0)),this.sprite.x+e>this.boundsRight&&(this.sprite.x=this.boundsRight-e,this.sprite.setVelocityX(0))}setPosition(e,t){this.sprite&&(this.sprite.setPosition(e,t),this.sprite.setVelocity(0,0),this.updateMultiplierTextPosition())}updateMultiplierTextPosition(){if(!this.multiplierText||!this.sprite)return;const e=.6*(this.sprite.displayHeight||this.sprite.height||40);this.multiplierText.setPosition(this.sprite.x,this.sprite.y-e)}playAnimation(e){if(!e)return;if(!this.sprite.anims)return;if(this.isJumping&&e!==this.config.jumpLeftAnim&&e!==this.config.jumpRightAnim)return;const t=this.sprite.anims.currentAnim;this.sprite.anims.isPlaying&&t&&t.key===e||this.sprite.anims.play(e,!0)}update(){if(this.clampWithinBounds(),this.updateMultiplierTextPosition(),this.sprite.body){const e=this.isOnGround;this.isOnGround=this.isGrounded();const t=this.sprite.anims.currentAnim,i=t?t.key:null;this.isParalyzed&&this.sprite.setVelocityX(0),this.isReceiving&&i!==this.config.receiveLeftAnim&&i!==this.config.receiveRightAnim&&(this.isReceiving=!1),this.isJumping&&i&&i!==this.config.jumpLeftAnim&&i!==this.config.jumpRightAnim&&(this.isJumping=!1),this.isJumping&&this.scene.time.now-this.jumpStartTime>1500&&(this.isJumping=!1),this.isJumping&&!e&&this.isOnGround&&(this.isJumping=!1,"left"===this.facing?this.idleLeft():this.idleRight())}}applyPowerUp(e){return!(this.powerUpInventory.length>=2||(this.powerUpInventory.push(e),0))}useNextPowerUp(e=null){if(!Array.isArray(this.powerUpInventory)||0===this.powerUpInventory.length)return null;let t;if(e){const i=this.powerUpInventory.indexOf(e);if(i<0)return null;t=e,this.powerUpInventory.splice(i,1)}else t=this.powerUpInventory.shift();return this.activatePowerUp(t),this.scene?.updatePlayerInventoryUI?.(this),t}activatePowerUp(e){switch(e){case"velocidad":this.applyOrRefreshTimedEffect("velocidad",m.velocidad);break;case"ralentizar":{const e=this.getOpponent();e&&e.applyOrRefreshTimedEffect("ralentizar",m.ralentizar);break}case"paralizar":{const e=this.getOpponent();e&&e.applyOrRefreshTimedEffect("paralizar",m.paralizar);break}case"por2":case"por3":this.applyOrRefreshTimedEffect(e,m[e])}}updatePowerUps(){const e=this.scene.time.now;let t=!1,i=!1;for(const r in this.activePowerUps)if(!(e<=this.activePowerUps[r]))switch(console.log(`[Player] Expirando powerup: ${r}`),delete this.activePowerUps[r],r){case"velocidad":this.setSpeedEffect(!1),t=!0;break;case"ralentizar":this.setSlowEffect(!1),t=!0;break;case"paralizar":this.setParalyzed(!1);break;case"por2":case"por3":i=!0}t&&this.recalculateMoveSpeed(),i&&this.recalculateScoreEffect()}getNextPowerUpType(){return this.powerUpInventory.length>0?this.powerUpInventory[0]:null}applyPowerUpEffect(e){console.log(`Aplicando efecto: ${e} a ${this.id}`),this.applyOrRefreshTimedEffect(e,m[e])}setParalyzed(e){this.isParalyzed=e,e?(this.sprite.setTint(16733525),this.sprite.setAlpha(1),this.paralysisTween&&(this.paralysisTween.stop(),this.paralysisTween=null),this.paralysisTween=this.scene.tweens.add({targets:this.sprite,alpha:.3,yoyo:!0,duration:200,repeat:-1}),this.sprite.setVelocityX(0)):(this.sprite.setAlpha(1),this.paralysisTween&&(this.paralysisTween.stop(),this.paralysisTween=null),this.refreshPowerUpVisuals())}setSpeedEffect(e){this.speedEffectActive=e,this.refreshPowerUpVisuals()}setSlowEffect(e){this.slowEffectActive=e,this.refreshPowerUpVisuals()}recalculateMoveSpeed(){let e=1;this.activePowerUps.velocidad&&(e*=1.5),this.activePowerUps.ralentizar&&(e*=.5),this.moveSpeed=this.baseMoveSpeed*e}recalculateScoreEffect(){let e=1;this.activePowerUps.por2&&(e=Math.max(e,2)),this.activePowerUps.por3&&(e=Math.max(e,3)),this.scoreMultiplier=e,this.multiplierText&&(this.scoreMultiplier>1?(this.multiplierText.setText("x"+this.scoreMultiplier),this.multiplierText.setVisible(!0)):this.multiplierText.setVisible(!1)),this.refreshPowerUpVisuals()}applyOrRefreshTimedEffect(e,t){const i=this.scene.time.now;this.activePowerUps[e]=i+t,"velocidad"===e&&this.setSpeedEffect(!0),"ralentizar"===e&&this.setSlowEffect(!0),"paralizar"===e&&this.setParalyzed(!0),"velocidad"!==e&&"ralentizar"!==e||this.recalculateMoveSpeed(),"por2"!==e&&"por3"!==e||this.recalculateScoreEffect()}refreshPowerUpVisuals(){this.isParalyzed||(this.slowEffectActive?this.sprite.setTint(5592575):this.speedEffectActive?this.sprite.setTint(16747520):this.scoreMultiplier>1?this.sprite.setTint(3329330):this.sprite.clearTint())}getOpponent(){return this.scene.players?Array.from(this.scene.players.values()).find(e=>e!==this):null}}class v{constructor(e,t){this.player=e,this.powerUpType=t,this.stored=!1}execute(){return this.stored=this.player.applyPowerUp(this.powerUpType),this.stored}}class _{constructor(e,t,i,r){this.scene=e,this.type=r,this.isCollected=!1,this._destroyed=!1,this._cooldownUntil=0,this.fadeStart=3e3,this.lifetime=5e3,this._overlaps=[],this.fadeTween=null,this._lifetimeTimer=null,this.sprite=e.physics.add.staticImage(t,i,r).setScale(1.2).setInteractive(),this.sprite.refreshBody&&this.sprite.refreshBody();const n=Math.max(0,Math.min(this.fadeStart,this.lifetime)),s=Math.max(0,this.lifetime-n);s>0&&(this.fadeTween=e.tweens.add({targets:this.sprite,alpha:0,delay:n,duration:s}));const o=e.players;o&&"function"==typeof o.forEach&&o.forEach(t=>{if(!t?.sprite)return;const i=e.physics.add.overlap(t.sprite,this.sprite,()=>this.collect(t),null,this);this._overlaps.push(i)}),this._lifetimeTimer=e.time.delayedCall(this.lifetime,()=>{this.destroy()})}collect(e){if(console.log("[PowerUp] overlap con",e.id,"tipo",this.type),this._destroyed)return;if(this.isCollected)return;const t=this.scene.time.now;if(this._cooldownUntil&&t<this._cooldownUntil)return;this.isCollected=!0;const i=new v(e,this.type);if(this.scene.commandProcessor.process(i),!i.stored)return this.isCollected=!1,void(this._cooldownUntil=t+300);this.destroy(),this.scene.updatePlayerInventoryUI?.(e)}destroy(){if(!this._destroyed){if(this._destroyed=!0,Array.isArray(this._overlaps)&&(this._overlaps.forEach(e=>{try{e.destroy()}catch{}}),this._overlaps=[]),this.fadeTween){try{this.fadeTween.stop()}catch{}this.fadeTween=null}if(this._lifetimeTimer&&(this._lifetimeTimer.remove(!1),this._lifetimeTimer=null),this.sprite){try{this.sprite.destroy()}catch{}this.sprite=null}Array.isArray(this.scene.powerUps)&&(this.scene.powerUps=this.scene.powerUps.filter(e=>e!==this))}}}class b{constructor(e,t,i){this.scene=e,this.players=null,this.commandProcessor=null,this.sprite=e.physics.add.sprite(t,i,"ball"),this.sprite.setScale(1),this.sprite.setBounce(.8),this.sprite.setCollideWorldBounds(!0),this.sprite.setData("ball",this),this.lastTouchedBy=null,this.touchCount=0,this.courtSide="left",this.isBallLive=!0,this.netX=480,this.lastHitTime=0,this.lastHitPlayerId=null,this.seed=42,this.rng=this._pseudoRandom(this.seed)}_pseudoRandom(e){let t=e;return function(){return t=(361652*t+493342125)%969454359,t/969454358}}_getRandomFactor(e=.95,t=1.05){return e+(t-e)*this.rng()}hit(e,t,i,r=!1){if(!this.isBallLive)return;const n=this.scene.time.now;if(this.lastHitPlayerId===e.id&&n-this.lastHitTime<120)return;if(this.lastHitPlayerId=e.id,this.lastHitTime=n,this.lastTouchedBy===e.id?this.touchCount++:(this.touchCount=1,this.lastTouchedBy=e.id),this.touchCount>3)return void this.onFalta("toqueExcedido",e);let s,o;if(r?this.scene?.playSfx?.(this.scene?.sfx?.receive):i&&this.scene?.playSfx?.(this.scene?.sfx?.spike),r){const e=180,i=-350,r=this._getRandomFactor();s="left"===t?-e*r:e*r,o=i*this._getRandomFactor()}else if(i){const e=220,i=-150,r=this._getRandomFactor();s="left"===t?-e*r:e*r,o=i*this._getRandomFactor()}else{const e=200;s="left"===t?-e:e,o=-100}this.sprite.setVelocity(s,o),s>0?this.courtSide="right":s<0&&(this.courtSide="left")}crossNet(){this.touchCount=0,this.lastTouchedBy=null,this.courtSide="left"===this.courtSide?"right":"left"}onGrounded(){if(!this.isBallLive)return;const e=this.sprite.x<this.netX,t=this.sprite.x>this.netX;e?(this.onRallyEnd("player2"),this.resetRally("player2")):t&&(this.onRallyEnd("player1"),this.resetRally("player1"))}onFalta(e,t){if(!this.isBallLive)return;const i="player1"===t.id?"player2":"player1";this.onRallyEnd(i),this.resetRally(i)}onRallyEnd(e){this.isBallLive=!1,this.scene.events.emit("rallyConcluded",{scoringPlayerId:e,touchCount:this.touchCount,lastTouchedBy:this.lastTouchedBy})}_getSubtleNudge(e,t,i){const r=12*(this.rng()<.5?-1:1);return{spawnX:Math.max(t,Math.min(i-t,e+r)),velocityX:r}}setServePosition(e){const t=this.scene.worldWidth??this.scene.scale?.width??2*this.netX,i=(e,t,i)=>Math.max(t,Math.min(i,e));let r=this.netX,n=0;if("player1"===e||"player2"===e){const n=this.scene.players?.get?this.scene.players.get(e):null;r=n?.sprite?"player1"===e?i(n.sprite.x,60,this.netX-60):i(n.sprite.x,this.netX+60,t-60):"player1"===e?this.netX-100:this.netX+100}else{const e=this._getSubtleNudge(r,60,t);r=e.spawnX,n=e.velocityX}this.sprite.setPosition(r,100),this.sprite.setVelocity(n,0)}resetRally(e){this.isBallLive=!0,this.lastTouchedBy=null,this.touchCount=0,this.setServePosition(e),this.lastHitTime=0,this.lastHitPlayerId=null}update(){this.isBallLive&&(this.sprite.x<this.netX-20?this.courtSide="left":this.sprite.x>this.netX+20&&(this.courtSide="right"))}}class x{constructor(){this.players=new Map,this.gameScene=null}setPlayers(e){this.players=e}setGameScene(e){this.gameScene=e}process(e){e.execute()}}class w{execute(){}serialize(){}getPlayer(){}}class T extends w{constructor(e,t){super(),this.player=e,this.direction=t}execute(){switch(this.direction){case"left":this.player.moveLeft();break;case"right":this.player.moveRight();break;case"jumpLeft":this.player.jumpLeft();break;case"jumpRight":this.player.jumpRight();break;case"receiveLeft":this.player.receiveLeft();break;case"receiveRight":this.player.receiveRight();break;case"idleLeft":this.player.idleLeft();break;default:this.player.idleRight()}}getPlayer(){return this.player.id}serialize(){return{type:"MovePlayerCommand",playerId:this.player.id,direction:this.direction}}}class E extends t().Scene{tiempoTotal=60;tiempoRestante;timerText;timerEvent;constructor(){super("Game_Scene")}init(e){this.players=new Map,this.inputMappings=[],this.commandProcessor=new x,this.player1=e.player1,this.player2=e.player2,this.selectedScenario=e.selectedScenario,this.ball=null,this.scoreP1=0,this.scoreP2=0,this.setsP1=0,this.setsP2=0,this.maxSets=3,this.currentSet=1,this.isGoldenPoint=!1,this.isSetEnding=!1,this.tiempoRestante=this.tiempoTotal}preload(){this.load.spritesheet("charA_move","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_A/ANIMACIONES_CORRER_RECIBIR.png",{frameWidth:29,frameHeight:44}),this.load.spritesheet("charA_jump","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_A/ANIMACION_REMATE.png",{frameWidth:32,frameHeight:44}),this.load.spritesheet("charB_move","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_B/ANIMACIONES_CORRER_RECIBIR.png",{frameWidth:29,frameHeight:44}),this.load.spritesheet("charB_jump","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_B/ANIMACION_REMATE.png",{frameWidth:32,frameHeight:44}),this.load.spritesheet("charC_move","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_C/ANIMACIONES_CORRER_RECIBIR.png",{frameWidth:29,frameHeight:44}),this.load.spritesheet("charC_jump","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_C/ANIMACION_REMATE.png",{frameWidth:32,frameHeight:44}),this.load.image("Gym","ASSETS/FONDOS/GIMNASIO.png"),this.load.image("Playa","ASSETS/FONDOS/PLAYA.png"),this.load.image("Jardin","ASSETS/FONDOS/JARDIN.png"),this.load.image("por2","ASSETS/ITEMS/POWER UPS/MULTIPLICADOR 2.png"),this.load.image("por3","ASSETS/ITEMS/POWER UPS/MULTIPLICADOR 3.png"),this.load.image("paralizar","ASSETS/ITEMS/POWER UPS/PARALIZADO.png"),this.load.image("ralentizar","ASSETS/ITEMS/POWER UPS/RELENTIZAR.png"),this.load.image("velocidad","ASSETS/ITEMS/POWER UPS/VELOCIDAD.png"),this.load.image("marcoPowerUp","ASSETS/JUEGO/Base_powerUp.png"),this.load.image("ball","ASSETS/ITEMS/PELOTAS/P_NORMAL.png"),this.load.image("red","ASSETS/JUEGO/RED.png"),this.load.image("reloj","ASSETS/JUEGO/TIMER.png"),this.load.image("marcoGeneral","ASSETS/JUEGO/MARCADOR_SET.png"),this.load.audio("sfx_silbato","ASSETS/SONIDO/Silbato_inicio_partido_1p4s.mp3"),this.load.audio("sfx_remate","ASSETS/SONIDO/Toque_pelota_remate_03s.mp3"),this.load.audio("sfx_recepcion","ASSETS/SONIDO/Toque_pelota_recepcion.mp3"),this.load.audio("sfx_salto","ASSETS/SONIDO/SonidoSalto_1p.mp3"),this.load.audio("sfx_punto","ASSETS/SONIDO/SonidoPunto.mp3")}create(){const{width:e,height:t}=this.scale;this.worldWidth=e,this.worldHeight=t;const i=this.game.globals.defaultTextStyle;this.events.off("rallyConcluded"),this.events.off("resume"),this.sfx={whistle:"sfx_silbato",spike:"sfx_remate",receive:"sfx_recepcion",jump:"sfx_salto",point:"sfx_punto"},this.playSfx(this.sfx.whistle),this.timerText=this.add.text(this.scale.width/2,30,"",{...i,fontSize:"32px",color:"#ffffff"}).setOrigin(.5,0).setScrollFactor(0).setDepth(9999),this.timerIcon=this.add.image(this.scale.width/2,45,"reloj").setOrigin(.5).setScale(2).setScrollFactor(0).setDepth(9e3),this.setFrame=this.add.image(this.scale.width/2,120,"marcoGeneral").setOrigin(.5).setScale(1).setDepth(9998),this.setText=this.add.text(this.scale.width/2,120,`SET ${this.currentSet}`,{...i,fontSize:"32px",color:"#ffffff"}).setOrigin(.5).setDepth(9999);const r=this.setFrame.displayWidth,n=this.setFrame.displayHeight,s=this.setFrame.y+Math.round(n/2)+13,o=Math.round(.22*r);this.setScoreFrameLeft=this.add.image(this.scale.width/2-o,s,"marcoGeneral").setOrigin(.5).setScale(.4,.38).setDepth(9998),this.setScoreFrameRight=this.add.image(this.scale.width/2+o,s,"marcoGeneral").setOrigin(.5).setScale(.4,.38).setDepth(9998),this.setScoreLeft=this.add.text(this.scale.width/2-o,s,`${this.setsP1}`,{...i,fontSize:"28px",color:"#ffffff"}).setOrigin(.5).setDepth(9999),this.setScoreRight=this.add.text(this.scale.width/2+o,s,`${this.setsP2}`,{...i,fontSize:"28px",color:"#ffffff"}).setOrigin(.5).setDepth(9999),this.setWinnerText=this.add.text(this.scale.width/2,205,"",{...i,fontSize:"28px",color:"#ffffff",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setDepth(9999).setVisible(!1),this.timerEvent=this.time.addEvent({delay:1e3,callback:this.updateTimer,callbackScope:this,loop:!0}),this.updateTimer(),this.add.image(e/2,t/2,this.selectedScenario).setOrigin(.5).setDisplaySize(e,t).setDepth(-1);const a=this.physics.add.staticSprite(e/2,t-160,"red").setScale(.6),l=this.textures.get("red").getSourceImage();a.body.setSize(.5*l.width,.5*l.height),a.body.setOffset(-a.body.width/2,-a.body.height/2),a.body.updateFromGameObject(),this.red=a,this._createAnimations(),this.pointsLeft=0,this.pointsRight=0,this.scoreFrameLeft=this.add.image(200,50,"marcoGeneral").setScale(.8,.55).setOrigin(.5),this.scoreFrameRight=this.add.image(this.worldWidth-200,50,"marcoGeneral").setScale(.8,.55).setOrigin(.5),this.scoreLeft=this.add.text(200,45,"0",{...i,fontSize:"40px",color:"#ffffffff"}).setOrigin(.5).setDepth(9999),this.rightScore=this.add.text(this.worldWidth-200,45,"0",{...i,fontSize:"40px",color:"#ffffffff"}).setOrigin(.5).setDepth(9999),this.groundHeight=20,this.groundY=this.worldHeight-90;const h=this.add.rectangle(this.worldWidth/2,this.groundY,this.worldWidth,20).setOrigin(.5,0).setVisible(!1);this.physics.add.existing(h,!0),this._createPlayers(),this._setupPhysicsWorld(h),this._setupInputMappings(),this.powerUps=[],this.maxPowerUps=2,this.powerUpSpawnConfig={minDelayMs:3500,maxDelayMs:7e3,weights:{velocidad:3,ralentizar:2,paralizar:1,por2:3,por3:2},cooldownMs:{paralizar:1e4}},this.powerUpLastSpawnAt={},this.inventoryUI={player1:[this.add.image(50,50,"por2").setScale(1.4).setVisible(!1).setDepth(1),this.add.image(110,50,"por2").setScale(1.4).setVisible(!1).setDepth(1)],player2:[this.add.image(this.worldWidth-110,50,"por2").setScale(1.4).setVisible(!1).setDepth(1),this.add.image(this.worldWidth-50,50,"por2").setScale(1.4).setVisible(!1).setDepth(1)]},this.schedulePowerUpSpawn(),this.inventoryFrames={player1:[this.add.image(50,50,"marcoPowerUp").setScale(1).setOrigin(.5).setDepth(0),this.add.image(110,50,"marcoPowerUp").setScale(1).setOrigin(.5).setDepth(0)],player2:[this.add.image(this.worldWidth-110,50,"marcoPowerUp").setScale(1).setOrigin(.5).setDepth(0),this.add.image(this.worldWidth-50,50,"marcoPowerUp").setScale(1).setOrigin(.5).setDepth(0)]},this._createBall(),this.ball.setServePosition(),this._setupBallCollisions(),this._setupBallEvents(),this.input.keyboard.on("keydown-ESC",()=>{this.scene.pause(),this.timerEvent.paused=!0,this.scene.launch("Pause_Scene")}),this.events.on("resume",()=>{this.timerEvent.paused=!1})}schedulePowerUpSpawn(){const{minDelayMs:e,maxDelayMs:i}=this.powerUpSpawnConfig,r=t().Math.Between(e,i);this.time.delayedCall(r,()=>{if(this.powerUps.length<this.maxPowerUps){const e=t().Math.Between(80,this.worldWidth-80),i=t().Math.Between(this.worldHeight-220,this.worldHeight-120),r=this._getWeightedPowerUpType();if(r){const t=new _(this,e,i,r);this.powerUps.push(t),this.powerUpLastSpawnAt[r]=this.time.now}}this.schedulePowerUpSpawn()})}_getWeightedPowerUpType(){const{weights:e,cooldownMs:i}=this.powerUpSpawnConfig,r=this.time.now,n=Object.entries(e).filter(([e,t])=>{if(t<=0)return!1;const n=i?.[e];if(!n)return!0;const s=this.powerUpLastSpawnAt?.[e]||0;return r-s>=n});if(!n.length)return null;const s=n.reduce((e,[,t])=>e+t,0);let o=t().Math.Between(1,s);for(const[e,t]of n)if(o-=t,o<=0)return console.log("[Game_Scene] Power-up aleatorio: ",e),e;return n[n.length-1][0]}playSfx(e){e&&this.sound.play(e,{volume:h()})}update(){this._handleInputForAllPlayers(),this.players.forEach(e=>e.updatePowerUps()),this.ball&&(this.ball.update(),this.ball.isBallLive&&this.ball.sprite.y>this.groundY&&this.ball.onGrounded(),(this.ball.sprite.x<475&&"right"===this.ball.courtSide||this.ball.sprite.x>485&&"left"===this.ball.courtSide)&&this.ball.crossNet())}updateTimer(){this.tiempoRestante--;const e=Math.floor(this.tiempoRestante/60),t=this.tiempoRestante%60,i=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;this.timerText.setText(i),this.tiempoRestante<=0&&(this.timerEvent.paused=!0,console.log("FIN DEL TIEMPO"),this.scoreP1>this.scoreP2?this._endSet("player1"):this.scoreP2>this.scoreP1?this._endSet("player2"):(console.log("Empate en el set"),this.isGoldenPoint=!0,this.setWinnerText&&(this.setWinnerText.setText("EMPATE: punto de oro"),this.setWinnerText.setVisible(!0))))}updateSetScoreUI(){this.setScoreLeft&&this.setScoreLeft.setText(this.setsP1.toString()),this.setScoreRight&&this.setScoreRight.setText(this.setsP2.toString())}updatePlayerInventoryUI(e){const t=this.inventoryUI[e.id];for(let i=0;i<2;i++)e.powerUpInventory[i]?(t[i].setTexture(e.powerUpInventory[i]),t[i].setVisible(!0)):t[i].setVisible(!1)}_createAnimations(){this.anims.create({key:"charA_idleRight",frames:this.anims.generateFrameNumbers("charA_move",{start:0,end:1}),frameRate:5,repeat:-1}),this.anims.create({key:"charA_idleLeft",frames:this.anims.generateFrameNumbers("charA_move",{start:20,end:21}).reverse(),frameRate:5,repeat:-1}),this.anims.create({key:"charA_receiveRight",frames:this.anims.generateFrameNumbers("charA_move",{start:0,end:10}),frameRate:17,repeat:0}),this.anims.create({key:"charA_receiveLeft",frames:this.anims.generateFrameNumbers("charA_move",{start:11,end:21}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charA_runRight",frames:this.anims.generateFrameNumbers("charA_move",{start:22,end:32}),frameRate:22,repeat:-1}),this.anims.create({key:"charA_runLeft",frames:this.anims.generateFrameNumbers("charA_move",{start:33,end:43}).reverse(),frameRate:22,repeat:-1}),this.anims.create({key:"charA_jumpRight",frames:this.anims.generateFrameNumbers("charA_jump",{start:0,end:12}),frameRate:17,repeat:0}),this.anims.create({key:"charA_jumpLeft",frames:this.anims.generateFrameNumbers("charA_jump",{start:13,end:25}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charB_idleRight",frames:this.anims.generateFrameNumbers("charB_move",{start:0,end:1}),frameRate:5,repeat:-1}),this.anims.create({key:"charB_idleLeft",frames:this.anims.generateFrameNumbers("charB_move",{start:20,end:21}).reverse(),frameRate:5,repeat:-1}),this.anims.create({key:"charB_receiveRight",frames:this.anims.generateFrameNumbers("charB_move",{start:0,end:10}),frameRate:17,repeat:0}),this.anims.create({key:"charB_receiveLeft",frames:this.anims.generateFrameNumbers("charB_move",{start:11,end:21}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charB_runRight",frames:this.anims.generateFrameNumbers("charB_move",{start:22,end:32}),frameRate:22,repeat:-1}),this.anims.create({key:"charB_runLeft",frames:this.anims.generateFrameNumbers("charB_move",{start:33,end:43}).reverse(),frameRate:22,repeat:-1}),this.anims.create({key:"charB_jumpRight",frames:this.anims.generateFrameNumbers("charB_jump",{start:0,end:12}),frameRate:17,repeat:0}),this.anims.create({key:"charB_jumpLeft",frames:this.anims.generateFrameNumbers("charB_jump",{start:13,end:25}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charC_idleRight",frames:this.anims.generateFrameNumbers("charC_move",{start:0,end:1}),frameRate:5,repeat:-1}),this.anims.create({key:"charC_idleLeft",frames:this.anims.generateFrameNumbers("charC_move",{start:20,end:21}).reverse(),frameRate:5,repeat:-1}),this.anims.create({key:"charC_receiveRight",frames:this.anims.generateFrameNumbers("charC_move",{start:0,end:10}),frameRate:17,repeat:0}),this.anims.create({key:"charC_receiveLeft",frames:this.anims.generateFrameNumbers("charC_move",{start:11,end:21}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charC_runRight",frames:this.anims.generateFrameNumbers("charC_move",{start:22,end:32}),frameRate:22,repeat:-1}),this.anims.create({key:"charC_runLeft",frames:this.anims.generateFrameNumbers("charC_move",{start:33,end:43}).reverse(),frameRate:22,repeat:-1}),this.anims.create({key:"charC_jumpRight",frames:this.anims.generateFrameNumbers("charC_jump",{start:0,end:12}),frameRate:17,repeat:0}),this.anims.create({key:"charC_jumpLeft",frames:this.anims.generateFrameNumbers("charC_jump",{start:13,end:25}).reverse(),frameRate:17,repeat:0})}_createPlayers(){const e=this.player1.character,t=this.player2.character,i=new S(this,"player1",.25*this.worldWidth,this.groundY-100,e),r=new S(this,"player2",.75*this.worldWidth,this.groundY-100,t);this.players.set("player1",i),this.players.set("player2",r);const n=Math.floor(this.groundY);i.setBounds(80,455,50,n),r.setBounds(505,this.worldWidth-80,50,n),this.commandProcessor.setPlayers(this.players),this.commandProcessor.setGameScene(this),i.idleRight(),r.idleLeft()}_setupPhysicsWorld(e){this.players.forEach(t=>{this.physics.add.collider(t.sprite,e),this.physics.add.collider(t.sprite,this.red,()=>{console.log(`${t.id} tocó la red!`),t.sprite.setVelocityX(0)})})}_setupInputMappings(){this.inputMappings=[{playerId:"player1",leftKey:"A",rightKey:"D",jumpKey:"W",receiveKey:"S",powerKey:"E"},{playerId:"player2",leftKey:"J",rightKey:"L",jumpKey:"I",receiveKey:"K",powerKey:"O"}].map(e=>({playerId:e.playerId,leftKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.leftKey]),rightKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.rightKey]),jumpKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.jumpKey]),receiveKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.receiveKey]),powerKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.powerKey])}))}_handleInputForAllPlayers(){this.inputMappings.forEach(e=>{const i=this.players.get(e.playerId);if(!i)return;if(i.isParalyzed){const e="left"===i.facing?"idleLeft":"idleRight";return void this.commandProcessor.process(new T(i,e))}let r;if(r=e.leftKeyObj.isDown?"left":e.rightKeyObj.isDown?"right":"left"===i.facing?"idleLeft":"idleRight",i.isJumping||this.commandProcessor.process(new T(i,r)),t().Input.Keyboard.JustDown(e.receiveKeyObj)){const e="left"===i.facing?"receiveLeft":"receiveRight";this.commandProcessor.process(new T(i,e))}if(t().Input.Keyboard.JustDown(e.jumpKeyObj)){const e="left"===i.facing?"jumpLeft":"jumpRight";this.commandProcessor.process(new T(i,e))}t().Input.Keyboard.JustDown(e.powerKeyObj)&&(i.useNextPowerUp(),this.updatePlayerInventoryUI(i))}),this.players.forEach(e=>e.update())}_createBall(){this.ball=new b(this,this.worldWidth/2,150)}_setupBallCollisions(){this.players.forEach(e=>{this.physics.add.overlap(this.ball.sprite,e.sprite,()=>this._onBallPlayerCollision(this.ball,e),null,this)}),this.physics.add.collider(this.ball.sprite,this.red,()=>{console.log("La pelota toca la red!"),this.ball.sprite.setVelocityX(.5*this.ball.sprite.body.velocity.x),this.ball.sprite.setVelocityY(.5*this.ball.sprite.body.velocity.y)}),this.worldHeight,this.ball.sprite.setCollideWorldBounds(!0),this.ball.sprite.setBounce(.8)}_setupBallEvents(){this.events.off("rallyConcluded"),this.events.on("rallyConcluded",e=>{if(this.isSetEnding)return;console.log(`Rally concluded: ${e.scoringPlayerId} scores!`);const t=e.scoringPlayerId,i=this.players.get(t),r=i&&i.scoreMultiplier||1;if("player1"===t?(this.pointsLeft+=r,this.scoreLeft.setText(this.pointsLeft.toString()),this.scoreP1+=r):"player2"===t&&(this.pointsRight+=r,this.rightScore.setText(this.pointsRight.toString()),this.scoreP2+=r),this.playSfx(this.sfx.point),this.isGoldenPoint)return this.isGoldenPoint=!1,void this._endSet(t);this._checkWinCondition()})}_isBallInHitZone(e,t,i,r){const n=t.sprite.body;if(!n)return!1;const s=e.x,o=e.y,a=n.y,l=n.height,h=n.x+.5*n.width,c=i?{top:-.1,bottom:.6}:r?{top:.35,bottom:.85}:{top:.25,bottom:.85};if(o<a+l*c.top||o>a+l*c.bottom)return!1;const u="right"===t.facing,p=r||i,d=n.width*(p?.9:.75),f=n.width*(p?.25:.15);return!(s<(u?h-f:h-d)||s>(u?h+d:h+f))}_onBallPlayerCollision(e,t){if(!e.isBallLive)return;const i=!t.sprite.body.blocked.down,r=t.isReceiving,n=t.facing;this._isBallInHitZone(e.sprite,t,i,r)&&e.hit(t,n,i,r)}_endGame(e){this.timerEvent&&(this.timerEvent.remove(!1),this.timerEvent=null),this.playSfx(this.sfx.whistle),this.physics&&this.physics.world&&this.physics.world.pause(),console.log("Partida Local terminada. Ganador:",e),this.scene.start("EndGame_Scene",{winner:e,player1:this.player1,player2:this.player2})}_checkWinCondition(){const e=this.scoreP1-this.scoreP2;if(Math.max(this.scoreP1,this.scoreP2)<11||Math.abs(e)<2)return;const t=e>0?"player1":"player2";this._endSet(t)}_endSet(e){if(this.isSetEnding)return;this.isSetEnding=!0,this.ball?.sprite&&(this.ball.isBallLive=!1,this.ball.sprite.setVelocity(0,0)),"player1"===e?this.setsP1++:"player2"===e&&this.setsP2++,console.log(`Set terminado. Score sets: P1=${this.setsP1}, P2=${this.setsP2}`),this.updateSetScoreUI();const t="player1"===e?"Jugador 1":"Jugador 2";this.setWinnerText.setText(`SET para ${t}`),this.setWinnerText.setVisible(!0),this.currentSet++,2===this.setsP1||2===this.setsP2?this.time.delayedCall(2e3,()=>{this._endGame(e)}):this.time.delayedCall(2e3,()=>{this.setWinnerText&&this.setWinnerText.setVisible(!1),this._resetSet()})}_resetSet(){this.isSetEnding=!1,this.isGoldenPoint=!1,this.setText.setText(`SET ${this.currentSet}`),this.tiempoRestante=this.tiempoTotal,this.timerEvent.paused=!1,this.updateTimer(),this.scoreP1=0,this.scoreP2=0,this.pointsLeft=0,this.pointsRight=0,this.scoreLeft.setText("0"),this.rightScore.setText("0"),this.ball.resetRally();const e=this.players.get("player1"),t=this.players.get("player2");e.setPosition(.25*this.worldWidth,.7*this.worldHeight),t.setPosition(.75*this.worldWidth,.7*this.worldHeight),e.idleRight(),t.idleLeft(),this.playSfx(this.sfx.whistle)}shutdown(){this.events.off("rallyConcluded"),this.timerEvent&&this.timerEvent.destroy()}}class A extends t().Scene{constructor(){super("Tutorial_Scene"),this.pageIndex=0,this.returnScene="Menu_Scene"}init(e){this.returnScene=e?.returnScene??"Menu_Scene"}preload(){this.load.image("tut0_controles","ASSETS/TUTORIAL/TUT0_Controles.png"),this.load.image("tut0_controlesOnline","ASSETS/TUTORIAL/TUT0_ControlesOnline.png"),this.load.image("tut1_set","ASSETS/TUTORIAL/TUT1_Set.png"),this.load.image("tut2_pelota","ASSETS/TUTORIAL/TUT2_Pelota.png"),this.load.image("tut3_powerup","ASSETS/TUTORIAL/TUT3_Powerup.png"),this.load.image("tut4_lista","ASSETS/TUTORIAL/TUT4_Lista.png"),this.load.image("fondo","ASSETS/FONDOS/FONDO_BASE.png"),this.load.image("botonVolver","ASSETS/UI/BOTONES/FLECHA_VOLVER.png")}create(){const{width:e,height:t}=this.scale,i=e/2,r={...this.game.globals?.defaultTextStyle??{fontFamily:"VT323",fontSize:"20px",color:"#000000"}};p(this),this.add.image(0,0,"fondo").setOrigin(0).setDepth(-1).setDisplaySize(e,t),this.mainTitleText=this.add.text(i,.1*t,"Tutorial",{...r,fontSize:"42px",color:"#5f0000ff"}).setOrigin(.5),g(this,{x:.06*e,y:.08*t,texture:"botonVolver",scale:1,hoverScale:1.1,onClick:()=>this.scene.start(this.returnScene)}),this.pageIndex=0,this.pages=[{key:"tut0_controles",title:"Controles Local"},{key:"tut0_controlesOnline",title:"Controles Online"},{key:"tut1_set",title:"Reglas básicas: set"},{key:"tut2_pelota",title:"Reglas básicas: pelota"},{key:"tut3_powerup",title:"Reglas básicas: power-ups"},{key:"tut4_lista",title:"Lista de power-ups"}];const n=Math.max(8,Math.round(.015*Math.min(e,t))),s=Math.max(6,Math.round(.012*t)),o=.91*t,a=this.mainTitleText.y+this.mainTitleText.height+s,l=o-s,h=Math.max(0,l-a),c=Math.max(0,e-2*n);this.layout={panelTop:a,panelHeight:h,panelWidth:c},this.slideImage=this.add.image(i,a+h/2,this.pages[0].key),this._fitImage(this.slideImage,c,h),this.pageIndicator=this.add.text(i,o+20,"",{...r,fontSize:"28px",color:"#000"}).setOrigin(.5);const u={...r,fontSize:"28px",color:"#000000"};this.prevBtn=f(this,{x:i-165,y:o+20,label:"Anterior",onClick:()=>this.prev(),textStyle:u,clickSoundKey:"sonidoClick"}),this.nextBtn=f(this,{x:i+165,y:o+20,label:"Siguiente",onClick:()=>this.next(),textStyle:u,clickSoundKey:"sonidoClick"}),this.renderPage()}_fitImage(e,t,i){const r=Math.min(t/e.width,i/e.height);e.setScale(r)}renderPage(){const e=this.pages[this.pageIndex];this.mainTitleText.setText(e.title??"Tutorial"),this.slideImage.setTexture(e.key),this._fitImage(this.slideImage,this.layout.panelWidth,this.layout.panelHeight),this.pageIndicator.setText(`${this.pageIndex+1} de ${this.pages.length}`);const t=0===this.pageIndex;this.toggleButtonState(this.prevBtn,!t);const i=this.pageIndex===this.pages.length-1;this.toggleButtonState(this.nextBtn,!i)}next(){this.pageIndex<this.pages.length-1&&(this.pageIndex++,this.renderPage())}prev(){this.pageIndex>0&&(this.pageIndex--,this.renderPage())}toggleButtonState(e,t){const i=e.button,r=e.text;t?(i.setInteractive(),i.setAlpha(1),r.setAlpha(1)):(i.disableInteractive(),i.setAlpha(0),r.setAlpha(0))}}class O extends t().Scene{constructor(){super("Configuration_Scene"),this.musicVolumeSlider=null,this.sfxVolumeSlider=null,this.globalVolumeSlider=null}preload(){this.load.image("botonVolver","ASSETS/UI/BOTONES/FLECHA_VOLVER.png"),this.load.image("fondo","ASSETS/FONDOS/FONDO_BASE.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3")}create(){const{width:e,height:i}=this.scale,l=e/2,f=this.game.globals.defaultTextStyle;this.add.image(0,0,"fondo").setOrigin(0).setDepth(-1).setDisplaySize(e,i),this.add.text(l,.1*i,"Configuración",{...f,fontSize:"42px",color:"#5f0000ff"}).setOrigin(.5),function(e=1){const t=null!==localStorage.getItem(r),i=null!==localStorage.getItem(n);if(t&&i)return;const s=function(e=1){const t=localStorage.getItem(o);return null===t?null:a(t,e)}(e),l=s&&s>0?s:e;t||localStorage.setItem(r,String(l)),i||localStorage.setItem(n,String(l))}();const y=u(),m=c(),S=h();p(this);const v=.18*i,_=.05*i,b=i/2-(2*v+_)/2,x=b,w=x+_,T=b+v,E=T+_,A=b+2*v,O=A+_;this.add.text(l,x,"Volumen General",{...f,fontSize:"28px",color:"#000"}).setOrigin(.5),this.globalVolumeSlider=this.add.dom(l,w).createFromHTML(`<input type="range" min="0" max="1" step="0.01" value="${y}" \n                style="width:220px; height:20px; accent-color:#00aaff; border-radius:5px;"/>`),this.globalVolumeSlider.addListener("input"),this.globalVolumeSlider.on("input",e=>{e.target instanceof HTMLInputElement&&(function(e){const i=t().Math.Clamp(Number(e),0,1);localStorage.setItem(s,String(i))}(e.target.value),p(this))}),this.add.text(l,T,"Volumen Música",{...f,fontSize:"28px",color:"#000"}).setOrigin(.5),this.musicVolumeSlider=this.add.dom(l,E).createFromHTML(`<input type="range" min="0" max="1" step="0.01" value="${m}"\n                style="width:220px; height:20px; accent-color:#00aaff; border-radius:5px;"/>\n            `),this.musicVolumeSlider.addListener("input"),this.musicVolumeSlider.on("input",e=>{const i=e.target;i instanceof HTMLInputElement&&(function(e){const i=t().Math.Clamp(Number(e),0,1);localStorage.setItem(n,String(i))}(i.value),p(this))}),this.add.text(l,A,"Volumen Efectos",{...f,fontSize:"28px",color:"#000"}).setOrigin(.5),this.sfxVolumeSlider=this.add.dom(l,O).createFromHTML(`<input type="range" min="0" max="1" step="0.01" value="${S}"\n                style="width:220px; height:20px; accent-color:#00aaff; border-radius:5px;"/>\n            `),this.sfxVolumeSlider.addListener("input"),this.sfxVolumeSlider.on("input",e=>{const i=e.target;i instanceof HTMLInputElement&&(function(e){const i=t().Math.Clamp(Number(e),0,1);localStorage.setItem(r,String(i))}(i.value),p(this))}),this.sfxVolumeSlider.addListener("change"),this.sfxVolumeSlider.on("change",e=>{d(this,"sonidoClick")}),g(this,{x:.06*e,y:.08*i,texture:"botonVolver",scale:1,hoverScale:1.1,onClick:()=>this.scene.start("Menu_Scene")}),this.events.once(t().Scenes.Events.SHUTDOWN,()=>{this.musicVolumeSlider&&(this.musicVolumeSlider.removeAllListeners(),this.musicVolumeSlider.destroy(),this.musicVolumeSlider=null),this.sfxVolumeSlider&&(this.sfxVolumeSlider.removeAllListeners(),this.sfxVolumeSlider.destroy(),this.sfxVolumeSlider=null),this.globalVolumeSlider&&(this.globalVolumeSlider.removeAllListeners(),this.globalVolumeSlider.destroy(),this.globalVolumeSlider=null)})}}class I extends t().Scene{constructor(){super("Credits_Scene")}preload(){this.load.image("botonVolver","ASSETS/UI/BOTONES/FLECHA_VOLVER.png"),this.load.image("fondoMenuPrincipal","ASSETS/FONDOS/MENU_PRINCIPAL.png"),this.load.image("logo","ASSETS/LOGO/logo_empresa.png"),this.load.image("marco","ASSETS/UI/MARCOS/VACIOS/MARCOS_ESCENARIO.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3")}create(){const{width:e,height:t}=this.scale,i=this.game.globals?.defaultTextStyle??{fontFamily:"Arial",fontSize:"20px",color:"#ffffff"};this.add.image(0,0,"fondoMenuPrincipal").setOrigin(0).setDepth(-2).setDisplaySize(e,t),this.add.rectangle(0,0,e,t,0,.5).setOrigin(0).setDepth(-1);const r=["GRUPO 5 - SUNSET ARCADE","Sara Bueno Esteban","Antonio Morán Barrera","Cristine Nioka Tewo","Álvaro Ibáñez Montero"],n=.38*e,s=.46*t,o=.75*e,a=.46*t;this.add.rectangle(o,a,n,s,1118481,.7).setOrigin(.5).setStrokeStyle(2,16777215,.2);const l=a-36*(r.length-1)/2;r.forEach((e,t)=>{const r=0===t;this.add.text(o,l+36*t,e,{...i,fontFamily:"VT323",fontSize:r?"36px":"32px",color:r?"#f5d76e":"#ffffff"}).setOrigin(.5)}),this.add.text(o,.1*t,"Créditos",{...i,fontSize:"42px",color:"#ffffff"}).setOrigin(.5);const h=o,c=a+s/2+.16*t-3;this.add.image(h,c,"logo").setOrigin(.5).setScale(.7),g(this,{x:.06*e,y:.08*t,texture:"botonVolver",scale:1,hoverScale:1.1,onClick:()=>this.scene.start("Menu_Scene")})}}class R extends t().Scene{constructor(){super("EndGame_Scene")}init(e){this.winner=e.winner,this.player1=e.player1,this.player2=e.player2}preload(){this.load.image("fondo","ASSETS/FONDOS/FONDO_BASE.png"),this.load.image("botonSeleccionado","ASSETS/UI/BOTONES/BOTON_BASE_G_SELECCIONADO.png"),this.load.image("botonSinSeleccionar","ASSETS/UI/BOTONES/BOTON_BASE_G.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3"),this.load.spritesheet("victoria_A","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_A/A_VICTORIA.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("victoria_B","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_B/A_VICTORIA.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("victoria_C","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_C/A_VICTORIA.png",{frameWidth:128,frameHeight:128})}create(){const{width:e,height:t}=this.scale,i=this.game.globals.defaultTextStyle,r=this.player1.name,n=this.player1.character,s=this.player2.name,o=this.player2.character;this.add.image(0,0,"fondo").setOrigin(0).setDepth(-1),this.add.text(e/2,.18*t,"¡Fin del partido!",{...i,fontSize:"42px",color:"#5f0000ff"}).setOrigin(.5);const a=.33*t,l=.9*t,h=.04*t,c=Math.round((a+l)/2-.02*t),u="player1"===this.winner?"Victoria de: "+r:"Victoria de: "+s;this.add.text(e/2,a,u,{...i,fontSize:"32px",color:"#5f0000ff"}).setOrigin(.5),this._createAnimations();const p="player1"===this.winner?n:o,d={characterA:{spriteKey:"victoria_A",animKey:"charA_victory"},characterB:{spriteKey:"victoria_B",animKey:"charB_victory"},characterC:{spriteKey:"victoria_C",animKey:"charC_victory"}},{spriteKey:g,animKey:y}=d[p]||d.characterA;this.winnerSpriteSlot=this.add.container(Math.round(e/2),c);const m=this.add.sprite(0,0,g);m.setCrop(0,1,128,127);const S=l-a-2*h,v=.6*e;let _=.85*Math.min(S/m.height,v/m.width);_=Math.round(10*_)/10,m.setScale(Math.max(.2,_)),m.play(y),this.winnerSpriteSlot.add(m),f(this,{x:e/2,y:l,label:"Volver",onClick:()=>{this.scene.start("Menu_Scene")},textStyle:{...i,fontSize:"28px",color:"#000000"},clickSoundKey:"sonidoClick"}),this.updateUserStats(this.winner)}_createAnimations(){this.anims.create({key:"charA_victory",frames:this.anims.generateFrameNumbers("victoria_A",{start:0,end:1}),frameRate:4,repeat:-1}),this.anims.create({key:"charB_victory",frames:this.anims.generateFrameNumbers("victoria_B",{start:0,end:1}),frameRate:4,repeat:-1}),this.anims.create({key:"charC_victory",frames:this.anims.generateFrameNumbers("victoria_C",{start:0,end:1}),frameRate:4,repeat:-1})}updateUserStats(e){const t=this.registry.get("username");if(!t)return;const i=`${window.location.protocol}//${window.location.hostname}:${window.location.port}`;fetch(`${i}/api/game/finish`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,winner:e})}).then(e=>e.json()).then(e=>{console.log("Estadísticas actualizadas:",e)}).catch(e=>{console.error("Error actualizando estadísticas",e)})}}class C extends t().Scene{constructor(){super("ModeGame_Scene"),this.serverActive=!1}preload(){this.load.image("botonSeleccionado","ASSETS/UI/BOTONES/BOTON_SELECCIONDO.png"),this.load.image("botonSinSeleccionar","ASSETS/UI/BOTONES/BOTON_SIN_SELECCIONAR.png"),this.load.image("botonVolver","ASSETS/UI/BOTONES/FLECHA_VOLVER.png"),this.load.image("fondo","ASSETS/FONDOS/FONDO_BASE.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3")}create(){const{width:e,height:i}=this.scale;this.serverCheckTimer=this.time.addEvent({delay:5e3,callback:this.checkServerStatus,callbackScope:this,loop:!0});const r=this.game.globals?.defaultTextStyle??{fontFamily:"Arial",fontSize:"20px",color:"#000000"};p(this),this.add.image(0,0,"fondo").setOrigin(0).setDepth(-1).setDisplaySize(e,i),this.add.text(e/2,.18*i,"Modo de Juego",{...r,fontSize:"42px",color:"#5f0000ff"}).setOrigin(.5);const n=.6*i,s=Math.min(280,.3*e),o=e/2-s/2,a={...r,fontSize:"28px",color:"#000000"},l=e=>{this.registry.set("mode",e),console.log("Modo seleccionado:",e),this.scene.start("SelectPlayer_Scene",{mode:e})};f(this,{x:o,y:n,label:"Local",onClick:()=>l("local"),scale:2,textureNormal:"botonSinSeleccionar",textureHover:"botonSeleccionado",textStyle:a,clickSoundKey:"sonidoClick"}),f(this,{x:o+s,y:n,label:"Red",onClick:()=>{this.serverActive?l("online"):console.log("Servidor no disponible")},scale:2,textureNormal:"botonSinSeleccionar",textureHover:"botonSeleccionado",textStyle:a,clickSoundKey:"sonidoClick"}),g(this,{x:.06*e,y:.08*i,texture:"botonVolver",scale:1,hoverScale:1.1,clickSoundKey:"sonidoClick",onClick:()=>this.scene.start("Menu_Scene")}),this.serverStatusText=this.add.text(e/2,.4*i,"Estado del servidor: comprobando...",{...r,fontFamily:"VT323",fontSize:"34px",color:"#555555"}).setOrigin(.5),this.playersCountText=this.add.text(e/2,.46*i,"Jugadores conectados: 0",{...r,fontFamily:"VT323",fontSize:"34px",color:"#555555"}).setOrigin(.5),this.baseUrl=`${window.location.protocol}//${window.location.hostname}:${window.location.port}`,this.checkServerStatus(),this.updatePlayersCount(),this.playersCountTimer=this.time.addEvent({delay:3e3,callback:()=>this.updatePlayersCount(),loop:!0}),this.events.once(t().Scenes.Events.SHUTDOWN,()=>{this.serverCheckTimer&&this.serverCheckTimer.remove(),this.playersCountTimer&&this.playersCountTimer.remove()})}updatePlayersCount(){this.playersCountText&&this.playersCountText.active&&fetch(`${this.baseUrl}/api/players/count`).then(e=>e.json()).then(e=>{this.playersCountText.setText(`Jugadores conectados: ${e.count}`)}).catch(()=>{this.playersCountText.setText("Jugadores conectados: -")})}checkServerStatus(){this.serverStatusText&&this.serverStatusText.active&&fetch(`${this.baseUrl}/status`).then(e=>e.text()).then(e=>{const t="active"===e;this.serverActive=t,this.serverStatusText.setText("Estado del servidor: "+(t?"ACTIVO":"INACTIVO")).setColor(t?"#00AA00":"#AA0000")}).catch(()=>{this.serverActive=!1,this.serverStatusText.setText("Estado del servidor: NO DISPONIBLE").setColor("#AA0000")})}}class N extends t().Scene{constructor(){super("Pause_Scene")}preload(){this.load.image("botonVolver","ASSETS/UI/BOTONES/VOLVER.png"),this.load.image("fondo","ASSETS/FONDOS/FONDO_BASE.png"),this.load.image("botonSeleccionado","ASSETS/UI/BOTONES/BOTON_BASE_G_SELECCIONADO.png"),this.load.image("botonSinSeleccionar","ASSETS/UI/BOTONES/BOTON_BASE_G.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3")}create(){const e=this.game.globals.defaultTextStyle,{width:t,height:i}=this.scale,r=t/2;this.add.rectangle(0,0,t,i,0,.88).setOrigin(0).setDepth(-1),this.add.text(r,.18*i,"Pausa",{...e,fontSize:"42px",color:"#ffffff"}).setOrigin(.5);const n={...e,fontSize:"28px",color:"#000000"},s=.46*i,o=.14*i;f(this,{x:r,y:s,label:"Continuar",textStyle:n,scale:2,onClick:()=>{this.scene.stop(),this.scene.resume("Game_Scene")}}),f(this,{x:r,y:s+o,label:"Tutorial",textStyle:n,scale:2,onClick:()=>{this.scene.start("Tutorial_Scene",{returnScene:"Pause_Scene"})}}),f(this,{x:r,y:s+2*o,label:"Menú Principal",textStyle:n,scale:2,onClick:()=>{const e=this.scene.get("Game_Scene");e&&(e.input.keyboard.removeAllListeners(),e.input.keyboard.removeAllKeys()),this.scene.stop("Game_Scene"),this.scene.start("Menu_Scene")}})}}class P extends t().Scene{constructor(){super("SelectPlayer_Scene"),this.players=[],this.currentTurn=0,this.playerInputs=[],this.playerInputEls=[],this.turnText=null}init(e){this.mode=this.registry.get("mode"),console.log("Modo de Juego:",this.mode)}preload(){this.load.image("botonSeleccionado","ASSETS/UI/BOTONES/BOTON_SELECCIONDO.png"),this.load.image("botonSinSeleccionar","ASSETS/UI/BOTONES/BOTON_SIN_SELECCIONAR.png"),this.load.image("botonVolver","ASSETS/UI/BOTONES/VOLVER.png"),this.load.image("botonSimple","ASSETS/UI/BOTONES/BOTON_BASE_SINSELECCIONAR.png"),this.load.image("botonSimpleSeleccionado","ASSETS/UI/BOTONES/BOTON_BASE.png"),this.load.image("fondo","ASSETS/FONDOS/FONDO_BASE.png"),this.load.image("marcoJugador","ASSETS/UI/MARCOS/VACIOS/MARCO_PERSONAJE_SELECCIONADO.png"),this.load.image("characterA","ASSETS/PERSONAJES/PERSONAJES_POSE/personajes_a.png"),this.load.image("characterB","ASSETS/PERSONAJES/PERSONAJES_POSE/personajes_b.png"),this.load.image("characterC","ASSETS/PERSONAJES/PERSONAJES_POSE/personaje_c.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3")}create(){this.input.keyboard.removeAllKeys(!0),this.input.keyboard.removeAllListeners();const{width:e,height:i}=this.scale,r=this.game.globals?.defaultTextStyle??{fontFamily:"Arial",fontSize:"20px",color:"#ffffff"};p(this),this.add.image(0,0,"fondo").setOrigin(0).setDepth(-1).setDisplaySize(e,i),this.add.text(e/2,50,"Selecciona Personaje",{...r,fontSize:"42px",color:"#5f0000ff"}).setOrigin(.5),"local"===this.mode&&this.createLocalUI(e,i,r),"online"===this.mode&&this.createOnlineUI(e,i,r),g(this,{x:.06*e,y:.08*i,texture:"botonVolver",scale:1,hoverScale:1.1,clickSoundKey:"sonidoClick",onClick:()=>this.scene.start("ModeGame_Scene")}),this.events.once(t().Scenes.Events.SHUTDOWN,()=>{this.playerInputs.forEach(e=>e?.destroy()),this.playerInputs=[],this.playerInputEls=[],this.input.keyboard.enabled=!0})}createLocalUI(e,t,i){this.players=[{name:"",character:null,color:43775,bigImage:null,bigFrame:null,frame:null},{name:"",character:null,color:16733525,bigImage:null,bigFrame:null,frame:null}],this.turnText=this.add.text(e/2,95,"TURNO: Jugador 1",{...i,fontFamily:"VT323",fontSize:"28px",color:"#000"}).setOrigin(.5),this.createPlayersUI(25),this.createCharacterMiniatures(0,25),this.updateTurnText(),f(this,{x:e/2,y:500,label:"Siguiente",onClick:()=>this.handleNext(),scale:1.5,textureNormal:"botonSimple",textureHover:"botonSimpleSeleccionado",textStyle:{...i,fontSize:"18px",color:"#000"},clickSoundKey:"sonidoClick"})}createOnlineUI(e,t,i){this.players=[{name:this.registry.get("username")||"JugadorX",character:null,color:43775,bigImage:null,bigFrame:null,frame:null}],this.add.text(e/2,100,`${this.players[0].name}`,{...i,fontFamily:"VT323",fontSize:"32px",color:"#000",fontStyle:"bold"}).setOrigin(.5),this.turnText=this.add.text(e/2,130,"Ningún personaje seleccionado",{...i,fontFamily:"VT323",fontSize:"28px",color:"#000"}).setOrigin(.5),this.createPlayerOnlineUI(40),this.createCharacterMiniatures(150,40),f(this,{x:e/2,y:500,label:"Siguiente",onClick:()=>this.handleNext(),scale:1.5,textureNormal:"botonSimple",textureHover:"botonSimpleSeleccionado",textStyle:{...i,fontSize:"18px",color:"#000"},clickSoundKey:"sonidoClick"})}createPlayersUI(e=0){const{width:i,height:r}=this.scale,n=this.game.globals.defaultTextStyle,s=[.25*i,.75*i];this.players.forEach((o,a)=>{const l=s[a];this.add.text(l,100+e,"Nombre:",{...n,fontSize:"24px",color:"#000"}).setOrigin(.5);const h=this.add.dom(l,140+e).createFromHTML(`\n                <input type="text" placeholder="Nombre jugador" maxlength="10"\n                style="\n                    width:150px;\n                    padding:6px;\n                    font-size:16px;\n                    font-family:${n.fontFamily};\n                    border-radius:12px;\n                    border: 6px solid #FFAA00;\n                    outline: none;\n                    text-align:center;\n                    background-color:#f0f0f0;\n                    transition: border-color 0.2s, box-shadow 0.2s;"\n                onfocus="this.style.borderColor='#FF8316'; this.style.boxShadow='0 0 5px #FF8316';"\n                onblur="this.style.borderColor='#FFAA00'; this.style.boxShadow='none';"\n                />\n            `),c=h.node.querySelector("input");c.addEventListener("focus",e=>{this.input.keyboard.enabled=!1,e.stopPropagation()}),c.addEventListener("blur",e=>{this.input.keyboard.enabled=!0,e.stopPropagation()}),c.addEventListener("keydown",e=>e.stopPropagation()),c.addEventListener("input",()=>{c.value=c.value.replace(/[^a-zA-ZÀ-ÿñÑ ]/g,""),this.updateTurnText()}),this.playerInputs[a]=h,this.playerInputEls[a]=c,o.bigImage=this.add.image(i*(.25+.5*a),.6*r+e,"characterA").setScale(1.2).setOrigin(.5).setVisible(!1),o.bigFrame=this.add.image(o.bigImage.x,o.bigImage.y,"marcoJugador").setScale(2.8).setOrigin(.5).setVisible(!0),o.bigFrame.texture.setFilter(t().Textures.FilterMode.NEAREST),o.frame=this.add.rectangle(0,0,60,120).setStrokeStyle(4,o.color).setVisible(!1)}),this.currentTurn=0,this.updateTurnText()}createPlayerOnlineUI(e=0){const{width:i,height:r}=this.scale,n=this.players[0],s=i/2;n.bigImage=this.add.image(s-150,.5*r+e,"characterA").setScale(1.2).setOrigin(.5).setVisible(!1),n.bigFrame=this.add.image(n.bigImage.x,n.bigImage.y,"marcoJugador").setScale(2.8).setOrigin(.5).setVisible(!0),n.bigFrame.texture.setFilter(t().Textures.FilterMode.NEAREST),n.frame=this.add.rectangle(0,0,60,120).setStrokeStyle(4,n.color).setVisible(!1)}createCharacterMiniatures(e,t){const{width:i,height:r}=this.scale,n=i/2-75,s=.4*r,o=[{x:n+e,y:s+t},{x:n+e+150,y:s+t},{x:n+e+75,y:s+t+75}];["characterA","characterB","characterC"].forEach((e,t)=>{const i=this.add.image(o[t].x,o[t].y,e).setInteractive({useHandCursor:!0}).setScale(.45).setData("characterName",e);i.on("pointerdown",()=>{d(this,"sonidoClick"),this.onMiniClicked(e,i)})})}onMiniClicked(e,t){if("online"===this.mode){const i=this.players[0];return i.character===e?(i.character=null,i.bigImage&&i.bigImage.setVisible(!1),i.frame&&i.frame.setVisible(!1)):(i.character=e,i.bigImage&&i.bigImage.setTexture(e).setVisible(!0),i.frame&&i.frame.setPosition(t.x,t.y).setVisible(!0)),void this.updateTurnText()}const i=this.players.findIndex(t=>t.character===e);if(-1!==i){const e=this.players[i];return e.character=null,e.bigImage&&e.bigImage.setVisible(!1),e.frame&&e.frame.setVisible(!1),this.currentTurn=i,void this.updateTurnText()}const r=this.players[0],n=this.players[1];let s=this.currentTurn;if(null==s)if(!r.character&&n.character)s=0;else if(!n.character&&r.character)s=1;else{if(r.character||n.character)return;s=0}const o=this.players[s],a=this.players[1-s];a.character!==e&&(o.character=e,o.bigImage&&o.bigImage.setTexture(e).setVisible(!0),o.frame&&o.frame.setPosition(t.x,t.y).setVisible(!0),a.character?this.currentTurn=null:this.currentTurn=1-s,this.updateTurnText())}handleNext(){if("local"===this.mode){const e=this.playerInputEls?.[0]?.value?.trim()??"",t=!!this.players?.[0]?.character,i=this.playerInputEls?.[1]?.value?.trim()??"",r=!!this.players?.[1]?.character;if(!(e.length>0&&i.length>0&&t&&r))return this.updateTurnText(),void this.flashTurnText("#b00000",900);this.players[0].name=e,this.players[1].name=i,this.scene.start("SelectScenario_Scene",{mode:this.mode,player1:this.players[0],player2:this.players[1]})}if("online"===this.mode){if(!this.players?.[0]?.character)return this.flashTurnText("#b00000",900),void this.turnText.setText("Debes elegir un personaje primero");this.registry.set("myCharacter",this.players[0].character),this.scene.start("Lobby_Scene",{mode:this.mode})}}flashTurnText(e="#b00000",t=900){if(!this.turnText)return;const i=this.turnText.style.color||"#000000";this.turnText.setColor(e),this.time.delayedCall(t,()=>{this.turnText.setColor(i),this.updateTurnText()})}updateTurnText(){if(this.turnText){if("local"===this.mode){const e=this.playerInputEls?.[0]?.value?.trim()??"",t=this.playerInputEls?.[1]?.value?.trim()??"",i=!!this.players?.[0]?.character,r=!!this.players?.[1]?.character,n=e.length>0,s=t.length>0,o=i&&r,a=n&&s;if(o&&a)return void this.turnText.setText("¡Listo para continuar!");if(o&&!a)return void(n||s?n?this.turnText.setText("Falta el nombre de Jugador 2"):this.turnText.setText("Falta el nombre de Jugador 1"):this.turnText.setText("Faltan los nombres de Jugador 1 y Jugador 2"));if(a&&!o)return void(i||r?i?this.turnText.setText("Falta el personaje de Jugador 2"):this.turnText.setText("Falta el personaje de Jugador 1"):this.turnText.setText("Faltan los personajes de Jugador 1 y Jugador 2"));if(null===this.currentTurn||void 0===this.currentTurn)return void this.turnText.setText("Completa nombres y personajes");this.turnText.setText(`TURNO: Jugador ${this.currentTurn+1}`)}"online"===this.mode&&(this.players?.[0]?.character?this.turnText.setText("Listo: el jugador tiene personaje"):this.turnText.setText("Ningún personaje seleccionado"))}}}class k extends t().Scene{constructor(){super("SelectScenario_Scene"),this.selectedScenario="Gym",this.mode="local"}preload(){this.load.image("botonSeleccionado","ASSETS/UI/BOTONES/BOTON_BASE.png"),this.load.image("botonSinSeleccionar","ASSETS/UI/BOTONES/BOTON_BASE_SINSELECCIONAR.png"),this.load.image("botonVolver","ASSETS/UI/BOTONES/FLECHA_VOLVER.png"),this.load.image("botonSimple","ASSETS/UI/BOTONES/BOTON_BASE_SINSELECCIONAR.png"),this.load.image("botonSimpleSeleccionado","ASSETS/UI/BOTONES/BOTON_BASE.png"),this.load.image("fondo","ASSETS/FONDOS/FONDO_BASE.png"),this.load.image("Gym","ASSETS/FONDOS/GIMNASIO.png"),this.load.image("Playa","ASSETS/FONDOS/PLAYA.png"),this.load.image("Jardin","ASSETS/FONDOS/JARDIN.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3"),this.load.image("marco","ASSETS/UI/MARCOS/VACIOS/MARCOS_ESCENARIO.png")}init(e){this.player1=e.player1,this.player2=e.player2,this.mode=e.mode||"local",this.isHost=e.isHost||!1}create(){const{width:e,height:i}=this.scale,r=this.game.globals.defaultTextStyle;p(this),this.add.image(0,0,"fondo").setOrigin(0).setDepth(-1).setDisplaySize(e,i),this.add.text(e/2,50,"Selecciona Escenario",{...r,fontSize:"42px",color:"#5f0000ff"}).setOrigin(.5),this.selectedScenario="Gym",this.selectedImage=this.add.image(e/2,240,this.selectedScenario).setScale(.5);const n=["Gym","Playa","Jardin"],s=e/2-200,o={},a=e=>{this.selectedScenario=e,this.selectedImage.setTexture(e).setScale(.5),n.forEach(t=>{o[t].setTexture(t===e?"botonSeleccionado":"botonSinSeleccionar")})};n.forEach((e,i)=>{const n=this.add.image(s+200*i,440,"botonSinSeleccionar").setInteractive({useHandCursor:!0}).setScale(1.75);o[e]=n;const l=this.add.text(0,0,e,{...r,fontSize:"28px",color:"#000"});t().Display.Align.In.Center(l,n),n.on("pointerover",()=>n.setTexture("botonSeleccionado")),n.on("pointerout",()=>{n.setTexture(this.selectedScenario===e?"botonSeleccionado":"botonSinSeleccionar")}),n.on("pointerdown",()=>d(this,"sonidoClick")),n.on("pointerup",t=>{n.getBounds().contains(t.x,t.y)&&a(e)})}),a(this.selectedScenario);const l=this.add.image(e/2,240,"marco").setOrigin(.5);l.texture.setFilter(t().Textures.FilterMode.NEAREST),l.setDisplaySize(500,300),f(this,{x:e/2,y:500,label:"Siguiente",onClick:()=>{"local"===this.mode?this.scene.start("Game_Scene",{player1:this.player1,player2:this.player2,selectedScenario:this.selectedScenario,mode:this.mode,isHost:this.isHost}):this.scene.start("Lobby_Scene",{player1:this.player1,player2:this.player2,selectedScenario:this.selectedScenario,mode:this.mode,isHost:this.isHost})},scale:1.5,textureNormal:"botonSimple",textureHover:"botonSimpleSeleccionado",textStyle:{...r,fontSize:"18px",color:"#000"},clickSoundKey:"sonidoClick"}),g(this,{x:.06*e,y:.08*i,texture:"botonVolver",scale:1,hoverScale:1.1,clickSoundKey:"sonidoClick",onClick:()=>{this.scene.start("SelectPlayer_Scene",{mode:this.mode,isHost:this.isHost})}})}}class U{constructor(e,t){this.scene=e,this.scenarios=t.scenarios??[],this.selectedScenario=t.defaultScenario??this.scenarios[0]??"Gym",this.style=t.style,this.buttonTextures=t.buttonTextures??{normal:"botonSinSeleccionar",selected:"botonSeleccionado"},this.onSelect=t.onSelect??(()=>{}),this.isHost=!1,this.container=e.add.container(0,0),this.previewX=t.previewX??t.centerX,this.previewY=t.previewY??t.frameY,this.previewW=t.previewW??t.frameW,this.previewH=t.previewH??t.frameH,this.buttonsX=t.buttonsX??t.centerX??this.previewX,this.buttonsY=t.buttonsY??this.previewY-70,this.buttonsSpacingY=t.buttonsSpacingY??90,this.buttonsScale=t.buttonsScale??1.6,this.container=e.add.container(0,0),this.controls=e.add.container(0,0),this.preview=e.add.image(this.previewX,this.previewY,this.selectedScenario).setOrigin(.5),this.preview.setDisplaySize(.92*this.previewW,.92*this.previewH),this.infoText=e.add.text(this.previewX,this.previewY+this.previewH/2+22,`Escenario: ${this.selectedScenario}`,{...this.style,fontSize:"22px",color:"#000"}).setOrigin(.5),this.onlyHostText=e.add.text(this.buttonsX,this.buttonsY+this.buttonsSpacingY*this.scenarios.length+5,"El host elige el escenario",{...this.style,fontSize:"22px",color:"#444"}).setOrigin(.5),this.buttons={},this.scenarios.forEach((t,i)=>{const r=this.buttonsX,n=this.buttonsY+i*this.buttonsSpacingY,s=e.add.image(r,n,this.buttonTextures.normal).setScale(this.buttonsScale).setInteractive({useHandCursor:!0}),o=e.add.text(r,n,t,{...this.style,fontSize:"28px",color:"#000"}).setOrigin(.5);s.on("pointerover",()=>{this.isHost&&s.setTexture(this.buttonTextures.selected)}),s.on("pointerout",()=>{this.isHost&&this._refreshButtons()}),s.on("pointerup",e=>{this.isHost&&s.getBounds().contains(e.x,e.y)&&(this.scene.sound?.play?.("sonidoClick"),this.setScenario(t),this.onSelect(t))}),this.buttons[t]={btn:s,label:o},this.controls.add([s,o])}),this.container.add([this.preview,this.infoText,this.controls,this.onlyHostText]),this._refreshButtons(),this.setIsHost(!1)}setScenario(e){e&&(this.selectedScenario=e,this.preview?.setTexture(e),this.infoText?.setText(`Escenario: ${e}`),this._refreshButtons())}setIsHost(e){this.isHost=!!e,this.onlyHostText?.setVisible(!this.isHost);for(const{btn:e,label:t}of Object.values(this.buttons))this.isHost?(e.setAlpha(1),t.setAlpha(1),e.setInteractive({useHandCursor:!0})):(e.disableInteractive(),e.setAlpha(.6),t.setAlpha(.6));this._refreshButtons()}_refreshButtons(){for(const[e,{btn:t}]of Object.entries(this.buttons)){const i=e===this.selectedScenario;t.setTexture(i?this.buttonTextures.selected:this.buttonTextures.normal)}}destroy(){this.container?.destroy(!0),this.container=null}}class B{constructor(e,t,i,r={}){this.scene=e,this.w=r.w??320,this.h=r.h??210,this.x=t,this.y=i,this.style=r.style??{},this.title=r.title??"",this.portraitKeys=r.portraitKeys??{},this.defaultPortraitKey=r.defaultPortraitKey??null,this.container=e.add.container(t,i),this.padding=14,this.portraitBoxW=.42*this.w,this.portraitBoxH=.82*this.h,this.portraitX=-this.w/2+this.padding+this.portraitBoxW/2,this.portraitY=-6,this.textBoxW=this.portraitX;const n=this.padding,s=-(this.portraitBoxW+n+this.textBoxW)/2;this.portraitX=s+this.portraitBoxW/2,this.textX=this.portraitX,this.portraitY=-6,this.portrait=e.add.image(this.portraitX,this.portraitY,this.defaultPortraitKey??"portraitA").setOrigin(.5).setVisible(!1),this._fitToBox(this.portrait,this.portraitBoxW,this.portraitBoxH,6);const o=this.portraitY+this.portraitBoxH/2+12;this.nameText=e.add.text(this.textX,o,"Esperando...",{...this.style,fontSize:"18px",color:"#000",fontStyle:"bold"}).setOrigin(.5),this.readyText=e.add.text(this.textX,55,"❌",{...this.style,fontSize:"18px",color:"#000"}).setOrigin(.5),this.roleText=e.add.text(this.textX,-55,this.title,{...this.style,fontSize:"20px",color:"#333"}).setOrigin(.5),this._layoutNameAndReady(),this.container.add([this.roleText,this.portrait,this.nameText,this.readyText])}_portraitKeyFromCharacter(e){return e?this.portraitKeys[e]??this.defaultPortraitKey:this.defaultPortraitKey}_fitToBox(e,t,i,r=0,n="contain"){if(!e?.texture)return;const s=Math.max(1,t-2*r),o=Math.max(1,i-2*r),a=e.width,l=e.height,h="cover"===n?Math.max(s/a,o/l):Math.min(s/a,o/l);if(e.setScale(h),"cover"===n){const t=s/h,i=o/h;e.setCrop((a-t)/2,(l-i)/2,t,i)}else e.setCrop()}setPlayer(e){if(!e)return void this.setWaiting();this.clearAlertStyle();const t=e.ready?"✅":"❌";e.isHost,this.roleText.setText(this.title||(e.isHost?"Host":"Rival")),this.nameText.setText(e.username??"Jugador"),this.readyText.setText(t),this._layoutNameAndReady();const i=this.portraitKeys?.[e.character]??null;i?(this.portrait.setVisible(!0),this.portrait.setTexture(i),this._fitToBox(this.portrait,this.portraitBoxW,this.portraitBoxH,6,"contain")):this.portrait.setVisible(!1)}setWaiting(){this.roleText.setText(this.title||""),this.nameText.setText("Esperando..."),this.readyText.setText("❌"),this.portrait.setVisible(!1),this.clearAlertStyle(),this._layoutNameAndReady()}showLeftMessage(e){this.roleText.setText("RIVAL"),this.nameText.setText(`¡${e} ha salido!`),this.readyText.setText("❌"),this.nameText.setColor("#b00000"),this.readyText.setColor("#b00000"),this.portrait?.setVisible(!1),this._layoutNameAndReady()}clearAlertStyle(){this.nameText.setColor("#000"),this.readyText.setColor("#000")}_layoutNameAndReady(){const e=this.nameText.width;this.nameText.setX(this.textX),this.readyText.setOrigin(0,.5),this.readyText.setPadding(0,0,0,1),this.readyText.setPosition(this.nameText.x+e/2+6,this.nameText.y-2)}destroy(){this.container?.destroy(!0),this.container=null}}class L extends t().Scene{constructor(){super("Lobby_Scene"),this.isPlayerReady=!1,this.lobbyPlayers=[],this.pendingLobbyUpdate=null,this.ws=null}init(e){this.mode=e.mode,this.isHost=!1,this.player1=e.player1,this.player2=e.player2,this.selectedScenario=e.selectedScenario,console.log("Lobby iniciado como:",this.isHost?"Host":"Invitado")}preload(){this.load.image("botonVolver","ASSETS/UI/BOTONES/VOLVER.png"),this.load.image("fondo","ASSETS/FONDOS/FONDO_BASE.png"),this.load.image("marco","ASSETS/UI/MARCOS/VACIOS/MARCOS_ESCENARIO.png"),this.load.image("botonSimple","ASSETS/UI/BOTONES/BOTON_BASE_SINSELECCIONAR.png"),this.load.image("botonSimpleSeleccionado","ASSETS/UI/BOTONES/BOTON_BASE.png"),this.load.image("Gym","ASSETS/FONDOS/GIMNASIO.png"),this.load.image("Playa","ASSETS/FONDOS/PLAYA.png"),this.load.image("Jardin","ASSETS/FONDOS/JARDIN.png"),this.load.image("botonSinSeleccionar","ASSETS/UI/BOTONES/BOTON_BASE_SINSELECCIONAR.png"),this.load.image("botonSeleccionado","ASSETS/UI/BOTONES/BOTON_BASE.png"),this.load.image("portraitA","ASSETS/UI/MARCOS/PERSONAJES%20EN%20MARCOS/PERSONAJE_A.png"),this.load.image("portraitB","ASSETS/UI/MARCOS/PERSONAJES%20EN%20MARCOS/PERSONAJE_B.png"),this.load.image("portraitC","ASSETS/UI/MARCOS/PERSONAJES%20EN%20MARCOS/PERSONAJE_C.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3")}create(){const e=this.game.globals.defaultTextStyle,{width:i,height:r}=this.scale;this.add.image(0,0,"fondo").setOrigin(0).setDepth(-1),this.add.text(i/2,.09*r,"Lobby",{...e,fontSize:"38px",color:"#5f0000ff"}).setOrigin(.5);const n=.33*i,s=.34*r,o=.42*i,a=.3*r,l=this.add.image(n,s,"marco").setOrigin(.5);l.texture.setFilter(t().Textures.FilterMode.NEAREST),l.setDisplaySize(o,a),this.scenarioUI=new U(this,{style:e,scenarios:["Gym","Playa","Jardin"],defaultScenario:this.selectedScenario??"Gym",buttonTextures:{normal:"botonSinSeleccionar",selected:"botonSeleccionado"},previewX:n,previewY:s,previewW:o,previewH:a,buttonsX:.72*i,buttonsY:s-.28*a,buttonsSpacingY:.34*a,buttonsScale:1.55,onSelect:e=>{this._sendWS({type:"select_scenario",selectedScenario:e})}});const h=i/2-30;this.add.text(h,.61*r,"Estado de los jugadores",{...e,fontSize:"22px",color:"#000"}).setOrigin(.5);const c={characterA:"portraitA",characterB:"portraitB",characterC:"portraitC"},u=.76*r,p=.3*i,d=.06*i,y=h-(2*p+d)/2+p/2-30,m=y+p+d;this.hostCard=new B(this,y,u,{style:e,title:"Host",portraitKeys:c,defaultPortraitKey:null,w:p,h:.18*r}),this.guestCard=new B(this,m,u,{style:e,title:"Rival",portraitKeys:c,defaultPortraitKey:null,w:p,h:.18*r}),this.btnListo=f(this,{x:h,y:.92*r,label:"¿Listo?",onClick:()=>this.toggleReady(),textureNormal:"botonSimple",textureHover:"botonSimpleSeleccionado",textStyle:{...e,fontSize:"22px",color:"#000"},clickSoundKey:"sonidoClick"}),this.btnListo.button.disableInteractive(),this.btnListo.button.setAlpha(.7),this.btnVolver=g(this,{x:.06*i,y:.08*r,texture:"botonVolver",scale:1,hoverScale:1.1,clickSoundKey:"sonidoClick",onClick:()=>this.handleBack()}),this.ws=this.registry.get("ws"),this.ws&&this.ws.readyState!==WebSocket.CLOSED&&this.ws.readyState!==WebSocket.CLOSING||(this.ws=new WebSocket(this._getWsUrl()),this.registry.set("ws",this.ws)),this.ws.onmessage=e=>{let t;try{t=JSON.parse(e.data)}catch(t){return void console.error("WS mensaje no-JSON:",e.data)}this._handleWSMessage(t)},this.ws.onerror=e=>{console.error("[WS] error",e)},this.ws.onclose=()=>{console.log("[WS] conexión cerrada")};const S={type:"join_lobby",username:this.registry.get("username"),character:this.registry.get("myCharacter"),selectedScenario:this.selectedScenario};this.ws.readyState===WebSocket.OPEN?(this.btnListo?.button.setInteractive?.({useHandCursor:!0}),this._sendWS({type:"player_ready",isReady:!1}),this._sendWS(S)):this.ws.onopen=()=>{console.log("[WS] conectado"),this.btnListo?.button.setInteractive?.({useHandCursor:!0}),this._sendWS({type:"player_ready",isReady:!1}),this._sendWS(S)},this.events.once(t().Scenes.Events.SHUTDOWN,this.shutdown,this),this.events.once(t().Scenes.Events.DESTROY,this.shutdown,this)}toggleReady(){this.isPlayerReady=!this.isPlayerReady,this._sendWS({type:"player_ready",isReady:this.isPlayerReady});const e=this.isPlayerReady?"Cancelar":"¿Listo?";this.btnListo.text.setText(e),this.btnVolver.setAlpha(this.isPlayerReady?.3:1),this.isPlayerReady?this.btnVolver.disableInteractive():this.btnVolver.setInteractive({useHandCursor:!0})}handleBack(){if(this._sendWS({type:"player_ready",isReady:!1}),this._sendWS({type:"leave_lobby"}),this.ws)try{this.ws.close()}catch{}this.registry.remove("ws"),"online"!==this.mode?this.scene.start("SelectPlayer_Scene",{mode:"local"}):this.scene.start("SelectPlayer_Scene",{mode:"online"})}shutdown(){this.scenarioUI?.destroy(),this.scenarioUI=null,this.hostCard?.destroy(),this.hostCard=null,this.guestCard?.destroy(),this.guestCard=null,this.ws&&(this.ws.onmessage=null,this.ws.onerror=null,this.ws.onclose=null,this.ws.onopen=null)}_getWsUrl(){const e="https:"===window.location.protocol?"wss":"ws",t="3000"===window.location.port?"8080":window.location.port;return`${e}://${window.location.hostname}:${t}`}_sendWS(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(e))}_handleWSMessage(e){switch(e.type){case"lobby_update":{const t=e.players??[];if(this.lobbyPlayers=t,this.showingAbandonError)return void(this.pendingLobbyUpdate={players:t,selectedScenario:e.selectedScenario});this._applyLobbyUpdate(t,e.selectedScenario);break}case"start_game":{const t=e?.players??this.lobbyPlayers,i=e?.selectedScenario??this.selectedScenario??"Gym",r=e?.seed??Date.now().toString(),n=t.find(e=>e.isHost),s=t.find(e=>!e.isHost);if(!n||!s)return void console.error("Lobby sin jugadores listos");const o={name:n.username,character:n.character},a={name:s.username,character:s.character};this.scene.start("GameOnline_Scene",{mode:"online",player1:o,player2:a,selectedScenario:i,seed:r});break}case"player_abandoned":this.showingAbandonError=!0,console.log(`El usuario ${e.username} ha salido del lobby`),this.guestCard?.showLeftMessage?.(e.username),this.time.delayedCall(2e3,()=>{if(this.showingAbandonError=!1,this.pendingLobbyUpdate){const{players:e,selectedScenario:t}=this.pendingLobbyUpdate;this.pendingLobbyUpdate=null,this._applyLobbyUpdate(e,t)}this.guestCard?.clearAlertStyle?.()}),this.isPlayerReady=!1,this.btnListo?.setLabel?this.btnListo.setLabel("¿Listo?"):this.btnListo?.text&&this.btnListo.text.setText("¿Listo?"),this.btnVolver.setAlpha(1),this.btnVolver.setInteractive({useHandCursor:!0});break;case"error":console.error("[WS error]",e.message);break;default:console.log("[WS] msg desconocido",e)}}_applyLobbyUpdate(e,t){t&&(this.selectedScenario=t,this.scenarioUI?.setScenario(this.selectedScenario));const i=e.find(e=>e.isHost)??null,r=e.find(e=>!e.isHost)??null,n=this.registry.get("username"),s=!(!i||i.username!==n);s!==this.isHost&&console.log(s?`[LOBBY] Ahora eres el HOST (${n})`:`[LOBBY] Ya NO eres el host (host actual: ${i?.username??"—"})`),this.isHost=s,this.scenarioUI?.setIsHost(this.isHost),this.hostCard?.setPlayer(i?{...i,isHost:!0}:null),this.guestCard?.setPlayer(r?{...r,isHost:!1}:null)}}i(543);class M extends t().Scene{constructor(){super("Logging_Scene"),this.isPlayerReady=!1,this.apiUrl="/api",this.isRegistering=!1}async init(e){const t=sessionStorage.getItem("voley_username"),i=sessionStorage.getItem("voley_password");if(t&&i)try{const e=await fetch(`${this.apiUrl}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:i})});if(!e.ok)return sessionStorage.removeItem("voley_username"),sessionStorage.removeItem("voley_password"),void sessionStorage.removeItem("voley_session_token");const r=await e.json();this.registry.set("username",r.username),this.scene.launch("ConnectionManager_Scene"),this.scene.start("Menu_Scene")}catch(e){console.error("Auto-login fallido",e)}}preload(){this.load.image("botonSimple","ASSETS/UI/BOTONES/BOTON_BASE_SINSELECCIONAR.png"),this.load.image("botonSimpleSeleccionado","ASSETS/UI/BOTONES/BOTON_BASE.png"),this.load.image("botonVolver","ASSETS/UI/BOTONES/FLECHA_VOLVER.png"),this.load.image("fondo","ASSETS/FONDOS/FONDO_BASE.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3"),this.load.image("marco","ASSETS/UI/MARCOS/VACIOS/MARCOS_ESCENARIO.png")}create(){const{width:e,height:i}=this.scale,r=e/2,n=this.game.globals?.defaultTextStyle??{fontFamily:"Arial"};this.add.image(0,0,"fondo").setOrigin(0).setDisplaySize(e,i).setDepth(-1),this.titleText=this.add.text(r,60,"Iniciar sesión",{...n,fontSize:"42px",color:"#5f0000ff"}).setOrigin(.5);const s=this.add.image(r,.52*i,"marco").setOrigin(.5);s.setDisplaySize(.4*e,.65*i),s.texture.setFilter(t().Textures.FilterMode.NEAREST),this.add.text(r,.28*i,"Usuario:",{...n,fontSize:"26px",color:"#000"}).setOrigin(.5),this.userInput=this.createHtmlInput(r,.36*i,"Nombre de usuario",{...n,fontFamily:"VT323",fontSize:"22px",color:"#000"}),this.add.text(r,.45*i,"Contraseña:",{...n,fontSize:"26px",color:"#000"}).setOrigin(.5),this.passInput=this.createHtmlInput(r,.53*i,"********",{...n,fontFamily:"VT323",fontSize:"22px",color:"#000"},!0),this.mainBtn=f(this,{x:r-80,y:.73*i,label:"Entrar",onClick:()=>this.handleSubmit(),scale:2,textureNormal:"botonSimple",textureHover:"botonSimpleSeleccionado",textStyle:{...n,fontSize:"22px",color:"#00AA00"},clickSoundKey:"sonidoClick"}),this.deleteBtn=f(this,{x:r+80,y:.73*i,label:"Eliminar\ncuenta",onClick:()=>this.handleDeleteUser(),scale:2,textureNormal:"botonSimple",textureHover:"botonSimpleSeleccionado",textStyle:{...n,fontSize:"21px",color:"#AA0000"},clickSoundKey:"sonidoClick"}),this.toggleText=this.add.text(r,.64*i,"¿Aún no tienes cuenta? Regístrate aquí",{...n,fontFamily:"VT323",fontSize:"20px",color:"#0000EE",fontStyle:"italic"}).setOrigin(.5).setInteractive({useHandCursor:!0}),this.toggleText.on("pointerdown",()=>this.toggleMode())}createHtmlInput(e,t,i,r,n=!1){const s=n?"password":"text",o=r?.fontSize??"16px",a=r?.fontFamily??"Arial",l=this.add.dom(e,t).createFromHTML(`\n            <input type="${s}" placeholder="${i}" \n            style="width:180px; padding:8px; font-size:${o}; font-family:${a}; \n            border-radius:12px; border: 6px solid #FFAA00; text-align:center; outline:none;" />\n        `).node.querySelector("input");return l.addEventListener("focus",()=>this.input.keyboard.enabled=!1),l.addEventListener("blur",()=>this.input.keyboard.enabled=!0),l}toggleMode(){this.isRegistering=!this.isRegistering;const{width:e}=this.scale,t=e/2;this.titleText.setText(this.isRegistering?"Registrarse":"Iniciar sesión"),this.mainBtn.text.setText(this.isRegistering?"Crear cuenta":"Entrar"),this.toggleText.setText(this.isRegistering?"¿Ya tienes cuenta? Inicia sesión":"¿Aún no tienes cuenta? Regístrate aquí"),this.isRegistering?(this.mainBtn.button.setX(t),this.mainBtn.text.setX(t),this.deleteBtn.button.setVisible(!1),this.deleteBtn.text.setVisible(!1)):(this.mainBtn.button.setX(t-80),this.mainBtn.text.setX(t-80),this.deleteBtn.button.setVisible(!0),this.deleteBtn.text.setVisible(!0))}async handleSubmit(){const e=this.userInput.value.trim(),t=this.passInput.value.trim();if(e.length<3)return void alert("Usuario demasiado corto");if(t.length<3)return void alert("Contraseña demasiado corta");const i=this.isRegistering?"/register":"/login";try{const r=await fetch(`${this.apiUrl}${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}),n=await r.json();r.ok?this.isRegistering?(alert("¡Registro completado con éxito! Ahora puedes iniciar sesión."),this.toggleMode(),this.userInput.value="",this.passInput.value=""):(this.registry.set("username",e),this.registry.set("userToken",n.token),sessionStorage.setItem("voley_session_token",n.token),sessionStorage.setItem("voley_username",e),sessionStorage.setItem("voley_password",t),console.log(`Login correcto. Usuario: ${e}`),this.scene.launch("ConnectionManager_Scene"),this.scene.start("Menu_Scene")):alert(n.error||"Error en la autenticación")}catch(e){console.error("Error conectando a la API:",e),alert("No se pudo conectar con el servidor.")}}async handleDeleteUser(){const e=this.userInput.value.trim(),t=this.passInput.value.trim();if(e&&t){if(confirm(`¿Seguro que quieres eliminar "${e}"?`))try{const i=await fetch(`${this.apiUrl}/users/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})}),r=await i.json();i.ok?(alert(`Usuario "${e}" eliminado`),this.userInput.value="",this.passInput.value=""):alert(r.error||"Error eliminando el usuario")}catch(e){console.error("Error conectando a la API:",e),alert("No se pudo conectar con el servidor.")}}else alert("Introduce usuario y contraseña para eliminar")}}class j extends t().Scene{constructor(){super("NoConnection_Scene")}create(){const{width:e,height:t}=this.scale;this.add.rectangle(0,0,e,t,0,.7).setOrigin(0),this.add.text(e/2,t/2-20,"CONEXIÓN PERDIDA",{fontSize:"40px",color:"#ff0000",fontStyle:"bold"}).setOrigin(.5),this.add.text(e/2,t/2+30,"Intentando reconectar...",{fontSize:"20px",color:"#ffffff"}).setOrigin(.5),this.time.addEvent({delay:2e3,callback:this.checkServer,callbackScope:this,loop:!0})}async checkServer(){try{if((await fetch("/status")).ok){console.log("Servidor recuperado. Intentando re-login automático...");const e=sessionStorage.getItem("voley_username"),t=sessionStorage.getItem("voley_password");if(e&&t){const i=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(i.ok){const e=await i.json();this.registry.set("username",e.username),this.registry.set("isHost",e.isHost),console.log("Re-autenticación completada con éxito.")}}const i=this.registry.get("lastActiveScene");if(i){const e=this.scene.get(i);this.scene.resume(i),e&&e.input&&(e.input.enabled=!0,e.input.resetPointers())}this.scene.stop()}}catch(e){console.log("Servidor sigue inactivo...")}}}class D extends t().Scene{constructor(){super("ConnectionManager_Scene")}create(){this.startHeartbeat()}startHeartbeat(){this.time.addEvent({delay:2e3,callback:async()=>{const e=this.registry.get("username");if(e)try{const t=await fetch(`/api/users/keepalive/${e}`);if(401===t.status)return void this.handleReconnection(e);if(!t.ok)throw new Error("Offline");const i=await t.json();this.game.events.emit("update_online_count",i.count)}catch(e){this.handleServerDown()}},loop:!0})}async handleReconnection(e){const t=sessionStorage.getItem("voley_password");t&&await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})})}handleServerDown(){this.scene.isActive("NoConnection_Scene")||(this.game.scene.getScenes(!0).forEach(e=>{"ConnectionManager_Scene"!==e.scene.key&&"NoConnection_Scene"!==e.scene.key&&(console.log("Pausando escena por caída de servidor:",e.scene.key),this.registry.set("lastActiveScene",e.scene.key),e.scene.pause(),e.input&&(e.input.enabled=!1))}),this.scene.launch("NoConnection_Scene"))}}class F extends t().Scene{tiempoTotal=60;tiempoRestante=this.tiempoTotal;timerText;timerEvent;constructor(){super("GameOnline_Scene")}init(e){this.players=new Map,this.inputMappings=[],this.commandProcessor=new x,this.player1=e.player1,this.player2=e.player2,this.selectedScenario=e.selectedScenario,this.ball=null,this.scoreP1=0,this.scoreP2=0,this.setsP1=0,this.setsP2=0,this.maxSets=3,this.currentSet=1,this.isGoldenPoint=!1,this.isSetEnding=!1,this.ws=this.registry.get("ws"),this.myUsername=this.registry.get("username"),this.seed=e?.seed??Date.now().toString(),this.rng=new(t().Math.RandomDataGenerator)([String(this.seed)]),console.log("[GameOnline] RNG seed:",this.seed),this.rallyId=0,this.ballNet={lastSeq:0,hasTarget:!1,tx:0,ty:0,tvx:0,tvy:0,snapDist:120,lerp:.35},this.ballSyncSeq=0,this.ballSyncEvent=null,this.powerUpSeq=0,this.powerUpsById=new Map,this.powerUpsNetById=new Map,this.powerUpsNetOverlapsById=new Map,this.powerUpExpiryTimers=new Map,this.pendingCollectPowerUps=new Set,this.pendingPowerUpUse=null,this._suppressCollectBroadcast=!1}preload(){this.load.spritesheet("charA_move","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_A/ANIMACIONES_CORRER_RECIBIR.png",{frameWidth:29,frameHeight:44}),this.load.spritesheet("charA_jump","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_A/ANIMACION_REMATE.png",{frameWidth:32,frameHeight:44}),this.load.spritesheet("charB_move","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_B/ANIMACIONES_CORRER_RECIBIR.png",{frameWidth:29,frameHeight:44}),this.load.spritesheet("charB_jump","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_B/ANIMACION_REMATE.png",{frameWidth:32,frameHeight:44}),this.load.spritesheet("charC_move","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_C/ANIMACIONES_CORRER_RECIBIR.png",{frameWidth:29,frameHeight:44}),this.load.spritesheet("charC_jump","ASSETS/PERSONAJES/ANIMACIONES/PERSONAJE_C/ANIMACION_REMATE.png",{frameWidth:32,frameHeight:44}),this.load.image("Gym","ASSETS/FONDOS/GIMNASIO.png"),this.load.image("Playa","ASSETS/FONDOS/PLAYA.png"),this.load.image("Jardin","ASSETS/FONDOS/JARDIN.png"),this.load.image("por2","ASSETS/ITEMS/POWER UPS/MULTIPLICADOR 2.png"),this.load.image("por3","ASSETS/ITEMS/POWER UPS/MULTIPLICADOR 3.png"),this.load.image("paralizar","ASSETS/ITEMS/POWER UPS/PARALIZADO.png"),this.load.image("ralentizar","ASSETS/ITEMS/POWER UPS/RELENTIZAR.png"),this.load.image("velocidad","ASSETS/ITEMS/POWER UPS/VELOCIDAD.png"),this.load.image("marcoPowerUp","ASSETS/JUEGO/Base_powerUp.png"),this.load.image("ball","ASSETS/ITEMS/PELOTAS/P_NORMAL.png"),this.load.image("red","ASSETS/JUEGO/RED.png"),this.load.image("reloj","ASSETS/JUEGO/TIMER.png"),this.load.image("marcoGeneral","ASSETS/JUEGO/MARCADOR_SET.png"),this.load.audio("sfx_silbato","ASSETS/SONIDO/Silbato_inicio_partido_1p4s.mp3"),this.load.audio("sfx_remate","ASSETS/SONIDO/Toque_pelota_remate_03s.mp3"),this.load.audio("sfx_recepcion","ASSETS/SONIDO/Toque_pelota_recepcion.mp3"),this.load.audio("sfx_salto","ASSETS/SONIDO/SonidoSalto_1p.mp3"),this.load.audio("sfx_punto","ASSETS/SONIDO/SonidoPunto.mp3")}create(){const{width:e,height:i}=this.scale;this.worldWidth=e,this.worldHeight=i;const r=this.game.globals.defaultTextStyle;this.sfx={whistle:"sfx_silbato",spike:"sfx_remate",receive:"sfx_recepcion",jump:"sfx_salto",point:"sfx_punto"},this.playSfx(this.sfx.whistle),this.timerText=this.add.text(this.scale.width/2,30,"",{...r,fontSize:"32px",color:"#ffffff"}).setOrigin(.5,0).setScrollFactor(0).setDepth(9999),this.timerIcon=this.add.image(this.scale.width/2,45,"reloj").setOrigin(.5).setScale(2).setScrollFactor(0).setDepth(9e3),this.setFrame=this.add.image(this.scale.width/2,120,"marcoGeneral").setOrigin(.5).setScale(1).setDepth(9998),this.setText=this.add.text(this.scale.width/2,120,`SET ${this.currentSet}`,{...r,fontSize:"32px",color:"#ffffff"}).setOrigin(.5).setDepth(9999);const n=this.setFrame.displayWidth,s=this.setFrame.displayHeight,o=this.setFrame.y+Math.round(s/2)+13,a=Math.round(.22*n);this.setScoreFrameLeft=this.add.image(this.scale.width/2-a,o,"marcoGeneral").setOrigin(.5).setScale(.4,.38).setDepth(9998),this.setScoreFrameRight=this.add.image(this.scale.width/2+a,o,"marcoGeneral").setOrigin(.5).setScale(.4,.38).setDepth(9998),this.setScoreLeft=this.add.text(this.scale.width/2-a,o,`${this.setsP1}`,{...r,fontSize:"28px",color:"#ffffff"}).setOrigin(.5).setDepth(9999),this.setScoreRight=this.add.text(this.scale.width/2+a,o,`${this.setsP2}`,{...r,fontSize:"28px",color:"#ffffff"}).setOrigin(.5).setDepth(9999),this.setWinnerText=this.add.text(this.scale.width/2,205,"",{...r,fontSize:"28px",color:"#ffffff",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setDepth(9999).setVisible(!1),this.isHostClient()&&(this.timerEvent=this.time.addEvent({delay:1e3,callback:this.updateTimer,callbackScope:this,loop:!0})),this._renderTimerText(),this.add.image(e/2,i/2,this.selectedScenario).setOrigin(.5).setDisplaySize(e,i).setDepth(-1);const l=this.physics.add.staticSprite(e/2,i-160,"red").setScale(.6),h=this.textures.get("red").getSourceImage();l.body.setSize(.5*h.width,.5*h.height),l.body.setOffset(-l.body.width/2,-l.body.height/2),l.body.updateFromGameObject(),this.red=l,this._createAnimations(),this.pointsLeft=0,this.pointsRight=0,this.scoreFrameLeft=this.add.image(200,50,"marcoGeneral").setScale(.8,.55).setOrigin(.5),this.scoreFrameRight=this.add.image(this.worldWidth-200,50,"marcoGeneral").setScale(.8,.55).setOrigin(.5),this.scoreLeft=this.add.text(200,45,"0",{...r,fontSize:"40px",color:"#ffffffff"}).setOrigin(.5).setDepth(9999),this.rightScore=this.add.text(this.worldWidth-200,45,"0",{...r,fontSize:"40px",color:"#ffffffff"}).setOrigin(.5).setDepth(9999),this.groundHeight=20,this.groundY=this.worldHeight-90;const c=this.add.rectangle(this.worldWidth/2,this.groundY,this.worldWidth,20).setOrigin(.5,0).setVisible(!1);this.physics.add.existing(c,!0),this._createPlayers(),this._setupPhysicsWorld(c),this._setupInputMappings(),this.powerUps=[],this.maxPowerUps=2,this.powerUpSpawnConfig={minDelayMs:3500,maxDelayMs:7e3,weights:{velocidad:3,ralentizar:2,paralizar:1,por2:3,por3:2},cooldownMs:{paralizar:1e4}},this.powerUpLastSpawnAt={},this.inventoryUI={player1:[this.add.image(50,50,"por2").setScale(1.4).setVisible(!1).setDepth(1),this.add.image(110,50,"por2").setScale(1.4).setVisible(!1).setDepth(1)],player2:[this.add.image(this.worldWidth-110,50,"por2").setScale(1.4).setVisible(!1).setDepth(1),this.add.image(this.worldWidth-50,50,"por2").setScale(1.4).setVisible(!1).setDepth(1)]},this.isHostClient()&&this.schedulePowerUpSpawn(),this.inventoryFrames={player1:[this.add.image(50,50,"marcoPowerUp").setScale(1).setOrigin(.5).setDepth(0),this.add.image(110,50,"marcoPowerUp").setScale(1).setOrigin(.5).setDepth(0)],player2:[this.add.image(this.worldWidth-110,50,"marcoPowerUp").setScale(1).setOrigin(.5).setDepth(0),this.add.image(this.worldWidth-50,50,"marcoPowerUp").setScale(1).setOrigin(.5).setDepth(0)]},this._createBall(),this.isHostClient()?(this.ball.setServePosition(),this._setupBallCollisions(),this._setupBallEvents(),this._startBallSync(66),this._sendBallReset("start")):(this.ball.sprite.body.setAllowGravity(!1),this.ball.sprite.body.setVelocity(0,0),this.ball.sprite.body.moves=!1,this.ballNet.tx=this.ball.sprite.x,this.ballNet.ty=this.ball.sprite.y,this.ballNet.hasTarget=!0),this.setupWebSocketListeners(),this.events.on("resume",()=>{this.timerEvent.paused=!1}),this.events.once(t().Scenes.Events.SHUTDOWN,()=>{this._stopBallSync()})}isHostClient(){return this.player1?.name===this.myUsername}setupWebSocketListeners(){this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleServerMessage(t)}catch(e){console.error("Error parsing server message:",e)}},this.ws.onclose=()=>{console.log("WebSocket connection closed"),this.gameEnded||this.handleDisconnection()},this.ws.onerror=e=>{console.error("WebSocket error:",e),this.gameEnded||this.handleDisconnection()}}handleServerMessage(e){switch(e.type){case"opponent_move":this._handleOponentInput(e);break;case"ball_update":this.isHostClient()||this._onBallUpdate(e);break;case"ball_reset":this.isHostClient()?null!=e.rallyId&&(this.rallyId=e.rallyId):this._onBallReset(e);break;case"spawn_powerup":if(this.isHostClient())break;const t=this.physics.add.staticImage(e.x,e.y,e.powerType).setDepth(2).setScale(1.2);t.refreshBody&&t.refreshBody(),this.powerUpsNetById.set(e.id,t);const i=this.player1.name===this.myUsername?this.players.get("player1"):this.players.get("player2"),r=i=>{if(!i?.sprite)return!1;if(this.powerUpsNetOverlapsById.has(e.id))return!0;const r=this.physics.add.overlap(i.sprite,t,()=>{this.pendingCollectPowerUps.has(e.id)||(this.pendingCollectPowerUps.add(e.id),this.sendMessage({type:"collect_powerup",id:e.id,playerName:this.myUsername}))});return this.powerUpsNetOverlapsById.set(e.id,r),!0};r(i)||this.time.delayedCall(100,()=>{if(!this.powerUpsNetById.has(e.id))return;const t=this.player1.name===this.myUsername?this.players.get("player1"):this.players.get("player2");r(t)});break;case"remove_powerup":const n=this.powerUpExpiryTimers.get(e.id);if(n&&n.remove(!1),this.powerUpExpiryTimers.delete(e.id),!this.isHostClient()){const t=this.powerUpsNetById.get(e.id),i=this.powerUpsNetOverlapsById.get(e.id);i&&i.destroy(),t&&t.destroy(),this.powerUpsNetOverlapsById.delete(e.id),this.powerUpsNetById.delete(e.id),this.pendingCollectPowerUps.delete(e.id)}break;case"collect_denied":if(!this.isHostClient()&&null!=e?.id){const t=e.id;this.time.delayedCall(300,()=>{this.pendingCollectPowerUps.delete(t)})}break;case"collect_powerup":{if(!this.isHostClient())break;const t=e.id,i=e.playerName,r=this.powerUpsById.get(t);if(!r)break;const n=this.player1.name===i?this.players.get("player1"):this.players.get("player2");if(!n)break;this._suppressCollectBroadcast=!0;const s=r.collect(n);if(this._suppressCollectBroadcast=!1,s){const e=this.powerUpExpiryTimers.get(t);e&&e.remove(!1),this.powerUpExpiryTimers.delete(t),this.powerUpsById.delete(t),this.sendMessage({type:"remove_powerup",id:t}),this._sendInventorySync()}else this.sendMessage({type:"collect_denied",id:t,playerName:i});break}case"use_powerup":case"apply_powerup":const s=e.playerName,o=e.powerType,a=this.player1.name===s?this.players.get("player1"):this.players.get("player2");if(!a)break;if(this.isHostClient()){let e=null;if(o&&(e=a.useNextPowerUp(o)),e||(e=a.useNextPowerUp()),!e){this._sendInventorySync();break}this.updatePlayerInventoryUI(a),this._sendInventorySync(),this.sendMessage({type:"use_powerup",playerName:s,powerType:e})}else this.pendingPowerUpUse&&this.pendingPowerUpUse.playerName===s&&(this.pendingPowerUpUse=null),o&&(a.useNextPowerUp(o)||(a.activatePowerUp(o),a.applyPowerUpEffect(o)),this.updatePlayerInventoryUI(a));break;case"set_message":this.isHostClient()||(this.setWinnerText.setText(e.text??""),this.setWinnerText.setVisible(!!e.visible));break;case"inv_sync":if(!this.isHostClient()){const t=this.players.get("player1"),i=this.players.get("player2");t&&(t.powerUpInventory=e.p1Inv??[],this.updatePlayerInventoryUI(t)),i&&(i.powerUpInventory=e.p2Inv??[],this.updatePlayerInventoryUI(i)),this.pendingPowerUpUse=null}break;case"score_sync":this._applyScoreSync(e);break;case"timer_sync":this.isHostClient()||"number"!=typeof e.tiempoRestante||(this.tiempoRestante=e.tiempoRestante,this._renderTimerText());break;case"playerDisconnected":this.handleDisconnection();break;default:console.log("Unknown message type:",e.type)}}handleDisconnection(){this.gameEnded=!0,this.timerEvent&&(this.timerEvent.paused=!0),this.physics.world.pause();const e="El oponente ha abandonado.";console.log(e),this.add.text(400,250,e,{fontSize:"48px",color:"#ff0000"}).setOrigin(.5),this.shutdown(),this.scene.start("Menu_Scene")}shutdown(){this.powerUpExpiryTimers&&this.powerUpExpiryTimers.size>0&&(this.powerUpExpiryTimers.forEach(e=>{e&&e.remove(!1)}),this.powerUpExpiryTimers.clear()),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.close()}sendMessage(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(e))}schedulePowerUpSpawn(){const{minDelayMs:e,maxDelayMs:i}=this.powerUpSpawnConfig,r=this.rng??t().Math.RND,n=r.between(e,i);this.time.delayedCall(n,()=>{if(this.powerUps.length<this.maxPowerUps){const e=this.red.x,t=80,i=25,n=0===r.between(0,1),s=n?t:e+i,o=n?e-i:this.worldWidth-t,a=r.between(Math.floor(s),Math.floor(o)),l=r.between(this.worldHeight-220,this.worldHeight-120),h=this._getWeightedPowerUpType();if(h){const e=++this.powerUpSeq,t=new _(this,a,l,h),i=t.collect.bind(t);t.collect=t=>{const r=Array.isArray(t?.powerUpInventory)?t.powerUpInventory.length:0;i(t);const n=(Array.isArray(t?.powerUpInventory)?t.powerUpInventory.length:0)>r;if(n&&this.isHostClient()&&!this._suppressCollectBroadcast){const t=this.powerUpExpiryTimers.get(e);t&&t.remove(!1),this.powerUpExpiryTimers.delete(e),this.powerUpsById.delete(e),this.sendMessage({type:"remove_powerup",id:e}),this._sendInventorySync()}return n},this.powerUps.push(t),this.powerUpLastSpawnAt[h]=this.time.now,this.powerUpsById.set(e,t),this.sendMessage({type:"spawn_powerup",id:e,x:a,y:l,powerType:h});const r=Number.isFinite(t?.lifetime)?t.lifetime:5e3,n=this.time.delayedCall(r,()=>{this.powerUpExpiryTimers.delete(e);const t=this.powerUpsById.get(e);t&&(t.isCollected||this.sendMessage({type:"remove_powerup",id:e}),this.powerUpsById.delete(e))});this.powerUpExpiryTimers.set(e,n)}}this.schedulePowerUpSpawn()})}_getWeightedPowerUpType(){const{weights:e,cooldownMs:i}=this.powerUpSpawnConfig,r=this.time.now,n=Object.entries(e).filter(([e,t])=>{if(t<=0)return!1;const n=i?.[e];if(!n)return!0;const s=this.powerUpLastSpawnAt?.[e]||0;return r-s>=n});if(!n.length)return null;const s=n.reduce((e,[,t])=>e+t,0);let o=(this.rng??t().Math.RND).between(1,s);for(const[e,t]of n)if(o-=t,o<=0)return console.log("[Game_Scene] Power-up aleatorio: ",e),e;return n[n.length-1][0]}playSfx(e){e&&this.sound.play(e,{volume:h()})}update(){this._handleMyInput(),this.players.forEach(e=>e.updatePowerUps()),this.ball&&(this.isHostClient()?(this.ball.update(),this.ball.isBallLive&&this.ball.sprite.y>this.groundY&&this.ball.onGrounded(),(this.ball.sprite.x<475&&"right"===this.ball.courtSide||this.ball.sprite.x>485&&"left"===this.ball.courtSide)&&this.ball.crossNet()):this._applyBallNet())}updateTimer(){this.isHostClient()&&(this.tiempoRestante--,this._renderTimerText(),this.sendMessage({type:"timer_sync",tiempoRestante:this.tiempoRestante}),this.tiempoRestante<=0&&(this.timerEvent.paused=!0,console.log("FIN DEL TIEMPO"),this.scoreP1>this.scoreP2?this._endSet("player1"):this.scoreP2>this.scoreP1?this._endSet("player2"):(console.log("Empate en el set"),this.isGoldenPoint=!0,this.setWinnerText&&(this.setWinnerText.setText("EMPATE: punto de oro"),this.setWinnerText.setVisible(!0)))))}updateSetScoreUI(){this.setScoreLeft&&this.setScoreLeft.setText(this.setsP1.toString()),this.setScoreRight&&this.setScoreRight.setText(this.setsP2.toString())}updatePlayerInventoryUI(e){const t=this.inventoryUI[e.id];for(let i=0;i<2;i++)e.powerUpInventory[i]?(t[i].setTexture(e.powerUpInventory[i]),t[i].setVisible(!0)):t[i].setVisible(!1)}_createAnimations(){this.anims.create({key:"charA_idleRight",frames:this.anims.generateFrameNumbers("charA_move",{start:0,end:1}),frameRate:5,repeat:-1}),this.anims.create({key:"charA_idleLeft",frames:this.anims.generateFrameNumbers("charA_move",{start:20,end:21}).reverse(),frameRate:5,repeat:-1}),this.anims.create({key:"charA_receiveRight",frames:this.anims.generateFrameNumbers("charA_move",{start:0,end:10}),frameRate:17,repeat:0}),this.anims.create({key:"charA_receiveLeft",frames:this.anims.generateFrameNumbers("charA_move",{start:11,end:21}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charA_runRight",frames:this.anims.generateFrameNumbers("charA_move",{start:22,end:32}),frameRate:22,repeat:-1}),this.anims.create({key:"charA_runLeft",frames:this.anims.generateFrameNumbers("charA_move",{start:33,end:43}).reverse(),frameRate:22,repeat:-1}),this.anims.create({key:"charA_jumpRight",frames:this.anims.generateFrameNumbers("charA_jump",{start:0,end:12}),frameRate:17,repeat:0}),this.anims.create({key:"charA_jumpLeft",frames:this.anims.generateFrameNumbers("charA_jump",{start:13,end:25}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charB_idleRight",frames:this.anims.generateFrameNumbers("charB_move",{start:0,end:1}),frameRate:5,repeat:-1}),this.anims.create({key:"charB_idleLeft",frames:this.anims.generateFrameNumbers("charB_move",{start:20,end:21}).reverse(),frameRate:5,repeat:-1}),this.anims.create({key:"charB_receiveRight",frames:this.anims.generateFrameNumbers("charB_move",{start:0,end:10}),frameRate:17,repeat:0}),this.anims.create({key:"charB_receiveLeft",frames:this.anims.generateFrameNumbers("charB_move",{start:11,end:21}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charB_runRight",frames:this.anims.generateFrameNumbers("charB_move",{start:22,end:32}),frameRate:22,repeat:-1}),this.anims.create({key:"charB_runLeft",frames:this.anims.generateFrameNumbers("charB_move",{start:33,end:43}).reverse(),frameRate:22,repeat:-1}),this.anims.create({key:"charB_jumpRight",frames:this.anims.generateFrameNumbers("charB_jump",{start:0,end:12}),frameRate:17,repeat:0}),this.anims.create({key:"charB_jumpLeft",frames:this.anims.generateFrameNumbers("charB_jump",{start:13,end:25}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charC_idleRight",frames:this.anims.generateFrameNumbers("charC_move",{start:0,end:1}),frameRate:5,repeat:-1}),this.anims.create({key:"charC_idleLeft",frames:this.anims.generateFrameNumbers("charC_move",{start:20,end:21}).reverse(),frameRate:5,repeat:-1}),this.anims.create({key:"charC_receiveRight",frames:this.anims.generateFrameNumbers("charC_move",{start:0,end:10}),frameRate:17,repeat:0}),this.anims.create({key:"charC_receiveLeft",frames:this.anims.generateFrameNumbers("charC_move",{start:11,end:21}).reverse(),frameRate:17,repeat:0}),this.anims.create({key:"charC_runRight",frames:this.anims.generateFrameNumbers("charC_move",{start:22,end:32}),frameRate:22,repeat:-1}),this.anims.create({key:"charC_runLeft",frames:this.anims.generateFrameNumbers("charC_move",{start:33,end:43}).reverse(),frameRate:22,repeat:-1}),this.anims.create({key:"charC_jumpRight",frames:this.anims.generateFrameNumbers("charC_jump",{start:0,end:12}),frameRate:17,repeat:0}),this.anims.create({key:"charC_jumpLeft",frames:this.anims.generateFrameNumbers("charC_jump",{start:13,end:25}).reverse(),frameRate:17,repeat:0})}_createPlayers(){const e=this.player1.character,t=this.player2.character,i=new S(this,"player1",.25*this.worldWidth,this.groundY-100,e),r=new S(this,"player2",.75*this.worldWidth,this.groundY-100,t);this.players.set("player1",i),this.players.set("player2",r);const n=Math.floor(this.groundY);i.setBounds(80,455,50,n),r.setBounds(505,this.worldWidth-80,50,n),this.commandProcessor.setPlayers(this.players),this.commandProcessor.setGameScene(this),i.idleRight(),r.idleLeft()}_setupPhysicsWorld(e){this.players.forEach(t=>{this.physics.add.collider(t.sprite,e),this.physics.add.collider(t.sprite,this.red,()=>{console.log(`${t.id} tocó la red!`),t.sprite.setVelocityX(0)})})}_setupInputMappings(){this.inputMappings=[{playerId:"player1",leftKey:"A",rightKey:"D",jumpKey:"W",receiveKey:"S",powerKey:"E"},{playerId:"player2",leftKey:"J",rightKey:"L",jumpKey:"I",receiveKey:"K",powerKey:"O"}].map(e=>({playerId:e.playerId,leftKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.leftKey]),rightKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.rightKey]),jumpKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.jumpKey]),receiveKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.receiveKey]),powerKeyObj:this.input.keyboard.addKey(t().Input.Keyboard.KeyCodes[e.powerKey])}))}_handleMyInput(){const e=this.player1.name===this.myUsername?this.players.get("player1"):this.players.get("player2"),i=this.inputMappings.find(t=>t.playerId===e.id);if(e.isParalyzed){const t="left"===e.facing?"idleLeft":"idleRight";return void this.commandProcessor.process(new T(e,t))}let r;if(r=i.leftKeyObj.isDown?"left":i.rightKeyObj.isDown?"right":"left"===e.facing?"idleLeft":"idleRight",e.isJumping||(this.commandProcessor.process(new T(e,r)),this.sendMessage({type:"player_move",playerName:this.myUsername,command:r})),t().Input.Keyboard.JustDown(i.receiveKeyObj)){const t="left"===e.facing?"receiveLeft":"receiveRight";this.commandProcessor.process(new T(e,t)),this.sendMessage({type:"player_move",playerName:this.myUsername,command:t})}if(t().Input.Keyboard.JustDown(i.jumpKeyObj)){const t="left"===e.facing?"jumpLeft":"jumpRight";this.commandProcessor.process(new T(e,t)),this.sendMessage({type:"player_move",playerName:this.myUsername,command:t})}if(t().Input.Keyboard.JustDown(i.powerKeyObj))if(console.log("[PowerUp] key pressed. isHost?",this.isHostClient(),"player:",e.id,"inv:",e.powerUpInventory),this.isHostClient()){const t=e.useNextPowerUp();if(!t)return;console.log("[PowerUp] Host used:",t,"inv:",e.powerUpInventory),this.updatePlayerInventoryUI(e),this.sendMessage({type:"use_powerup",playerName:this.myUsername,powerType:t}),this._sendInventorySync()}else{if(this.pendingPowerUpUse)return void console.log("[PowerUp] blocked: pendingPowerUpUse=",this.pendingPowerUpUse);const t=e.powerUpInventory?.[0];if(!t)return void console.log("[PowerUp] no powerups in inventory -> ignore");this.pendingPowerUpUse={playerName:this.myUsername,powerType:t,t:this.time.now},console.log("[PowerUp] requesting use:",t),this.sendMessage({type:"use_powerup",playerName:this.myUsername,powerType:t})}e.update()}_handleOponentInput(e){const t=this.player1.name===e.playerName?this.players.get("player1"):this.players.get("player2");"powerUp"===e.command?(t.useNextPowerUp(),this.updatePlayerInventoryUI(t)):this.commandProcessor.process(new T(t,e.command)),t.update()}_createBall(){this.ball=new b(this,this.worldWidth/2,150)}_setupBallCollisions(){this.players.forEach(e=>{this.physics.add.overlap(this.ball.sprite,e.sprite,()=>this._onBallPlayerCollision(this.ball,e),null,this)}),this.physics.add.collider(this.ball.sprite,this.red,()=>{console.log("La pelota toca la red!"),this.ball.sprite.setVelocityX(.5*this.ball.sprite.body.velocity.x),this.ball.sprite.setVelocityY(.5*this.ball.sprite.body.velocity.y)}),this.worldHeight,this.ball.sprite.setCollideWorldBounds(!0),this.ball.sprite.setBounce(.8)}_setupBallEvents(){this.events.on("rallyConcluded",e=>{if(this.isSetEnding)return;console.log(`Rally concluded: ${e.scoringPlayerId} scores!`);const t=e.scoringPlayerId,i=this.players.get(t),r=i&&i.scoreMultiplier||1;if("player1"===t?(this.pointsLeft+=r,this.scoreLeft.setText(this.pointsLeft.toString()),this.scoreP1+=r):"player2"===t&&(this.pointsRight+=r,this.rightScore.setText(this.pointsRight.toString()),this.scoreP2+=r),this.playSfx(this.sfx.point),this.isGoldenPoint)return this.isGoldenPoint=!1,void this._endSet(t);this._checkWinCondition(),this.isSetEnding||(this.ball.resetRally(),this.ball.setServePosition(),this._sendBallReset("point")),this._sendScoreSync()})}_isBallInHitZone(e,t,i,r){const n=t.sprite.body;if(!n)return!1;const s=e.x,o=e.y,a=n.y,l=n.height,h=n.x+.5*n.width,c=i?{top:-.1,bottom:.6}:r?{top:.35,bottom:.85}:{top:.25,bottom:.85};if(o<a+l*c.top||o>a+l*c.bottom)return!1;const u="right"===t.facing,p=r||i,d=n.width*(p?.9:.75),f=n.width*(p?.25:.15);return!(s<(u?h-f:h-d)||s>(u?h+d:h+f))}_onBallPlayerCollision(e,t){if(!e.isBallLive)return;const i=!t.sprite.body.blocked.down,r=t.isReceiving,n=t.facing;this._isBallInHitZone(e.sprite,t,i,r)&&e.hit(t,n,i,r)}_endGame(e){this._stopBallSync(),this.timerEvent&&(this.timerEvent.remove(!1),this.timerEvent=null),this.playSfx(this.sfx.whistle),this.physics&&this.physics.world&&this.physics.world.pause(),console.log("Partida Local terminada. Ganador:",e),this.scene.start("EndGame_Scene",{winner:e,player1:this.player1,player2:this.player2})}_checkWinCondition(){const e=this.scoreP1-this.scoreP2;if(Math.max(this.scoreP1,this.scoreP2)<11||Math.abs(e)<2)return;const t=e>0?"player1":"player2";this._endSet(t)}_endSet(e){if(this.isSetEnding)return;this.isSetEnding=!0,this.ball?.sprite&&(this.ball.isBallLive=!1,this.ball.sprite.setVelocity(0,0)),"player1"===e?this.setsP1++:"player2"===e&&this.setsP2++,console.log(`Set terminado. Score sets: P1=${this.setsP1}, P2=${this.setsP2}`),this.updateSetScoreUI(),this._sendScoreSync(),this.sendMessage({type:"set_message",text:`SET para ${e}`,visible:!0});const t="player1"===e?"Jugador 1":"Jugador 2";this.setWinnerText.setText(`SET para ${t}`),this.setWinnerText.setVisible(!0),this.currentSet++,2===this.setsP1||2===this.setsP2?this.time.delayedCall(2e3,()=>{this._endGame(e)}):this.time.delayedCall(2e3,()=>{this.setWinnerText&&this.setWinnerText.setVisible(!1),this._resetSet()})}_resetSet(){this.isSetEnding=!1,this.isGoldenPoint=!1,this.setText.setText(`SET ${this.currentSet}`),this.tiempoRestante=this.tiempoTotal,this.timerEvent.paused=!1,this.updateTimer(),this.scoreP1=0,this.scoreP2=0,this.pointsLeft=0,this.pointsRight=0,this.scoreLeft.setText("0"),this.rightScore.setText("0"),this._sendScoreSync();const e=this.players.get("player1"),t=this.players.get("player2");e.setPosition(.25*this.worldWidth,.7*this.worldHeight),t.setPosition(.75*this.worldWidth,.7*this.worldHeight),e.idleRight(),t.idleLeft(),this.ball.resetRally(),this.ball.setServePosition(),this._sendBallReset("set_reset"),this.playSfx(this.sfx.whistle)}_renderTimerText(){const e=Math.floor(this.tiempoRestante/60),t=this.tiempoRestante%60,i=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;this.timerText.setText(i)}_startBallSync(e=66){this.isHostClient()&&(this.ballSyncEvent&&this.ballSyncEvent.remove(!1),this.ballSyncEvent=this.time.addEvent({delay:e,loop:!0,callback:()=>{if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return;if(!this.ball?.sprite?.body)return;const e=this.ball.sprite.body;this.ballSyncSeq++,this.sendMessage({type:"ball_sync",x:this.ball.sprite.x,y:this.ball.sprite.y,vx:e.velocity?.x??0,vy:e.velocity?.y??0,seq:this.ballSyncSeq})}}))}_stopBallSync(){this.ballSyncEvent&&(this.ballSyncEvent.remove(!1),this.ballSyncEvent=null)}_sendBallReset(e="point"){if(!this.isHostClient())return;if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return;if(!this.ball?.sprite?.body)return;const t=this.ball.sprite.body;this.ballSyncSeq++,this.sendMessage({type:"ball_reset",reason:e,x:this.ball.sprite.x,y:this.ball.sprite.y,vx:t.velocity?.x??0,vy:t.velocity?.y??0,seq:this.ballSyncSeq})}_onBallUpdate(e){if(null!=e.rallyId&&e.rallyId!==this.rallyId)return;const t=e.seq??0;t&&t<=this.ballNet.lastSeq||(this.ballNet.lastSeq=t,this.ballNet.tx=e.x,this.ballNet.ty=e.y,this.ballNet.tvx=e.vx??0,this.ballNet.tvy=e.vy??0,this.ballNet.hasTarget=!0)}_onBallReset(e){null!=e.rallyId&&(this.rallyId=e.rallyId),this.ballNet.lastSeq=e.seq??this.ballNet.lastSeq,this.ball?.sprite&&(this.ball.sprite.setPosition(e.x,e.y),this.ballNet.tx=e.x,this.ballNet.ty=e.y,this.ballNet.hasTarget=!0)}_applyBallNet(){if(!this.ballNet.hasTarget||!this.ball?.sprite)return;const e=this.ball.sprite.x,i=this.ball.sprite.y,r=this.ballNet.tx-e,n=this.ballNet.ty-i;Math.hypot(r,n)>this.ballNet.snapDist?this.ball.sprite.setPosition(this.ballNet.tx,this.ballNet.ty):(this.ball.sprite.x=t().Math.Linear(e,this.ballNet.tx,this.ballNet.lerp),this.ball.sprite.y=t().Math.Linear(i,this.ballNet.ty,this.ballNet.lerp))}_applyScoreSync(e){"number"==typeof e.scoreP1&&(this.scoreP1=e.scoreP1),"number"==typeof e.scoreP2&&(this.scoreP2=e.scoreP2),"number"==typeof e.pointsLeft&&(this.pointsLeft=e.pointsLeft,this.scoreLeft.setText(String(this.pointsLeft))),"number"==typeof e.pointsRight&&(this.pointsRight=e.pointsRight,this.rightScore.setText(String(this.pointsRight))),"number"==typeof e.setsP1&&(this.setsP1=e.setsP1),"number"==typeof e.setsP2&&(this.setsP2=e.setsP2),this.updateSetScoreUI(),"number"==typeof e.currentSet&&(this.currentSet=e.currentSet,this.setText.setText(`SET ${this.currentSet}`)),"boolean"==typeof e.isGoldenPoint&&(this.isGoldenPoint=e.isGoldenPoint)}_sendScoreSync(){this.isHostClient()&&this.sendMessage({type:"update_score",scoreP1:this.scoreP1,scoreP2:this.scoreP2,pointsLeft:this.pointsLeft,pointsRight:this.pointsRight,setsP1:this.setsP1,setsP2:this.setsP2,currentSet:this.currentSet,isGoldenPoint:this.isGoldenPoint})}_sendInventorySync(){if(!this.isHostClient())return;console.log("[GAMEONLINE] Enviando mensaje de sincronizar inventarios...");const e=this.players.get("player1"),t=this.players.get("player2");console.log("[GAMEONLINE] Enviando mensaje para el server..."),this.sendMessage({type:"inv_sync",p1Inv:e?.powerUpInventory??[],p2Inv:t?.powerUpInventory??[]})}}class V extends t().Scene{constructor(){super("Ranking_Scene"),this.rankingLines=[]}preload(){this.load.image("botonVolver","ASSETS/UI/BOTONES/FLECHA_VOLVER.png"),this.load.image("fondoMenuPrincipal","ASSETS/FONDOS/MENU_PRINCIPAL.png"),this.load.audio("sonidoClick","ASSETS/SONIDO/SonidoBoton.mp3")}async create(){const{width:e,height:i}=this.scale,r=this.game.globals?.defaultTextStyle??{fontFamily:"Arial",fontSize:"20px",color:"#ffffff"};this.add.image(0,0,"fondoMenuPrincipal").setOrigin(0).setDepth(-2).setDisplaySize(e,i),this.add.rectangle(0,0,e,i,0,.5).setOrigin(0).setDepth(-1);const n=.42*e,s=.56*i,o=.75*e,a=.5*i;this.add.rectangle(o,a,n,s,1118481,.7).setOrigin(.5).setStrokeStyle(2,16777215,.2),this.add.text(o,.1*i,"Ranking",{...r,fontSize:"42px",color:"#ffffff"}).setOrigin(.5),this.add.text(o,a-.42*s,"TOP 5 por partidas ganadas",{...r,fontFamily:"VT323",fontSize:"34px",color:"#f5d76e"}).setOrigin(.5),this.rankingText=this.add.text(o,a-.3*s,"Cargando...",{...r,fontFamily:"VT323",fontSize:"30px",color:"#ffffff",align:"center",lineSpacing:10}).setOrigin(.5,0),g(this,{x:.06*e,y:.08*i,texture:"botonVolver",scale:1,hoverScale:1.1,onClick:()=>this.scene.start("Menu_Scene")}),this.events.once(t().Scenes.Events.SHUTDOWN,this.shutdown,this),await this.loadRanking(),this.rankingTimer=this.time.addEvent({delay:1e4,callback:()=>this.loadRanking(),loop:!0})}async loadRanking(){try{const e=await fetch("/api/topPlayers",{cache:"no-store"}),t=(await e.json()).topPlayers??[];if(!Array.isArray(t)||0===t.length)return void this.rankingText.setText("Todavía no hay datos.");const i=t.map((e,t)=>{const i=e.partidasGanadas??0,r=e.partidaJugadas??0,n=e.partidasPerdidas??0;return`${t+1}. ${e.username} — ${i}W (${r}J / ${n}L)`});this.rankingText.setText(i.join("\n"))}catch(e){console.error("Error cargando ranking:",e),this.rankingText.setText("Error cargando ranking.")}}shutdown(){this.rankingTimer&&(this.rankingTimer.remove(!1),this.rankingTimer=null)}}(async()=>{document.fonts&&document.fonts.load&&(await Promise.all([document.fonts.load('20px "MiFuente"'),document.fonts.load('20px "VT323"')]),await document.fonts.ready);const e={defaultTextStyle:{fontFamily:"MiFuente",fontSize:"20px",color:"#ffffff"},music:null},i={type:t().AUTO,width:960,height:540,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{x:0,y:300},debug:!1}},dom:{createContainer:!0},callbacks:{preBoot:t=>{t.globals=e}},scene:[M,y,E,F,A,O,V,I,R,N,C,P,k,L,j,D],backgroundColor:"#8675f1"},r=new(t().Game)(i);window.addEventListener("beforeunload",()=>{const e=r.registry.get("username");if(e){const t=JSON.stringify({username:e}),i=new Blob([t],{type:"application/json"});navigator.sendBeacon("/api/logout",i)}})})()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsS0FFUixFQUFVLElBQU0sRUFBVSxJQUFLLEVBQVUsSUFDekMsRUFBVSxJQUFNLEVBQVUsSUFBSyxFQUFVLElBQ3pDLEVBQVUsSUFBTSxFQUFVLElBQUssRUFBVSxJQUFLLEVBQVUsSUFDeEQsRUFBVSxJQUFNLEVBQVUsSUFBSyxFQUFVLElBQUssRUFBVSxJQUN4RCxFQUFVLElBQU0sRUFBVSxJQUFLLEVBQVUsSUFBSyxFQUFVLElBQ3hELEVBQVUsSUFBTSxFQUFVLElBQUssRUFBVSxJQUFLLEVBQVUsSUFBSyxFQUFVLElBQ3ZFLEVBQVUsSUFBTSxFQUFVLElBQUssRUFBVSxJQUFLLEVBQVUsSUFBSyxFQUFVLElBQ3ZFLEVBQVUsSUFBTSxFQUFVLElBQUssRUFBVSxJQUFLLEVBQVUsSUFDeEQsRUFBVSxJQUFNLEVBQVUsSUFBSyxFQUFVLElBQUssRUFBVSxJQUN4RCxFQUFVLElBQU0sRUFBVSxJQUFLLEVBQVUsSUFBSyxFQUFVLElBQ3hELEVBQVUsSUFBTSxFQUFVLElBQUssRUFBVSxJQUFLLEVBQVUsSUFBSyxFQUFVLElBQ3ZFLEVBQVUsSUFBTSxFQUFVLElBQUssRUFBVSxJQUFLLEVBQVUsSUFBSyxFQUFVLElBQ3ZFLEVBQVUsSUFBTSxFQUFVLElBQzFCLEVBQVUsSUFBTSxFQUFVLElBQUssRUFBVSxJQUN6QyxFQUFVLElBQU0sRUFBVSxJQUFLLEVBQVUsSUFBSyxFQUFVLElBQUssRUFBVSxJQUN2RSxFQUFVLElBQU0sRUFBVSxJQUFLLEVBQVUsSUFBSyxFQUFVLElBQUssRUFBVSxJQUN2RSxFQUFVLElBQU0sRUFBVSxJQUFLLEVBQVUsSUFBSyxFQUFVLElBQ3hELEVBQVUsSUFBTSxFQUFVLElBQUssRUFBVSxJQUFLLEVBQVUsSUFDeEQsRUFBVSxJQUFNLEVBQVUsSUFBSyxFQUFVLElBQ3pDLEVBQVUsSUFBTSxFQUFVLElBQUssRUFBVSxJQUN6QyxFQUFVLElBQU0sRUFBVSxJQUFLLEVBQVUsSUFDekMsRUFBVSxJQUFNLEVBQVUsSUFBSyxFQUFVLElBQ3pDLEVBQVUsSUFBTSxFQUFVLElBQUss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RSxFQUFhMEUsRUFBb0JNLEdBQzNQc0gsZ0JBQWdCLFdBR2R2MkIsRUFBTSxJQUFJLFVBQVk4SCxHQUU1QjVKLE9BQU8ybEIsaUJBQWlCLGVBQWdCLEtBQ3BDLE1BQU1yZixFQUFXeEUsRUFBS3lFLFNBQVNuMUIsSUFBSSxZQUNuQyxHQUFJazFCLEVBQVUsQ0FDVixNQUFNajNCLEVBQU9zM0IsS0FBS0MsVUFBVSxDQUFFTixhQUN4Qmd5QixFQUFPLElBQUlDLEtBQUssQ0FBQ2xwRCxHQUFPLENBQUU4WCxLQUFNLHFCQUN0Q3F4QyxVQUFVQyxXQUFXLGNBQWVILEVBQ3hDLEdBRVAsRUFqREQsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvLy4vbm9kZV9tb2R1bGVzL2xvZGFzaC9sb2Rhc2guanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby93ZWJwYWNrL3J1bnRpbWUvbm9kZSBtb2R1bGUgZGVjb3JhdG9yIiwid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvL2V4dGVybmFsIHZhciBcIlBoYXNlclwiIiwid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvLy4vc3JjL1VJL0F1ZGlvLmpzIiwid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvLy4vc3JjL1VJL0J1dHRvbnMuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvU2NlbmVzL01lbnVfU2NlbmUuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvRW50aXRpZXMvUGxheWVyLmpzIiwid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvLy4vc3JjL0NvbW1hbmRzL0FwcGx5UG93ZXJVcENvbW1hbmQuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvRW50aXRpZXMvUG93ZXJVcC5qcyIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby8uL3NyYy9FbnRpdGllcy9CYWxsLmpzIiwid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvLy4vc3JjL0NvbW1hbmRzL0NvbW1hbmRQcm9jZXNzb3IuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvQ29tbWFuZHMvQ29tbWFuZC5qcyIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby8uL3NyYy9Db21tYW5kcy9Nb3ZlUGxheWVyQ29tbWFuZC5qcyIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby8uL3NyYy9TY2VuZXMvR2FtZV9TY2VuZS5qcyIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby8uL3NyYy9TY2VuZXMvVHV0b3JpYWxfU2NlbmUuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvU2NlbmVzL0NvbmZpZ3VyYXRpb25fU2NlbmUuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvU2NlbmVzL0NyZWRpdHNfU2NlbmUuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvU2NlbmVzL0VuZEdhbWVfU2NlbmUuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvU2NlbmVzL01vZGVHYW1lX1NjZW5lLmpzIiwid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvLy4vc3JjL1NjZW5lcy9QYXVzZV9TY2VuZS5qcyIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby8uL3NyYy9TY2VuZXMvU2VsZWN0UGxheWVyX1NjZW5lLmpzIiwid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvLy4vc3JjL1NjZW5lcy9TZWxlY3RTY2VuYXJpb19TY2VuZS5qcyIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby8uL3NyYy9VSS9TY2VuYXJpb1BpY2tlci5qcyIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby8uL3NyYy9VSS9QbGF5ZXJDYXJkLmpzIiwid2VicGFjazovL3ZvbGxleWNsYXNoX2p1ZWdvLy4vc3JjL1NjZW5lcy9Mb2JieV9TY2VuZS5qcyIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby8uL3NyYy9TY2VuZXMvTG9nZ2luZ19TY2VuZS5qcyIsIndlYnBhY2s6Ly92b2xsZXljbGFzaF9qdWVnby8uL3NyYy9TY2VuZXMvTm9Db25lY3Rpb25fU2NlbmUuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvU2NlbmVzL0NvbmVjdGlvbk1hbmFnZXJfU2NlbmUuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvU2NlbmVzL0dhbWVPbmxpbmVfU2NlbmUuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvU2NlbmVzL1JhbmtpbmdfU2NlbmUuanMiLCJ3ZWJwYWNrOi8vdm9sbGV5Y2xhc2hfanVlZ28vLi9zcmMvbWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBMb2Rhc2ggPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBDb3B5cmlnaHQgT3BlbkpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9vcGVuanNmLm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cbjsoZnVuY3Rpb24oKSB7XG5cbiAgLyoqIFVzZWQgYXMgYSBzYWZlIHJlZmVyZW5jZSBmb3IgYHVuZGVmaW5lZGAgaW4gcHJlLUVTNSBlbnZpcm9ubWVudHMuICovXG4gIHZhciB1bmRlZmluZWQ7XG5cbiAgLyoqIFVzZWQgYXMgdGhlIHNlbWFudGljIHZlcnNpb24gbnVtYmVyLiAqL1xuICB2YXIgVkVSU0lPTiA9ICc0LjE3LjIxJztcblxuICAvKiogVXNlZCBhcyB0aGUgc2l6ZSB0byBlbmFibGUgbGFyZ2UgYXJyYXkgb3B0aW1pemF0aW9ucy4gKi9cbiAgdmFyIExBUkdFX0FSUkFZX1NJWkUgPSAyMDA7XG5cbiAgLyoqIEVycm9yIG1lc3NhZ2UgY29uc3RhbnRzLiAqL1xuICB2YXIgQ09SRV9FUlJPUl9URVhUID0gJ1Vuc3VwcG9ydGVkIGNvcmUtanMgdXNlLiBUcnkgaHR0cHM6Ly9ucG1zLmlvL3NlYXJjaD9xPXBvbnlmaWxsLicsXG4gICAgICBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbicsXG4gICAgICBJTlZBTElEX1RFTVBMX1ZBUl9FUlJPUl9URVhUID0gJ0ludmFsaWQgYHZhcmlhYmxlYCBvcHRpb24gcGFzc2VkIGludG8gYF8udGVtcGxhdGVgJztcblxuICAvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG4gIHZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuICAvKiogVXNlZCBhcyB0aGUgbWF4aW11bSBtZW1vaXplIGNhY2hlIHNpemUuICovXG4gIHZhciBNQVhfTUVNT0laRV9TSVpFID0gNTAwO1xuXG4gIC8qKiBVc2VkIGFzIHRoZSBpbnRlcm5hbCBhcmd1bWVudCBwbGFjZWhvbGRlci4gKi9cbiAgdmFyIFBMQUNFSE9MREVSID0gJ19fbG9kYXNoX3BsYWNlaG9sZGVyX18nO1xuXG4gIC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNsb25pbmcuICovXG4gIHZhciBDTE9ORV9ERUVQX0ZMQUcgPSAxLFxuICAgICAgQ0xPTkVfRkxBVF9GTEFHID0gMixcbiAgICAgIENMT05FX1NZTUJPTFNfRkxBRyA9IDQ7XG5cbiAgLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgdmFsdWUgY29tcGFyaXNvbnMuICovXG4gIHZhciBDT01QQVJFX1BBUlRJQUxfRkxBRyA9IDEsXG4gICAgICBDT01QQVJFX1VOT1JERVJFRF9GTEFHID0gMjtcblxuICAvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBmdW5jdGlvbiBtZXRhZGF0YS4gKi9cbiAgdmFyIFdSQVBfQklORF9GTEFHID0gMSxcbiAgICAgIFdSQVBfQklORF9LRVlfRkxBRyA9IDIsXG4gICAgICBXUkFQX0NVUlJZX0JPVU5EX0ZMQUcgPSA0LFxuICAgICAgV1JBUF9DVVJSWV9GTEFHID0gOCxcbiAgICAgIFdSQVBfQ1VSUllfUklHSFRfRkxBRyA9IDE2LFxuICAgICAgV1JBUF9QQVJUSUFMX0ZMQUcgPSAzMixcbiAgICAgIFdSQVBfUEFSVElBTF9SSUdIVF9GTEFHID0gNjQsXG4gICAgICBXUkFQX0FSWV9GTEFHID0gMTI4LFxuICAgICAgV1JBUF9SRUFSR19GTEFHID0gMjU2LFxuICAgICAgV1JBUF9GTElQX0ZMQUcgPSA1MTI7XG5cbiAgLyoqIFVzZWQgYXMgZGVmYXVsdCBvcHRpb25zIGZvciBgXy50cnVuY2F0ZWAuICovXG4gIHZhciBERUZBVUxUX1RSVU5DX0xFTkdUSCA9IDMwLFxuICAgICAgREVGQVVMVF9UUlVOQ19PTUlTU0lPTiA9ICcuLi4nO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCBob3QgZnVuY3Rpb25zIGJ5IG51bWJlciBvZiBjYWxscyB3aXRoaW4gYSBzcGFuIG9mIG1pbGxpc2Vjb25kcy4gKi9cbiAgdmFyIEhPVF9DT1VOVCA9IDgwMCxcbiAgICAgIEhPVF9TUEFOID0gMTY7XG5cbiAgLyoqIFVzZWQgdG8gaW5kaWNhdGUgdGhlIHR5cGUgb2YgbGF6eSBpdGVyYXRlZXMuICovXG4gIHZhciBMQVpZX0ZJTFRFUl9GTEFHID0gMSxcbiAgICAgIExBWllfTUFQX0ZMQUcgPSAyLFxuICAgICAgTEFaWV9XSElMRV9GTEFHID0gMztcblxuICAvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbiAgdmFyIElORklOSVRZID0gMSAvIDAsXG4gICAgICBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MSxcbiAgICAgIE1BWF9JTlRFR0VSID0gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDgsXG4gICAgICBOQU4gPSAwIC8gMDtcblxuICAvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB0aGUgbWF4aW11bSBsZW5ndGggYW5kIGluZGV4IG9mIGFuIGFycmF5LiAqL1xuICB2YXIgTUFYX0FSUkFZX0xFTkdUSCA9IDQyOTQ5NjcyOTUsXG4gICAgICBNQVhfQVJSQVlfSU5ERVggPSBNQVhfQVJSQVlfTEVOR1RIIC0gMSxcbiAgICAgIEhBTEZfTUFYX0FSUkFZX0xFTkdUSCA9IE1BWF9BUlJBWV9MRU5HVEggPj4+IDE7XG5cbiAgLyoqIFVzZWQgdG8gYXNzb2NpYXRlIHdyYXAgbWV0aG9kcyB3aXRoIHRoZWlyIGJpdCBmbGFncy4gKi9cbiAgdmFyIHdyYXBGbGFncyA9IFtcbiAgICBbJ2FyeScsIFdSQVBfQVJZX0ZMQUddLFxuICAgIFsnYmluZCcsIFdSQVBfQklORF9GTEFHXSxcbiAgICBbJ2JpbmRLZXknLCBXUkFQX0JJTkRfS0VZX0ZMQUddLFxuICAgIFsnY3VycnknLCBXUkFQX0NVUlJZX0ZMQUddLFxuICAgIFsnY3VycnlSaWdodCcsIFdSQVBfQ1VSUllfUklHSFRfRkxBR10sXG4gICAgWydmbGlwJywgV1JBUF9GTElQX0ZMQUddLFxuICAgIFsncGFydGlhbCcsIFdSQVBfUEFSVElBTF9GTEFHXSxcbiAgICBbJ3BhcnRpYWxSaWdodCcsIFdSQVBfUEFSVElBTF9SSUdIVF9GTEFHXSxcbiAgICBbJ3JlYXJnJywgV1JBUF9SRUFSR19GTEFHXVxuICBdO1xuXG4gIC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbiAgdmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICAgIGFzeW5jVGFnID0gJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nLFxuICAgICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgICBkb21FeGNUYWcgPSAnW29iamVjdCBET01FeGNlcHRpb25dJyxcbiAgICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyxcbiAgICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgICBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nLFxuICAgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgICBwcm9taXNlVGFnID0gJ1tvYmplY3QgUHJvbWlzZV0nLFxuICAgICAgcHJveHlUYWcgPSAnW29iamVjdCBQcm94eV0nLFxuICAgICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgICAgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXScsXG4gICAgICB1bmRlZmluZWRUYWcgPSAnW29iamVjdCBVbmRlZmluZWRdJyxcbiAgICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXScsXG4gICAgICB3ZWFrU2V0VGFnID0gJ1tvYmplY3QgV2Vha1NldF0nO1xuXG4gIHZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgICBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XScsXG4gICAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG4gICAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggZW1wdHkgc3RyaW5nIGxpdGVyYWxzIGluIGNvbXBpbGVkIHRlbXBsYXRlIHNvdXJjZS4gKi9cbiAgdmFyIHJlRW1wdHlTdHJpbmdMZWFkaW5nID0gL1xcYl9fcCBcXCs9ICcnOy9nLFxuICAgICAgcmVFbXB0eVN0cmluZ01pZGRsZSA9IC9cXGIoX19wIFxcKz0pICcnIFxcKy9nLFxuICAgICAgcmVFbXB0eVN0cmluZ1RyYWlsaW5nID0gLyhfX2VcXCguKj9cXCl8XFxiX190XFwpKSBcXCtcXG4nJzsvZztcblxuICAvKiogVXNlZCB0byBtYXRjaCBIVE1MIGVudGl0aWVzIGFuZCBIVE1MIGNoYXJhY3RlcnMuICovXG4gIHZhciByZUVzY2FwZWRIdG1sID0gLyYoPzphbXB8bHR8Z3R8cXVvdHwjMzkpOy9nLFxuICAgICAgcmVVbmVzY2FwZWRIdG1sID0gL1smPD5cIiddL2csXG4gICAgICByZUhhc0VzY2FwZWRIdG1sID0gUmVnRXhwKHJlRXNjYXBlZEh0bWwuc291cmNlKSxcbiAgICAgIHJlSGFzVW5lc2NhcGVkSHRtbCA9IFJlZ0V4cChyZVVuZXNjYXBlZEh0bWwuc291cmNlKTtcblxuICAvKiogVXNlZCB0byBtYXRjaCB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLiAqL1xuICB2YXIgcmVFc2NhcGUgPSAvPCUtKFtcXHNcXFNdKz8pJT4vZyxcbiAgICAgIHJlRXZhbHVhdGUgPSAvPCUoW1xcc1xcU10rPyklPi9nLFxuICAgICAgcmVJbnRlcnBvbGF0ZSA9IC88JT0oW1xcc1xcU10rPyklPi9nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbiAgdmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG4gICAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC8sXG4gICAgICByZVByb3BOYW1lID0gL1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcXFxdfFxcXFwuKSo/KVxcMilcXF18KD89KD86XFwufFxcW1xcXSkoPzpcXC58XFxbXFxdfCQpKS9nO1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgXG4gICAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcGF0dGVybnMpLlxuICAgKi9cbiAgdmFyIHJlUmVnRXhwQ2hhciA9IC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZyxcbiAgICAgIHJlSGFzUmVnRXhwQ2hhciA9IFJlZ0V4cChyZVJlZ0V4cENoYXIuc291cmNlKTtcblxuICAvKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIHdoaXRlc3BhY2UuICovXG4gIHZhciByZVRyaW1TdGFydCA9IC9eXFxzKy87XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggYSBzaW5nbGUgd2hpdGVzcGFjZSBjaGFyYWN0ZXIuICovXG4gIHZhciByZVdoaXRlc3BhY2UgPSAvXFxzLztcblxuICAvKiogVXNlZCB0byBtYXRjaCB3cmFwIGRldGFpbCBjb21tZW50cy4gKi9cbiAgdmFyIHJlV3JhcENvbW1lbnQgPSAvXFx7KD86XFxuXFwvXFwqIFxcW3dyYXBwZWQgd2l0aCAuK1xcXSBcXCpcXC8pP1xcbj8vLFxuICAgICAgcmVXcmFwRGV0YWlscyA9IC9cXHtcXG5cXC9cXCogXFxbd3JhcHBlZCB3aXRoICguKylcXF0gXFwqLyxcbiAgICAgIHJlU3BsaXREZXRhaWxzID0gLyw/ICYgLztcblxuICAvKiogVXNlZCB0byBtYXRjaCB3b3JkcyBjb21wb3NlZCBvZiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycy4gKi9cbiAgdmFyIHJlQXNjaWlXb3JkID0gL1teXFx4MDAtXFx4MmZcXHgzYS1cXHg0MFxceDViLVxceDYwXFx4N2ItXFx4N2ZdKy9nO1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIHZhbGlkYXRlIHRoZSBgdmFsaWRhdGVgIG9wdGlvbiBpbiBgXy50ZW1wbGF0ZWAgdmFyaWFibGUuXG4gICAqXG4gICAqIEZvcmJpZHMgY2hhcmFjdGVycyB3aGljaCBjb3VsZCBwb3RlbnRpYWxseSBjaGFuZ2UgdGhlIG1lYW5pbmcgb2YgdGhlIGZ1bmN0aW9uIGFyZ3VtZW50IGRlZmluaXRpb246XG4gICAqIC0gXCIoKSxcIiAobW9kaWZpY2F0aW9uIG9mIGZ1bmN0aW9uIHBhcmFtZXRlcnMpXG4gICAqIC0gXCI9XCIgKGRlZmF1bHQgdmFsdWUpXG4gICAqIC0gXCJbXXt9XCIgKGRlc3RydWN0dXJpbmcgb2YgZnVuY3Rpb24gcGFyYW1ldGVycylcbiAgICogLSBcIi9cIiAoYmVnaW5uaW5nIG9mIGEgY29tbWVudClcbiAgICogLSB3aGl0ZXNwYWNlXG4gICAqL1xuICB2YXIgcmVGb3JiaWRkZW5JZGVudGlmaWVyQ2hhcnMgPSAvWygpPSx7fVxcW1xcXVxcL1xcc10vO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqL1xuICB2YXIgcmVFc2NhcGVDaGFyID0gL1xcXFwoXFxcXCk/L2c7XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gbWF0Y2hcbiAgICogW0VTIHRlbXBsYXRlIGRlbGltaXRlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRlbXBsYXRlLWxpdGVyYWwtbGV4aWNhbC1jb21wb25lbnRzKS5cbiAgICovXG4gIHZhciByZUVzVGVtcGxhdGUgPSAvXFwkXFx7KFteXFxcXH1dKig/OlxcXFwuW15cXFxcfV0qKSopXFx9L2c7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGAgZmxhZ3MgZnJvbSB0aGVpciBjb2VyY2VkIHN0cmluZyB2YWx1ZXMuICovXG4gIHZhciByZUZsYWdzID0gL1xcdyokLztcblxuICAvKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xuICB2YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbiAgdmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkpLiAqL1xuICB2YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuICAvKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbiAgdmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xuICB2YXIgcmVJc1VpbnQgPSAvXig/OjB8WzEtOV1cXGQqKSQvO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIExhdGluIFVuaWNvZGUgbGV0dGVycyAoZXhjbHVkaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRvcnMpLiAqL1xuICB2YXIgcmVMYXRpbiA9IC9bXFx4YzAtXFx4ZDZcXHhkOC1cXHhmNlxceGY4LVxceGZmXFx1MDEwMC1cXHUwMTdmXS9nO1xuXG4gIC8qKiBVc2VkIHRvIGVuc3VyZSBjYXB0dXJpbmcgb3JkZXIgb2YgdGVtcGxhdGUgZGVsaW1pdGVycy4gKi9cbiAgdmFyIHJlTm9NYXRjaCA9IC8oJF4pLztcblxuICAvKiogVXNlZCB0byBtYXRjaCB1bmVzY2FwZWQgY2hhcmFjdGVycyBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuICovXG4gIHZhciByZVVuZXNjYXBlZFN0cmluZyA9IC9bJ1xcblxcclxcdTIwMjhcXHUyMDI5XFxcXF0vZztcblxuICAvKiogVXNlZCB0byBjb21wb3NlIHVuaWNvZGUgY2hhcmFjdGVyIGNsYXNzZXMuICovXG4gIHZhciByc0FzdHJhbFJhbmdlID0gJ1xcXFx1ZDgwMC1cXFxcdWRmZmYnLFxuICAgICAgcnNDb21ib01hcmtzUmFuZ2UgPSAnXFxcXHUwMzAwLVxcXFx1MDM2ZicsXG4gICAgICByZUNvbWJvSGFsZk1hcmtzUmFuZ2UgPSAnXFxcXHVmZTIwLVxcXFx1ZmUyZicsXG4gICAgICByc0NvbWJvU3ltYm9sc1JhbmdlID0gJ1xcXFx1MjBkMC1cXFxcdTIwZmYnLFxuICAgICAgcnNDb21ib1JhbmdlID0gcnNDb21ib01hcmtzUmFuZ2UgKyByZUNvbWJvSGFsZk1hcmtzUmFuZ2UgKyByc0NvbWJvU3ltYm9sc1JhbmdlLFxuICAgICAgcnNEaW5nYmF0UmFuZ2UgPSAnXFxcXHUyNzAwLVxcXFx1MjdiZicsXG4gICAgICByc0xvd2VyUmFuZ2UgPSAnYS16XFxcXHhkZi1cXFxceGY2XFxcXHhmOC1cXFxceGZmJyxcbiAgICAgIHJzTWF0aE9wUmFuZ2UgPSAnXFxcXHhhY1xcXFx4YjFcXFxceGQ3XFxcXHhmNycsXG4gICAgICByc05vbkNoYXJSYW5nZSA9ICdcXFxceDAwLVxcXFx4MmZcXFxceDNhLVxcXFx4NDBcXFxceDViLVxcXFx4NjBcXFxceDdiLVxcXFx4YmYnLFxuICAgICAgcnNQdW5jdHVhdGlvblJhbmdlID0gJ1xcXFx1MjAwMC1cXFxcdTIwNmYnLFxuICAgICAgcnNTcGFjZVJhbmdlID0gJyBcXFxcdFxcXFx4MGJcXFxcZlxcXFx4YTBcXFxcdWZlZmZcXFxcblxcXFxyXFxcXHUyMDI4XFxcXHUyMDI5XFxcXHUxNjgwXFxcXHUxODBlXFxcXHUyMDAwXFxcXHUyMDAxXFxcXHUyMDAyXFxcXHUyMDAzXFxcXHUyMDA0XFxcXHUyMDA1XFxcXHUyMDA2XFxcXHUyMDA3XFxcXHUyMDA4XFxcXHUyMDA5XFxcXHUyMDBhXFxcXHUyMDJmXFxcXHUyMDVmXFxcXHUzMDAwJyxcbiAgICAgIHJzVXBwZXJSYW5nZSA9ICdBLVpcXFxceGMwLVxcXFx4ZDZcXFxceGQ4LVxcXFx4ZGUnLFxuICAgICAgcnNWYXJSYW5nZSA9ICdcXFxcdWZlMGVcXFxcdWZlMGYnLFxuICAgICAgcnNCcmVha1JhbmdlID0gcnNNYXRoT3BSYW5nZSArIHJzTm9uQ2hhclJhbmdlICsgcnNQdW5jdHVhdGlvblJhbmdlICsgcnNTcGFjZVJhbmdlO1xuXG4gIC8qKiBVc2VkIHRvIGNvbXBvc2UgdW5pY29kZSBjYXB0dXJlIGdyb3Vwcy4gKi9cbiAgdmFyIHJzQXBvcyA9IFwiWydcXHUyMDE5XVwiLFxuICAgICAgcnNBc3RyYWwgPSAnWycgKyByc0FzdHJhbFJhbmdlICsgJ10nLFxuICAgICAgcnNCcmVhayA9ICdbJyArIHJzQnJlYWtSYW5nZSArICddJyxcbiAgICAgIHJzQ29tYm8gPSAnWycgKyByc0NvbWJvUmFuZ2UgKyAnXScsXG4gICAgICByc0RpZ2l0cyA9ICdcXFxcZCsnLFxuICAgICAgcnNEaW5nYmF0ID0gJ1snICsgcnNEaW5nYmF0UmFuZ2UgKyAnXScsXG4gICAgICByc0xvd2VyID0gJ1snICsgcnNMb3dlclJhbmdlICsgJ10nLFxuICAgICAgcnNNaXNjID0gJ1teJyArIHJzQXN0cmFsUmFuZ2UgKyByc0JyZWFrUmFuZ2UgKyByc0RpZ2l0cyArIHJzRGluZ2JhdFJhbmdlICsgcnNMb3dlclJhbmdlICsgcnNVcHBlclJhbmdlICsgJ10nLFxuICAgICAgcnNGaXR6ID0gJ1xcXFx1ZDgzY1tcXFxcdWRmZmItXFxcXHVkZmZmXScsXG4gICAgICByc01vZGlmaWVyID0gJyg/OicgKyByc0NvbWJvICsgJ3wnICsgcnNGaXR6ICsgJyknLFxuICAgICAgcnNOb25Bc3RyYWwgPSAnW14nICsgcnNBc3RyYWxSYW5nZSArICddJyxcbiAgICAgIHJzUmVnaW9uYWwgPSAnKD86XFxcXHVkODNjW1xcXFx1ZGRlNi1cXFxcdWRkZmZdKXsyfScsXG4gICAgICByc1N1cnJQYWlyID0gJ1tcXFxcdWQ4MDAtXFxcXHVkYmZmXVtcXFxcdWRjMDAtXFxcXHVkZmZmXScsXG4gICAgICByc1VwcGVyID0gJ1snICsgcnNVcHBlclJhbmdlICsgJ10nLFxuICAgICAgcnNaV0ogPSAnXFxcXHUyMDBkJztcblxuICAvKiogVXNlZCB0byBjb21wb3NlIHVuaWNvZGUgcmVnZXhlcy4gKi9cbiAgdmFyIHJzTWlzY0xvd2VyID0gJyg/OicgKyByc0xvd2VyICsgJ3wnICsgcnNNaXNjICsgJyknLFxuICAgICAgcnNNaXNjVXBwZXIgPSAnKD86JyArIHJzVXBwZXIgKyAnfCcgKyByc01pc2MgKyAnKScsXG4gICAgICByc09wdENvbnRyTG93ZXIgPSAnKD86JyArIHJzQXBvcyArICcoPzpkfGxsfG18cmV8c3x0fHZlKSk/JyxcbiAgICAgIHJzT3B0Q29udHJVcHBlciA9ICcoPzonICsgcnNBcG9zICsgJyg/OkR8TEx8TXxSRXxTfFR8VkUpKT8nLFxuICAgICAgcmVPcHRNb2QgPSByc01vZGlmaWVyICsgJz8nLFxuICAgICAgcnNPcHRWYXIgPSAnWycgKyByc1ZhclJhbmdlICsgJ10/JyxcbiAgICAgIHJzT3B0Sm9pbiA9ICcoPzonICsgcnNaV0ogKyAnKD86JyArIFtyc05vbkFzdHJhbCwgcnNSZWdpb25hbCwgcnNTdXJyUGFpcl0uam9pbignfCcpICsgJyknICsgcnNPcHRWYXIgKyByZU9wdE1vZCArICcpKicsXG4gICAgICByc09yZExvd2VyID0gJ1xcXFxkKig/OjFzdHwybmR8M3JkfCg/IVsxMjNdKVxcXFxkdGgpKD89XFxcXGJ8W0EtWl9dKScsXG4gICAgICByc09yZFVwcGVyID0gJ1xcXFxkKig/OjFTVHwyTkR8M1JEfCg/IVsxMjNdKVxcXFxkVEgpKD89XFxcXGJ8W2Etel9dKScsXG4gICAgICByc1NlcSA9IHJzT3B0VmFyICsgcmVPcHRNb2QgKyByc09wdEpvaW4sXG4gICAgICByc0Vtb2ppID0gJyg/OicgKyBbcnNEaW5nYmF0LCByc1JlZ2lvbmFsLCByc1N1cnJQYWlyXS5qb2luKCd8JykgKyAnKScgKyByc1NlcSxcbiAgICAgIHJzU3ltYm9sID0gJyg/OicgKyBbcnNOb25Bc3RyYWwgKyByc0NvbWJvICsgJz8nLCByc0NvbWJvLCByc1JlZ2lvbmFsLCByc1N1cnJQYWlyLCByc0FzdHJhbF0uam9pbignfCcpICsgJyknO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIGFwb3N0cm9waGVzLiAqL1xuICB2YXIgcmVBcG9zID0gUmVnRXhwKHJzQXBvcywgJ2cnKTtcblxuICAvKipcbiAgICogVXNlZCB0byBtYXRjaCBbY29tYmluaW5nIGRpYWNyaXRpY2FsIG1hcmtzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db21iaW5pbmdfRGlhY3JpdGljYWxfTWFya3MpIGFuZFxuICAgKiBbY29tYmluaW5nIGRpYWNyaXRpY2FsIG1hcmtzIGZvciBzeW1ib2xzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db21iaW5pbmdfRGlhY3JpdGljYWxfTWFya3NfZm9yX1N5bWJvbHMpLlxuICAgKi9cbiAgdmFyIHJlQ29tYm9NYXJrID0gUmVnRXhwKHJzQ29tYm8sICdnJyk7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggW3N0cmluZyBzeW1ib2xzXShodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC11bmljb2RlKS4gKi9cbiAgdmFyIHJlVW5pY29kZSA9IFJlZ0V4cChyc0ZpdHogKyAnKD89JyArIHJzRml0eiArICcpfCcgKyByc1N5bWJvbCArIHJzU2VxLCAnZycpO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIGNvbXBsZXggb3IgY29tcG91bmQgd29yZHMuICovXG4gIHZhciByZVVuaWNvZGVXb3JkID0gUmVnRXhwKFtcbiAgICByc1VwcGVyICsgJz8nICsgcnNMb3dlciArICcrJyArIHJzT3B0Q29udHJMb3dlciArICcoPz0nICsgW3JzQnJlYWssIHJzVXBwZXIsICckJ10uam9pbignfCcpICsgJyknLFxuICAgIHJzTWlzY1VwcGVyICsgJysnICsgcnNPcHRDb250clVwcGVyICsgJyg/PScgKyBbcnNCcmVhaywgcnNVcHBlciArIHJzTWlzY0xvd2VyLCAnJCddLmpvaW4oJ3wnKSArICcpJyxcbiAgICByc1VwcGVyICsgJz8nICsgcnNNaXNjTG93ZXIgKyAnKycgKyByc09wdENvbnRyTG93ZXIsXG4gICAgcnNVcHBlciArICcrJyArIHJzT3B0Q29udHJVcHBlcixcbiAgICByc09yZFVwcGVyLFxuICAgIHJzT3JkTG93ZXIsXG4gICAgcnNEaWdpdHMsXG4gICAgcnNFbW9qaVxuICBdLmpvaW4oJ3wnKSwgJ2cnKTtcblxuICAvKiogVXNlZCB0byBkZXRlY3Qgc3RyaW5ncyB3aXRoIFt6ZXJvLXdpZHRoIGpvaW5lcnMgb3IgY29kZSBwb2ludHMgZnJvbSB0aGUgYXN0cmFsIHBsYW5lc10oaHR0cDovL2Vldi5lZS9ibG9nLzIwMTUvMDkvMTIvZGFyay1jb3JuZXJzLW9mLXVuaWNvZGUvKS4gKi9cbiAgdmFyIHJlSGFzVW5pY29kZSA9IFJlZ0V4cCgnWycgKyByc1pXSiArIHJzQXN0cmFsUmFuZ2UgICsgcnNDb21ib1JhbmdlICsgcnNWYXJSYW5nZSArICddJyk7XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IHN0cmluZ3MgdGhhdCBuZWVkIGEgbW9yZSByb2J1c3QgcmVnZXhwIHRvIG1hdGNoIHdvcmRzLiAqL1xuICB2YXIgcmVIYXNVbmljb2RlV29yZCA9IC9bYS16XVtBLVpdfFtBLVpdezJ9W2Etel18WzAtOV1bYS16QS1aXXxbYS16QS1aXVswLTldfFteYS16QS1aMC05IF0vO1xuXG4gIC8qKiBVc2VkIHRvIGFzc2lnbiBkZWZhdWx0IGBjb250ZXh0YCBvYmplY3QgcHJvcGVydGllcy4gKi9cbiAgdmFyIGNvbnRleHRQcm9wcyA9IFtcbiAgICAnQXJyYXknLCAnQnVmZmVyJywgJ0RhdGFWaWV3JywgJ0RhdGUnLCAnRXJyb3InLCAnRmxvYXQzMkFycmF5JywgJ0Zsb2F0NjRBcnJheScsXG4gICAgJ0Z1bmN0aW9uJywgJ0ludDhBcnJheScsICdJbnQxNkFycmF5JywgJ0ludDMyQXJyYXknLCAnTWFwJywgJ01hdGgnLCAnT2JqZWN0JyxcbiAgICAnUHJvbWlzZScsICdSZWdFeHAnLCAnU2V0JywgJ1N0cmluZycsICdTeW1ib2wnLCAnVHlwZUVycm9yJywgJ1VpbnQ4QXJyYXknLFxuICAgICdVaW50OENsYW1wZWRBcnJheScsICdVaW50MTZBcnJheScsICdVaW50MzJBcnJheScsICdXZWFrTWFwJyxcbiAgICAnXycsICdjbGVhclRpbWVvdXQnLCAnaXNGaW5pdGUnLCAncGFyc2VJbnQnLCAnc2V0VGltZW91dCdcbiAgXTtcblxuICAvKiogVXNlZCB0byBtYWtlIHRlbXBsYXRlIHNvdXJjZVVSTHMgZWFzaWVyIHRvIGlkZW50aWZ5LiAqL1xuICB2YXIgdGVtcGxhdGVDb3VudGVyID0gLTE7XG5cbiAgLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xuICB2YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbiAgdHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbiAgdHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW2RhdGFWaWV3VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID0gdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPVxuICB0eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID1cbiAgdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPVxuICB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4gIC8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIHN1cHBvcnRlZCBieSBgXy5jbG9uZWAuICovXG4gIHZhciBjbG9uZWFibGVUYWdzID0ge307XG4gIGNsb25lYWJsZVRhZ3NbYXJnc1RhZ10gPSBjbG9uZWFibGVUYWdzW2FycmF5VGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gY2xvbmVhYmxlVGFnc1tkYXRhVmlld1RhZ10gPVxuICBjbG9uZWFibGVUYWdzW2Jvb2xUYWddID0gY2xvbmVhYmxlVGFnc1tkYXRlVGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbZmxvYXQzMlRhZ10gPSBjbG9uZWFibGVUYWdzW2Zsb2F0NjRUYWddID1cbiAgY2xvbmVhYmxlVGFnc1tpbnQ4VGFnXSA9IGNsb25lYWJsZVRhZ3NbaW50MTZUYWddID1cbiAgY2xvbmVhYmxlVGFnc1tpbnQzMlRhZ10gPSBjbG9uZWFibGVUYWdzW21hcFRhZ10gPVxuICBjbG9uZWFibGVUYWdzW251bWJlclRhZ10gPSBjbG9uZWFibGVUYWdzW29iamVjdFRhZ10gPVxuICBjbG9uZWFibGVUYWdzW3JlZ2V4cFRhZ10gPSBjbG9uZWFibGVUYWdzW3NldFRhZ10gPVxuICBjbG9uZWFibGVUYWdzW3N0cmluZ1RhZ10gPSBjbG9uZWFibGVUYWdzW3N5bWJvbFRhZ10gPVxuICBjbG9uZWFibGVUYWdzW3VpbnQ4VGFnXSA9IGNsb25lYWJsZVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbdWludDE2VGFnXSA9IGNsb25lYWJsZVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG4gIGNsb25lYWJsZVRhZ3NbZXJyb3JUYWddID0gY2xvbmVhYmxlVGFnc1tmdW5jVGFnXSA9XG4gIGNsb25lYWJsZVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblxuICAvKiogVXNlZCB0byBtYXAgTGF0aW4gVW5pY29kZSBsZXR0ZXJzIHRvIGJhc2ljIExhdGluIGxldHRlcnMuICovXG4gIHZhciBkZWJ1cnJlZExldHRlcnMgPSB7XG4gICAgLy8gTGF0aW4tMSBTdXBwbGVtZW50IGJsb2NrLlxuICAgICdcXHhjMCc6ICdBJywgICdcXHhjMSc6ICdBJywgJ1xceGMyJzogJ0EnLCAnXFx4YzMnOiAnQScsICdcXHhjNCc6ICdBJywgJ1xceGM1JzogJ0EnLFxuICAgICdcXHhlMCc6ICdhJywgICdcXHhlMSc6ICdhJywgJ1xceGUyJzogJ2EnLCAnXFx4ZTMnOiAnYScsICdcXHhlNCc6ICdhJywgJ1xceGU1JzogJ2EnLFxuICAgICdcXHhjNyc6ICdDJywgICdcXHhlNyc6ICdjJyxcbiAgICAnXFx4ZDAnOiAnRCcsICAnXFx4ZjAnOiAnZCcsXG4gICAgJ1xceGM4JzogJ0UnLCAgJ1xceGM5JzogJ0UnLCAnXFx4Y2EnOiAnRScsICdcXHhjYic6ICdFJyxcbiAgICAnXFx4ZTgnOiAnZScsICAnXFx4ZTknOiAnZScsICdcXHhlYSc6ICdlJywgJ1xceGViJzogJ2UnLFxuICAgICdcXHhjYyc6ICdJJywgICdcXHhjZCc6ICdJJywgJ1xceGNlJzogJ0knLCAnXFx4Y2YnOiAnSScsXG4gICAgJ1xceGVjJzogJ2knLCAgJ1xceGVkJzogJ2knLCAnXFx4ZWUnOiAnaScsICdcXHhlZic6ICdpJyxcbiAgICAnXFx4ZDEnOiAnTicsICAnXFx4ZjEnOiAnbicsXG4gICAgJ1xceGQyJzogJ08nLCAgJ1xceGQzJzogJ08nLCAnXFx4ZDQnOiAnTycsICdcXHhkNSc6ICdPJywgJ1xceGQ2JzogJ08nLCAnXFx4ZDgnOiAnTycsXG4gICAgJ1xceGYyJzogJ28nLCAgJ1xceGYzJzogJ28nLCAnXFx4ZjQnOiAnbycsICdcXHhmNSc6ICdvJywgJ1xceGY2JzogJ28nLCAnXFx4ZjgnOiAnbycsXG4gICAgJ1xceGQ5JzogJ1UnLCAgJ1xceGRhJzogJ1UnLCAnXFx4ZGInOiAnVScsICdcXHhkYyc6ICdVJyxcbiAgICAnXFx4ZjknOiAndScsICAnXFx4ZmEnOiAndScsICdcXHhmYic6ICd1JywgJ1xceGZjJzogJ3UnLFxuICAgICdcXHhkZCc6ICdZJywgICdcXHhmZCc6ICd5JywgJ1xceGZmJzogJ3knLFxuICAgICdcXHhjNic6ICdBZScsICdcXHhlNic6ICdhZScsXG4gICAgJ1xceGRlJzogJ1RoJywgJ1xceGZlJzogJ3RoJyxcbiAgICAnXFx4ZGYnOiAnc3MnLFxuICAgIC8vIExhdGluIEV4dGVuZGVkLUEgYmxvY2suXG4gICAgJ1xcdTAxMDAnOiAnQScsICAnXFx1MDEwMic6ICdBJywgJ1xcdTAxMDQnOiAnQScsXG4gICAgJ1xcdTAxMDEnOiAnYScsICAnXFx1MDEwMyc6ICdhJywgJ1xcdTAxMDUnOiAnYScsXG4gICAgJ1xcdTAxMDYnOiAnQycsICAnXFx1MDEwOCc6ICdDJywgJ1xcdTAxMGEnOiAnQycsICdcXHUwMTBjJzogJ0MnLFxuICAgICdcXHUwMTA3JzogJ2MnLCAgJ1xcdTAxMDknOiAnYycsICdcXHUwMTBiJzogJ2MnLCAnXFx1MDEwZCc6ICdjJyxcbiAgICAnXFx1MDEwZSc6ICdEJywgICdcXHUwMTEwJzogJ0QnLCAnXFx1MDEwZic6ICdkJywgJ1xcdTAxMTEnOiAnZCcsXG4gICAgJ1xcdTAxMTInOiAnRScsICAnXFx1MDExNCc6ICdFJywgJ1xcdTAxMTYnOiAnRScsICdcXHUwMTE4JzogJ0UnLCAnXFx1MDExYSc6ICdFJyxcbiAgICAnXFx1MDExMyc6ICdlJywgICdcXHUwMTE1JzogJ2UnLCAnXFx1MDExNyc6ICdlJywgJ1xcdTAxMTknOiAnZScsICdcXHUwMTFiJzogJ2UnLFxuICAgICdcXHUwMTFjJzogJ0cnLCAgJ1xcdTAxMWUnOiAnRycsICdcXHUwMTIwJzogJ0cnLCAnXFx1MDEyMic6ICdHJyxcbiAgICAnXFx1MDExZCc6ICdnJywgICdcXHUwMTFmJzogJ2cnLCAnXFx1MDEyMSc6ICdnJywgJ1xcdTAxMjMnOiAnZycsXG4gICAgJ1xcdTAxMjQnOiAnSCcsICAnXFx1MDEyNic6ICdIJywgJ1xcdTAxMjUnOiAnaCcsICdcXHUwMTI3JzogJ2gnLFxuICAgICdcXHUwMTI4JzogJ0knLCAgJ1xcdTAxMmEnOiAnSScsICdcXHUwMTJjJzogJ0knLCAnXFx1MDEyZSc6ICdJJywgJ1xcdTAxMzAnOiAnSScsXG4gICAgJ1xcdTAxMjknOiAnaScsICAnXFx1MDEyYic6ICdpJywgJ1xcdTAxMmQnOiAnaScsICdcXHUwMTJmJzogJ2knLCAnXFx1MDEzMSc6ICdpJyxcbiAgICAnXFx1MDEzNCc6ICdKJywgICdcXHUwMTM1JzogJ2onLFxuICAgICdcXHUwMTM2JzogJ0snLCAgJ1xcdTAxMzcnOiAnaycsICdcXHUwMTM4JzogJ2snLFxuICAgICdcXHUwMTM5JzogJ0wnLCAgJ1xcdTAxM2InOiAnTCcsICdcXHUwMTNkJzogJ0wnLCAnXFx1MDEzZic6ICdMJywgJ1xcdTAxNDEnOiAnTCcsXG4gICAgJ1xcdTAxM2EnOiAnbCcsICAnXFx1MDEzYyc6ICdsJywgJ1xcdTAxM2UnOiAnbCcsICdcXHUwMTQwJzogJ2wnLCAnXFx1MDE0Mic6ICdsJyxcbiAgICAnXFx1MDE0Myc6ICdOJywgICdcXHUwMTQ1JzogJ04nLCAnXFx1MDE0Nyc6ICdOJywgJ1xcdTAxNGEnOiAnTicsXG4gICAgJ1xcdTAxNDQnOiAnbicsICAnXFx1MDE0Nic6ICduJywgJ1xcdTAxNDgnOiAnbicsICdcXHUwMTRiJzogJ24nLFxuICAgICdcXHUwMTRjJzogJ08nLCAgJ1xcdTAxNGUnOiAnTycsICdcXHUwMTUwJzogJ08nLFxuICAgICdcXHUwMTRkJzogJ28nLCAgJ1xcdTAxNGYnOiAnbycsICdcXHUwMTUxJzogJ28nLFxuICAgICdcXHUwMTU0JzogJ1InLCAgJ1xcdTAxNTYnOiAnUicsICdcXHUwMTU4JzogJ1InLFxuICAgICdcXHUwMTU1JzogJ3InLCAgJ1xcdTAxNTcnOiAncicsICdcXHUwMTU5JzogJ3InLFxuICAgICdcXHUwMTVhJzogJ1MnLCAgJ1xcdTAxNWMnOiAnUycsICdcXHUwMTVlJzogJ1MnLCAnXFx1MDE2MCc6ICdTJyxcbiAgICAnXFx1MDE1Yic6ICdzJywgICdcXHUwMTVkJzogJ3MnLCAnXFx1MDE1Zic6ICdzJywgJ1xcdTAxNjEnOiAncycsXG4gICAgJ1xcdTAxNjInOiAnVCcsICAnXFx1MDE2NCc6ICdUJywgJ1xcdTAxNjYnOiAnVCcsXG4gICAgJ1xcdTAxNjMnOiAndCcsICAnXFx1MDE2NSc6ICd0JywgJ1xcdTAxNjcnOiAndCcsXG4gICAgJ1xcdTAxNjgnOiAnVScsICAnXFx1MDE2YSc6ICdVJywgJ1xcdTAxNmMnOiAnVScsICdcXHUwMTZlJzogJ1UnLCAnXFx1MDE3MCc6ICdVJywgJ1xcdTAxNzInOiAnVScsXG4gICAgJ1xcdTAxNjknOiAndScsICAnXFx1MDE2Yic6ICd1JywgJ1xcdTAxNmQnOiAndScsICdcXHUwMTZmJzogJ3UnLCAnXFx1MDE3MSc6ICd1JywgJ1xcdTAxNzMnOiAndScsXG4gICAgJ1xcdTAxNzQnOiAnVycsICAnXFx1MDE3NSc6ICd3JyxcbiAgICAnXFx1MDE3Nic6ICdZJywgICdcXHUwMTc3JzogJ3knLCAnXFx1MDE3OCc6ICdZJyxcbiAgICAnXFx1MDE3OSc6ICdaJywgICdcXHUwMTdiJzogJ1onLCAnXFx1MDE3ZCc6ICdaJyxcbiAgICAnXFx1MDE3YSc6ICd6JywgICdcXHUwMTdjJzogJ3onLCAnXFx1MDE3ZSc6ICd6JyxcbiAgICAnXFx1MDEzMic6ICdJSicsICdcXHUwMTMzJzogJ2lqJyxcbiAgICAnXFx1MDE1Mic6ICdPZScsICdcXHUwMTUzJzogJ29lJyxcbiAgICAnXFx1MDE0OSc6IFwiJ25cIiwgJ1xcdTAxN2YnOiAncydcbiAgfTtcblxuICAvKiogVXNlZCB0byBtYXAgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLiAqL1xuICB2YXIgaHRtbEVzY2FwZXMgPSB7XG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnLFxuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiMzOTsnXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gbWFwIEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy4gKi9cbiAgdmFyIGh0bWxVbmVzY2FwZXMgPSB7XG4gICAgJyZhbXA7JzogJyYnLFxuICAgICcmbHQ7JzogJzwnLFxuICAgICcmZ3Q7JzogJz4nLFxuICAgICcmcXVvdDsnOiAnXCInLFxuICAgICcmIzM5Oyc6IFwiJ1wiXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuICovXG4gIHZhciBzdHJpbmdFc2NhcGVzID0ge1xuICAgICdcXFxcJzogJ1xcXFwnLFxuICAgIFwiJ1wiOiBcIidcIixcbiAgICAnXFxuJzogJ24nLFxuICAgICdcXHInOiAncicsXG4gICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuICB9O1xuXG4gIC8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG4gIHZhciBmcmVlUGFyc2VGbG9hdCA9IHBhcnNlRmxvYXQsXG4gICAgICBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuICB2YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbiAgdmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbiAgLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG4gIHZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AuICovXG4gIHZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYG1vZHVsZWAuICovXG4gIHZhciBmcmVlTW9kdWxlID0gZnJlZUV4cG9ydHMgJiYgdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cbiAgLyoqIERldGVjdCB0aGUgcG9wdWxhciBDb21tb25KUyBleHRlbnNpb24gYG1vZHVsZS5leHBvcnRzYC4gKi9cbiAgdmFyIG1vZHVsZUV4cG9ydHMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHM7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBwcm9jZXNzYCBmcm9tIE5vZGUuanMuICovXG4gIHZhciBmcmVlUHJvY2VzcyA9IG1vZHVsZUV4cG9ydHMgJiYgZnJlZUdsb2JhbC5wcm9jZXNzO1xuXG4gIC8qKiBVc2VkIHRvIGFjY2VzcyBmYXN0ZXIgTm9kZS5qcyBoZWxwZXJzLiAqL1xuICB2YXIgbm9kZVV0aWwgPSAoZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBgdXRpbC50eXBlc2AgZm9yIE5vZGUuanMgMTArLlxuICAgICAgdmFyIHR5cGVzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLnJlcXVpcmUgJiYgZnJlZU1vZHVsZS5yZXF1aXJlKCd1dGlsJykudHlwZXM7XG5cbiAgICAgIGlmICh0eXBlcykge1xuICAgICAgICByZXR1cm4gdHlwZXM7XG4gICAgICB9XG5cbiAgICAgIC8vIExlZ2FjeSBgcHJvY2Vzcy5iaW5kaW5nKCd1dGlsJylgIGZvciBOb2RlLmpzIDwgMTAuXG4gICAgICByZXR1cm4gZnJlZVByb2Nlc3MgJiYgZnJlZVByb2Nlc3MuYmluZGluZyAmJiBmcmVlUHJvY2Vzcy5iaW5kaW5nKCd1dGlsJyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfSgpKTtcblxuICAvKiBOb2RlLmpzIGhlbHBlciByZWZlcmVuY2VzLiAqL1xuICB2YXIgbm9kZUlzQXJyYXlCdWZmZXIgPSBub2RlVXRpbCAmJiBub2RlVXRpbC5pc0FycmF5QnVmZmVyLFxuICAgICAgbm9kZUlzRGF0ZSA9IG5vZGVVdGlsICYmIG5vZGVVdGlsLmlzRGF0ZSxcbiAgICAgIG5vZGVJc01hcCA9IG5vZGVVdGlsICYmIG5vZGVVdGlsLmlzTWFwLFxuICAgICAgbm9kZUlzUmVnRXhwID0gbm9kZVV0aWwgJiYgbm9kZVV0aWwuaXNSZWdFeHAsXG4gICAgICBub2RlSXNTZXQgPSBub2RlVXRpbCAmJiBub2RlVXRpbC5pc1NldCxcbiAgICAgIG5vZGVJc1R5cGVkQXJyYXkgPSBub2RlVXRpbCAmJiBub2RlVXRpbC5pc1R5cGVkQXJyYXk7XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIEEgZmFzdGVyIGFsdGVybmF0aXZlIHRvIGBGdW5jdGlvbiNhcHBseWAsIHRoaXMgZnVuY3Rpb24gaW52b2tlcyBgZnVuY2BcbiAgICogd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYHRoaXNBcmdgIGFuZCB0aGUgYXJndW1lbnRzIG9mIGBhcmdzYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICAgKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICogQHBhcmFtIHtBcnJheX0gYXJncyBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuXG4gICAqL1xuICBmdW5jdGlvbiBhcHBseShmdW5jLCB0aGlzQXJnLCBhcmdzKSB7XG4gICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpO1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0pO1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgY2FzZSAzOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgIH1cbiAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VBZ2dyZWdhdG9yYCBmb3IgYXJyYXlzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlciBUaGUgZnVuY3Rpb24gdG8gc2V0IGBhY2N1bXVsYXRvcmAgdmFsdWVzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgaXRlcmF0ZWUgdG8gdHJhbnNmb3JtIGtleXMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhY2N1bXVsYXRvciBUaGUgaW5pdGlhbCBhZ2dyZWdhdGVkIG9iamVjdC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGBhY2N1bXVsYXRvcmAuXG4gICAqL1xuICBmdW5jdGlvbiBhcnJheUFnZ3JlZ2F0b3IoYXJyYXksIHNldHRlciwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgIHNldHRlcihhY2N1bXVsYXRvciwgdmFsdWUsIGl0ZXJhdGVlKHZhbHVlKSwgYXJyYXkpO1xuICAgIH1cbiAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gIH1cblxuICAvKipcbiAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmZvckVhY2hgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvclxuICAgKiBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgKi9cbiAgZnVuY3Rpb24gYXJyYXlFYWNoKGFycmF5LCBpdGVyYXRlZSkge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBpZiAoaXRlcmF0ZWUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpID09PSBmYWxzZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG5cbiAgLyoqXG4gICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5mb3JFYWNoUmlnaHRgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvclxuICAgKiBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgKi9cbiAgZnVuY3Rpb24gYXJyYXlFYWNoUmlnaHQoYXJyYXksIGl0ZXJhdGVlKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICBpZiAoaXRlcmF0ZWUoYXJyYXlbbGVuZ3RoXSwgbGVuZ3RoLCBhcnJheSkgPT09IGZhbHNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cblxuICAvKipcbiAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmV2ZXJ5YCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3JcbiAgICogaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFsbCBlbGVtZW50cyBwYXNzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gICAqICBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBhcnJheUV2ZXJ5KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgaWYgKCFwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmZpbHRlcmAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yXG4gICAqIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZpbHRlcmVkIGFycmF5LlxuICAgKi9cbiAgZnVuY3Rpb24gYXJyYXlGaWx0ZXIoYXJyYXksIHByZWRpY2F0ZSkge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgcmVzSW5kZXggPSAwLFxuICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgIHJlc3VsdFtyZXNJbmRleCsrXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5pbmNsdWRlc2AgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yXG4gICAqIHNwZWNpZnlpbmcgYW4gaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAqIEBwYXJhbSB7Kn0gdGFyZ2V0IFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHRhcmdldGAgaXMgZm91bmQsIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGFycmF5SW5jbHVkZXMoYXJyYXksIHZhbHVlKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuICAgIHJldHVybiAhIWxlbmd0aCAmJiBiYXNlSW5kZXhPZihhcnJheSwgdmFsdWUsIDApID4gLTE7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBpcyBsaWtlIGBhcnJheUluY2x1ZGVzYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGEgY29tcGFyYXRvci5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHsqfSB0YXJnZXQgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmF0b3IgVGhlIGNvbXBhcmF0b3IgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB0YXJnZXRgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBhcnJheUluY2x1ZGVzV2l0aChhcnJheSwgdmFsdWUsIGNvbXBhcmF0b3IpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgaWYgKGNvbXBhcmF0b3IodmFsdWUsIGFycmF5W2luZGV4XSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ubWFwYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcbiAgICogc2hvcnRoYW5kcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgYXJyYXkuXG4gICAqL1xuICBmdW5jdGlvbiBhcnJheU1hcChhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmRzIHRoZSBlbGVtZW50cyBvZiBgdmFsdWVzYCB0byBgYXJyYXlgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBhcHBlbmQuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgKi9cbiAgZnVuY3Rpb24gYXJyYXlQdXNoKGFycmF5LCB2YWx1ZXMpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aCxcbiAgICAgICAgb2Zmc2V0ID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIGFycmF5W29mZnNldCArIGluZGV4XSA9IHZhbHVlc1tpbmRleF07XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ucmVkdWNlYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3JcbiAgICogaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gVGhlIGluaXRpYWwgdmFsdWUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2luaXRBY2N1bV0gU3BlY2lmeSB1c2luZyB0aGUgZmlyc3QgZWxlbWVudCBvZiBgYXJyYXlgIGFzXG4gICAqICB0aGUgaW5pdGlhbCB2YWx1ZS5cbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgKi9cbiAgZnVuY3Rpb24gYXJyYXlSZWR1Y2UoYXJyYXksIGl0ZXJhdGVlLCBhY2N1bXVsYXRvciwgaW5pdEFjY3VtKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuXG4gICAgaWYgKGluaXRBY2N1bSAmJiBsZW5ndGgpIHtcbiAgICAgIGFjY3VtdWxhdG9yID0gYXJyYXlbKytpbmRleF07XG4gICAgfVxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBhY2N1bXVsYXRvciA9IGl0ZXJhdGVlKGFjY3VtdWxhdG9yLCBhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSk7XG4gICAgfVxuICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ucmVkdWNlUmlnaHRgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvclxuICAgKiBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgaW5pdGlhbCB2YWx1ZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBbaW5pdEFjY3VtXSBTcGVjaWZ5IHVzaW5nIHRoZSBsYXN0IGVsZW1lbnQgb2YgYGFycmF5YCBhc1xuICAgKiAgdGhlIGluaXRpYWwgdmFsdWUuXG4gICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICovXG4gIGZ1bmN0aW9uIGFycmF5UmVkdWNlUmlnaHQoYXJyYXksIGl0ZXJhdGVlLCBhY2N1bXVsYXRvciwgaW5pdEFjY3VtKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuICAgIGlmIChpbml0QWNjdW0gJiYgbGVuZ3RoKSB7XG4gICAgICBhY2N1bXVsYXRvciA9IGFycmF5Wy0tbGVuZ3RoXTtcbiAgICB9XG4gICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICBhY2N1bXVsYXRvciA9IGl0ZXJhdGVlKGFjY3VtdWxhdG9yLCBhcnJheVtsZW5ndGhdLCBsZW5ndGgsIGFycmF5KTtcbiAgICB9XG4gICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcbiAgICogc2hvcnRoYW5kcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgKi9cbiAgZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzaXplIG9mIGFuIEFTQ0lJIGBzdHJpbmdgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgaW5zcGVjdC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc3RyaW5nIHNpemUuXG4gICAqL1xuICB2YXIgYXNjaWlTaXplID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblxuICAvKipcbiAgICogQ29udmVydHMgYW4gQVNDSUkgYHN0cmluZ2AgdG8gYW4gYXJyYXkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBhcnJheS5cbiAgICovXG4gIGZ1bmN0aW9uIGFzY2lpVG9BcnJheShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnNwbGl0KCcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdHMgYW4gQVNDSUkgYHN0cmluZ2AgaW50byBhbiBhcnJheSBvZiBpdHMgd29yZHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgd29yZHMgb2YgYHN0cmluZ2AuXG4gICAqL1xuICBmdW5jdGlvbiBhc2NpaVdvcmRzKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcubWF0Y2gocmVBc2NpaVdvcmQpIHx8IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIG1ldGhvZHMgbGlrZSBgXy5maW5kS2V5YCBhbmQgYF8uZmluZExhc3RLZXlgLFxuICAgKiB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMsIHdoaWNoIGl0ZXJhdGVzIG92ZXIgYGNvbGxlY3Rpb25gXG4gICAqIHVzaW5nIGBlYWNoRnVuY2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGluc3BlY3QuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGBjb2xsZWN0aW9uYC5cbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZvdW5kIGVsZW1lbnQgb3IgaXRzIGtleSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VGaW5kS2V5KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgZWFjaEZ1bmMpIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIGVhY2hGdW5jKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGtleSwgY29sbGVjdGlvbikpIHtcbiAgICAgICAgcmVzdWx0ID0ga2V5O1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maW5kSW5kZXhgIGFuZCBgXy5maW5kTGFzdEluZGV4YCB3aXRob3V0XG4gICAqIHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgsIGZyb21SaWdodCkge1xuICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIGluZGV4ID0gZnJvbUluZGV4ICsgKGZyb21SaWdodCA/IDEgOiAtMSk7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaW5kZXhPZmAgd2l0aG91dCBgZnJvbUluZGV4YCBib3VuZHMgY2hlY2tzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlSW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWVcbiAgICAgID8gc3RyaWN0SW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleClcbiAgICAgIDogYmFzZUZpbmRJbmRleChhcnJheSwgYmFzZUlzTmFOLCBmcm9tSW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZSBgYmFzZUluZGV4T2ZgIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYSBjb21wYXJhdG9yLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmF0b3IgVGhlIGNvbXBhcmF0b3IgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VJbmRleE9mV2l0aChhcnJheSwgdmFsdWUsIGZyb21JbmRleCwgY29tcGFyYXRvcikge1xuICAgIHZhciBpbmRleCA9IGZyb21JbmRleCAtIDEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBpZiAoY29tcGFyYXRvcihhcnJheVtpbmRleF0sIHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hTmAgd2l0aG91dCBzdXBwb3J0IGZvciBudW1iZXIgb2JqZWN0cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGBOYU5gLCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlSXNOYU4odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1lYW5gIGFuZCBgXy5tZWFuQnlgIHdpdGhvdXQgc3VwcG9ydCBmb3JcbiAgICogaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbWVhbi5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VNZWFuKGFycmF5LCBpdGVyYXRlZSkge1xuICAgIHZhciBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcbiAgICByZXR1cm4gbGVuZ3RoID8gKGJhc2VTdW0oYXJyYXksIGl0ZXJhdGVlKSAvIGxlbmd0aCkgOiBOQU47XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlPZmAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVByb3BlcnR5T2Yob2JqZWN0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5yZWR1Y2VgIGFuZCBgXy5yZWR1Y2VSaWdodGAsIHdpdGhvdXQgc3VwcG9ydFxuICAgKiBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcywgd2hpY2ggaXRlcmF0ZXMgb3ZlciBgY29sbGVjdGlvbmAgdXNpbmcgYGVhY2hGdW5jYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcGFyYW0geyp9IGFjY3VtdWxhdG9yIFRoZSBpbml0aWFsIHZhbHVlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluaXRBY2N1bSBTcGVjaWZ5IHVzaW5nIHRoZSBmaXJzdCBvciBsYXN0IGVsZW1lbnQgb2ZcbiAgICogIGBjb2xsZWN0aW9uYCBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBgY29sbGVjdGlvbmAuXG4gICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VSZWR1Y2UoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yLCBpbml0QWNjdW0sIGVhY2hGdW5jKSB7XG4gICAgZWFjaEZ1bmMoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICBhY2N1bXVsYXRvciA9IGluaXRBY2N1bVxuICAgICAgICA/IChpbml0QWNjdW0gPSBmYWxzZSwgdmFsdWUpXG4gICAgICAgIDogaXRlcmF0ZWUoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNvcnRCeWAgd2hpY2ggdXNlcyBgY29tcGFyZXJgIHRvIGRlZmluZSB0aGVcbiAgICogc29ydCBvcmRlciBvZiBgYXJyYXlgIGFuZCByZXBsYWNlcyBjcml0ZXJpYSBvYmplY3RzIHdpdGggdGhlaXIgY29ycmVzcG9uZGluZ1xuICAgKiB2YWx1ZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzb3J0LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJlciBUaGUgZnVuY3Rpb24gdG8gZGVmaW5lIHNvcnQgb3JkZXIuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVNvcnRCeShhcnJheSwgY29tcGFyZXIpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgYXJyYXkuc29ydChjb21wYXJlcik7XG4gICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICBhcnJheVtsZW5ndGhdID0gYXJyYXlbbGVuZ3RoXS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnN1bWAgYW5kIGBfLnN1bUJ5YCB3aXRob3V0IHN1cHBvcnQgZm9yXG4gICAqIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHN1bS5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VTdW0oYXJyYXksIGl0ZXJhdGVlKSB7XG4gICAgdmFyIHJlc3VsdCxcbiAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciBjdXJyZW50ID0gaXRlcmF0ZWUoYXJyYXlbaW5kZXhdKTtcbiAgICAgIGlmIChjdXJyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBjdXJyZW50IDogKHJlc3VsdCArIGN1cnJlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcbiAgICogb3IgbWF4IGFycmF5IGxlbmd0aCBjaGVja3MuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VUaW1lcyhuLCBpdGVyYXRlZSkge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICByZXN1bHQgPSBBcnJheShuKTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbikge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1BhaXJzYCBhbmQgYF8udG9QYWlyc0luYCB3aGljaCBjcmVhdGVzIGFuIGFycmF5XG4gICAqIG9mIGtleS12YWx1ZSBwYWlycyBmb3IgYG9iamVjdGAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvcGVydHkgbmFtZXMgb2YgYHByb3BzYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgdG8gZ2V0IHZhbHVlcyBmb3IuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGtleS12YWx1ZSBwYWlycy5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VUb1BhaXJzKG9iamVjdCwgcHJvcHMpIHtcbiAgICByZXR1cm4gYXJyYXlNYXAocHJvcHMsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIFtrZXksIG9iamVjdFtrZXldXTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50cmltYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIHRyaW0uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHRyaW1tZWQgc3RyaW5nLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVRyaW0oc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZ1xuICAgICAgPyBzdHJpbmcuc2xpY2UoMCwgdHJpbW1lZEVuZEluZGV4KHN0cmluZykgKyAxKS5yZXBsYWNlKHJlVHJpbVN0YXJ0LCAnJylcbiAgICAgIDogc3RyaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnVuYXJ5YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0b3JpbmcgbWV0YWRhdGEuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhcCBhcmd1bWVudHMgZm9yLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjYXBwZWQgZnVuY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlVW5hcnkoZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmModmFsdWUpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udmFsdWVzYCBhbmQgYF8udmFsdWVzSW5gIHdoaWNoIGNyZWF0ZXMgYW5cbiAgICogYXJyYXkgb2YgYG9iamVjdGAgcHJvcGVydHkgdmFsdWVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3BlcnR5IG5hbWVzXG4gICAqIG9mIGBwcm9wc2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IG5hbWVzIHRvIGdldCB2YWx1ZXMgZm9yLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlVmFsdWVzKG9iamVjdCwgcHJvcHMpIHtcbiAgICByZXR1cm4gYXJyYXlNYXAocHJvcHMsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIG9iamVjdFtrZXldO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBhIGBjYWNoZWAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IGNhY2hlIFRoZSBjYWNoZSB0byBxdWVyeS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGNhY2hlSGFzKGNhY2hlLCBrZXkpIHtcbiAgICByZXR1cm4gY2FjaGUuaGFzKGtleSk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbVN0YXJ0YCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBzdHJpbmcgc3ltYm9sXG4gICAqIHRoYXQgaXMgbm90IGZvdW5kIGluIHRoZSBjaGFyYWN0ZXIgc3ltYm9scy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gc3RyU3ltYm9scyBUaGUgc3RyaW5nIHN5bWJvbHMgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHtBcnJheX0gY2hyU3ltYm9scyBUaGUgY2hhcmFjdGVyIHN5bWJvbHMgdG8gZmluZC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IHVubWF0Y2hlZCBzdHJpbmcgc3ltYm9sLlxuICAgKi9cbiAgZnVuY3Rpb24gY2hhcnNTdGFydEluZGV4KHN0clN5bWJvbHMsIGNoclN5bWJvbHMpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gc3RyU3ltYm9scy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCAmJiBiYXNlSW5kZXhPZihjaHJTeW1ib2xzLCBzdHJTeW1ib2xzW2luZGV4XSwgMCkgPiAtMSkge31cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbUVuZGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzdHJpbmcgc3ltYm9sXG4gICAqIHRoYXQgaXMgbm90IGZvdW5kIGluIHRoZSBjaGFyYWN0ZXIgc3ltYm9scy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gc3RyU3ltYm9scyBUaGUgc3RyaW5nIHN5bWJvbHMgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHtBcnJheX0gY2hyU3ltYm9scyBUaGUgY2hhcmFjdGVyIHN5bWJvbHMgdG8gZmluZC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgdW5tYXRjaGVkIHN0cmluZyBzeW1ib2wuXG4gICAqL1xuICBmdW5jdGlvbiBjaGFyc0VuZEluZGV4KHN0clN5bWJvbHMsIGNoclN5bWJvbHMpIHtcbiAgICB2YXIgaW5kZXggPSBzdHJTeW1ib2xzLmxlbmd0aDtcblxuICAgIHdoaWxlIChpbmRleC0tICYmIGJhc2VJbmRleE9mKGNoclN5bWJvbHMsIHN0clN5bWJvbHNbaW5kZXhdLCAwKSA+IC0xKSB7fVxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgYHBsYWNlaG9sZGVyYCBvY2N1cnJlbmNlcyBpbiBgYXJyYXlgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHsqfSBwbGFjZWhvbGRlciBUaGUgcGxhY2Vob2xkZXIgdG8gc2VhcmNoIGZvci5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgcGxhY2Vob2xkZXIgY291bnQuXG4gICAqL1xuICBmdW5jdGlvbiBjb3VudEhvbGRlcnMoYXJyYXksIHBsYWNlaG9sZGVyKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgcmVzdWx0ID0gMDtcblxuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgaWYgKGFycmF5W2xlbmd0aF0gPT09IHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICsrcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8uZGVidXJyYCB0byBjb252ZXJ0IExhdGluLTEgU3VwcGxlbWVudCBhbmQgTGF0aW4gRXh0ZW5kZWQtQVxuICAgKiBsZXR0ZXJzIHRvIGJhc2ljIExhdGluIGxldHRlcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsZXR0ZXIgVGhlIG1hdGNoZWQgbGV0dGVyIHRvIGRlYnVyci5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZGVidXJyZWQgbGV0dGVyLlxuICAgKi9cbiAgdmFyIGRlYnVyckxldHRlciA9IGJhc2VQcm9wZXJ0eU9mKGRlYnVycmVkTGV0dGVycyk7XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8uZXNjYXBlYCB0byBjb252ZXJ0IGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAgICovXG4gIHZhciBlc2NhcGVIdG1sQ2hhciA9IGJhc2VQcm9wZXJ0eU9mKGh0bWxFc2NhcGVzKTtcblxuICAvKipcbiAgICogVXNlZCBieSBgXy50ZW1wbGF0ZWAgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaHIgVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiBlc2NhcGVTdHJpbmdDaGFyKGNocikge1xuICAgIHJldHVybiAnXFxcXCcgKyBzdHJpbmdFc2NhcGVzW2Nocl07XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLlxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0VmFsdWUob2JqZWN0LCBrZXkpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHN0cmluZ2AgY29udGFpbnMgVW5pY29kZSBzeW1ib2xzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGEgc3ltYm9sIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBoYXNVbmljb2RlKHN0cmluZykge1xuICAgIHJldHVybiByZUhhc1VuaWNvZGUudGVzdChzdHJpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgc3RyaW5nYCBjb250YWlucyBhIHdvcmQgY29tcG9zZWQgb2YgVW5pY29kZSBzeW1ib2xzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGEgd29yZCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxuICAgKi9cbiAgZnVuY3Rpb24gaGFzVW5pY29kZVdvcmQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHJlSGFzVW5pY29kZVdvcmQudGVzdChzdHJpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGBpdGVyYXRvcmAgdG8gYW4gYXJyYXkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVyYXRvciBUaGUgaXRlcmF0b3IgdG8gY29udmVydC5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgYXJyYXkuXG4gICAqL1xuICBmdW5jdGlvbiBpdGVyYXRvclRvQXJyYXkoaXRlcmF0b3IpIHtcbiAgICB2YXIgZGF0YSxcbiAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICB3aGlsZSAoIShkYXRhID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICByZXN1bHQucHVzaChkYXRhLnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG4gICAqL1xuICBmdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICByZXN1bHQgPSBBcnJheShtYXAuc2l6ZSk7XG5cbiAgICBtYXAuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICByZXN1bHRbKytpbmRleF0gPSBba2V5LCB2YWx1ZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgICByZXR1cm4gZnVuYyh0cmFuc2Zvcm0oYXJnKSk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgYHBsYWNlaG9sZGVyYCBlbGVtZW50cyBpbiBgYXJyYXlgIHdpdGggYW4gaW50ZXJuYWwgcGxhY2Vob2xkZXJcbiAgICogYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgdGhlaXIgaW5kZXhlcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICogQHBhcmFtIHsqfSBwbGFjZWhvbGRlciBUaGUgcGxhY2Vob2xkZXIgdG8gcmVwbGFjZS5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICovXG4gIGZ1bmN0aW9uIHJlcGxhY2VIb2xkZXJzKGFycmF5LCBwbGFjZWhvbGRlcikge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIHJlc0luZGV4ID0gMCxcbiAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgaWYgKHZhbHVlID09PSBwbGFjZWhvbGRlciB8fCB2YWx1ZSA9PT0gUExBQ0VIT0xERVIpIHtcbiAgICAgICAgYXJyYXlbaW5kZXhdID0gUExBQ0VIT0xERVI7XG4gICAgICAgIHJlc3VsdFtyZXNJbmRleCsrXSA9IGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGBzZXRgIHRvIGFuIGFycmF5IG9mIGl0cyB2YWx1ZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXQgVGhlIHNldCB0byBjb252ZXJ0LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cbiAgICovXG4gIGZ1bmN0aW9uIHNldFRvQXJyYXkoc2V0KSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIHJlc3VsdCA9IEFycmF5KHNldC5zaXplKTtcblxuICAgIHNldC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXN1bHRbKytpbmRleF0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGBzZXRgIHRvIGl0cyB2YWx1ZS12YWx1ZSBwYWlycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHNldCBUaGUgc2V0IHRvIGNvbnZlcnQuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgdmFsdWUtdmFsdWUgcGFpcnMuXG4gICAqL1xuICBmdW5jdGlvbiBzZXRUb1BhaXJzKHNldCkge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICByZXN1bHQgPSBBcnJheShzZXQuc2l6ZSk7XG5cbiAgICBzZXQuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmVzdWx0WysraW5kZXhdID0gW3ZhbHVlLCB2YWx1ZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uaW5kZXhPZmAgd2hpY2ggcGVyZm9ybXMgc3RyaWN0IGVxdWFsaXR5XG4gICAqIGNvbXBhcmlzb25zIG9mIHZhbHVlcywgaS5lLiBgPT09YC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICAgKi9cbiAgZnVuY3Rpb24gc3RyaWN0SW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xuICAgIHZhciBpbmRleCA9IGZyb21JbmRleCAtIDEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBpZiAoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ubGFzdEluZGV4T2ZgIHdoaWNoIHBlcmZvcm1zIHN0cmljdCBlcXVhbGl0eVxuICAgKiBjb21wYXJpc29ucyBvZiB2YWx1ZXMsIGkuZS4gYD09PWAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICovXG4gIGZ1bmN0aW9uIHN0cmljdExhc3RJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgdmFyIGluZGV4ID0gZnJvbUluZGV4ICsgMTtcbiAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbnVtYmVyIG9mIHN5bWJvbHMgaW4gYHN0cmluZ2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzdHJpbmcgc2l6ZS5cbiAgICovXG4gIGZ1bmN0aW9uIHN0cmluZ1NpemUoc3RyaW5nKSB7XG4gICAgcmV0dXJuIGhhc1VuaWNvZGUoc3RyaW5nKVxuICAgICAgPyB1bmljb2RlU2l6ZShzdHJpbmcpXG4gICAgICA6IGFzY2lpU2l6ZShzdHJpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGFuIGFycmF5LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgYXJyYXkuXG4gICAqL1xuICBmdW5jdGlvbiBzdHJpbmdUb0FycmF5KHN0cmluZykge1xuICAgIHJldHVybiBoYXNVbmljb2RlKHN0cmluZylcbiAgICAgID8gdW5pY29kZVRvQXJyYXkoc3RyaW5nKVxuICAgICAgOiBhc2NpaVRvQXJyYXkoc3RyaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltRW5kYCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlXG4gICAqIGNoYXJhY3RlciBvZiBgc3RyaW5nYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIHRyaW1tZWRFbmRJbmRleChzdHJpbmcpIHtcbiAgICB2YXIgaW5kZXggPSBzdHJpbmcubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGluZGV4LS0gJiYgcmVXaGl0ZXNwYWNlLnRlc3Qoc3RyaW5nLmNoYXJBdChpbmRleCkpKSB7fVxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnVuZXNjYXBlYCB0byBjb252ZXJ0IEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gdW5lc2NhcGUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBjaGFyYWN0ZXIuXG4gICAqL1xuICB2YXIgdW5lc2NhcGVIdG1sQ2hhciA9IGJhc2VQcm9wZXJ0eU9mKGh0bWxVbmVzY2FwZXMpO1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzaXplIG9mIGEgVW5pY29kZSBgc3RyaW5nYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIGluc3BlY3QuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHN0cmluZyBzaXplLlxuICAgKi9cbiAgZnVuY3Rpb24gdW5pY29kZVNpemUoc3RyaW5nKSB7XG4gICAgdmFyIHJlc3VsdCA9IHJlVW5pY29kZS5sYXN0SW5kZXggPSAwO1xuICAgIHdoaWxlIChyZVVuaWNvZGUudGVzdChzdHJpbmcpKSB7XG4gICAgICArK3Jlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhIFVuaWNvZGUgYHN0cmluZ2AgdG8gYW4gYXJyYXkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBhcnJheS5cbiAgICovXG4gIGZ1bmN0aW9uIHVuaWNvZGVUb0FycmF5KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcubWF0Y2gocmVVbmljb2RlKSB8fCBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdHMgYSBVbmljb2RlIGBzdHJpbmdgIGludG8gYW4gYXJyYXkgb2YgaXRzIHdvcmRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHdvcmRzIG9mIGBzdHJpbmdgLlxuICAgKi9cbiAgZnVuY3Rpb24gdW5pY29kZVdvcmRzKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcubWF0Y2gocmVVbmljb2RlV29yZCkgfHwgW107XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHByaXN0aW5lIGBsb2Rhc2hgIGZ1bmN0aW9uIHVzaW5nIHRoZSBgY29udGV4dGAgb2JqZWN0LlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAxLjEuMFxuICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbnRleHQ9cm9vdF0gVGhlIGNvbnRleHQgb2JqZWN0LlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYSBuZXcgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8ubWl4aW4oeyAnZm9vJzogXy5jb25zdGFudCgnZm9vJykgfSk7XG4gICAqXG4gICAqIHZhciBsb2Rhc2ggPSBfLnJ1bkluQ29udGV4dCgpO1xuICAgKiBsb2Rhc2gubWl4aW4oeyAnYmFyJzogbG9kYXNoLmNvbnN0YW50KCdiYXInKSB9KTtcbiAgICpcbiAgICogXy5pc0Z1bmN0aW9uKF8uZm9vKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKiBfLmlzRnVuY3Rpb24oXy5iYXIpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBsb2Rhc2guaXNGdW5jdGlvbihsb2Rhc2guZm9vKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICogbG9kYXNoLmlzRnVuY3Rpb24obG9kYXNoLmJhcik7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogLy8gQ3JlYXRlIGEgc3VwZWQtdXAgYGRlZmVyYCBpbiBOb2RlLmpzLlxuICAgKiB2YXIgZGVmZXIgPSBfLnJ1bkluQ29udGV4dCh7ICdzZXRUaW1lb3V0Jzogc2V0SW1tZWRpYXRlIH0pLmRlZmVyO1xuICAgKi9cbiAgdmFyIHJ1bkluQ29udGV4dCA9IChmdW5jdGlvbiBydW5JbkNvbnRleHQoY29udGV4dCkge1xuICAgIGNvbnRleHQgPSBjb250ZXh0ID09IG51bGwgPyByb290IDogXy5kZWZhdWx0cyhyb290Lk9iamVjdCgpLCBjb250ZXh0LCBfLnBpY2socm9vdCwgY29udGV4dFByb3BzKSk7XG5cbiAgICAvKiogQnVpbHQtaW4gY29uc3RydWN0b3IgcmVmZXJlbmNlcy4gKi9cbiAgICB2YXIgQXJyYXkgPSBjb250ZXh0LkFycmF5LFxuICAgICAgICBEYXRlID0gY29udGV4dC5EYXRlLFxuICAgICAgICBFcnJvciA9IGNvbnRleHQuRXJyb3IsXG4gICAgICAgIEZ1bmN0aW9uID0gY29udGV4dC5GdW5jdGlvbixcbiAgICAgICAgTWF0aCA9IGNvbnRleHQuTWF0aCxcbiAgICAgICAgT2JqZWN0ID0gY29udGV4dC5PYmplY3QsXG4gICAgICAgIFJlZ0V4cCA9IGNvbnRleHQuUmVnRXhwLFxuICAgICAgICBTdHJpbmcgPSBjb250ZXh0LlN0cmluZyxcbiAgICAgICAgVHlwZUVycm9yID0gY29udGV4dC5UeXBlRXJyb3I7XG5cbiAgICAvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG4gICAgdmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsXG4gICAgICAgIGZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZSxcbiAgICAgICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4gICAgLyoqIFVzZWQgdG8gZGV0ZWN0IG92ZXJyZWFjaGluZyBjb3JlLWpzIHNoaW1zLiAqL1xuICAgIHZhciBjb3JlSnNEYXRhID0gY29udGV4dFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cbiAgICAvKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG4gICAgdmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuICAgIC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4gICAgLyoqIFVzZWQgdG8gZ2VuZXJhdGUgdW5pcXVlIElEcy4gKi9cbiAgICB2YXIgaWRDb3VudGVyID0gMDtcblxuICAgIC8qKiBVc2VkIHRvIGRldGVjdCBtZXRob2RzIG1hc3F1ZXJhZGluZyBhcyBuYXRpdmUuICovXG4gICAgdmFyIG1hc2tTcmNLZXkgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdWlkID0gL1teLl0rJC8uZXhlYyhjb3JlSnNEYXRhICYmIGNvcmVKc0RhdGEua2V5cyAmJiBjb3JlSnNEYXRhLmtleXMuSUVfUFJPVE8gfHwgJycpO1xuICAgICAgcmV0dXJuIHVpZCA/ICgnU3ltYm9sKHNyYylfMS4nICsgdWlkKSA6ICcnO1xuICAgIH0oKSk7XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gICAgICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gICAgICogb2YgdmFsdWVzLlxuICAgICAqL1xuICAgIHZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4gICAgLyoqIFVzZWQgdG8gaW5mZXIgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLiAqL1xuICAgIHZhciBvYmplY3RDdG9yU3RyaW5nID0gZnVuY1RvU3RyaW5nLmNhbGwoT2JqZWN0KTtcblxuICAgIC8qKiBVc2VkIHRvIHJlc3RvcmUgdGhlIG9yaWdpbmFsIGBfYCByZWZlcmVuY2UgaW4gYF8ubm9Db25mbGljdGAuICovXG4gICAgdmFyIG9sZERhc2ggPSByb290Ll87XG5cbiAgICAvKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xuICAgIHZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gICAgICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuICAgICAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG4gICAgKTtcblxuICAgIC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuICAgIHZhciBCdWZmZXIgPSBtb2R1bGVFeHBvcnRzID8gY29udGV4dC5CdWZmZXIgOiB1bmRlZmluZWQsXG4gICAgICAgIFN5bWJvbCA9IGNvbnRleHQuU3ltYm9sLFxuICAgICAgICBVaW50OEFycmF5ID0gY29udGV4dC5VaW50OEFycmF5LFxuICAgICAgICBhbGxvY1Vuc2FmZSA9IEJ1ZmZlciA/IEJ1ZmZlci5hbGxvY1Vuc2FmZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgZ2V0UHJvdG90eXBlID0gb3ZlckFyZyhPYmplY3QuZ2V0UHJvdG90eXBlT2YsIE9iamVjdCksXG4gICAgICAgIG9iamVjdENyZWF0ZSA9IE9iamVjdC5jcmVhdGUsXG4gICAgICAgIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGUsXG4gICAgICAgIHNwbGljZSA9IGFycmF5UHJvdG8uc3BsaWNlLFxuICAgICAgICBzcHJlYWRhYmxlU3ltYm9sID0gU3ltYm9sID8gU3ltYm9sLmlzQ29uY2F0U3ByZWFkYWJsZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgc3ltSXRlcmF0b3IgPSBTeW1ib2wgPyBTeW1ib2wuaXRlcmF0b3IgOiB1bmRlZmluZWQsXG4gICAgICAgIHN5bVRvU3RyaW5nVGFnID0gU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGRlZmluZVByb3BlcnR5ID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGZ1bmMgPSBnZXROYXRpdmUoT2JqZWN0LCAnZGVmaW5lUHJvcGVydHknKTtcbiAgICAgICAgZnVuYyh7fSwgJycsIHt9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH0oKSk7XG5cbiAgICAvKiogTW9ja2VkIGJ1aWx0LWlucy4gKi9cbiAgICB2YXIgY3R4Q2xlYXJUaW1lb3V0ID0gY29udGV4dC5jbGVhclRpbWVvdXQgIT09IHJvb3QuY2xlYXJUaW1lb3V0ICYmIGNvbnRleHQuY2xlYXJUaW1lb3V0LFxuICAgICAgICBjdHhOb3cgPSBEYXRlICYmIERhdGUubm93ICE9PSByb290LkRhdGUubm93ICYmIERhdGUubm93LFxuICAgICAgICBjdHhTZXRUaW1lb3V0ID0gY29udGV4dC5zZXRUaW1lb3V0ICE9PSByb290LnNldFRpbWVvdXQgJiYgY29udGV4dC5zZXRUaW1lb3V0O1xuXG4gICAgLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuICAgIHZhciBuYXRpdmVDZWlsID0gTWF0aC5jZWlsLFxuICAgICAgICBuYXRpdmVGbG9vciA9IE1hdGguZmxvb3IsXG4gICAgICAgIG5hdGl2ZUdldFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLFxuICAgICAgICBuYXRpdmVJc0J1ZmZlciA9IEJ1ZmZlciA/IEJ1ZmZlci5pc0J1ZmZlciA6IHVuZGVmaW5lZCxcbiAgICAgICAgbmF0aXZlSXNGaW5pdGUgPSBjb250ZXh0LmlzRmluaXRlLFxuICAgICAgICBuYXRpdmVKb2luID0gYXJyYXlQcm90by5qb2luLFxuICAgICAgICBuYXRpdmVLZXlzID0gb3ZlckFyZyhPYmplY3Qua2V5cywgT2JqZWN0KSxcbiAgICAgICAgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluLFxuICAgICAgICBuYXRpdmVOb3cgPSBEYXRlLm5vdyxcbiAgICAgICAgbmF0aXZlUGFyc2VJbnQgPSBjb250ZXh0LnBhcnNlSW50LFxuICAgICAgICBuYXRpdmVSYW5kb20gPSBNYXRoLnJhbmRvbSxcbiAgICAgICAgbmF0aXZlUmV2ZXJzZSA9IGFycmF5UHJvdG8ucmV2ZXJzZTtcblxuICAgIC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbiAgICB2YXIgRGF0YVZpZXcgPSBnZXROYXRpdmUoY29udGV4dCwgJ0RhdGFWaWV3JyksXG4gICAgICAgIE1hcCA9IGdldE5hdGl2ZShjb250ZXh0LCAnTWFwJyksXG4gICAgICAgIFByb21pc2UgPSBnZXROYXRpdmUoY29udGV4dCwgJ1Byb21pc2UnKSxcbiAgICAgICAgU2V0ID0gZ2V0TmF0aXZlKGNvbnRleHQsICdTZXQnKSxcbiAgICAgICAgV2Vha01hcCA9IGdldE5hdGl2ZShjb250ZXh0LCAnV2Vha01hcCcpLFxuICAgICAgICBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7XG5cbiAgICAvKiogVXNlZCB0byBzdG9yZSBmdW5jdGlvbiBtZXRhZGF0YS4gKi9cbiAgICB2YXIgbWV0YU1hcCA9IFdlYWtNYXAgJiYgbmV3IFdlYWtNYXA7XG5cbiAgICAvKiogVXNlZCB0byBsb29rdXAgdW5taW5pZmllZCBmdW5jdGlvbiBuYW1lcy4gKi9cbiAgICB2YXIgcmVhbE5hbWVzID0ge307XG5cbiAgICAvKiogVXNlZCB0byBkZXRlY3QgbWFwcywgc2V0cywgYW5kIHdlYWttYXBzLiAqL1xuICAgIHZhciBkYXRhVmlld0N0b3JTdHJpbmcgPSB0b1NvdXJjZShEYXRhVmlldyksXG4gICAgICAgIG1hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShNYXApLFxuICAgICAgICBwcm9taXNlQ3RvclN0cmluZyA9IHRvU291cmNlKFByb21pc2UpLFxuICAgICAgICBzZXRDdG9yU3RyaW5nID0gdG9Tb3VyY2UoU2V0KSxcbiAgICAgICAgd2Vha01hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShXZWFrTWFwKTtcblxuICAgIC8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xuICAgIHZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG4gICAgICAgIHN5bWJvbFZhbHVlT2YgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnZhbHVlT2YgOiB1bmRlZmluZWQsXG4gICAgICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgbG9kYXNoYCBvYmplY3Qgd2hpY2ggd3JhcHMgYHZhbHVlYCB0byBlbmFibGUgaW1wbGljaXQgbWV0aG9kXG4gICAgICogY2hhaW4gc2VxdWVuY2VzLiBNZXRob2RzIHRoYXQgb3BlcmF0ZSBvbiBhbmQgcmV0dXJuIGFycmF5cywgY29sbGVjdGlvbnMsXG4gICAgICogYW5kIGZ1bmN0aW9ucyBjYW4gYmUgY2hhaW5lZCB0b2dldGhlci4gTWV0aG9kcyB0aGF0IHJldHJpZXZlIGEgc2luZ2xlIHZhbHVlXG4gICAgICogb3IgbWF5IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZSB3aWxsIGF1dG9tYXRpY2FsbHkgZW5kIHRoZSBjaGFpbiBzZXF1ZW5jZVxuICAgICAqIGFuZCByZXR1cm4gdGhlIHVud3JhcHBlZCB2YWx1ZS4gT3RoZXJ3aXNlLCB0aGUgdmFsdWUgbXVzdCBiZSB1bndyYXBwZWRcbiAgICAgKiB3aXRoIGBfI3ZhbHVlYC5cbiAgICAgKlxuICAgICAqIEV4cGxpY2l0IGNoYWluIHNlcXVlbmNlcywgd2hpY2ggbXVzdCBiZSB1bndyYXBwZWQgd2l0aCBgXyN2YWx1ZWAsIG1heSBiZVxuICAgICAqIGVuYWJsZWQgdXNpbmcgYF8uY2hhaW5gLlxuICAgICAqXG4gICAgICogVGhlIGV4ZWN1dGlvbiBvZiBjaGFpbmVkIG1ldGhvZHMgaXMgbGF6eSwgdGhhdCBpcywgaXQncyBkZWZlcnJlZCB1bnRpbFxuICAgICAqIGBfI3ZhbHVlYCBpcyBpbXBsaWNpdGx5IG9yIGV4cGxpY2l0bHkgY2FsbGVkLlxuICAgICAqXG4gICAgICogTGF6eSBldmFsdWF0aW9uIGFsbG93cyBzZXZlcmFsIG1ldGhvZHMgdG8gc3VwcG9ydCBzaG9ydGN1dCBmdXNpb24uXG4gICAgICogU2hvcnRjdXQgZnVzaW9uIGlzIGFuIG9wdGltaXphdGlvbiB0byBtZXJnZSBpdGVyYXRlZSBjYWxsczsgdGhpcyBhdm9pZHNcbiAgICAgKiB0aGUgY3JlYXRpb24gb2YgaW50ZXJtZWRpYXRlIGFycmF5cyBhbmQgY2FuIGdyZWF0bHkgcmVkdWNlIHRoZSBudW1iZXIgb2ZcbiAgICAgKiBpdGVyYXRlZSBleGVjdXRpb25zLiBTZWN0aW9ucyBvZiBhIGNoYWluIHNlcXVlbmNlIHF1YWxpZnkgZm9yIHNob3J0Y3V0XG4gICAgICogZnVzaW9uIGlmIHRoZSBzZWN0aW9uIGlzIGFwcGxpZWQgdG8gYW4gYXJyYXkgYW5kIGl0ZXJhdGVlcyBhY2NlcHQgb25seVxuICAgICAqIG9uZSBhcmd1bWVudC4gVGhlIGhldXJpc3RpYyBmb3Igd2hldGhlciBhIHNlY3Rpb24gcXVhbGlmaWVzIGZvciBzaG9ydGN1dFxuICAgICAqIGZ1c2lvbiBpcyBzdWJqZWN0IHRvIGNoYW5nZS5cbiAgICAgKlxuICAgICAqIENoYWluaW5nIGlzIHN1cHBvcnRlZCBpbiBjdXN0b20gYnVpbGRzIGFzIGxvbmcgYXMgdGhlIGBfI3ZhbHVlYCBtZXRob2QgaXNcbiAgICAgKiBkaXJlY3RseSBvciBpbmRpcmVjdGx5IGluY2x1ZGVkIGluIHRoZSBidWlsZC5cbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uIHRvIGxvZGFzaCBtZXRob2RzLCB3cmFwcGVycyBoYXZlIGBBcnJheWAgYW5kIGBTdHJpbmdgIG1ldGhvZHMuXG4gICAgICpcbiAgICAgKiBUaGUgd3JhcHBlciBgQXJyYXlgIG1ldGhvZHMgYXJlOlxuICAgICAqIGBjb25jYXRgLCBgam9pbmAsIGBwb3BgLCBgcHVzaGAsIGBzaGlmdGAsIGBzb3J0YCwgYHNwbGljZWAsIGFuZCBgdW5zaGlmdGBcbiAgICAgKlxuICAgICAqIFRoZSB3cmFwcGVyIGBTdHJpbmdgIG1ldGhvZHMgYXJlOlxuICAgICAqIGByZXBsYWNlYCBhbmQgYHNwbGl0YFxuICAgICAqXG4gICAgICogVGhlIHdyYXBwZXIgbWV0aG9kcyB0aGF0IHN1cHBvcnQgc2hvcnRjdXQgZnVzaW9uIGFyZTpcbiAgICAgKiBgYXRgLCBgY29tcGFjdGAsIGBkcm9wYCwgYGRyb3BSaWdodGAsIGBkcm9wV2hpbGVgLCBgZmlsdGVyYCwgYGZpbmRgLFxuICAgICAqIGBmaW5kTGFzdGAsIGBoZWFkYCwgYGluaXRpYWxgLCBgbGFzdGAsIGBtYXBgLCBgcmVqZWN0YCwgYHJldmVyc2VgLCBgc2xpY2VgLFxuICAgICAqIGB0YWlsYCwgYHRha2VgLCBgdGFrZVJpZ2h0YCwgYHRha2VSaWdodFdoaWxlYCwgYHRha2VXaGlsZWAsIGFuZCBgdG9BcnJheWBcbiAgICAgKlxuICAgICAqIFRoZSBjaGFpbmFibGUgd3JhcHBlciBtZXRob2RzIGFyZTpcbiAgICAgKiBgYWZ0ZXJgLCBgYXJ5YCwgYGFzc2lnbmAsIGBhc3NpZ25JbmAsIGBhc3NpZ25JbldpdGhgLCBgYXNzaWduV2l0aGAsIGBhdGAsXG4gICAgICogYGJlZm9yZWAsIGBiaW5kYCwgYGJpbmRBbGxgLCBgYmluZEtleWAsIGBjYXN0QXJyYXlgLCBgY2hhaW5gLCBgY2h1bmtgLFxuICAgICAqIGBjb21taXRgLCBgY29tcGFjdGAsIGBjb25jYXRgLCBgY29uZm9ybXNgLCBgY29uc3RhbnRgLCBgY291bnRCeWAsIGBjcmVhdGVgLFxuICAgICAqIGBjdXJyeWAsIGBkZWJvdW5jZWAsIGBkZWZhdWx0c2AsIGBkZWZhdWx0c0RlZXBgLCBgZGVmZXJgLCBgZGVsYXlgLFxuICAgICAqIGBkaWZmZXJlbmNlYCwgYGRpZmZlcmVuY2VCeWAsIGBkaWZmZXJlbmNlV2l0aGAsIGBkcm9wYCwgYGRyb3BSaWdodGAsXG4gICAgICogYGRyb3BSaWdodFdoaWxlYCwgYGRyb3BXaGlsZWAsIGBleHRlbmRgLCBgZXh0ZW5kV2l0aGAsIGBmaWxsYCwgYGZpbHRlcmAsXG4gICAgICogYGZsYXRNYXBgLCBgZmxhdE1hcERlZXBgLCBgZmxhdE1hcERlcHRoYCwgYGZsYXR0ZW5gLCBgZmxhdHRlbkRlZXBgLFxuICAgICAqIGBmbGF0dGVuRGVwdGhgLCBgZmxpcGAsIGBmbG93YCwgYGZsb3dSaWdodGAsIGBmcm9tUGFpcnNgLCBgZnVuY3Rpb25zYCxcbiAgICAgKiBgZnVuY3Rpb25zSW5gLCBgZ3JvdXBCeWAsIGBpbml0aWFsYCwgYGludGVyc2VjdGlvbmAsIGBpbnRlcnNlY3Rpb25CeWAsXG4gICAgICogYGludGVyc2VjdGlvbldpdGhgLCBgaW52ZXJ0YCwgYGludmVydEJ5YCwgYGludm9rZU1hcGAsIGBpdGVyYXRlZWAsIGBrZXlCeWAsXG4gICAgICogYGtleXNgLCBga2V5c0luYCwgYG1hcGAsIGBtYXBLZXlzYCwgYG1hcFZhbHVlc2AsIGBtYXRjaGVzYCwgYG1hdGNoZXNQcm9wZXJ0eWAsXG4gICAgICogYG1lbW9pemVgLCBgbWVyZ2VgLCBgbWVyZ2VXaXRoYCwgYG1ldGhvZGAsIGBtZXRob2RPZmAsIGBtaXhpbmAsIGBuZWdhdGVgLFxuICAgICAqIGBudGhBcmdgLCBgb21pdGAsIGBvbWl0QnlgLCBgb25jZWAsIGBvcmRlckJ5YCwgYG92ZXJgLCBgb3ZlckFyZ3NgLFxuICAgICAqIGBvdmVyRXZlcnlgLCBgb3ZlclNvbWVgLCBgcGFydGlhbGAsIGBwYXJ0aWFsUmlnaHRgLCBgcGFydGl0aW9uYCwgYHBpY2tgLFxuICAgICAqIGBwaWNrQnlgLCBgcGxhbnRgLCBgcHJvcGVydHlgLCBgcHJvcGVydHlPZmAsIGBwdWxsYCwgYHB1bGxBbGxgLCBgcHVsbEFsbEJ5YCxcbiAgICAgKiBgcHVsbEFsbFdpdGhgLCBgcHVsbEF0YCwgYHB1c2hgLCBgcmFuZ2VgLCBgcmFuZ2VSaWdodGAsIGByZWFyZ2AsIGByZWplY3RgLFxuICAgICAqIGByZW1vdmVgLCBgcmVzdGAsIGByZXZlcnNlYCwgYHNhbXBsZVNpemVgLCBgc2V0YCwgYHNldFdpdGhgLCBgc2h1ZmZsZWAsXG4gICAgICogYHNsaWNlYCwgYHNvcnRgLCBgc29ydEJ5YCwgYHNwbGljZWAsIGBzcHJlYWRgLCBgdGFpbGAsIGB0YWtlYCwgYHRha2VSaWdodGAsXG4gICAgICogYHRha2VSaWdodFdoaWxlYCwgYHRha2VXaGlsZWAsIGB0YXBgLCBgdGhyb3R0bGVgLCBgdGhydWAsIGB0b0FycmF5YCxcbiAgICAgKiBgdG9QYWlyc2AsIGB0b1BhaXJzSW5gLCBgdG9QYXRoYCwgYHRvUGxhaW5PYmplY3RgLCBgdHJhbnNmb3JtYCwgYHVuYXJ5YCxcbiAgICAgKiBgdW5pb25gLCBgdW5pb25CeWAsIGB1bmlvbldpdGhgLCBgdW5pcWAsIGB1bmlxQnlgLCBgdW5pcVdpdGhgLCBgdW5zZXRgLFxuICAgICAqIGB1bnNoaWZ0YCwgYHVuemlwYCwgYHVuemlwV2l0aGAsIGB1cGRhdGVgLCBgdXBkYXRlV2l0aGAsIGB2YWx1ZXNgLFxuICAgICAqIGB2YWx1ZXNJbmAsIGB3aXRob3V0YCwgYHdyYXBgLCBgeG9yYCwgYHhvckJ5YCwgYHhvcldpdGhgLCBgemlwYCxcbiAgICAgKiBgemlwT2JqZWN0YCwgYHppcE9iamVjdERlZXBgLCBhbmQgYHppcFdpdGhgXG4gICAgICpcbiAgICAgKiBUaGUgd3JhcHBlciBtZXRob2RzIHRoYXQgYXJlICoqbm90KiogY2hhaW5hYmxlIGJ5IGRlZmF1bHQgYXJlOlxuICAgICAqIGBhZGRgLCBgYXR0ZW1wdGAsIGBjYW1lbENhc2VgLCBgY2FwaXRhbGl6ZWAsIGBjZWlsYCwgYGNsYW1wYCwgYGNsb25lYCxcbiAgICAgKiBgY2xvbmVEZWVwYCwgYGNsb25lRGVlcFdpdGhgLCBgY2xvbmVXaXRoYCwgYGNvbmZvcm1zVG9gLCBgZGVidXJyYCxcbiAgICAgKiBgZGVmYXVsdFRvYCwgYGRpdmlkZWAsIGBlYWNoYCwgYGVhY2hSaWdodGAsIGBlbmRzV2l0aGAsIGBlcWAsIGBlc2NhcGVgLFxuICAgICAqIGBlc2NhcGVSZWdFeHBgLCBgZXZlcnlgLCBgZmluZGAsIGBmaW5kSW5kZXhgLCBgZmluZEtleWAsIGBmaW5kTGFzdGAsXG4gICAgICogYGZpbmRMYXN0SW5kZXhgLCBgZmluZExhc3RLZXlgLCBgZmlyc3RgLCBgZmxvb3JgLCBgZm9yRWFjaGAsIGBmb3JFYWNoUmlnaHRgLFxuICAgICAqIGBmb3JJbmAsIGBmb3JJblJpZ2h0YCwgYGZvck93bmAsIGBmb3JPd25SaWdodGAsIGBnZXRgLCBgZ3RgLCBgZ3RlYCwgYGhhc2AsXG4gICAgICogYGhhc0luYCwgYGhlYWRgLCBgaWRlbnRpdHlgLCBgaW5jbHVkZXNgLCBgaW5kZXhPZmAsIGBpblJhbmdlYCwgYGludm9rZWAsXG4gICAgICogYGlzQXJndW1lbnRzYCwgYGlzQXJyYXlgLCBgaXNBcnJheUJ1ZmZlcmAsIGBpc0FycmF5TGlrZWAsIGBpc0FycmF5TGlrZU9iamVjdGAsXG4gICAgICogYGlzQm9vbGVhbmAsIGBpc0J1ZmZlcmAsIGBpc0RhdGVgLCBgaXNFbGVtZW50YCwgYGlzRW1wdHlgLCBgaXNFcXVhbGAsXG4gICAgICogYGlzRXF1YWxXaXRoYCwgYGlzRXJyb3JgLCBgaXNGaW5pdGVgLCBgaXNGdW5jdGlvbmAsIGBpc0ludGVnZXJgLCBgaXNMZW5ndGhgLFxuICAgICAqIGBpc01hcGAsIGBpc01hdGNoYCwgYGlzTWF0Y2hXaXRoYCwgYGlzTmFOYCwgYGlzTmF0aXZlYCwgYGlzTmlsYCwgYGlzTnVsbGAsXG4gICAgICogYGlzTnVtYmVyYCwgYGlzT2JqZWN0YCwgYGlzT2JqZWN0TGlrZWAsIGBpc1BsYWluT2JqZWN0YCwgYGlzUmVnRXhwYCxcbiAgICAgKiBgaXNTYWZlSW50ZWdlcmAsIGBpc1NldGAsIGBpc1N0cmluZ2AsIGBpc1VuZGVmaW5lZGAsIGBpc1R5cGVkQXJyYXlgLFxuICAgICAqIGBpc1dlYWtNYXBgLCBgaXNXZWFrU2V0YCwgYGpvaW5gLCBga2ViYWJDYXNlYCwgYGxhc3RgLCBgbGFzdEluZGV4T2ZgLFxuICAgICAqIGBsb3dlckNhc2VgLCBgbG93ZXJGaXJzdGAsIGBsdGAsIGBsdGVgLCBgbWF4YCwgYG1heEJ5YCwgYG1lYW5gLCBgbWVhbkJ5YCxcbiAgICAgKiBgbWluYCwgYG1pbkJ5YCwgYG11bHRpcGx5YCwgYG5vQ29uZmxpY3RgLCBgbm9vcGAsIGBub3dgLCBgbnRoYCwgYHBhZGAsXG4gICAgICogYHBhZEVuZGAsIGBwYWRTdGFydGAsIGBwYXJzZUludGAsIGBwb3BgLCBgcmFuZG9tYCwgYHJlZHVjZWAsIGByZWR1Y2VSaWdodGAsXG4gICAgICogYHJlcGVhdGAsIGByZXN1bHRgLCBgcm91bmRgLCBgcnVuSW5Db250ZXh0YCwgYHNhbXBsZWAsIGBzaGlmdGAsIGBzaXplYCxcbiAgICAgKiBgc25ha2VDYXNlYCwgYHNvbWVgLCBgc29ydGVkSW5kZXhgLCBgc29ydGVkSW5kZXhCeWAsIGBzb3J0ZWRMYXN0SW5kZXhgLFxuICAgICAqIGBzb3J0ZWRMYXN0SW5kZXhCeWAsIGBzdGFydENhc2VgLCBgc3RhcnRzV2l0aGAsIGBzdHViQXJyYXlgLCBgc3R1YkZhbHNlYCxcbiAgICAgKiBgc3R1Yk9iamVjdGAsIGBzdHViU3RyaW5nYCwgYHN0dWJUcnVlYCwgYHN1YnRyYWN0YCwgYHN1bWAsIGBzdW1CeWAsXG4gICAgICogYHRlbXBsYXRlYCwgYHRpbWVzYCwgYHRvRmluaXRlYCwgYHRvSW50ZWdlcmAsIGB0b0pTT05gLCBgdG9MZW5ndGhgLFxuICAgICAqIGB0b0xvd2VyYCwgYHRvTnVtYmVyYCwgYHRvU2FmZUludGVnZXJgLCBgdG9TdHJpbmdgLCBgdG9VcHBlcmAsIGB0cmltYCxcbiAgICAgKiBgdHJpbUVuZGAsIGB0cmltU3RhcnRgLCBgdHJ1bmNhdGVgLCBgdW5lc2NhcGVgLCBgdW5pcXVlSWRgLCBgdXBwZXJDYXNlYCxcbiAgICAgKiBgdXBwZXJGaXJzdGAsIGB2YWx1ZWAsIGFuZCBgd29yZHNgXG4gICAgICpcbiAgICAgKiBAbmFtZSBfXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQGNhdGVnb3J5IFNlcVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAgaW4gYSBgbG9kYXNoYCBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gc3F1YXJlKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogbjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgd3JhcHBlZCA9IF8oWzEsIDIsIDNdKTtcbiAgICAgKlxuICAgICAqIC8vIFJldHVybnMgYW4gdW53cmFwcGVkIHZhbHVlLlxuICAgICAqIHdyYXBwZWQucmVkdWNlKF8uYWRkKTtcbiAgICAgKiAvLyA9PiA2XG4gICAgICpcbiAgICAgKiAvLyBSZXR1cm5zIGEgd3JhcHBlZCB2YWx1ZS5cbiAgICAgKiB2YXIgc3F1YXJlcyA9IHdyYXBwZWQubWFwKHNxdWFyZSk7XG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoc3F1YXJlcyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheShzcXVhcmVzLnZhbHVlKCkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb2Rhc2godmFsdWUpIHtcbiAgICAgIGlmIChpc09iamVjdExpa2UodmFsdWUpICYmICFpc0FycmF5KHZhbHVlKSAmJiAhKHZhbHVlIGluc3RhbmNlb2YgTGF6eVdyYXBwZXIpKSB7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIExvZGFzaFdyYXBwZXIpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdfX3dyYXBwZWRfXycpKSB7XG4gICAgICAgICAgcmV0dXJuIHdyYXBwZXJDbG9uZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgTG9kYXNoV3JhcHBlcih2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFzc2lnbmluZ1xuICAgICAqIHByb3BlcnRpZXMgdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG8gVGhlIG9iamVjdCB0byBpbmhlcml0IGZyb20uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKi9cbiAgICB2YXIgYmFzZUNyZWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIG9iamVjdCgpIHt9XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocHJvdG8pIHtcbiAgICAgICAgaWYgKCFpc09iamVjdChwcm90bykpIHtcbiAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9iamVjdENyZWF0ZSkge1xuICAgICAgICAgIHJldHVybiBvYmplY3RDcmVhdGUocHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIG9iamVjdC5wcm90b3R5cGUgPSBwcm90bztcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBvYmplY3Q7XG4gICAgICAgIG9iamVjdC5wcm90b3R5cGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH0oKSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb24gd2hvc2UgcHJvdG90eXBlIGNoYWluIHNlcXVlbmNlIHdyYXBwZXJzIGluaGVyaXQgZnJvbS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUxvZGFzaCgpIHtcbiAgICAgIC8vIE5vIG9wZXJhdGlvbiBwZXJmb3JtZWQuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgY29uc3RydWN0b3IgZm9yIGNyZWF0aW5nIGBsb2Rhc2hgIHdyYXBwZXIgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjaGFpbkFsbF0gRW5hYmxlIGV4cGxpY2l0IG1ldGhvZCBjaGFpbiBzZXF1ZW5jZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTG9kYXNoV3JhcHBlcih2YWx1ZSwgY2hhaW5BbGwpIHtcbiAgICAgIHRoaXMuX193cmFwcGVkX18gPSB2YWx1ZTtcbiAgICAgIHRoaXMuX19hY3Rpb25zX18gPSBbXTtcbiAgICAgIHRoaXMuX19jaGFpbl9fID0gISFjaGFpbkFsbDtcbiAgICAgIHRoaXMuX19pbmRleF9fID0gMDtcbiAgICAgIHRoaXMuX192YWx1ZXNfXyA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCeSBkZWZhdWx0LCB0aGUgdGVtcGxhdGUgZGVsaW1pdGVycyB1c2VkIGJ5IGxvZGFzaCBhcmUgbGlrZSB0aG9zZSBpblxuICAgICAqIGVtYmVkZGVkIFJ1YnkgKEVSQikgYXMgd2VsbCBhcyBFUzIwMTUgdGVtcGxhdGUgc3RyaW5ncy4gQ2hhbmdlIHRoZVxuICAgICAqIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2UgYWx0ZXJuYXRpdmUgZGVsaW1pdGVycy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgbG9kYXNoLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBkZXRlY3QgYGRhdGFgIHByb3BlcnR5IHZhbHVlcyB0byBiZSBIVE1MLWVzY2FwZWQuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUge1JlZ0V4cH1cbiAgICAgICAqL1xuICAgICAgJ2VzY2FwZSc6IHJlRXNjYXBlLFxuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gZGV0ZWN0IGNvZGUgdG8gYmUgZXZhbHVhdGVkLlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIHtSZWdFeHB9XG4gICAgICAgKi9cbiAgICAgICdldmFsdWF0ZSc6IHJlRXZhbHVhdGUsXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBkZXRlY3QgYGRhdGFgIHByb3BlcnR5IHZhbHVlcyB0byBpbmplY3QuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUge1JlZ0V4cH1cbiAgICAgICAqL1xuICAgICAgJ2ludGVycG9sYXRlJzogcmVJbnRlcnBvbGF0ZSxcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIHJlZmVyZW5jZSB0aGUgZGF0YSBvYmplY3QgaW4gdGhlIHRlbXBsYXRlIHRleHQuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAqL1xuICAgICAgJ3ZhcmlhYmxlJzogJycsXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBpbXBvcnQgdmFyaWFibGVzIGludG8gdGhlIGNvbXBpbGVkIHRlbXBsYXRlLlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgKi9cbiAgICAgICdpbXBvcnRzJzoge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3MuaW1wb3J0c1xuICAgICAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICAnXyc6IGxvZGFzaFxuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBFbnN1cmUgd3JhcHBlcnMgYXJlIGluc3RhbmNlcyBvZiBgYmFzZUxvZGFzaGAuXG4gICAgbG9kYXNoLnByb3RvdHlwZSA9IGJhc2VMb2Rhc2gucHJvdG90eXBlO1xuICAgIGxvZGFzaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBsb2Rhc2g7XG5cbiAgICBMb2Rhc2hXcmFwcGVyLnByb3RvdHlwZSA9IGJhc2VDcmVhdGUoYmFzZUxvZGFzaC5wcm90b3R5cGUpO1xuICAgIExvZGFzaFdyYXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTG9kYXNoV3JhcHBlcjtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBsYXp5IHdyYXBwZXIgb2JqZWN0IHdoaWNoIHdyYXBzIGB2YWx1ZWAgdG8gZW5hYmxlIGxhenkgZXZhbHVhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMYXp5V3JhcHBlcih2YWx1ZSkge1xuICAgICAgdGhpcy5fX3dyYXBwZWRfXyA9IHZhbHVlO1xuICAgICAgdGhpcy5fX2FjdGlvbnNfXyA9IFtdO1xuICAgICAgdGhpcy5fX2Rpcl9fID0gMTtcbiAgICAgIHRoaXMuX19maWx0ZXJlZF9fID0gZmFsc2U7XG4gICAgICB0aGlzLl9faXRlcmF0ZWVzX18gPSBbXTtcbiAgICAgIHRoaXMuX190YWtlQ291bnRfXyA9IE1BWF9BUlJBWV9MRU5HVEg7XG4gICAgICB0aGlzLl9fdmlld3NfXyA9IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGUgbGF6eSB3cmFwcGVyIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgY2xvbmVcbiAgICAgKiBAbWVtYmVyT2YgTGF6eVdyYXBwZXJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjbG9uZWQgYExhenlXcmFwcGVyYCBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGF6eUNsb25lKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBMYXp5V3JhcHBlcih0aGlzLl9fd3JhcHBlZF9fKTtcbiAgICAgIHJlc3VsdC5fX2FjdGlvbnNfXyA9IGNvcHlBcnJheSh0aGlzLl9fYWN0aW9uc19fKTtcbiAgICAgIHJlc3VsdC5fX2Rpcl9fID0gdGhpcy5fX2Rpcl9fO1xuICAgICAgcmVzdWx0Ll9fZmlsdGVyZWRfXyA9IHRoaXMuX19maWx0ZXJlZF9fO1xuICAgICAgcmVzdWx0Ll9faXRlcmF0ZWVzX18gPSBjb3B5QXJyYXkodGhpcy5fX2l0ZXJhdGVlc19fKTtcbiAgICAgIHJlc3VsdC5fX3Rha2VDb3VudF9fID0gdGhpcy5fX3Rha2VDb3VudF9fO1xuICAgICAgcmVzdWx0Ll9fdmlld3NfXyA9IGNvcHlBcnJheSh0aGlzLl9fdmlld3NfXyk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldmVyc2VzIHRoZSBkaXJlY3Rpb24gb2YgbGF6eSBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIHJldmVyc2VcbiAgICAgKiBAbWVtYmVyT2YgTGF6eVdyYXBwZXJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgcmV2ZXJzZWQgYExhenlXcmFwcGVyYCBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGF6eVJldmVyc2UoKSB7XG4gICAgICBpZiAodGhpcy5fX2ZpbHRlcmVkX18pIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBMYXp5V3JhcHBlcih0aGlzKTtcbiAgICAgICAgcmVzdWx0Ll9fZGlyX18gPSAtMTtcbiAgICAgICAgcmVzdWx0Ll9fZmlsdGVyZWRfXyA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSB0aGlzLmNsb25lKCk7XG4gICAgICAgIHJlc3VsdC5fX2Rpcl9fICo9IC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyB0aGUgdW53cmFwcGVkIHZhbHVlIGZyb20gaXRzIGxhenkgd3JhcHBlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgdmFsdWVcbiAgICAgKiBAbWVtYmVyT2YgTGF6eVdyYXBwZXJcbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgdW53cmFwcGVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxhenlWYWx1ZSgpIHtcbiAgICAgIHZhciBhcnJheSA9IHRoaXMuX193cmFwcGVkX18udmFsdWUoKSxcbiAgICAgICAgICBkaXIgPSB0aGlzLl9fZGlyX18sXG4gICAgICAgICAgaXNBcnIgPSBpc0FycmF5KGFycmF5KSxcbiAgICAgICAgICBpc1JpZ2h0ID0gZGlyIDwgMCxcbiAgICAgICAgICBhcnJMZW5ndGggPSBpc0FyciA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgdmlldyA9IGdldFZpZXcoMCwgYXJyTGVuZ3RoLCB0aGlzLl9fdmlld3NfXyksXG4gICAgICAgICAgc3RhcnQgPSB2aWV3LnN0YXJ0LFxuICAgICAgICAgIGVuZCA9IHZpZXcuZW5kLFxuICAgICAgICAgIGxlbmd0aCA9IGVuZCAtIHN0YXJ0LFxuICAgICAgICAgIGluZGV4ID0gaXNSaWdodCA/IGVuZCA6IChzdGFydCAtIDEpLFxuICAgICAgICAgIGl0ZXJhdGVlcyA9IHRoaXMuX19pdGVyYXRlZXNfXyxcbiAgICAgICAgICBpdGVyTGVuZ3RoID0gaXRlcmF0ZWVzLmxlbmd0aCxcbiAgICAgICAgICByZXNJbmRleCA9IDAsXG4gICAgICAgICAgdGFrZUNvdW50ID0gbmF0aXZlTWluKGxlbmd0aCwgdGhpcy5fX3Rha2VDb3VudF9fKTtcblxuICAgICAgaWYgKCFpc0FyciB8fCAoIWlzUmlnaHQgJiYgYXJyTGVuZ3RoID09IGxlbmd0aCAmJiB0YWtlQ291bnQgPT0gbGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gYmFzZVdyYXBwZXJWYWx1ZShhcnJheSwgdGhpcy5fX2FjdGlvbnNfXyk7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICAgIG91dGVyOlxuICAgICAgd2hpbGUgKGxlbmd0aC0tICYmIHJlc0luZGV4IDwgdGFrZUNvdW50KSB7XG4gICAgICAgIGluZGV4ICs9IGRpcjtcblxuICAgICAgICB2YXIgaXRlckluZGV4ID0gLTEsXG4gICAgICAgICAgICB2YWx1ZSA9IGFycmF5W2luZGV4XTtcblxuICAgICAgICB3aGlsZSAoKytpdGVySW5kZXggPCBpdGVyTGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBpdGVyYXRlZXNbaXRlckluZGV4XSxcbiAgICAgICAgICAgICAgaXRlcmF0ZWUgPSBkYXRhLml0ZXJhdGVlLFxuICAgICAgICAgICAgICB0eXBlID0gZGF0YS50eXBlLFxuICAgICAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlKTtcblxuICAgICAgICAgIGlmICh0eXBlID09IExBWllfTUFQX0ZMQUcpIHtcbiAgICAgICAgICAgIHZhbHVlID0gY29tcHV0ZWQ7XG4gICAgICAgICAgfSBlbHNlIGlmICghY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09IExBWllfRklMVEVSX0ZMQUcpIHtcbiAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBicmVhayBvdXRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0W3Jlc0luZGV4KytdID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSBgTGF6eVdyYXBwZXJgIGlzIGFuIGluc3RhbmNlIG9mIGBiYXNlTG9kYXNoYC5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUgPSBiYXNlQ3JlYXRlKGJhc2VMb2Rhc2gucHJvdG90eXBlKTtcbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBMYXp5V3JhcHBlcjtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSGFzaChlbnRyaWVzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBlbnRyaWVzID09IG51bGwgPyAwIDogZW50cmllcy5sZW5ndGg7XG5cbiAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgICAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGNsZWFyXG4gICAgICogQG1lbWJlck9mIEhhc2hcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYXNoQ2xlYXIoKSB7XG4gICAgICB0aGlzLl9fZGF0YV9fID0gbmF0aXZlQ3JlYXRlID8gbmF0aXZlQ3JlYXRlKG51bGwpIDoge307XG4gICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBoYXNoLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBkZWxldGVcbiAgICAgKiBAbWVtYmVyT2YgSGFzaFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoIFRoZSBoYXNoIHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaGFzaERlbGV0ZShrZXkpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG4gICAgICB0aGlzLnNpemUgLT0gcmVzdWx0ID8gMSA6IDA7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGhhc2ggdmFsdWUgZm9yIGBrZXlgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBnZXRcbiAgICAgKiBAbWVtYmVyT2YgSGFzaFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYXNoR2V0KGtleSkge1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICAgICAgaWYgKG5hdGl2ZUNyZWF0ZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZGF0YVtrZXldO1xuICAgICAgICByZXR1cm4gcmVzdWx0ID09PSBIQVNIX1VOREVGSU5FRCA/IHVuZGVmaW5lZCA6IHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkgPyBkYXRhW2tleV0gOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgaGFzaCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBoYXNcbiAgICAgKiBAbWVtYmVyT2YgSGFzaFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYXNoSGFzKGtleSkge1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICAgICAgcmV0dXJuIG5hdGl2ZUNyZWF0ZSA/IChkYXRhW2tleV0gIT09IHVuZGVmaW5lZCkgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaGFzaCBga2V5YCB0byBgdmFsdWVgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBzZXRcbiAgICAgKiBAbWVtYmVyT2YgSGFzaFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGhhc2hTZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICAgICAgdGhpcy5zaXplICs9IHRoaXMuaGFzKGtleSkgPyAwIDogMTtcbiAgICAgIGRhdGFba2V5XSA9IChuYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgPyBIQVNIX1VOREVGSU5FRCA6IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gQWRkIG1ldGhvZHMgdG8gYEhhc2hgLlxuICAgIEhhc2gucHJvdG90eXBlLmNsZWFyID0gaGFzaENsZWFyO1xuICAgIEhhc2gucHJvdG90eXBlWydkZWxldGUnXSA9IGhhc2hEZWxldGU7XG4gICAgSGFzaC5wcm90b3R5cGUuZ2V0ID0gaGFzaEdldDtcbiAgICBIYXNoLnByb3RvdHlwZS5oYXMgPSBoYXNoSGFzO1xuICAgIEhhc2gucHJvdG90eXBlLnNldCA9IGhhc2hTZXQ7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoO1xuXG4gICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICAgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBjbGVhclxuICAgICAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcbiAgICAgIHRoaXMuX19kYXRhX18gPSBbXTtcbiAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGRlbGV0ZVxuICAgICAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGlzdENhY2hlRGVsZXRlKGtleSkge1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIGxhc3RJbmRleCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICAgIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcbiAgICAgICAgZGF0YS5wb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwbGljZS5jYWxsKGRhdGEsIGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICAgIC0tdGhpcy5zaXplO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGdldFxuICAgICAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgICAgIHJldHVybiBpbmRleCA8IDAgPyB1bmRlZmluZWQgOiBkYXRhW2luZGV4XVsxXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGhhc1xuICAgICAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGlzdENhY2hlSGFzKGtleSkge1xuICAgICAgcmV0dXJuIGFzc29jSW5kZXhPZih0aGlzLl9fZGF0YV9fLCBrZXkpID4gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBzZXRcbiAgICAgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGxpc3QgY2FjaGUgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICsrdGhpcy5zaXplO1xuICAgICAgICBkYXRhLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGFbaW5kZXhdWzFdID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBBZGQgbWV0aG9kcyB0byBgTGlzdENhY2hlYC5cbiAgICBMaXN0Q2FjaGUucHJvdG90eXBlLmNsZWFyID0gbGlzdENhY2hlQ2xlYXI7XG4gICAgTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG4gICAgTGlzdENhY2hlLnByb3RvdHlwZS5nZXQgPSBsaXN0Q2FjaGVHZXQ7XG4gICAgTGlzdENhY2hlLnByb3RvdHlwZS5oYXMgPSBsaXN0Q2FjaGVIYXM7XG4gICAgTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGVudHJpZXMgPT0gbnVsbCA/IDAgOiBlbnRyaWVzLmxlbmd0aDtcblxuICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbWFwLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBjbGVhclxuICAgICAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcENhY2hlQ2xlYXIoKSB7XG4gICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgdGhpcy5fX2RhdGFfXyA9IHtcbiAgICAgICAgJ2hhc2gnOiBuZXcgSGFzaCxcbiAgICAgICAgJ21hcCc6IG5ldyAoTWFwIHx8IExpc3RDYWNoZSksXG4gICAgICAgICdzdHJpbmcnOiBuZXcgSGFzaFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbWFwLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBkZWxldGVcbiAgICAgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwQ2FjaGVEZWxldGUoa2V5KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpWydkZWxldGUnXShrZXkpO1xuICAgICAgdGhpcy5zaXplIC09IHJlc3VsdCA/IDEgOiAwO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBtYXAgdmFsdWUgZm9yIGBrZXlgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBnZXRcbiAgICAgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwQ2FjaGVHZXQoa2V5KSB7XG4gICAgICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIG1hcCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBoYXNcbiAgICAgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwQ2FjaGVIYXMoa2V5KSB7XG4gICAgICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmhhcyhrZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBzZXRcbiAgICAgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbWFwIGNhY2hlIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBkYXRhID0gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLFxuICAgICAgICAgIHNpemUgPSBkYXRhLnNpemU7XG5cbiAgICAgIGRhdGEuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgdGhpcy5zaXplICs9IGRhdGEuc2l6ZSA9PSBzaXplID8gMCA6IDE7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBBZGQgbWV0aG9kcyB0byBgTWFwQ2FjaGVgLlxuICAgIE1hcENhY2hlLnByb3RvdHlwZS5jbGVhciA9IG1hcENhY2hlQ2xlYXI7XG4gICAgTWFwQ2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IG1hcENhY2hlRGVsZXRlO1xuICAgIE1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBDYWNoZUdldDtcbiAgICBNYXBDYWNoZS5wcm90b3R5cGUuaGFzID0gbWFwQ2FjaGVIYXM7XG4gICAgTWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IG1hcENhY2hlU2V0O1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gdmFsdWVzID09IG51bGwgPyAwIDogdmFsdWVzLmxlbmd0aDtcblxuICAgICAgdGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYWRkKHZhbHVlc1tpbmRleF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYHZhbHVlYCB0byB0aGUgYXJyYXkgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGFkZFxuICAgICAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICAgICAqIEBhbGlhcyBwdXNoXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0Q2FjaGVBZGQodmFsdWUpIHtcbiAgICAgIHRoaXMuX19kYXRhX18uc2V0KHZhbHVlLCBIQVNIX1VOREVGSU5FRCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBpbiB0aGUgYXJyYXkgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGhhc1xuICAgICAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldENhY2hlSGFzKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModmFsdWUpO1xuICAgIH1cblxuICAgIC8vIEFkZCBtZXRob2RzIHRvIGBTZXRDYWNoZWAuXG4gICAgU2V0Q2FjaGUucHJvdG90eXBlLmFkZCA9IFNldENhY2hlLnByb3RvdHlwZS5wdXNoID0gc2V0Q2FjaGVBZGQ7XG4gICAgU2V0Q2FjaGUucHJvdG90eXBlLmhhcyA9IHNldENhY2hlSGFzO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHN0YWNrIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFN0YWNrKGVudHJpZXMpIHtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGUoZW50cmllcyk7XG4gICAgICB0aGlzLnNpemUgPSBkYXRhLnNpemU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgc3RhY2suXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGNsZWFyXG4gICAgICogQG1lbWJlck9mIFN0YWNrXG4gICAgICovXG4gICAgZnVuY3Rpb24gc3RhY2tDbGVhcigpIHtcbiAgICAgIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlO1xuICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgc3RhY2suXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGRlbGV0ZVxuICAgICAqIEBtZW1iZXJPZiBTdGFja1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzdGFja0RlbGV0ZShrZXkpIHtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgICAgICByZXN1bHQgPSBkYXRhWydkZWxldGUnXShrZXkpO1xuXG4gICAgICB0aGlzLnNpemUgPSBkYXRhLnNpemU7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgZ2V0XG4gICAgICogQG1lbWJlck9mIFN0YWNrXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN0YWNrR2V0KGtleSkge1xuICAgICAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgc3RhY2sgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgaGFzXG4gICAgICogQG1lbWJlck9mIFN0YWNrXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN0YWNrSGFzKGtleSkge1xuICAgICAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKGtleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3RhY2sgYGtleWAgdG8gYHZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgc2V0XG4gICAgICogQG1lbWJlck9mIFN0YWNrXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN0YWNrU2V0KGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgTGlzdENhY2hlKSB7XG4gICAgICAgIHZhciBwYWlycyA9IGRhdGEuX19kYXRhX187XG4gICAgICAgIGlmICghTWFwIHx8IChwYWlycy5sZW5ndGggPCBMQVJHRV9BUlJBWV9TSVpFIC0gMSkpIHtcbiAgICAgICAgICBwYWlycy5wdXNoKFtrZXksIHZhbHVlXSk7XG4gICAgICAgICAgdGhpcy5zaXplID0gKytkYXRhLnNpemU7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUocGFpcnMpO1xuICAgICAgfVxuICAgICAgZGF0YS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICB0aGlzLnNpemUgPSBkYXRhLnNpemU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBBZGQgbWV0aG9kcyB0byBgU3RhY2tgLlxuICAgIFN0YWNrLnByb3RvdHlwZS5jbGVhciA9IHN0YWNrQ2xlYXI7XG4gICAgU3RhY2sucHJvdG90eXBlWydkZWxldGUnXSA9IHN0YWNrRGVsZXRlO1xuICAgIFN0YWNrLnByb3RvdHlwZS5nZXQgPSBzdGFja0dldDtcbiAgICBTdGFjay5wcm90b3R5cGUuaGFzID0gc3RhY2tIYXM7XG4gICAgU3RhY2sucHJvdG90eXBlLnNldCA9IHN0YWNrU2V0O1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiB0aGUgYXJyYXktbGlrZSBgdmFsdWVgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluaGVyaXRlZCBTcGVjaWZ5IHJldHVybmluZyBpbmhlcml0ZWQgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheUxpa2VLZXlzKHZhbHVlLCBpbmhlcml0ZWQpIHtcbiAgICAgIHZhciBpc0FyciA9IGlzQXJyYXkodmFsdWUpLFxuICAgICAgICAgIGlzQXJnID0gIWlzQXJyICYmIGlzQXJndW1lbnRzKHZhbHVlKSxcbiAgICAgICAgICBpc0J1ZmYgPSAhaXNBcnIgJiYgIWlzQXJnICYmIGlzQnVmZmVyKHZhbHVlKSxcbiAgICAgICAgICBpc1R5cGUgPSAhaXNBcnIgJiYgIWlzQXJnICYmICFpc0J1ZmYgJiYgaXNUeXBlZEFycmF5KHZhbHVlKSxcbiAgICAgICAgICBza2lwSW5kZXhlcyA9IGlzQXJyIHx8IGlzQXJnIHx8IGlzQnVmZiB8fCBpc1R5cGUsXG4gICAgICAgICAgcmVzdWx0ID0gc2tpcEluZGV4ZXMgPyBiYXNlVGltZXModmFsdWUubGVuZ3RoLCBTdHJpbmcpIDogW10sXG4gICAgICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgICAgIGlmICgoaW5oZXJpdGVkIHx8IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGtleSkpICYmXG4gICAgICAgICAgICAhKHNraXBJbmRleGVzICYmIChcbiAgICAgICAgICAgICAgIC8vIFNhZmFyaSA5IGhhcyBlbnVtZXJhYmxlIGBhcmd1bWVudHMubGVuZ3RoYCBpbiBzdHJpY3QgbW9kZS5cbiAgICAgICAgICAgICAgIGtleSA9PSAnbGVuZ3RoJyB8fFxuICAgICAgICAgICAgICAgLy8gTm9kZS5qcyAwLjEwIGhhcyBlbnVtZXJhYmxlIG5vbi1pbmRleCBwcm9wZXJ0aWVzIG9uIGJ1ZmZlcnMuXG4gICAgICAgICAgICAgICAoaXNCdWZmICYmIChrZXkgPT0gJ29mZnNldCcgfHwga2V5ID09ICdwYXJlbnQnKSkgfHxcbiAgICAgICAgICAgICAgIC8vIFBoYW50b21KUyAyIGhhcyBlbnVtZXJhYmxlIG5vbi1pbmRleCBwcm9wZXJ0aWVzIG9uIHR5cGVkIGFycmF5cy5cbiAgICAgICAgICAgICAgIChpc1R5cGUgJiYgKGtleSA9PSAnYnVmZmVyJyB8fCBrZXkgPT0gJ2J5dGVMZW5ndGgnIHx8IGtleSA9PSAnYnl0ZU9mZnNldCcpKSB8fFxuICAgICAgICAgICAgICAgLy8gU2tpcCBpbmRleCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICAgaXNJbmRleChrZXksIGxlbmd0aClcbiAgICAgICAgICAgICkpKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc2FtcGxlYCBmb3IgYXJyYXlzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2FtcGxlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByYW5kb20gZWxlbWVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheVNhbXBsZShhcnJheSkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgICAgIHJldHVybiBsZW5ndGggPyBhcnJheVtiYXNlUmFuZG9tKDAsIGxlbmd0aCAtIDEpXSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc2FtcGxlU2l6ZWAgZm9yIGFycmF5cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNhbXBsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNhbXBsZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHJhbmRvbSBlbGVtZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheVNhbXBsZVNpemUoYXJyYXksIG4pIHtcbiAgICAgIHJldHVybiBzaHVmZmxlU2VsZihjb3B5QXJyYXkoYXJyYXkpLCBiYXNlQ2xhbXAobiwgMCwgYXJyYXkubGVuZ3RoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnNodWZmbGVgIGZvciBhcnJheXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzaHVmZmxlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNodWZmbGVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5U2h1ZmZsZShhcnJheSkge1xuICAgICAgcmV0dXJuIHNodWZmbGVTZWxmKGNvcHlBcnJheShhcnJheSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZSBgYXNzaWduVmFsdWVgIGV4Y2VwdCB0aGF0IGl0IGRvZXNuJ3QgYXNzaWduXG4gICAgICogYHVuZGVmaW5lZGAgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gYXNzaWduLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFzc2lnbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhc3NpZ25NZXJnZVZhbHVlKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKCh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmICFlcShvYmplY3Rba2V5XSwgdmFsdWUpKSB8fFxuICAgICAgICAgICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpKSB7XG4gICAgICAgIGJhc2VBc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc2lnbnMgYHZhbHVlYCB0byBga2V5YCBvZiBgb2JqZWN0YCBpZiB0aGUgZXhpc3RpbmcgdmFsdWUgaXMgbm90IGVxdWl2YWxlbnRcbiAgICAgKiB1c2luZyBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGFzc2lnbi5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhc3NpZ24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gICAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgICAgIGlmICghKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpICYmIGVxKG9ialZhbHVlLCB2YWx1ZSkpIHx8XG4gICAgICAgICAgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkpIHtcbiAgICAgICAgYmFzZUFzc2lnblZhbHVlKG9iamVjdCwga2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkge1xuICAgICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZ2dyZWdhdGVzIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYCBvbiBgYWNjdW11bGF0b3JgIHdpdGgga2V5cyB0cmFuc2Zvcm1lZFxuICAgICAqIGJ5IGBpdGVyYXRlZWAgYW5kIHZhbHVlcyBzZXQgYnkgYHNldHRlcmAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXR0ZXIgVGhlIGZ1bmN0aW9uIHRvIHNldCBgYWNjdW11bGF0b3JgIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgaXRlcmF0ZWUgdG8gdHJhbnNmb3JtIGtleXMuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGFjY3VtdWxhdG9yIFRoZSBpbml0aWFsIGFnZ3JlZ2F0ZWQgb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBgYWNjdW11bGF0b3JgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VBZ2dyZWdhdG9yKGNvbGxlY3Rpb24sIHNldHRlciwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yKSB7XG4gICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHNldHRlcihhY2N1bXVsYXRvciwgdmFsdWUsIGl0ZXJhdGVlKHZhbHVlKSwgY29sbGVjdGlvbik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5hc3NpZ25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgbXVsdGlwbGUgc291cmNlc1xuICAgICAqIG9yIGBjdXN0b21pemVyYCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUFzc2lnbihvYmplY3QsIHNvdXJjZSkge1xuICAgICAgcmV0dXJuIG9iamVjdCAmJiBjb3B5T2JqZWN0KHNvdXJjZSwga2V5cyhzb3VyY2UpLCBvYmplY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmFzc2lnbkluYCB3aXRob3V0IHN1cHBvcnQgZm9yIG11bHRpcGxlIHNvdXJjZXNcbiAgICAgKiBvciBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VBc3NpZ25JbihvYmplY3QsIHNvdXJjZSkge1xuICAgICAgcmV0dXJuIG9iamVjdCAmJiBjb3B5T2JqZWN0KHNvdXJjZSwga2V5c0luKHNvdXJjZSksIG9iamVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGFzc2lnblZhbHVlYCBhbmQgYGFzc2lnbk1lcmdlVmFsdWVgIHdpdGhvdXRcbiAgICAgKiB2YWx1ZSBjaGVja3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBhc3NpZ24uXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gYXNzaWduLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VBc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkgPT0gJ19fcHJvdG9fXycgJiYgZGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgZGVmaW5lUHJvcGVydHkob2JqZWN0LCBrZXksIHtcbiAgICAgICAgICAnY29uZmlndXJhYmxlJzogdHJ1ZSxcbiAgICAgICAgICAnZW51bWVyYWJsZSc6IHRydWUsXG4gICAgICAgICAgJ3ZhbHVlJzogdmFsdWUsXG4gICAgICAgICAgJ3dyaXRhYmxlJzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uYXRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaW5kaXZpZHVhbCBwYXRocy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBwYXRocyBUaGUgcHJvcGVydHkgcGF0aHMgdG8gcGljay5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHBpY2tlZCBlbGVtZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQXQob2JqZWN0LCBwYXRocykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcGF0aHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCksXG4gICAgICAgICAgc2tpcCA9IG9iamVjdCA9PSBudWxsO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gc2tpcCA/IHVuZGVmaW5lZCA6IGdldChvYmplY3QsIHBhdGhzW2luZGV4XSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNsYW1wYCB3aGljaCBkb2Vzbid0IGNvZXJjZSBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgVGhlIG51bWJlciB0byBjbGFtcC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xvd2VyXSBUaGUgbG93ZXIgYm91bmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHVwcGVyIFRoZSB1cHBlciBib3VuZC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjbGFtcGVkIG51bWJlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQ2xhbXAobnVtYmVyLCBsb3dlciwgdXBwZXIpIHtcbiAgICAgIGlmIChudW1iZXIgPT09IG51bWJlcikge1xuICAgICAgICBpZiAodXBwZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG51bWJlciA9IG51bWJlciA8PSB1cHBlciA/IG51bWJlciA6IHVwcGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb3dlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbnVtYmVyID0gbnVtYmVyID49IGxvd2VyID8gbnVtYmVyIDogbG93ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY2xvbmVgIGFuZCBgXy5jbG9uZURlZXBgIHdoaWNoIHRyYWNrc1xuICAgICAqIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuXG4gICAgICogIDEgLSBEZWVwIGNsb25lXG4gICAgICogIDIgLSBGbGF0dGVuIGluaGVyaXRlZCBwcm9wZXJ0aWVzXG4gICAgICogIDQgLSBDbG9uZSBzeW1ib2xzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2tleV0gVGhlIGtleSBvZiBgdmFsdWVgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgcGFyZW50IG9iamVjdCBvZiBgdmFsdWVgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBhbmQgdGhlaXIgY2xvbmUgY291bnRlcnBhcnRzLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBjbG9uZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUNsb25lKHZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBrZXksIG9iamVjdCwgc3RhY2spIHtcbiAgICAgIHZhciByZXN1bHQsXG4gICAgICAgICAgaXNEZWVwID0gYml0bWFzayAmIENMT05FX0RFRVBfRkxBRyxcbiAgICAgICAgICBpc0ZsYXQgPSBiaXRtYXNrICYgQ0xPTkVfRkxBVF9GTEFHLFxuICAgICAgICAgIGlzRnVsbCA9IGJpdG1hc2sgJiBDTE9ORV9TWU1CT0xTX0ZMQUc7XG5cbiAgICAgIGlmIChjdXN0b21pemVyKSB7XG4gICAgICAgIHJlc3VsdCA9IG9iamVjdCA/IGN1c3RvbWl6ZXIodmFsdWUsIGtleSwgb2JqZWN0LCBzdGFjaykgOiBjdXN0b21pemVyKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgdmFyIGlzQXJyID0gaXNBcnJheSh2YWx1ZSk7XG4gICAgICBpZiAoaXNBcnIpIHtcbiAgICAgICAgcmVzdWx0ID0gaW5pdENsb25lQXJyYXkodmFsdWUpO1xuICAgICAgICBpZiAoIWlzRGVlcCkge1xuICAgICAgICAgIHJldHVybiBjb3B5QXJyYXkodmFsdWUsIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0YWcgPSBnZXRUYWcodmFsdWUpLFxuICAgICAgICAgICAgaXNGdW5jID0gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZztcblxuICAgICAgICBpZiAoaXNCdWZmZXIodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIGNsb25lQnVmZmVyKHZhbHVlLCBpc0RlZXApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YWcgPT0gb2JqZWN0VGFnIHx8IHRhZyA9PSBhcmdzVGFnIHx8IChpc0Z1bmMgJiYgIW9iamVjdCkpIHtcbiAgICAgICAgICByZXN1bHQgPSAoaXNGbGF0IHx8IGlzRnVuYykgPyB7fSA6IGluaXRDbG9uZU9iamVjdCh2YWx1ZSk7XG4gICAgICAgICAgaWYgKCFpc0RlZXApIHtcbiAgICAgICAgICAgIHJldHVybiBpc0ZsYXRcbiAgICAgICAgICAgICAgPyBjb3B5U3ltYm9sc0luKHZhbHVlLCBiYXNlQXNzaWduSW4ocmVzdWx0LCB2YWx1ZSkpXG4gICAgICAgICAgICAgIDogY29weVN5bWJvbHModmFsdWUsIGJhc2VBc3NpZ24ocmVzdWx0LCB2YWx1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIWNsb25lYWJsZVRhZ3NbdGFnXSkge1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdCA/IHZhbHVlIDoge307XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdCA9IGluaXRDbG9uZUJ5VGFnKHZhbHVlLCB0YWcsIGlzRGVlcCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIENoZWNrIGZvciBjaXJjdWxhciByZWZlcmVuY2VzIGFuZCByZXR1cm4gaXRzIGNvcnJlc3BvbmRpbmcgY2xvbmUuXG4gICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgICAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQodmFsdWUpO1xuICAgICAgaWYgKHN0YWNrZWQpIHtcbiAgICAgICAgcmV0dXJuIHN0YWNrZWQ7XG4gICAgICB9XG4gICAgICBzdGFjay5zZXQodmFsdWUsIHJlc3VsdCk7XG5cbiAgICAgIGlmIChpc1NldCh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbihzdWJWYWx1ZSkge1xuICAgICAgICAgIHJlc3VsdC5hZGQoYmFzZUNsb25lKHN1YlZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdWJWYWx1ZSwgdmFsdWUsIHN0YWNrKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChpc01hcCh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbihzdWJWYWx1ZSwga2V5KSB7XG4gICAgICAgICAgcmVzdWx0LnNldChrZXksIGJhc2VDbG9uZShzdWJWYWx1ZSwgYml0bWFzaywgY3VzdG9taXplciwga2V5LCB2YWx1ZSwgc3RhY2spKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBrZXlzRnVuYyA9IGlzRnVsbFxuICAgICAgICA/IChpc0ZsYXQgPyBnZXRBbGxLZXlzSW4gOiBnZXRBbGxLZXlzKVxuICAgICAgICA6IChpc0ZsYXQgPyBrZXlzSW4gOiBrZXlzKTtcblxuICAgICAgdmFyIHByb3BzID0gaXNBcnIgPyB1bmRlZmluZWQgOiBrZXlzRnVuYyh2YWx1ZSk7XG4gICAgICBhcnJheUVhY2gocHJvcHMgfHwgdmFsdWUsIGZ1bmN0aW9uKHN1YlZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgICAga2V5ID0gc3ViVmFsdWU7XG4gICAgICAgICAgc3ViVmFsdWUgPSB2YWx1ZVtrZXldO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHBvcHVsYXRlIGNsb25lIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICAgIGFzc2lnblZhbHVlKHJlc3VsdCwga2V5LCBiYXNlQ2xvbmUoc3ViVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGtleSwgdmFsdWUsIHN0YWNrKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY29uZm9ybXNgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNvdXJjZWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSBwcmVkaWNhdGVzIHRvIGNvbmZvcm0gdG8uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQ29uZm9ybXMoc291cmNlKSB7XG4gICAgICB2YXIgcHJvcHMgPSBrZXlzKHNvdXJjZSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBiYXNlQ29uZm9ybXNUbyhvYmplY3QsIHNvdXJjZSwgcHJvcHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jb25mb3Jtc1RvYCB3aGljaCBhY2NlcHRzIGBwcm9wc2AgdG8gY2hlY2suXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSBwcmVkaWNhdGVzIHRvIGNvbmZvcm0gdG8uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGNvbmZvcm1zLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUNvbmZvcm1zVG8ob2JqZWN0LCBzb3VyY2UsIHByb3BzKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAhbGVuZ3RoO1xuICAgICAgfVxuICAgICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2xlbmd0aF0sXG4gICAgICAgICAgICBwcmVkaWNhdGUgPSBzb3VyY2Vba2V5XSxcbiAgICAgICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XG5cbiAgICAgICAgaWYgKCh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpIHx8ICFwcmVkaWNhdGUodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kZWxheWAgYW5kIGBfLmRlZmVyYCB3aGljaCBhY2NlcHRzIGBhcmdzYFxuICAgICAqIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWxheS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBpbnZvY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfE9iamVjdH0gUmV0dXJucyB0aGUgdGltZXIgaWQgb3IgdGltZW91dCBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZURlbGF5KGZ1bmMsIHdhaXQsIGFyZ3MpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7IH0sIHdhaXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIG1ldGhvZHMgbGlrZSBgXy5kaWZmZXJlbmNlYCB3aXRob3V0IHN1cHBvcnRcbiAgICAgKiBmb3IgZXhjbHVkaW5nIG11bHRpcGxlIGFycmF5cyBvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZV0gVGhlIGl0ZXJhdGVlIGludm9rZWQgcGVyIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmF0b3JdIFRoZSBjb21wYXJhdG9yIGludm9rZWQgcGVyIGVsZW1lbnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VEaWZmZXJlbmNlKGFycmF5LCB2YWx1ZXMsIGl0ZXJhdGVlLCBjb21wYXJhdG9yKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpbmNsdWRlcyA9IGFycmF5SW5jbHVkZXMsXG4gICAgICAgICAgaXNDb21tb24gPSB0cnVlLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBbXSxcbiAgICAgICAgICB2YWx1ZXNMZW5ndGggPSB2YWx1ZXMubGVuZ3RoO1xuXG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgaWYgKGl0ZXJhdGVlKSB7XG4gICAgICAgIHZhbHVlcyA9IGFycmF5TWFwKHZhbHVlcywgYmFzZVVuYXJ5KGl0ZXJhdGVlKSk7XG4gICAgICB9XG4gICAgICBpZiAoY29tcGFyYXRvcikge1xuICAgICAgICBpbmNsdWRlcyA9IGFycmF5SW5jbHVkZXNXaXRoO1xuICAgICAgICBpc0NvbW1vbiA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodmFsdWVzLmxlbmd0aCA+PSBMQVJHRV9BUlJBWV9TSVpFKSB7XG4gICAgICAgIGluY2x1ZGVzID0gY2FjaGVIYXM7XG4gICAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgICAgIHZhbHVlcyA9IG5ldyBTZXRDYWNoZSh2YWx1ZXMpO1xuICAgICAgfVxuICAgICAgb3V0ZXI6XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID09IG51bGwgPyB2YWx1ZSA6IGl0ZXJhdGVlKHZhbHVlKTtcblxuICAgICAgICB2YWx1ZSA9IChjb21wYXJhdG9yIHx8IHZhbHVlICE9PSAwKSA/IHZhbHVlIDogMDtcbiAgICAgICAgaWYgKGlzQ29tbW9uICYmIGNvbXB1dGVkID09PSBjb21wdXRlZCkge1xuICAgICAgICAgIHZhciB2YWx1ZXNJbmRleCA9IHZhbHVlc0xlbmd0aDtcbiAgICAgICAgICB3aGlsZSAodmFsdWVzSW5kZXgtLSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlc1t2YWx1ZXNJbmRleF0gPT09IGNvbXB1dGVkKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluY2x1ZGVzKHZhbHVlcywgY29tcHV0ZWQsIGNvbXBhcmF0b3IpKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvckVhY2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdH0gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAgICovXG4gICAgdmFyIGJhc2VFYWNoID0gY3JlYXRlQmFzZUVhY2goYmFzZUZvck93bik7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JFYWNoUmlnaHRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdH0gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAgICovXG4gICAgdmFyIGJhc2VFYWNoUmlnaHQgPSBjcmVhdGVCYXNlRWFjaChiYXNlRm9yT3duUmlnaHQsIHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZXZlcnlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgcGFzcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRXZlcnkoY29sbGVjdGlvbiwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXN1bHQgPSAhIXByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIG1ldGhvZHMgbGlrZSBgXy5tYXhgIGFuZCBgXy5taW5gIHdoaWNoIGFjY2VwdHMgYVxuICAgICAqIGBjb21wYXJhdG9yYCB0byBkZXRlcm1pbmUgdGhlIGV4dHJlbXVtIHZhbHVlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBpdGVyYXRlZSBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGFyYXRvciBUaGUgY29tcGFyYXRvciB1c2VkIHRvIGNvbXBhcmUgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBleHRyZW11bSB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRXh0cmVtdW0oYXJyYXksIGl0ZXJhdGVlLCBjb21wYXJhdG9yKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgICAgIGN1cnJlbnQgPSBpdGVyYXRlZSh2YWx1ZSk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnQgIT0gbnVsbCAmJiAoY29tcHV0ZWQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICA/IChjdXJyZW50ID09PSBjdXJyZW50ICYmICFpc1N5bWJvbChjdXJyZW50KSlcbiAgICAgICAgICAgICAgOiBjb21wYXJhdG9yKGN1cnJlbnQsIGNvbXB1dGVkKVxuICAgICAgICAgICAgKSkge1xuICAgICAgICAgIHZhciBjb21wdXRlZCA9IGN1cnJlbnQsXG4gICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbGxgIHdpdGhvdXQgYW4gaXRlcmF0ZWUgY2FsbCBndWFyZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZpbGwuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZmlsbCBgYXJyYXlgIHdpdGguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtlbmQ9YXJyYXkubGVuZ3RoXSBUaGUgZW5kIHBvc2l0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGaWxsKGFycmF5LCB2YWx1ZSwgc3RhcnQsIGVuZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgc3RhcnQgPSB0b0ludGVnZXIoc3RhcnQpO1xuICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICBzdGFydCA9IC1zdGFydCA+IGxlbmd0aCA/IDAgOiAobGVuZ3RoICsgc3RhcnQpO1xuICAgICAgfVxuICAgICAgZW5kID0gKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IGxlbmd0aCkgPyBsZW5ndGggOiB0b0ludGVnZXIoZW5kKTtcbiAgICAgIGlmIChlbmQgPCAwKSB7XG4gICAgICAgIGVuZCArPSBsZW5ndGg7XG4gICAgICB9XG4gICAgICBlbmQgPSBzdGFydCA+IGVuZCA/IDAgOiB0b0xlbmd0aChlbmQpO1xuICAgICAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG4gICAgICAgIGFycmF5W3N0YXJ0KytdID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmlsdGVyYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRmlsdGVyKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZsYXR0ZW5gIHdpdGggc3VwcG9ydCBmb3IgcmVzdHJpY3RpbmcgZmxhdHRlbmluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZsYXR0ZW4uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlcHRoIFRoZSBtYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtwcmVkaWNhdGU9aXNGbGF0dGVuYWJsZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1N0cmljdF0gUmVzdHJpY3QgdG8gdmFsdWVzIHRoYXQgcGFzcyBgcHJlZGljYXRlYCBjaGVja3MuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3Jlc3VsdD1bXV0gVGhlIGluaXRpYWwgcmVzdWx0IHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZsYXR0ZW5lZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRmxhdHRlbihhcnJheSwgZGVwdGgsIHByZWRpY2F0ZSwgaXNTdHJpY3QsIHJlc3VsdCkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICBwcmVkaWNhdGUgfHwgKHByZWRpY2F0ZSA9IGlzRmxhdHRlbmFibGUpO1xuICAgICAgcmVzdWx0IHx8IChyZXN1bHQgPSBbXSk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKGRlcHRoID4gMCAmJiBwcmVkaWNhdGUodmFsdWUpKSB7XG4gICAgICAgICAgaWYgKGRlcHRoID4gMSkge1xuICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgZmxhdHRlbiBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgICAgICAgIGJhc2VGbGF0dGVuKHZhbHVlLCBkZXB0aCAtIDEsIHByZWRpY2F0ZSwgaXNTdHJpY3QsIHJlc3VsdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFycmF5UHVzaChyZXN1bHQsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzU3RyaWN0KSB7XG4gICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGJhc2VGb3JPd25gIHdoaWNoIGl0ZXJhdGVzIG92ZXIgYG9iamVjdGBcbiAgICAgKiBwcm9wZXJ0aWVzIHJldHVybmVkIGJ5IGBrZXlzRnVuY2AgYW5kIGludm9rZXMgYGl0ZXJhdGVlYCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAgICAgKiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBrZXlzIG9mIGBvYmplY3RgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgdmFyIGJhc2VGb3IgPSBjcmVhdGVCYXNlRm9yKCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2UgYGJhc2VGb3JgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgcHJvcGVydGllc1xuICAgICAqIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICB2YXIgYmFzZUZvclJpZ2h0ID0gY3JlYXRlQmFzZUZvcih0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvck93bmAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRm9yT3duKG9iamVjdCwgaXRlcmF0ZWUpIHtcbiAgICAgIHJldHVybiBvYmplY3QgJiYgYmFzZUZvcihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JPd25SaWdodGAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRm9yT3duUmlnaHQob2JqZWN0LCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIG9iamVjdCAmJiBiYXNlRm9yUmlnaHQob2JqZWN0LCBpdGVyYXRlZSwga2V5cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZnVuY3Rpb25zYCB3aGljaCBjcmVhdGVzIGFuIGFycmF5IG9mXG4gICAgICogYG9iamVjdGAgZnVuY3Rpb24gcHJvcGVydHkgbmFtZXMgZmlsdGVyZWQgZnJvbSBgcHJvcHNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgdG8gZmlsdGVyLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgZnVuY3Rpb24gbmFtZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZ1bmN0aW9ucyhvYmplY3QsIHByb3BzKSB7XG4gICAgICByZXR1cm4gYXJyYXlGaWx0ZXIocHJvcHMsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgICByZXR1cm4gaXNGdW5jdGlvbihvYmplY3Rba2V5XSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5nZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVmYXVsdCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCkge1xuICAgICAgcGF0aCA9IGNhc3RQYXRoKHBhdGgsIG9iamVjdCk7XG5cbiAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChvYmplY3QgIT0gbnVsbCAmJiBpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBvYmplY3QgPSBvYmplY3RbdG9LZXkocGF0aFtpbmRleCsrXSldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChpbmRleCAmJiBpbmRleCA9PSBsZW5ndGgpID8gb2JqZWN0IDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRBbGxLZXlzYCBhbmQgYGdldEFsbEtleXNJbmAgd2hpY2ggdXNlc1xuICAgICAqIGBrZXlzRnVuY2AgYW5kIGBzeW1ib2xzRnVuY2AgdG8gZ2V0IHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZFxuICAgICAqIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBrZXlzIG9mIGBvYmplY3RgLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHN5bWJvbHNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyBhbmQgc3ltYm9scy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlR2V0QWxsS2V5cyhvYmplY3QsIGtleXNGdW5jLCBzeW1ib2xzRnVuYykge1xuICAgICAgdmFyIHJlc3VsdCA9IGtleXNGdW5jKG9iamVjdCk7XG4gICAgICByZXR1cm4gaXNBcnJheShvYmplY3QpID8gcmVzdWx0IDogYXJyYXlQdXNoKHJlc3VsdCwgc3ltYm9sc0Z1bmMob2JqZWN0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldFRhZ2Agd2l0aG91dCBmYWxsYmFja3MgZm9yIGJ1Z2d5IGVudmlyb25tZW50cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlR2V0VGFnKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZFRhZyA6IG51bGxUYWc7XG4gICAgICB9XG4gICAgICByZXR1cm4gKHN5bVRvU3RyaW5nVGFnICYmIHN5bVRvU3RyaW5nVGFnIGluIE9iamVjdCh2YWx1ZSkpXG4gICAgICAgID8gZ2V0UmF3VGFnKHZhbHVlKVxuICAgICAgICA6IG9iamVjdFRvU3RyaW5nKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5ndGAgd2hpY2ggZG9lc24ndCBjb2VyY2UgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZ3JlYXRlciB0aGFuIGBvdGhlcmAsXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlR3QodmFsdWUsIG90aGVyKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPiBvdGhlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5oYXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IGtleSBUaGUga2V5IHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSGFzKG9iamVjdCwga2V5KSB7XG4gICAgICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzSW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IGtleSBUaGUga2V5IHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSGFzSW4ob2JqZWN0LCBrZXkpIHtcbiAgICAgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBrZXkgaW4gT2JqZWN0KG9iamVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaW5SYW5nZWAgd2hpY2ggZG9lc24ndCBjb2VyY2UgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyIFRoZSBudW1iZXIgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSBzdGFydCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIG9mIHRoZSByYW5nZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG51bWJlcmAgaXMgaW4gdGhlIHJhbmdlLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUluUmFuZ2UobnVtYmVyLCBzdGFydCwgZW5kKSB7XG4gICAgICByZXR1cm4gbnVtYmVyID49IG5hdGl2ZU1pbihzdGFydCwgZW5kKSAmJiBudW1iZXIgPCBuYXRpdmVNYXgoc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgbWV0aG9kcyBsaWtlIGBfLmludGVyc2VjdGlvbmAsIHdpdGhvdXQgc3VwcG9ydFxuICAgICAqIGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLCB0aGF0IGFjY2VwdHMgYW4gYXJyYXkgb2YgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5cyBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlXSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyYXRvcl0gVGhlIGNvbXBhcmF0b3IgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBzaGFyZWQgdmFsdWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJbnRlcnNlY3Rpb24oYXJyYXlzLCBpdGVyYXRlZSwgY29tcGFyYXRvcikge1xuICAgICAgdmFyIGluY2x1ZGVzID0gY29tcGFyYXRvciA/IGFycmF5SW5jbHVkZXNXaXRoIDogYXJyYXlJbmNsdWRlcyxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheXNbMF0ubGVuZ3RoLFxuICAgICAgICAgIG90aExlbmd0aCA9IGFycmF5cy5sZW5ndGgsXG4gICAgICAgICAgb3RoSW5kZXggPSBvdGhMZW5ndGgsXG4gICAgICAgICAgY2FjaGVzID0gQXJyYXkob3RoTGVuZ3RoKSxcbiAgICAgICAgICBtYXhMZW5ndGggPSBJbmZpbml0eSxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgd2hpbGUgKG90aEluZGV4LS0pIHtcbiAgICAgICAgdmFyIGFycmF5ID0gYXJyYXlzW290aEluZGV4XTtcbiAgICAgICAgaWYgKG90aEluZGV4ICYmIGl0ZXJhdGVlKSB7XG4gICAgICAgICAgYXJyYXkgPSBhcnJheU1hcChhcnJheSwgYmFzZVVuYXJ5KGl0ZXJhdGVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgbWF4TGVuZ3RoID0gbmF0aXZlTWluKGFycmF5Lmxlbmd0aCwgbWF4TGVuZ3RoKTtcbiAgICAgICAgY2FjaGVzW290aEluZGV4XSA9ICFjb21wYXJhdG9yICYmIChpdGVyYXRlZSB8fCAobGVuZ3RoID49IDEyMCAmJiBhcnJheS5sZW5ndGggPj0gMTIwKSlcbiAgICAgICAgICA/IG5ldyBTZXRDYWNoZShvdGhJbmRleCAmJiBhcnJheSlcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGFycmF5ID0gYXJyYXlzWzBdO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBzZWVuID0gY2FjaGVzWzBdO1xuXG4gICAgICBvdXRlcjpcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmIHJlc3VsdC5sZW5ndGggPCBtYXhMZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSA/IGl0ZXJhdGVlKHZhbHVlKSA6IHZhbHVlO1xuXG4gICAgICAgIHZhbHVlID0gKGNvbXBhcmF0b3IgfHwgdmFsdWUgIT09IDApID8gdmFsdWUgOiAwO1xuICAgICAgICBpZiAoIShzZWVuXG4gICAgICAgICAgICAgID8gY2FjaGVIYXMoc2VlbiwgY29tcHV0ZWQpXG4gICAgICAgICAgICAgIDogaW5jbHVkZXMocmVzdWx0LCBjb21wdXRlZCwgY29tcGFyYXRvcilcbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICBvdGhJbmRleCA9IG90aExlbmd0aDtcbiAgICAgICAgICB3aGlsZSAoLS1vdGhJbmRleCkge1xuICAgICAgICAgICAgdmFyIGNhY2hlID0gY2FjaGVzW290aEluZGV4XTtcbiAgICAgICAgICAgIGlmICghKGNhY2hlXG4gICAgICAgICAgICAgICAgICA/IGNhY2hlSGFzKGNhY2hlLCBjb21wdXRlZClcbiAgICAgICAgICAgICAgICAgIDogaW5jbHVkZXMoYXJyYXlzW290aEluZGV4XSwgY29tcHV0ZWQsIGNvbXBhcmF0b3IpKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNlZW4pIHtcbiAgICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pbnZlcnRgIGFuZCBgXy5pbnZlcnRCeWAgd2hpY2ggaW52ZXJ0c1xuICAgICAqIGBvYmplY3RgIHdpdGggdmFsdWVzIHRyYW5zZm9ybWVkIGJ5IGBpdGVyYXRlZWAgYW5kIHNldCBieSBgc2V0dGVyYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXR0ZXIgVGhlIGZ1bmN0aW9uIHRvIHNldCBgYWNjdW11bGF0b3JgIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgaXRlcmF0ZWUgdG8gdHJhbnNmb3JtIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYWNjdW11bGF0b3IgVGhlIGluaXRpYWwgaW52ZXJ0ZWQgb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBgYWNjdW11bGF0b3JgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJbnZlcnRlcihvYmplY3QsIHNldHRlciwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yKSB7XG4gICAgICBiYXNlRm9yT3duKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgIHNldHRlcihhY2N1bXVsYXRvciwgaXRlcmF0ZWUodmFsdWUpLCBrZXksIG9iamVjdCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pbnZva2VgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaW5kaXZpZHVhbFxuICAgICAqIG1ldGhvZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgbWV0aG9kIHRvIGludm9rZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIHRoZSBtZXRob2Qgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSW52b2tlKG9iamVjdCwgcGF0aCwgYXJncykge1xuICAgICAgcGF0aCA9IGNhc3RQYXRoKHBhdGgsIG9iamVjdCk7XG4gICAgICBvYmplY3QgPSBwYXJlbnQob2JqZWN0LCBwYXRoKTtcbiAgICAgIHZhciBmdW5jID0gb2JqZWN0ID09IG51bGwgPyBvYmplY3QgOiBvYmplY3RbdG9LZXkobGFzdChwYXRoKSldO1xuICAgICAgcmV0dXJuIGZ1bmMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGFwcGx5KGZ1bmMsIG9iamVjdCwgYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNBcmd1bWVudHNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUlzQXJndW1lbnRzKHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBiYXNlR2V0VGFnKHZhbHVlKSA9PSBhcmdzVGFnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzQXJyYXlCdWZmZXJgIHdpdGhvdXQgTm9kZS5qcyBvcHRpbWl6YXRpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSBidWZmZXIsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXNBcnJheUJ1ZmZlcih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gYXJyYXlCdWZmZXJUYWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNEYXRlYCB3aXRob3V0IE5vZGUuanMgb3B0aW1pemF0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBkYXRlIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJc0RhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IGRhdGVUYWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2hpY2ggc3VwcG9ydHMgcGFydGlhbCBjb21wYXJpc29uc1xuICAgICAqIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuXG4gICAgICogIDEgLSBVbm9yZGVyZWQgY29tcGFyaXNvblxuICAgICAqICAyIC0gUGFydGlhbCBjb21wYXJpc29uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAoIWlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGJhc2VJc0VxdWFsLCBzdGFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICAgICAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAgICAgKiByZWZlcmVuY2VzIHRvIGJlIGNvbXBhcmVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKSB7XG4gICAgICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcbiAgICAgICAgICBvYmpUYWcgPSBvYmpJc0FyciA/IGFycmF5VGFnIDogZ2V0VGFnKG9iamVjdCksXG4gICAgICAgICAgb3RoVGFnID0gb3RoSXNBcnIgPyBhcnJheVRhZyA6IGdldFRhZyhvdGhlcik7XG5cbiAgICAgIG9ialRhZyA9IG9ialRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb2JqVGFnO1xuICAgICAgb3RoVGFnID0gb3RoVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvdGhUYWc7XG5cbiAgICAgIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcsXG4gICAgICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT0gb2JqZWN0VGFnLFxuICAgICAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7XG5cbiAgICAgIGlmIChpc1NhbWVUYWcgJiYgaXNCdWZmZXIob2JqZWN0KSkge1xuICAgICAgICBpZiAoIWlzQnVmZmVyKG90aGVyKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBvYmpJc0FyciA9IHRydWU7XG4gICAgICAgIG9iaklzT2JqID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoaXNTYW1lVGFnICYmICFvYmpJc09iaikge1xuICAgICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgICAgICByZXR1cm4gKG9iaklzQXJyIHx8IGlzVHlwZWRBcnJheShvYmplY3QpKVxuICAgICAgICAgID8gZXF1YWxBcnJheXMob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaylcbiAgICAgICAgICA6IGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKTtcbiAgICAgIH1cbiAgICAgIGlmICghKGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRykpIHtcbiAgICAgICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG4gICAgICAgICAgdmFyIG9ialVud3JhcHBlZCA9IG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LFxuICAgICAgICAgICAgICBvdGhVbndyYXBwZWQgPSBvdGhJc1dyYXBwZWQgPyBvdGhlci52YWx1ZSgpIDogb3RoZXI7XG5cbiAgICAgICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgICAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqVW53cmFwcGVkLCBvdGhVbndyYXBwZWQsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFpc1NhbWVUYWcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgICAgIHJldHVybiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXBgIHdpdGhvdXQgTm9kZS5qcyBvcHRpbWl6YXRpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG1hcCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJc01hcCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgZ2V0VGFnKHZhbHVlKSA9PSBtYXBUYWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXRjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3MgdG8gbWF0Y2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGlzIGEgbWF0Y2gsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhLCBjdXN0b21pemVyKSB7XG4gICAgICB2YXIgaW5kZXggPSBtYXRjaERhdGEubGVuZ3RoLFxuICAgICAgICAgIGxlbmd0aCA9IGluZGV4LFxuICAgICAgICAgIG5vQ3VzdG9taXplciA9ICFjdXN0b21pemVyO1xuXG4gICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICFsZW5ndGg7XG4gICAgICB9XG4gICAgICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSlcbiAgICAgICAgICAgICAgPyBkYXRhWzFdICE9PSBvYmplY3RbZGF0YVswXV1cbiAgICAgICAgICAgICAgOiAhKGRhdGFbMF0gaW4gb2JqZWN0KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICAgICAgdmFyIGtleSA9IGRhdGFbMF0sXG4gICAgICAgICAgICBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICAgICAgc3JjVmFsdWUgPSBkYXRhWzFdO1xuXG4gICAgICAgIGlmIChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSkge1xuICAgICAgICAgIGlmIChvYmpWYWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHN0YWNrID0gbmV3IFN0YWNrO1xuICAgICAgICAgIGlmIChjdXN0b21pemVyKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEocmVzdWx0ID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgQ09NUEFSRV9QQVJUSUFMX0ZMQUcgfCBDT01QQVJFX1VOT1JERVJFRF9GTEFHLCBjdXN0b21pemVyLCBzdGFjaylcbiAgICAgICAgICAgICAgICA6IHJlc3VsdFxuICAgICAgICAgICAgICApKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7XG4gICAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSB8fCBpc01hc2tlZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHBhdHRlcm4gPSBpc0Z1bmN0aW9uKHZhbHVlKSA/IHJlSXNOYXRpdmUgOiByZUlzSG9zdEN0b3I7XG4gICAgICByZXR1cm4gcGF0dGVybi50ZXN0KHRvU291cmNlKHZhbHVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNSZWdFeHBgIHdpdGhvdXQgTm9kZS5qcyBvcHRpbWl6YXRpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHJlZ2V4cCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJc1JlZ0V4cCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gcmVnZXhwVGFnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzU2V0YCB3aXRob3V0IE5vZGUuanMgb3B0aW1pemF0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzZXQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXNTZXQodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGdldFRhZyh2YWx1ZSkgPT0gc2V0VGFnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzVHlwZWRBcnJheWAgd2l0aG91dCBOb2RlLmpzIG9wdGltaXphdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdHlwZWQgYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJlxuICAgICAgICBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3NbYmFzZUdldFRhZyh2YWx1ZSldO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLml0ZXJhdGVlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBbdmFsdWU9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYW4gaXRlcmF0ZWUuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBpdGVyYXRlZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXRlcmF0ZWUodmFsdWUpIHtcbiAgICAgIC8vIERvbid0IHN0b3JlIHRoZSBgdHlwZW9mYCByZXN1bHQgaW4gYSB2YXJpYWJsZSB0byBhdm9pZCBhIEpJVCBidWcgaW4gU2FmYXJpIDkuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE1NjAzNCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodmFsdWUpXG4gICAgICAgICAgPyBiYXNlTWF0Y2hlc1Byb3BlcnR5KHZhbHVlWzBdLCB2YWx1ZVsxXSlcbiAgICAgICAgICA6IGJhc2VNYXRjaGVzKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlS2V5cyhvYmplY3QpIHtcbiAgICAgIGlmICghaXNQcm90b3R5cGUob2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gbmF0aXZlS2V5cyhvYmplY3QpO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgZm9yICh2YXIga2V5IGluIE9iamVjdChvYmplY3QpKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJiBrZXkgIT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c0luYCB3aGljaCBkb2Vzbid0IHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VLZXlzSW4ob2JqZWN0KSB7XG4gICAgICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZUtleXNJbihvYmplY3QpO1xuICAgICAgfVxuICAgICAgdmFyIGlzUHJvdG8gPSBpc1Byb3RvdHlwZShvYmplY3QpLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGlmICghKGtleSA9PSAnY29uc3RydWN0b3InICYmIChpc1Byb3RvIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkpKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5sdGAgd2hpY2ggZG9lc24ndCBjb2VyY2UgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgbGVzcyB0aGFuIGBvdGhlcmAsXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTHQodmFsdWUsIG90aGVyKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPCBvdGhlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXBgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VNYXAoY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pID8gQXJyYXkoY29sbGVjdGlvbi5sZW5ndGgpIDogW107XG5cbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmVzdWx0WysraW5kZXhdID0gaXRlcmF0ZWUodmFsdWUsIGtleSwgY29sbGVjdGlvbik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc2Agd2hpY2ggZG9lc24ndCBjbG9uZSBgc291cmNlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VNYXRjaGVzKHNvdXJjZSkge1xuICAgICAgdmFyIG1hdGNoRGF0YSA9IGdldE1hdGNoRGF0YShzb3VyY2UpO1xuICAgICAgaWYgKG1hdGNoRGF0YS5sZW5ndGggPT0gMSAmJiBtYXRjaERhdGFbMF1bMl0pIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKG1hdGNoRGF0YVswXVswXSwgbWF0Y2hEYXRhWzBdWzFdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdCA9PT0gc291cmNlIHx8IGJhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzUHJvcGVydHlgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNyY1ZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICAgKiBAcGFyYW0geyp9IHNyY1ZhbHVlIFRoZSB2YWx1ZSB0byBtYXRjaC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VNYXRjaGVzUHJvcGVydHkocGF0aCwgc3JjVmFsdWUpIHtcbiAgICAgIGlmIChpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSh0b0tleShwYXRoKSwgc3JjVmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICB2YXIgb2JqVmFsdWUgPSBnZXQob2JqZWN0LCBwYXRoKTtcbiAgICAgICAgcmV0dXJuIChvYmpWYWx1ZSA9PT0gdW5kZWZpbmVkICYmIG9ialZhbHVlID09PSBzcmNWYWx1ZSlcbiAgICAgICAgICA/IGhhc0luKG9iamVjdCwgcGF0aClcbiAgICAgICAgICA6IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgQ09NUEFSRV9QQVJUSUFMX0ZMQUcgfCBDT01QQVJFX1VOT1JERVJFRF9GTEFHKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWVyZ2VgIHdpdGhvdXQgc3VwcG9ydCBmb3IgbXVsdGlwbGUgc291cmNlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNyY0luZGV4IFRoZSBpbmRleCBvZiBgc291cmNlYC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBtZXJnZWQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIHZhbHVlcyBhbmQgdGhlaXIgbWVyZ2VkXG4gICAgICogIGNvdW50ZXJwYXJ0cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTWVyZ2Uob2JqZWN0LCBzb3VyY2UsIHNyY0luZGV4LCBjdXN0b21pemVyLCBzdGFjaykge1xuICAgICAgaWYgKG9iamVjdCA9PT0gc291cmNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGJhc2VGb3Ioc291cmNlLCBmdW5jdGlvbihzcmNWYWx1ZSwga2V5KSB7XG4gICAgICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gICAgICAgIGlmIChpc09iamVjdChzcmNWYWx1ZSkpIHtcbiAgICAgICAgICBiYXNlTWVyZ2VEZWVwKG9iamVjdCwgc291cmNlLCBrZXksIHNyY0luZGV4LCBiYXNlTWVyZ2UsIGN1c3RvbWl6ZXIsIHN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBjdXN0b21pemVyXG4gICAgICAgICAgICA/IGN1c3RvbWl6ZXIoc2FmZUdldChvYmplY3QsIGtleSksIHNyY1ZhbHVlLCAoa2V5ICsgJycpLCBvYmplY3QsIHNvdXJjZSwgc3RhY2spXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IHNyY1ZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhc3NpZ25NZXJnZVZhbHVlKG9iamVjdCwga2V5LCBuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIGtleXNJbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlTWVyZ2VgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAgICAgKiBkZWVwIG1lcmdlcyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICAgICAqIHJlZmVyZW5jZXMgdG8gYmUgbWVyZ2VkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIG1lcmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcmNJbmRleCBUaGUgaW5kZXggb2YgYHNvdXJjZWAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbWVyZ2VGdW5jIFRoZSBmdW5jdGlvbiB0byBtZXJnZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIHZhbHVlcyBhbmQgdGhlaXIgbWVyZ2VkXG4gICAgICogIGNvdW50ZXJwYXJ0cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTWVyZ2VEZWVwKG9iamVjdCwgc291cmNlLCBrZXksIHNyY0luZGV4LCBtZXJnZUZ1bmMsIGN1c3RvbWl6ZXIsIHN0YWNrKSB7XG4gICAgICB2YXIgb2JqVmFsdWUgPSBzYWZlR2V0KG9iamVjdCwga2V5KSxcbiAgICAgICAgICBzcmNWYWx1ZSA9IHNhZmVHZXQoc291cmNlLCBrZXkpLFxuICAgICAgICAgIHN0YWNrZWQgPSBzdGFjay5nZXQoc3JjVmFsdWUpO1xuXG4gICAgICBpZiAoc3RhY2tlZCkge1xuICAgICAgICBhc3NpZ25NZXJnZVZhbHVlKG9iamVjdCwga2V5LCBzdGFja2VkKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIG5ld1ZhbHVlID0gY3VzdG9taXplclxuICAgICAgICA/IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCAoa2V5ICsgJycpLCBvYmplY3QsIHNvdXJjZSwgc3RhY2spXG4gICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICB2YXIgaXNDb21tb24gPSBuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoaXNDb21tb24pIHtcbiAgICAgICAgdmFyIGlzQXJyID0gaXNBcnJheShzcmNWYWx1ZSksXG4gICAgICAgICAgICBpc0J1ZmYgPSAhaXNBcnIgJiYgaXNCdWZmZXIoc3JjVmFsdWUpLFxuICAgICAgICAgICAgaXNUeXBlZCA9ICFpc0FyciAmJiAhaXNCdWZmICYmIGlzVHlwZWRBcnJheShzcmNWYWx1ZSk7XG5cbiAgICAgICAgbmV3VmFsdWUgPSBzcmNWYWx1ZTtcbiAgICAgICAgaWYgKGlzQXJyIHx8IGlzQnVmZiB8fCBpc1R5cGVkKSB7XG4gICAgICAgICAgaWYgKGlzQXJyYXkob2JqVmFsdWUpKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IG9ialZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChpc0FycmF5TGlrZU9iamVjdChvYmpWYWx1ZSkpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gY29weUFycmF5KG9ialZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoaXNCdWZmKSB7XG4gICAgICAgICAgICBpc0NvbW1vbiA9IGZhbHNlO1xuICAgICAgICAgICAgbmV3VmFsdWUgPSBjbG9uZUJ1ZmZlcihzcmNWYWx1ZSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGlzVHlwZWQpIHtcbiAgICAgICAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IGNsb25lVHlwZWRBcnJheShzcmNWYWx1ZSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdChzcmNWYWx1ZSkgfHwgaXNBcmd1bWVudHMoc3JjVmFsdWUpKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBvYmpWYWx1ZTtcbiAgICAgICAgICBpZiAoaXNBcmd1bWVudHMob2JqVmFsdWUpKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IHRvUGxhaW5PYmplY3Qob2JqVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICghaXNPYmplY3Qob2JqVmFsdWUpIHx8IGlzRnVuY3Rpb24ob2JqVmFsdWUpKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IGluaXRDbG9uZU9iamVjdChzcmNWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc0NvbW1vbikge1xuICAgICAgICAvLyBSZWN1cnNpdmVseSBtZXJnZSBvYmplY3RzIGFuZCBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgICAgc3RhY2suc2V0KHNyY1ZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIG1lcmdlRnVuYyhuZXdWYWx1ZSwgc3JjVmFsdWUsIHNyY0luZGV4LCBjdXN0b21pemVyLCBzdGFjayk7XG4gICAgICAgIHN0YWNrWydkZWxldGUnXShzcmNWYWx1ZSk7XG4gICAgICB9XG4gICAgICBhc3NpZ25NZXJnZVZhbHVlKG9iamVjdCwga2V5LCBuZXdWYWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubnRoYCB3aGljaCBkb2Vzbid0IGNvZXJjZSBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgdG8gcmV0dXJuLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBudGggZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VOdGgoYXJyYXksIG4pIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBuICs9IG4gPCAwID8gbGVuZ3RoIDogMDtcbiAgICAgIHJldHVybiBpc0luZGV4KG4sIGxlbmd0aCkgPyBhcnJheVtuXSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5vcmRlckJ5YCB3aXRob3V0IHBhcmFtIGd1YXJkcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25bXXxPYmplY3RbXXxzdHJpbmdbXX0gaXRlcmF0ZWVzIFRoZSBpdGVyYXRlZXMgdG8gc29ydCBieS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBvcmRlcnMgVGhlIHNvcnQgb3JkZXJzIG9mIGBpdGVyYXRlZXNgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNvcnRlZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlT3JkZXJCeShjb2xsZWN0aW9uLCBpdGVyYXRlZXMsIG9yZGVycykge1xuICAgICAgaWYgKGl0ZXJhdGVlcy5sZW5ndGgpIHtcbiAgICAgICAgaXRlcmF0ZWVzID0gYXJyYXlNYXAoaXRlcmF0ZWVzLCBmdW5jdGlvbihpdGVyYXRlZSkge1xuICAgICAgICAgIGlmIChpc0FycmF5KGl0ZXJhdGVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBiYXNlR2V0KHZhbHVlLCBpdGVyYXRlZS5sZW5ndGggPT09IDEgPyBpdGVyYXRlZVswXSA6IGl0ZXJhdGVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGl0ZXJhdGVlO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZXJhdGVlcyA9IFtpZGVudGl0eV07XG4gICAgICB9XG5cbiAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgaXRlcmF0ZWVzID0gYXJyYXlNYXAoaXRlcmF0ZWVzLCBiYXNlVW5hcnkoZ2V0SXRlcmF0ZWUoKSkpO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gYmFzZU1hcChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHZhciBjcml0ZXJpYSA9IGFycmF5TWFwKGl0ZXJhdGVlcywgZnVuY3Rpb24oaXRlcmF0ZWUpIHtcbiAgICAgICAgICByZXR1cm4gaXRlcmF0ZWUodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgJ2NyaXRlcmlhJzogY3JpdGVyaWEsICdpbmRleCc6ICsraW5kZXgsICd2YWx1ZSc6IHZhbHVlIH07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGJhc2VTb3J0QnkocmVzdWx0LCBmdW5jdGlvbihvYmplY3QsIG90aGVyKSB7XG4gICAgICAgIHJldHVybiBjb21wYXJlTXVsdGlwbGUob2JqZWN0LCBvdGhlciwgb3JkZXJzKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnBpY2tgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaW5kaXZpZHVhbFxuICAgICAqIHByb3BlcnR5IGlkZW50aWZpZXJzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHBhdGhzIFRoZSBwcm9wZXJ0eSBwYXRocyB0byBwaWNrLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVBpY2sob2JqZWN0LCBwYXRocykge1xuICAgICAgcmV0dXJuIGJhc2VQaWNrQnkob2JqZWN0LCBwYXRocywgZnVuY3Rpb24odmFsdWUsIHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGhhc0luKG9iamVjdCwgcGF0aCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiAgYF8ucGlja0J5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gcGF0aHMgVGhlIHByb3BlcnR5IHBhdGhzIHRvIHBpY2suXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBwcm9wZXJ0eS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VQaWNrQnkob2JqZWN0LCBwYXRocywgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBwYXRocy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0ge307XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBwYXRoID0gcGF0aHNbaW5kZXhdLFxuICAgICAgICAgICAgdmFsdWUgPSBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG5cbiAgICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgcGF0aCkpIHtcbiAgICAgICAgICBiYXNlU2V0KHJlc3VsdCwgY2FzdFBhdGgocGF0aCwgb2JqZWN0KSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gYmFzZUdldChvYmplY3QsIHBhdGgpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wdWxsQWxsQnlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcbiAgICAgKiBzaG9ydGhhbmRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlcyBUaGUgdmFsdWVzIHRvIHJlbW92ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWVdIFRoZSBpdGVyYXRlZSBpbnZva2VkIHBlciBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJhdG9yXSBUaGUgY29tcGFyYXRvciBpbnZva2VkIHBlciBlbGVtZW50LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VQdWxsQWxsKGFycmF5LCB2YWx1ZXMsIGl0ZXJhdGVlLCBjb21wYXJhdG9yKSB7XG4gICAgICB2YXIgaW5kZXhPZiA9IGNvbXBhcmF0b3IgPyBiYXNlSW5kZXhPZldpdGggOiBiYXNlSW5kZXhPZixcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGgsXG4gICAgICAgICAgc2VlbiA9IGFycmF5O1xuXG4gICAgICBpZiAoYXJyYXkgPT09IHZhbHVlcykge1xuICAgICAgICB2YWx1ZXMgPSBjb3B5QXJyYXkodmFsdWVzKTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVyYXRlZSkge1xuICAgICAgICBzZWVuID0gYXJyYXlNYXAoYXJyYXksIGJhc2VVbmFyeShpdGVyYXRlZSkpO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGZyb21JbmRleCA9IDAsXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlc1tpbmRleF0sXG4gICAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUpIDogdmFsdWU7XG5cbiAgICAgICAgd2hpbGUgKChmcm9tSW5kZXggPSBpbmRleE9mKHNlZW4sIGNvbXB1dGVkLCBmcm9tSW5kZXgsIGNvbXBhcmF0b3IpKSA+IC0xKSB7XG4gICAgICAgICAgaWYgKHNlZW4gIT09IGFycmF5KSB7XG4gICAgICAgICAgICBzcGxpY2UuY2FsbChzZWVuLCBmcm9tSW5kZXgsIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzcGxpY2UuY2FsbChhcnJheSwgZnJvbUluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnB1bGxBdGAgd2l0aG91dCBzdXBwb3J0IGZvciBpbmRpdmlkdWFsXG4gICAgICogaW5kZXhlcyBvciBjYXB0dXJpbmcgdGhlIHJlbW92ZWQgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gaW5kZXhlcyBUaGUgaW5kZXhlcyBvZiBlbGVtZW50cyB0byByZW1vdmUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVB1bGxBdChhcnJheSwgaW5kZXhlcykge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gaW5kZXhlcy5sZW5ndGggOiAwLFxuICAgICAgICAgIGxhc3RJbmRleCA9IGxlbmd0aCAtIDE7XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICB2YXIgaW5kZXggPSBpbmRleGVzW2xlbmd0aF07XG4gICAgICAgIGlmIChsZW5ndGggPT0gbGFzdEluZGV4IHx8IGluZGV4ICE9PSBwcmV2aW91cykge1xuICAgICAgICAgIHZhciBwcmV2aW91cyA9IGluZGV4O1xuICAgICAgICAgIGlmIChpc0luZGV4KGluZGV4KSkge1xuICAgICAgICAgICAgc3BsaWNlLmNhbGwoYXJyYXksIGluZGV4LCAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmFzZVVuc2V0KGFycmF5LCBpbmRleCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmFuZG9tYCB3aXRob3V0IHN1cHBvcnQgZm9yIHJldHVybmluZ1xuICAgICAqIGZsb2F0aW5nLXBvaW50IG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsb3dlciBUaGUgbG93ZXIgYm91bmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHVwcGVyIFRoZSB1cHBlciBib3VuZC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSByYW5kb20gbnVtYmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VSYW5kb20obG93ZXIsIHVwcGVyKSB7XG4gICAgICByZXR1cm4gbG93ZXIgKyBuYXRpdmVGbG9vcihuYXRpdmVSYW5kb20oKSAqICh1cHBlciAtIGxvd2VyICsgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnJhbmdlYCBhbmQgYF8ucmFuZ2VSaWdodGAgd2hpY2ggZG9lc24ndFxuICAgICAqIGNvZXJjZSBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgc3RhcnQgb2YgdGhlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGVuZCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0ZXAgVGhlIHZhbHVlIHRvIGluY3JlbWVudCBvciBkZWNyZW1lbnQgYnkuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSByYW5nZSBvZiBudW1iZXJzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VSYW5nZShzdGFydCwgZW5kLCBzdGVwLCBmcm9tUmlnaHQpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChuYXRpdmVDZWlsKChlbmQgLSBzdGFydCkgLyAoc3RlcCB8fCAxKSksIDApLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICByZXN1bHRbZnJvbVJpZ2h0ID8gbGVuZ3RoIDogKytpbmRleF0gPSBzdGFydDtcbiAgICAgICAgc3RhcnQgKz0gc3RlcDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmVwZWF0YCB3aGljaCBkb2Vzbid0IGNvZXJjZSBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byByZXBlYXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIHN0cmluZy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByZXBlYXRlZCBzdHJpbmcuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVJlcGVhdChzdHJpbmcsIG4pIHtcbiAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgIGlmICghc3RyaW5nIHx8IG4gPCAxIHx8IG4gPiBNQVhfU0FGRV9JTlRFR0VSKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICAvLyBMZXZlcmFnZSB0aGUgZXhwb25lbnRpYXRpb24gYnkgc3F1YXJpbmcgYWxnb3JpdGhtIGZvciBhIGZhc3RlciByZXBlYXQuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXhwb25lbnRpYXRpb25fYnlfc3F1YXJpbmcgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKG4gJSAyKSB7XG4gICAgICAgICAgcmVzdWx0ICs9IHN0cmluZztcbiAgICAgICAgfVxuICAgICAgICBuID0gbmF0aXZlRmxvb3IobiAvIDIpO1xuICAgICAgICBpZiAobikge1xuICAgICAgICAgIHN0cmluZyArPSBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKG4pO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnJlc3RgIHdoaWNoIGRvZXNuJ3QgdmFsaWRhdGUgb3IgY29lcmNlIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVJlc3QoZnVuYywgc3RhcnQpIHtcbiAgICAgIHJldHVybiBzZXRUb1N0cmluZyhvdmVyUmVzdChmdW5jLCBzdGFydCwgaWRlbnRpdHkpLCBmdW5jICsgJycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNhbXBsZWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNhbXBsZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmFuZG9tIGVsZW1lbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVNhbXBsZShjb2xsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gYXJyYXlTYW1wbGUodmFsdWVzKGNvbGxlY3Rpb24pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zYW1wbGVTaXplYCB3aXRob3V0IHBhcmFtIGd1YXJkcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2FtcGxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gc2FtcGxlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcmFuZG9tIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTYW1wbGVTaXplKGNvbGxlY3Rpb24sIG4pIHtcbiAgICAgIHZhciBhcnJheSA9IHZhbHVlcyhjb2xsZWN0aW9uKTtcbiAgICAgIHJldHVybiBzaHVmZmxlU2VsZihhcnJheSwgYmFzZUNsYW1wKG4sIDAsIGFycmF5Lmxlbmd0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNldGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHNldC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgcGF0aCBjcmVhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTZXQob2JqZWN0LCBwYXRoLCB2YWx1ZSwgY3VzdG9taXplcikge1xuICAgICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9XG4gICAgICBwYXRoID0gY2FzdFBhdGgocGF0aCwgb2JqZWN0KTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGgsXG4gICAgICAgICAgbGFzdEluZGV4ID0gbGVuZ3RoIC0gMSxcbiAgICAgICAgICBuZXN0ZWQgPSBvYmplY3Q7XG5cbiAgICAgIHdoaWxlIChuZXN0ZWQgIT0gbnVsbCAmJiArK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSB0b0tleShwYXRoW2luZGV4XSksXG4gICAgICAgICAgICBuZXdWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIGlmIChrZXkgPT09ICdfX3Byb3RvX18nIHx8IGtleSA9PT0gJ2NvbnN0cnVjdG9yJyB8fCBrZXkgPT09ICdwcm90b3R5cGUnKSB7XG4gICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbmRleCAhPSBsYXN0SW5kZXgpIHtcbiAgICAgICAgICB2YXIgb2JqVmFsdWUgPSBuZXN0ZWRba2V5XTtcbiAgICAgICAgICBuZXdWYWx1ZSA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKG9ialZhbHVlLCBrZXksIG5lc3RlZCkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gaXNPYmplY3Qob2JqVmFsdWUpXG4gICAgICAgICAgICAgID8gb2JqVmFsdWVcbiAgICAgICAgICAgICAgOiAoaXNJbmRleChwYXRoW2luZGV4ICsgMV0pID8gW10gOiB7fSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFzc2lnblZhbHVlKG5lc3RlZCwga2V5LCBuZXdWYWx1ZSk7XG4gICAgICAgIG5lc3RlZCA9IG5lc3RlZFtrZXldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgc2V0RGF0YWAgd2l0aG91dCBzdXBwb3J0IGZvciBob3QgbG9vcCBzaG9ydGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXNzb2NpYXRlIG1ldGFkYXRhIHdpdGguXG4gICAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXRhZGF0YS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYGZ1bmNgLlxuICAgICAqL1xuICAgIHZhciBiYXNlU2V0RGF0YSA9ICFtZXRhTWFwID8gaWRlbnRpdHkgOiBmdW5jdGlvbihmdW5jLCBkYXRhKSB7XG4gICAgICBtZXRhTWFwLnNldChmdW5jLCBkYXRhKTtcbiAgICAgIHJldHVybiBmdW5jO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgc2V0VG9TdHJpbmdgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaG90IGxvb3Agc2hvcnRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdHJpbmcgVGhlIGB0b1N0cmluZ2AgcmVzdWx0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBgZnVuY2AuXG4gICAgICovXG4gICAgdmFyIGJhc2VTZXRUb1N0cmluZyA9ICFkZWZpbmVQcm9wZXJ0eSA/IGlkZW50aXR5IDogZnVuY3Rpb24oZnVuYywgc3RyaW5nKSB7XG4gICAgICByZXR1cm4gZGVmaW5lUHJvcGVydHkoZnVuYywgJ3RvU3RyaW5nJywge1xuICAgICAgICAnY29uZmlndXJhYmxlJzogdHJ1ZSxcbiAgICAgICAgJ2VudW1lcmFibGUnOiBmYWxzZSxcbiAgICAgICAgJ3ZhbHVlJzogY29uc3RhbnQoc3RyaW5nKSxcbiAgICAgICAgJ3dyaXRhYmxlJzogdHJ1ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNodWZmbGVgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzaHVmZmxlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNodWZmbGVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTaHVmZmxlKGNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBzaHVmZmxlU2VsZih2YWx1ZXMoY29sbGVjdGlvbikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNsaWNlYCB3aXRob3V0IGFuIGl0ZXJhdGVlIGNhbGwgZ3VhcmQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzbGljZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgIHN0YXJ0ID0gLXN0YXJ0ID4gbGVuZ3RoID8gMCA6IChsZW5ndGggKyBzdGFydCk7XG4gICAgICB9XG4gICAgICBlbmQgPSBlbmQgPiBsZW5ndGggPyBsZW5ndGggOiBlbmQ7XG4gICAgICBpZiAoZW5kIDwgMCkge1xuICAgICAgICBlbmQgKz0gbGVuZ3RoO1xuICAgICAgfVxuICAgICAgbGVuZ3RoID0gc3RhcnQgPiBlbmQgPyAwIDogKChlbmQgLSBzdGFydCkgPj4+IDApO1xuICAgICAgc3RhcnQgPj4+PSAwO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBhcnJheVtpbmRleCArIHN0YXJ0XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc29tZWAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVNvbWUoY29sbGVjdGlvbiwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmVzdWx0ID0gcHJlZGljYXRlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIHJldHVybiAhcmVzdWx0O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc29ydGVkSW5kZXhgIGFuZCBgXy5zb3J0ZWRMYXN0SW5kZXhgIHdoaWNoXG4gICAgICogcGVyZm9ybXMgYSBiaW5hcnkgc2VhcmNoIG9mIGBhcnJheWAgdG8gZGV0ZXJtaW5lIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgXG4gICAgICogc2hvdWxkIGJlIGluc2VydGVkIGludG8gYGFycmF5YCBpbiBvcmRlciB0byBtYWludGFpbiBpdHMgc29ydCBvcmRlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvcnRlZCBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGV2YWx1YXRlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JldEhpZ2hlc3RdIFNwZWNpZnkgcmV0dXJuaW5nIHRoZSBoaWdoZXN0IHF1YWxpZmllZCBpbmRleC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZCBiZSBpbnNlcnRlZFxuICAgICAqICBpbnRvIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVNvcnRlZEluZGV4KGFycmF5LCB2YWx1ZSwgcmV0SGlnaGVzdCkge1xuICAgICAgdmFyIGxvdyA9IDAsXG4gICAgICAgICAgaGlnaCA9IGFycmF5ID09IG51bGwgPyBsb3cgOiBhcnJheS5sZW5ndGg7XG5cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPT09IHZhbHVlICYmIGhpZ2ggPD0gSEFMRl9NQVhfQVJSQVlfTEVOR1RIKSB7XG4gICAgICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgICAgdmFyIG1pZCA9IChsb3cgKyBoaWdoKSA+Pj4gMSxcbiAgICAgICAgICAgICAgY29tcHV0ZWQgPSBhcnJheVttaWRdO1xuXG4gICAgICAgICAgaWYgKGNvbXB1dGVkICE9PSBudWxsICYmICFpc1N5bWJvbChjb21wdXRlZCkgJiZcbiAgICAgICAgICAgICAgKHJldEhpZ2hlc3QgPyAoY29tcHV0ZWQgPD0gdmFsdWUpIDogKGNvbXB1dGVkIDwgdmFsdWUpKSkge1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhpZ2g7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVNvcnRlZEluZGV4QnkoYXJyYXksIHZhbHVlLCBpZGVudGl0eSwgcmV0SGlnaGVzdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc29ydGVkSW5kZXhCeWAgYW5kIGBfLnNvcnRlZExhc3RJbmRleEJ5YFxuICAgICAqIHdoaWNoIGludm9rZXMgYGl0ZXJhdGVlYCBmb3IgYHZhbHVlYCBhbmQgZWFjaCBlbGVtZW50IG9mIGBhcnJheWAgdG8gY29tcHV0ZVxuICAgICAqIHRoZWlyIHNvcnQgcmFua2luZy4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ7ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBzb3J0ZWQgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBldmFsdWF0ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyZXRIaWdoZXN0XSBTcGVjaWZ5IHJldHVybmluZyB0aGUgaGlnaGVzdCBxdWFsaWZpZWQgaW5kZXguXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWRcbiAgICAgKiAgaW50byBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTb3J0ZWRJbmRleEJ5KGFycmF5LCB2YWx1ZSwgaXRlcmF0ZWUsIHJldEhpZ2hlc3QpIHtcbiAgICAgIHZhciBsb3cgPSAwLFxuICAgICAgICAgIGhpZ2ggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcbiAgICAgIGlmIChoaWdoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICB2YWx1ZSA9IGl0ZXJhdGVlKHZhbHVlKTtcbiAgICAgIHZhciB2YWxJc05hTiA9IHZhbHVlICE9PSB2YWx1ZSxcbiAgICAgICAgICB2YWxJc051bGwgPSB2YWx1ZSA9PT0gbnVsbCxcbiAgICAgICAgICB2YWxJc1N5bWJvbCA9IGlzU3ltYm9sKHZhbHVlKSxcbiAgICAgICAgICB2YWxJc1VuZGVmaW5lZCA9IHZhbHVlID09PSB1bmRlZmluZWQ7XG5cbiAgICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIHZhciBtaWQgPSBuYXRpdmVGbG9vcigobG93ICsgaGlnaCkgLyAyKSxcbiAgICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUoYXJyYXlbbWlkXSksXG4gICAgICAgICAgICBvdGhJc0RlZmluZWQgPSBjb21wdXRlZCAhPT0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgb3RoSXNOdWxsID0gY29tcHV0ZWQgPT09IG51bGwsXG4gICAgICAgICAgICBvdGhJc1JlZmxleGl2ZSA9IGNvbXB1dGVkID09PSBjb21wdXRlZCxcbiAgICAgICAgICAgIG90aElzU3ltYm9sID0gaXNTeW1ib2woY29tcHV0ZWQpO1xuXG4gICAgICAgIGlmICh2YWxJc05hTikge1xuICAgICAgICAgIHZhciBzZXRMb3cgPSByZXRIaWdoZXN0IHx8IG90aElzUmVmbGV4aXZlO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbElzVW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2V0TG93ID0gb3RoSXNSZWZsZXhpdmUgJiYgKHJldEhpZ2hlc3QgfHwgb3RoSXNEZWZpbmVkKTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWxJc051bGwpIHtcbiAgICAgICAgICBzZXRMb3cgPSBvdGhJc1JlZmxleGl2ZSAmJiBvdGhJc0RlZmluZWQgJiYgKHJldEhpZ2hlc3QgfHwgIW90aElzTnVsbCk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsSXNTeW1ib2wpIHtcbiAgICAgICAgICBzZXRMb3cgPSBvdGhJc1JlZmxleGl2ZSAmJiBvdGhJc0RlZmluZWQgJiYgIW90aElzTnVsbCAmJiAocmV0SGlnaGVzdCB8fCAhb3RoSXNTeW1ib2wpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aElzTnVsbCB8fCBvdGhJc1N5bWJvbCkge1xuICAgICAgICAgIHNldExvdyA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldExvdyA9IHJldEhpZ2hlc3QgPyAoY29tcHV0ZWQgPD0gdmFsdWUpIDogKGNvbXB1dGVkIDwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXRMb3cpIHtcbiAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVNaW4oaGlnaCwgTUFYX0FSUkFZX0lOREVYKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zb3J0ZWRVbmlxYCBhbmQgYF8uc29ydGVkVW5pcUJ5YCB3aXRob3V0XG4gICAgICogc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlXSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBkdXBsaWNhdGUgZnJlZSBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlU29ydGVkVW5pcShhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICByZXNJbmRleCA9IDAsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSkgOiB2YWx1ZTtcblxuICAgICAgICBpZiAoIWluZGV4IHx8ICFlcShjb21wdXRlZCwgc2VlbikpIHtcbiAgICAgICAgICB2YXIgc2VlbiA9IGNvbXB1dGVkO1xuICAgICAgICAgIHJlc3VsdFtyZXNJbmRleCsrXSA9IHZhbHVlID09PSAwID8gMCA6IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRvTnVtYmVyYCB3aGljaCBkb2Vzbid0IGVuc3VyZSBjb3JyZWN0XG4gICAgICogY29udmVyc2lvbnMgb2YgYmluYXJ5LCBoZXhhZGVjaW1hbCwgb3Igb2N0YWwgc3RyaW5nIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVRvTnVtYmVyKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIE5BTjtcbiAgICAgIH1cbiAgICAgIHJldHVybiArdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udG9TdHJpbmdgIHdoaWNoIGRvZXNuJ3QgY29udmVydCBudWxsaXNoXG4gICAgICogdmFsdWVzIHRvIGVtcHR5IHN0cmluZ3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICAgICAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbnZlcnQgdmFsdWVzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICAgIHJldHVybiBhcnJheU1hcCh2YWx1ZSwgYmFzZVRvU3RyaW5nKSArICcnO1xuICAgICAgfVxuICAgICAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gc3ltYm9sVG9TdHJpbmcgPyBzeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcbiAgICAgIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy51bmlxQnlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlXSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyYXRvcl0gVGhlIGNvbXBhcmF0b3IgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBkdXBsaWNhdGUgZnJlZSBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlVW5pcShhcnJheSwgaXRlcmF0ZWUsIGNvbXBhcmF0b3IpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGluY2x1ZGVzID0gYXJyYXlJbmNsdWRlcyxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgaXNDb21tb24gPSB0cnVlLFxuICAgICAgICAgIHJlc3VsdCA9IFtdLFxuICAgICAgICAgIHNlZW4gPSByZXN1bHQ7XG5cbiAgICAgIGlmIChjb21wYXJhdG9yKSB7XG4gICAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgICAgIGluY2x1ZGVzID0gYXJyYXlJbmNsdWRlc1dpdGg7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChsZW5ndGggPj0gTEFSR0VfQVJSQVlfU0laRSkge1xuICAgICAgICB2YXIgc2V0ID0gaXRlcmF0ZWUgPyBudWxsIDogY3JlYXRlU2V0KGFycmF5KTtcbiAgICAgICAgaWYgKHNldCkge1xuICAgICAgICAgIHJldHVybiBzZXRUb0FycmF5KHNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaXNDb21tb24gPSBmYWxzZTtcbiAgICAgICAgaW5jbHVkZXMgPSBjYWNoZUhhcztcbiAgICAgICAgc2VlbiA9IG5ldyBTZXRDYWNoZTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzZWVuID0gaXRlcmF0ZWUgPyBbXSA6IHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIG91dGVyOlxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSA/IGl0ZXJhdGVlKHZhbHVlKSA6IHZhbHVlO1xuXG4gICAgICAgIHZhbHVlID0gKGNvbXBhcmF0b3IgfHwgdmFsdWUgIT09IDApID8gdmFsdWUgOiAwO1xuICAgICAgICBpZiAoaXNDb21tb24gJiYgY29tcHV0ZWQgPT09IGNvbXB1dGVkKSB7XG4gICAgICAgICAgdmFyIHNlZW5JbmRleCA9IHNlZW4ubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlIChzZWVuSW5kZXgtLSkge1xuICAgICAgICAgICAgaWYgKHNlZW5bc2VlbkluZGV4XSA9PT0gY29tcHV0ZWQpIHtcbiAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVyYXRlZSkge1xuICAgICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbmNsdWRlcyhzZWVuLCBjb21wdXRlZCwgY29tcGFyYXRvcikpIHtcbiAgICAgICAgICBpZiAoc2VlbiAhPT0gcmVzdWx0KSB7XG4gICAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udW5zZXRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwcm9wZXJ0eSBwYXRoIHRvIHVuc2V0LlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcHJvcGVydHkgaXMgZGVsZXRlZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VVbnNldChvYmplY3QsIHBhdGgpIHtcbiAgICAgIHBhdGggPSBjYXN0UGF0aChwYXRoLCBvYmplY3QpO1xuICAgICAgb2JqZWN0ID0gcGFyZW50KG9iamVjdCwgcGF0aCk7XG4gICAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgfHwgZGVsZXRlIG9iamVjdFt0b0tleShsYXN0KHBhdGgpKV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udXBkYXRlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZXIgVGhlIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHVwZGF0ZWQgdmFsdWUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgcGF0aCBjcmVhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VVcGRhdGUob2JqZWN0LCBwYXRoLCB1cGRhdGVyLCBjdXN0b21pemVyKSB7XG4gICAgICByZXR1cm4gYmFzZVNldChvYmplY3QsIHBhdGgsIHVwZGF0ZXIoYmFzZUdldChvYmplY3QsIHBhdGgpKSwgY3VzdG9taXplcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgbWV0aG9kcyBsaWtlIGBfLmRyb3BXaGlsZWAgYW5kIGBfLnRha2VXaGlsZWBcbiAgICAgKiB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0Ryb3BdIFNwZWNpZnkgZHJvcHBpbmcgZWxlbWVudHMgaW5zdGVhZCBvZiB0YWtpbmcgdGhlbS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVdoaWxlKGFycmF5LCBwcmVkaWNhdGUsIGlzRHJvcCwgZnJvbVJpZ2h0KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTE7XG5cbiAgICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpICYmXG4gICAgICAgIHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHt9XG5cbiAgICAgIHJldHVybiBpc0Ryb3BcbiAgICAgICAgPyBiYXNlU2xpY2UoYXJyYXksIChmcm9tUmlnaHQgPyAwIDogaW5kZXgpLCAoZnJvbVJpZ2h0ID8gaW5kZXggKyAxIDogbGVuZ3RoKSlcbiAgICAgICAgOiBiYXNlU2xpY2UoYXJyYXksIChmcm9tUmlnaHQgPyBpbmRleCArIDEgOiAwKSwgKGZyb21SaWdodCA/IGxlbmd0aCA6IGluZGV4KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYHdyYXBwZXJWYWx1ZWAgd2hpY2ggcmV0dXJucyB0aGUgcmVzdWx0IG9mXG4gICAgICogcGVyZm9ybWluZyBhIHNlcXVlbmNlIG9mIGFjdGlvbnMgb24gdGhlIHVud3JhcHBlZCBgdmFsdWVgLCB3aGVyZSBlYWNoXG4gICAgICogc3VjY2Vzc2l2ZSBhY3Rpb24gaXMgc3VwcGxpZWQgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcHJldmlvdXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHVud3JhcHBlZCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhY3Rpb25zIEFjdGlvbnMgdG8gcGVyZm9ybSB0byByZXNvbHZlIHRoZSB1bndyYXBwZWQgdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VXcmFwcGVyVmFsdWUodmFsdWUsIGFjdGlvbnMpIHtcbiAgICAgIHZhciByZXN1bHQgPSB2YWx1ZTtcbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBMYXp5V3JhcHBlcikge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQudmFsdWUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheVJlZHVjZShhY3Rpb25zLCBmdW5jdGlvbihyZXN1bHQsIGFjdGlvbikge1xuICAgICAgICByZXR1cm4gYWN0aW9uLmZ1bmMuYXBwbHkoYWN0aW9uLnRoaXNBcmcsIGFycmF5UHVzaChbcmVzdWx0XSwgYWN0aW9uLmFyZ3MpKTtcbiAgICAgIH0sIHJlc3VsdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgbWV0aG9kcyBsaWtlIGBfLnhvcmAsIHdpdGhvdXQgc3VwcG9ydCBmb3JcbiAgICAgKiBpdGVyYXRlZSBzaG9ydGhhbmRzLCB0aGF0IGFjY2VwdHMgYW4gYXJyYXkgb2YgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5cyBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlXSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyYXRvcl0gVGhlIGNvbXBhcmF0b3IgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiB2YWx1ZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVhvcihhcnJheXMsIGl0ZXJhdGVlLCBjb21wYXJhdG9yKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXlzLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiBsZW5ndGggPyBiYXNlVW5pcShhcnJheXNbMF0pIDogW107XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgYXJyYXkgPSBhcnJheXNbaW5kZXhdLFxuICAgICAgICAgICAgb3RoSW5kZXggPSAtMTtcblxuICAgICAgICB3aGlsZSAoKytvdGhJbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGlmIChvdGhJbmRleCAhPSBpbmRleCkge1xuICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGJhc2VEaWZmZXJlbmNlKHJlc3VsdFtpbmRleF0gfHwgYXJyYXksIGFycmF5c1tvdGhJbmRleF0sIGl0ZXJhdGVlLCBjb21wYXJhdG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlVW5pcShiYXNlRmxhdHRlbihyZXN1bHQsIDEpLCBpdGVyYXRlZSwgY29tcGFyYXRvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnppcE9iamVjdGAgd2hpY2ggYXNzaWducyB2YWx1ZXMgdXNpbmcgYGFzc2lnbkZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgaWRlbnRpZmllcnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gdmFsdWVzIFRoZSBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYXNzaWduRnVuYyBUaGUgZnVuY3Rpb24gdG8gYXNzaWduIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VaaXBPYmplY3QocHJvcHMsIHZhbHVlcywgYXNzaWduRnVuYykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHZhbHNMZW5ndGggPSB2YWx1ZXMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBpbmRleCA8IHZhbHNMZW5ndGggPyB2YWx1ZXNbaW5kZXhdIDogdW5kZWZpbmVkO1xuICAgICAgICBhc3NpZ25GdW5jKHJlc3VsdCwgcHJvcHNbaW5kZXhdLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhc3RzIGB2YWx1ZWAgdG8gYW4gZW1wdHkgYXJyYXkgaWYgaXQncyBub3QgYW4gYXJyYXkgbGlrZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdH0gUmV0dXJucyB0aGUgY2FzdCBhcnJheS1saWtlIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjYXN0QXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpID8gdmFsdWUgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYXN0cyBgdmFsdWVgIHRvIGBpZGVudGl0eWAgaWYgaXQncyBub3QgYSBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgY2FzdCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjYXN0RnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlIDogaWRlbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FzdHMgYHZhbHVlYCB0byBhIHBhdGggYXJyYXkgaWYgaXQncyBub3Qgb25lLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5IGtleXMgb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjYXN0IHByb3BlcnR5IHBhdGggYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2FzdFBhdGgodmFsdWUsIG9iamVjdCkge1xuICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc0tleSh2YWx1ZSwgb2JqZWN0KSA/IFt2YWx1ZV0gOiBzdHJpbmdUb1BhdGgodG9TdHJpbmcodmFsdWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGBiYXNlUmVzdGAgYWxpYXMgd2hpY2ggY2FuIGJlIHJlcGxhY2VkIHdpdGggYGlkZW50aXR5YCBieSBtb2R1bGVcbiAgICAgKiByZXBsYWNlbWVudCBwbHVnaW5zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICB2YXIgY2FzdFJlc3QgPSBiYXNlUmVzdDtcblxuICAgIC8qKlxuICAgICAqIENhc3RzIGBhcnJheWAgdG8gYSBzbGljZSBpZiBpdCdzIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjYXN0IHNsaWNlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhc3RTbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgICAgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuZ3RoIDogZW5kO1xuICAgICAgcmV0dXJuICghc3RhcnQgJiYgZW5kID49IGxlbmd0aCkgPyBhcnJheSA6IGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzaW1wbGUgd3JhcHBlciBhcm91bmQgdGhlIGdsb2JhbCBbYGNsZWFyVGltZW91dGBdKGh0dHBzOi8vbWRuLmlvL2NsZWFyVGltZW91dCkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfE9iamVjdH0gaWQgVGhlIHRpbWVyIGlkIG9yIHRpbWVvdXQgb2JqZWN0IG9mIHRoZSB0aW1lciB0byBjbGVhci5cbiAgICAgKi9cbiAgICB2YXIgY2xlYXJUaW1lb3V0ID0gY3R4Q2xlYXJUaW1lb3V0IHx8IGZ1bmN0aW9uKGlkKSB7XG4gICAgICByZXR1cm4gcm9vdC5jbGVhclRpbWVvdXQoaWQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgIGBidWZmZXJgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0J1ZmZlcn0gYnVmZmVyIFRoZSBidWZmZXIgdG8gY2xvbmUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7QnVmZmVyfSBSZXR1cm5zIHRoZSBjbG9uZWQgYnVmZmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lQnVmZmVyKGJ1ZmZlciwgaXNEZWVwKSB7XG4gICAgICBpZiAoaXNEZWVwKSB7XG4gICAgICAgIHJldHVybiBidWZmZXIuc2xpY2UoKTtcbiAgICAgIH1cbiAgICAgIHZhciBsZW5ndGggPSBidWZmZXIubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IGFsbG9jVW5zYWZlID8gYWxsb2NVbnNhZmUobGVuZ3RoKSA6IG5ldyBidWZmZXIuY29uc3RydWN0b3IobGVuZ3RoKTtcblxuICAgICAgYnVmZmVyLmNvcHkocmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIGBhcnJheUJ1ZmZlcmAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFycmF5QnVmZmVyIFRoZSBhcnJheSBidWZmZXIgdG8gY2xvbmUuXG4gICAgICogQHJldHVybnMge0FycmF5QnVmZmVyfSBSZXR1cm5zIHRoZSBjbG9uZWQgYXJyYXkgYnVmZmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lQXJyYXlCdWZmZXIoYXJyYXlCdWZmZXIpIHtcbiAgICAgIHZhciByZXN1bHQgPSBuZXcgYXJyYXlCdWZmZXIuY29uc3RydWN0b3IoYXJyYXlCdWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgICBuZXcgVWludDhBcnJheShyZXN1bHQpLnNldChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcikpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgYGRhdGFWaWV3YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFWaWV3IFRoZSBkYXRhIHZpZXcgdG8gY2xvbmUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjbG9uZWQgZGF0YSB2aWV3LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lRGF0YVZpZXcoZGF0YVZpZXcsIGlzRGVlcCkge1xuICAgICAgdmFyIGJ1ZmZlciA9IGlzRGVlcCA/IGNsb25lQXJyYXlCdWZmZXIoZGF0YVZpZXcuYnVmZmVyKSA6IGRhdGFWaWV3LmJ1ZmZlcjtcbiAgICAgIHJldHVybiBuZXcgZGF0YVZpZXcuY29uc3RydWN0b3IoYnVmZmVyLCBkYXRhVmlldy5ieXRlT2Zmc2V0LCBkYXRhVmlldy5ieXRlTGVuZ3RoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgYHJlZ2V4cGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZWdleHAgVGhlIHJlZ2V4cCB0byBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjbG9uZWQgcmVnZXhwLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lUmVnRXhwKHJlZ2V4cCkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyByZWdleHAuY29uc3RydWN0b3IocmVnZXhwLnNvdXJjZSwgcmVGbGFncy5leGVjKHJlZ2V4cCkpO1xuICAgICAgcmVzdWx0Lmxhc3RJbmRleCA9IHJlZ2V4cC5sYXN0SW5kZXg7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGUgYHN5bWJvbGAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3ltYm9sIFRoZSBzeW1ib2wgb2JqZWN0IHRvIGNsb25lLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNsb25lZCBzeW1ib2wgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lU3ltYm9sKHN5bWJvbCkge1xuICAgICAgcmV0dXJuIHN5bWJvbFZhbHVlT2YgPyBPYmplY3Qoc3ltYm9sVmFsdWVPZi5jYWxsKHN5bWJvbCkpIDoge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIGB0eXBlZEFycmF5YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHR5cGVkQXJyYXkgVGhlIHR5cGVkIGFycmF5IHRvIGNsb25lLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcF0gU3BlY2lmeSBhIGRlZXAgY2xvbmUuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2xvbmVkIHR5cGVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lVHlwZWRBcnJheSh0eXBlZEFycmF5LCBpc0RlZXApIHtcbiAgICAgIHZhciBidWZmZXIgPSBpc0RlZXAgPyBjbG9uZUFycmF5QnVmZmVyKHR5cGVkQXJyYXkuYnVmZmVyKSA6IHR5cGVkQXJyYXkuYnVmZmVyO1xuICAgICAgcmV0dXJuIG5ldyB0eXBlZEFycmF5LmNvbnN0cnVjdG9yKGJ1ZmZlciwgdHlwZWRBcnJheS5ieXRlT2Zmc2V0LCB0eXBlZEFycmF5Lmxlbmd0aCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgdmFsdWVzIHRvIHNvcnQgdGhlbSBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzb3J0IG9yZGVyIGluZGljYXRvciBmb3IgYHZhbHVlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wYXJlQXNjZW5kaW5nKHZhbHVlLCBvdGhlcikge1xuICAgICAgaWYgKHZhbHVlICE9PSBvdGhlcikge1xuICAgICAgICB2YXIgdmFsSXNEZWZpbmVkID0gdmFsdWUgIT09IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZhbElzTnVsbCA9IHZhbHVlID09PSBudWxsLFxuICAgICAgICAgICAgdmFsSXNSZWZsZXhpdmUgPSB2YWx1ZSA9PT0gdmFsdWUsXG4gICAgICAgICAgICB2YWxJc1N5bWJvbCA9IGlzU3ltYm9sKHZhbHVlKTtcblxuICAgICAgICB2YXIgb3RoSXNEZWZpbmVkID0gb3RoZXIgIT09IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG90aElzTnVsbCA9IG90aGVyID09PSBudWxsLFxuICAgICAgICAgICAgb3RoSXNSZWZsZXhpdmUgPSBvdGhlciA9PT0gb3RoZXIsXG4gICAgICAgICAgICBvdGhJc1N5bWJvbCA9IGlzU3ltYm9sKG90aGVyKTtcblxuICAgICAgICBpZiAoKCFvdGhJc051bGwgJiYgIW90aElzU3ltYm9sICYmICF2YWxJc1N5bWJvbCAmJiB2YWx1ZSA+IG90aGVyKSB8fFxuICAgICAgICAgICAgKHZhbElzU3ltYm9sICYmIG90aElzRGVmaW5lZCAmJiBvdGhJc1JlZmxleGl2ZSAmJiAhb3RoSXNOdWxsICYmICFvdGhJc1N5bWJvbCkgfHxcbiAgICAgICAgICAgICh2YWxJc051bGwgJiYgb3RoSXNEZWZpbmVkICYmIG90aElzUmVmbGV4aXZlKSB8fFxuICAgICAgICAgICAgKCF2YWxJc0RlZmluZWQgJiYgb3RoSXNSZWZsZXhpdmUpIHx8XG4gICAgICAgICAgICAhdmFsSXNSZWZsZXhpdmUpIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKCF2YWxJc051bGwgJiYgIXZhbElzU3ltYm9sICYmICFvdGhJc1N5bWJvbCAmJiB2YWx1ZSA8IG90aGVyKSB8fFxuICAgICAgICAgICAgKG90aElzU3ltYm9sICYmIHZhbElzRGVmaW5lZCAmJiB2YWxJc1JlZmxleGl2ZSAmJiAhdmFsSXNOdWxsICYmICF2YWxJc1N5bWJvbCkgfHxcbiAgICAgICAgICAgIChvdGhJc051bGwgJiYgdmFsSXNEZWZpbmVkICYmIHZhbElzUmVmbGV4aXZlKSB8fFxuICAgICAgICAgICAgKCFvdGhJc0RlZmluZWQgJiYgdmFsSXNSZWZsZXhpdmUpIHx8XG4gICAgICAgICAgICAhb3RoSXNSZWZsZXhpdmUpIHtcbiAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgYnkgYF8ub3JkZXJCeWAgdG8gY29tcGFyZSBtdWx0aXBsZSBwcm9wZXJ0aWVzIG9mIGEgdmFsdWUgdG8gYW5vdGhlclxuICAgICAqIGFuZCBzdGFibGUgc29ydCB0aGVtLlxuICAgICAqXG4gICAgICogSWYgYG9yZGVyc2AgaXMgdW5zcGVjaWZpZWQsIGFsbCB2YWx1ZXMgYXJlIHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIuIE90aGVyd2lzZSxcbiAgICAgKiBzcGVjaWZ5IGFuIG9yZGVyIG9mIFwiZGVzY1wiIGZvciBkZXNjZW5kaW5nIG9yIFwiYXNjXCIgZm9yIGFzY2VuZGluZyBzb3J0IG9yZGVyXG4gICAgICogb2YgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtib29sZWFuW118c3RyaW5nW119IG9yZGVycyBUaGUgb3JkZXIgdG8gc29ydCBieSBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzb3J0IG9yZGVyIGluZGljYXRvciBmb3IgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGFyZU11bHRpcGxlKG9iamVjdCwgb3RoZXIsIG9yZGVycykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgb2JqQ3JpdGVyaWEgPSBvYmplY3QuY3JpdGVyaWEsXG4gICAgICAgICAgb3RoQ3JpdGVyaWEgPSBvdGhlci5jcml0ZXJpYSxcbiAgICAgICAgICBsZW5ndGggPSBvYmpDcml0ZXJpYS5sZW5ndGgsXG4gICAgICAgICAgb3JkZXJzTGVuZ3RoID0gb3JkZXJzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNvbXBhcmVBc2NlbmRpbmcob2JqQ3JpdGVyaWFbaW5kZXhdLCBvdGhDcml0ZXJpYVtpbmRleF0pO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgaWYgKGluZGV4ID49IG9yZGVyc0xlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIG9yZGVyID0gb3JkZXJzW2luZGV4XTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0ICogKG9yZGVyID09ICdkZXNjJyA/IC0xIDogMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEZpeGVzIGFuIGBBcnJheSNzb3J0YCBidWcgaW4gdGhlIEpTIGVuZ2luZSBlbWJlZGRlZCBpbiBBZG9iZSBhcHBsaWNhdGlvbnNcbiAgICAgIC8vIHRoYXQgY2F1c2VzIGl0LCB1bmRlciBjZXJ0YWluIGNpcmN1bXN0YW5jZXMsIHRvIHByb3ZpZGUgdGhlIHNhbWUgdmFsdWUgZm9yXG4gICAgICAvLyBgb2JqZWN0YCBhbmQgYG90aGVyYC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9wdWxsLzEyNDdcbiAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICAvL1xuICAgICAgLy8gVGhpcyBhbHNvIGVuc3VyZXMgYSBzdGFibGUgc29ydCBpbiBWOCBhbmQgb3RoZXIgZW5naW5lcy5cbiAgICAgIC8vIFNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD05MCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgcmV0dXJuIG9iamVjdC5pbmRleCAtIG90aGVyLmluZGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLFxuICAgICAqIHBsYWNlaG9sZGVycywgYW5kIHByb3ZpZGVkIGFyZ3VtZW50cyBpbnRvIGEgc2luZ2xlIGFycmF5IG9mIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJncyBUaGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhcnRpYWxzIFRoZSBhcmd1bWVudHMgdG8gcHJlcGVuZCB0byB0aG9zZSBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBob2xkZXJzIFRoZSBgcGFydGlhbHNgIHBsYWNlaG9sZGVyIGluZGV4ZXMuXG4gICAgICogQHBhcmFtcyB7Ym9vbGVhbn0gW2lzQ3VycmllZF0gU3BlY2lmeSBjb21wb3NpbmcgZm9yIGEgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBjb21wb3NlZCBhcmd1bWVudHMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcG9zZUFyZ3MoYXJncywgcGFydGlhbHMsIGhvbGRlcnMsIGlzQ3VycmllZCkge1xuICAgICAgdmFyIGFyZ3NJbmRleCA9IC0xLFxuICAgICAgICAgIGFyZ3NMZW5ndGggPSBhcmdzLmxlbmd0aCxcbiAgICAgICAgICBob2xkZXJzTGVuZ3RoID0gaG9sZGVycy5sZW5ndGgsXG4gICAgICAgICAgbGVmdEluZGV4ID0gLTEsXG4gICAgICAgICAgbGVmdExlbmd0aCA9IHBhcnRpYWxzLmxlbmd0aCxcbiAgICAgICAgICByYW5nZUxlbmd0aCA9IG5hdGl2ZU1heChhcmdzTGVuZ3RoIC0gaG9sZGVyc0xlbmd0aCwgMCksXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVmdExlbmd0aCArIHJhbmdlTGVuZ3RoKSxcbiAgICAgICAgICBpc1VuY3VycmllZCA9ICFpc0N1cnJpZWQ7XG5cbiAgICAgIHdoaWxlICgrK2xlZnRJbmRleCA8IGxlZnRMZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2xlZnRJbmRleF0gPSBwYXJ0aWFsc1tsZWZ0SW5kZXhdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsrYXJnc0luZGV4IDwgaG9sZGVyc0xlbmd0aCkge1xuICAgICAgICBpZiAoaXNVbmN1cnJpZWQgfHwgYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge1xuICAgICAgICAgIHJlc3VsdFtob2xkZXJzW2FyZ3NJbmRleF1dID0gYXJnc1thcmdzSW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3aGlsZSAocmFuZ2VMZW5ndGgtLSkge1xuICAgICAgICByZXN1bHRbbGVmdEluZGV4KytdID0gYXJnc1thcmdzSW5kZXgrK107XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZSBgY29tcG9zZUFyZ3NgIGV4Y2VwdCB0aGF0IHRoZSBhcmd1bWVudHMgY29tcG9zaXRpb25cbiAgICAgKiBpcyB0YWlsb3JlZCBmb3IgYF8ucGFydGlhbFJpZ2h0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJncyBUaGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhcnRpYWxzIFRoZSBhcmd1bWVudHMgdG8gYXBwZW5kIHRvIHRob3NlIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGhvbGRlcnMgVGhlIGBwYXJ0aWFsc2AgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICAgKiBAcGFyYW1zIHtib29sZWFufSBbaXNDdXJyaWVkXSBTcGVjaWZ5IGNvbXBvc2luZyBmb3IgYSBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGNvbXBvc2VkIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wb3NlQXJnc1JpZ2h0KGFyZ3MsIHBhcnRpYWxzLCBob2xkZXJzLCBpc0N1cnJpZWQpIHtcbiAgICAgIHZhciBhcmdzSW5kZXggPSAtMSxcbiAgICAgICAgICBhcmdzTGVuZ3RoID0gYXJncy5sZW5ndGgsXG4gICAgICAgICAgaG9sZGVyc0luZGV4ID0gLTEsXG4gICAgICAgICAgaG9sZGVyc0xlbmd0aCA9IGhvbGRlcnMubGVuZ3RoLFxuICAgICAgICAgIHJpZ2h0SW5kZXggPSAtMSxcbiAgICAgICAgICByaWdodExlbmd0aCA9IHBhcnRpYWxzLmxlbmd0aCxcbiAgICAgICAgICByYW5nZUxlbmd0aCA9IG5hdGl2ZU1heChhcmdzTGVuZ3RoIC0gaG9sZGVyc0xlbmd0aCwgMCksXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkocmFuZ2VMZW5ndGggKyByaWdodExlbmd0aCksXG4gICAgICAgICAgaXNVbmN1cnJpZWQgPSAhaXNDdXJyaWVkO1xuXG4gICAgICB3aGlsZSAoKythcmdzSW5kZXggPCByYW5nZUxlbmd0aCkge1xuICAgICAgICByZXN1bHRbYXJnc0luZGV4XSA9IGFyZ3NbYXJnc0luZGV4XTtcbiAgICAgIH1cbiAgICAgIHZhciBvZmZzZXQgPSBhcmdzSW5kZXg7XG4gICAgICB3aGlsZSAoKytyaWdodEluZGV4IDwgcmlnaHRMZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W29mZnNldCArIHJpZ2h0SW5kZXhdID0gcGFydGlhbHNbcmlnaHRJbmRleF07XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytob2xkZXJzSW5kZXggPCBob2xkZXJzTGVuZ3RoKSB7XG4gICAgICAgIGlmIChpc1VuY3VycmllZCB8fCBhcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XG4gICAgICAgICAgcmVzdWx0W29mZnNldCArIGhvbGRlcnNbaG9sZGVyc0luZGV4XV0gPSBhcmdzW2FyZ3NJbmRleCsrXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgdGhlIHZhbHVlcyBvZiBgc291cmNlYCB0byBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBzb3VyY2UgVGhlIGFycmF5IHRvIGNvcHkgdmFsdWVzIGZyb20uXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5PVtdXSBUaGUgYXJyYXkgdG8gY29weSB2YWx1ZXMgdG8uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29weUFycmF5KHNvdXJjZSwgYXJyYXkpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHNvdXJjZS5sZW5ndGg7XG5cbiAgICAgIGFycmF5IHx8IChhcnJheSA9IEFycmF5KGxlbmd0aCkpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgYXJyYXlbaW5kZXhdID0gc291cmNlW2luZGV4XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgcHJvcGVydGllcyBvZiBgc291cmNlYCB0byBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBpZGVudGlmaWVycyB0byBjb3B5LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0PXt9XSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0by5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb3BpZWQgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29weU9iamVjdChzb3VyY2UsIHByb3BzLCBvYmplY3QsIGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBpc05ldyA9ICFvYmplY3Q7XG4gICAgICBvYmplY3QgfHwgKG9iamVjdCA9IHt9KTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuXG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGN1c3RvbWl6ZXJcbiAgICAgICAgICA/IGN1c3RvbWl6ZXIob2JqZWN0W2tleV0sIHNvdXJjZVtrZXldLCBrZXksIG9iamVjdCwgc291cmNlKVxuICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAgICBiYXNlQXNzaWduVmFsdWUob2JqZWN0LCBrZXksIG5ld1ZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgbmV3VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvcGllcyBvd24gc3ltYm9scyBvZiBgc291cmNlYCB0byBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IHRvIGNvcHkgc3ltYm9scyBmcm9tLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0PXt9XSBUaGUgb2JqZWN0IHRvIGNvcHkgc3ltYm9scyB0by5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvcHlTeW1ib2xzKHNvdXJjZSwgb2JqZWN0KSB7XG4gICAgICByZXR1cm4gY29weU9iamVjdChzb3VyY2UsIGdldFN5bWJvbHMoc291cmNlKSwgb2JqZWN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgb3duIGFuZCBpbmhlcml0ZWQgc3ltYm9scyBvZiBgc291cmNlYCB0byBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IHRvIGNvcHkgc3ltYm9scyBmcm9tLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0PXt9XSBUaGUgb2JqZWN0IHRvIGNvcHkgc3ltYm9scyB0by5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvcHlTeW1ib2xzSW4oc291cmNlLCBvYmplY3QpIHtcbiAgICAgIHJldHVybiBjb3B5T2JqZWN0KHNvdXJjZSwgZ2V0U3ltYm9sc0luKHNvdXJjZSksIG9iamVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGxpa2UgYF8uZ3JvdXBCeWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlciBUaGUgZnVuY3Rpb24gdG8gc2V0IGFjY3VtdWxhdG9yIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaW5pdGlhbGl6ZXJdIFRoZSBhY2N1bXVsYXRvciBvYmplY3QgaW5pdGlhbGl6ZXIuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWdncmVnYXRvciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVBZ2dyZWdhdG9yKHNldHRlciwgaW5pdGlhbGl6ZXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgICAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheUFnZ3JlZ2F0b3IgOiBiYXNlQWdncmVnYXRvcixcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gaW5pdGlhbGl6ZXIgPyBpbml0aWFsaXplcigpIDoge307XG5cbiAgICAgICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbiwgc2V0dGVyLCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgMiksIGFjY3VtdWxhdG9yKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGxpa2UgYF8uYXNzaWduYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYXNzaWduZXIgVGhlIGZ1bmN0aW9uIHRvIGFzc2lnbiB2YWx1ZXMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYXNzaWduZXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQXNzaWduZXIoYXNzaWduZXIpIHtcbiAgICAgIHJldHVybiBiYXNlUmVzdChmdW5jdGlvbihvYmplY3QsIHNvdXJjZXMpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBzb3VyY2VzLmxlbmd0aCxcbiAgICAgICAgICAgIGN1c3RvbWl6ZXIgPSBsZW5ndGggPiAxID8gc291cmNlc1tsZW5ndGggLSAxXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGd1YXJkID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbMl0gOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgY3VzdG9taXplciA9IChhc3NpZ25lci5sZW5ndGggPiAzICYmIHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbicpXG4gICAgICAgICAgPyAobGVuZ3RoLS0sIGN1c3RvbWl6ZXIpXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHNvdXJjZXNbMF0sIHNvdXJjZXNbMV0sIGd1YXJkKSkge1xuICAgICAgICAgIGN1c3RvbWl6ZXIgPSBsZW5ndGggPCAzID8gdW5kZWZpbmVkIDogY3VzdG9taXplcjtcbiAgICAgICAgICBsZW5ndGggPSAxO1xuICAgICAgICB9XG4gICAgICAgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICBhc3NpZ25lcihvYmplY3QsIHNvdXJjZSwgaW5kZXgsIGN1c3RvbWl6ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBiYXNlRWFjaGAgb3IgYGJhc2VFYWNoUmlnaHRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGEgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUJhc2VFYWNoKGVhY2hGdW5jLCBmcm9tUmlnaHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgICAgICBpZiAoY29sbGVjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkge1xuICAgICAgICAgIHJldHVybiBlYWNoRnVuYyhjb2xsZWN0aW9uLCBpdGVyYXRlZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgICAgaW5kZXggPSBmcm9tUmlnaHQgPyBsZW5ndGggOiAtMSxcbiAgICAgICAgICAgIGl0ZXJhYmxlID0gT2JqZWN0KGNvbGxlY3Rpb24pO1xuXG4gICAgICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGJhc2UgZnVuY3Rpb24gZm9yIG1ldGhvZHMgbGlrZSBgXy5mb3JJbmAgYW5kIGBfLmZvck93bmAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzRnVuYykge1xuICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIGl0ZXJhYmxlID0gT2JqZWN0KG9iamVjdCksXG4gICAgICAgICAgICBwcm9wcyA9IGtleXNGdW5jKG9iamVjdCksXG4gICAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgICAgdmFyIGtleSA9IHByb3BzW2Zyb21SaWdodCA/IGxlbmd0aCA6ICsraW5kZXhdO1xuICAgICAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtrZXldLCBrZXksIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3cmFwcyBgZnVuY2AgdG8gaW52b2tlIGl0IHdpdGggdGhlIG9wdGlvbmFsIGB0aGlzYFxuICAgICAqIGJpbmRpbmcgb2YgYHRoaXNBcmdgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGNyZWF0ZVdyYXBgIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUJpbmQoZnVuYywgYml0bWFzaywgdGhpc0FyZykge1xuICAgICAgdmFyIGlzQmluZCA9IGJpdG1hc2sgJiBXUkFQX0JJTkRfRkxBRyxcbiAgICAgICAgICBDdG9yID0gY3JlYXRlQ3RvcihmdW5jKTtcblxuICAgICAgZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICAgICAgdmFyIGZuID0gKHRoaXMgJiYgdGhpcyAhPT0gcm9vdCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcikgPyBDdG9yIDogZnVuYztcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGlzQmluZCA/IHRoaXNBcmcgOiB0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGxpa2UgYF8ubG93ZXJGaXJzdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIFRoZSBuYW1lIG9mIHRoZSBgU3RyaW5nYCBjYXNlIG1ldGhvZCB0byB1c2UuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY2FzZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDYXNlRmlyc3QobWV0aG9kTmFtZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuXG4gICAgICAgIHZhciBzdHJTeW1ib2xzID0gaGFzVW5pY29kZShzdHJpbmcpXG4gICAgICAgICAgPyBzdHJpbmdUb0FycmF5KHN0cmluZylcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICB2YXIgY2hyID0gc3RyU3ltYm9sc1xuICAgICAgICAgID8gc3RyU3ltYm9sc1swXVxuICAgICAgICAgIDogc3RyaW5nLmNoYXJBdCgwKTtcblxuICAgICAgICB2YXIgdHJhaWxpbmcgPSBzdHJTeW1ib2xzXG4gICAgICAgICAgPyBjYXN0U2xpY2Uoc3RyU3ltYm9scywgMSkuam9pbignJylcbiAgICAgICAgICA6IHN0cmluZy5zbGljZSgxKTtcblxuICAgICAgICByZXR1cm4gY2hyW21ldGhvZE5hbWVdKCkgKyB0cmFpbGluZztcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGxpa2UgYF8uY2FtZWxDYXNlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGNvbWJpbmUgZWFjaCB3b3JkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNvbXBvdW5kZXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQ29tcG91bmRlcihjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgICByZXR1cm4gYXJyYXlSZWR1Y2Uod29yZHMoZGVidXJyKHN0cmluZykucmVwbGFjZShyZUFwb3MsICcnKSksIGNhbGxiYWNrLCAnJyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHByb2R1Y2VzIGFuIGluc3RhbmNlIG9mIGBDdG9yYCByZWdhcmRsZXNzIG9mXG4gICAgICogd2hldGhlciBpdCB3YXMgaW52b2tlZCBhcyBwYXJ0IG9mIGEgYG5ld2AgZXhwcmVzc2lvbiBvciBieSBgY2FsbGAgb3IgYGFwcGx5YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gQ3RvciBUaGUgY29uc3RydWN0b3IgdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUN0b3IoQ3Rvcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBVc2UgYSBgc3dpdGNoYCBzdGF0ZW1lbnQgdG8gd29yayB3aXRoIGNsYXNzIGNvbnN0cnVjdG9ycy4gU2VlXG4gICAgICAgIC8vIGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtZnVuY3Rpb24tb2JqZWN0cy1jYWxsLXRoaXNhcmd1bWVudC1hcmd1bWVudHNsaXN0XG4gICAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IEN0b3I7XG4gICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSk7XG4gICAgICAgICAgY2FzZSAyOiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgY2FzZSA0OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7XG4gICAgICAgICAgY2FzZSA1OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSk7XG4gICAgICAgICAgY2FzZSA2OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSwgYXJnc1s1XSk7XG4gICAgICAgICAgY2FzZSA3OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSwgYXJnc1s1XSwgYXJnc1s2XSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNCaW5kaW5nID0gYmFzZUNyZWF0ZShDdG9yLnByb3RvdHlwZSksXG4gICAgICAgICAgICByZXN1bHQgPSBDdG9yLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzKTtcblxuICAgICAgICAvLyBNaW1pYyB0aGUgY29uc3RydWN0b3IncyBgcmV0dXJuYCBiZWhhdmlvci5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDEzLjIuMiBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgICByZXR1cm4gaXNPYmplY3QocmVzdWx0KSA/IHJlc3VsdCA6IHRoaXNCaW5kaW5nO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3cmFwcyBgZnVuY2AgdG8gZW5hYmxlIGN1cnJ5aW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGNyZWF0ZVdyYXBgIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFyaXR5IFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgd3JhcHBlZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDdXJyeShmdW5jLCBiaXRtYXNrLCBhcml0eSkge1xuICAgICAgdmFyIEN0b3IgPSBjcmVhdGVDdG9yKGZ1bmMpO1xuXG4gICAgICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGFyZ3MgPSBBcnJheShsZW5ndGgpLFxuICAgICAgICAgICAgaW5kZXggPSBsZW5ndGgsXG4gICAgICAgICAgICBwbGFjZWhvbGRlciA9IGdldEhvbGRlcih3cmFwcGVyKTtcblxuICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgIGFyZ3NbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaG9sZGVycyA9IChsZW5ndGggPCAzICYmIGFyZ3NbMF0gIT09IHBsYWNlaG9sZGVyICYmIGFyZ3NbbGVuZ3RoIC0gMV0gIT09IHBsYWNlaG9sZGVyKVxuICAgICAgICAgID8gW11cbiAgICAgICAgICA6IHJlcGxhY2VIb2xkZXJzKGFyZ3MsIHBsYWNlaG9sZGVyKTtcblxuICAgICAgICBsZW5ndGggLT0gaG9sZGVycy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGggPCBhcml0eSkge1xuICAgICAgICAgIHJldHVybiBjcmVhdGVSZWN1cnJ5KFxuICAgICAgICAgICAgZnVuYywgYml0bWFzaywgY3JlYXRlSHlicmlkLCB3cmFwcGVyLnBsYWNlaG9sZGVyLCB1bmRlZmluZWQsXG4gICAgICAgICAgICBhcmdzLCBob2xkZXJzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJpdHkgLSBsZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbiA9ICh0aGlzICYmIHRoaXMgIT09IHJvb3QgJiYgdGhpcyBpbnN0YW5jZW9mIHdyYXBwZXIpID8gQ3RvciA6IGZ1bmM7XG4gICAgICAgIHJldHVybiBhcHBseShmbiwgdGhpcywgYXJncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uZmluZGAgb3IgYF8uZmluZExhc3RgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmaW5kSW5kZXhGdW5jIFRoZSBmdW5jdGlvbiB0byBmaW5kIHRoZSBjb2xsZWN0aW9uIGluZGV4LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZpbmQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRmluZChmaW5kSW5kZXhGdW5jKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgcHJlZGljYXRlLCBmcm9tSW5kZXgpIHtcbiAgICAgICAgdmFyIGl0ZXJhYmxlID0gT2JqZWN0KGNvbGxlY3Rpb24pO1xuICAgICAgICBpZiAoIWlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgdmFyIGl0ZXJhdGVlID0gZ2V0SXRlcmF0ZWUocHJlZGljYXRlLCAzKTtcbiAgICAgICAgICBjb2xsZWN0aW9uID0ga2V5cyhjb2xsZWN0aW9uKTtcbiAgICAgICAgICBwcmVkaWNhdGUgPSBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIGl0ZXJhdGVlKGl0ZXJhYmxlW2tleV0sIGtleSwgaXRlcmFibGUpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRleCA9IGZpbmRJbmRleEZ1bmMoY29sbGVjdGlvbiwgcHJlZGljYXRlLCBmcm9tSW5kZXgpO1xuICAgICAgICByZXR1cm4gaW5kZXggPiAtMSA/IGl0ZXJhYmxlW2l0ZXJhdGVlID8gY29sbGVjdGlvbltpbmRleF0gOiBpbmRleF0gOiB1bmRlZmluZWQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5mbG93YCBvciBgXy5mbG93UmlnaHRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmbG93IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUZsb3coZnJvbVJpZ2h0KSB7XG4gICAgICByZXR1cm4gZmxhdFJlc3QoZnVuY3Rpb24oZnVuY3MpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGZ1bmNzLmxlbmd0aCxcbiAgICAgICAgICAgIGluZGV4ID0gbGVuZ3RoLFxuICAgICAgICAgICAgcHJlcmVxID0gTG9kYXNoV3JhcHBlci5wcm90b3R5cGUudGhydTtcblxuICAgICAgICBpZiAoZnJvbVJpZ2h0KSB7XG4gICAgICAgICAgZnVuY3MucmV2ZXJzZSgpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgdmFyIGZ1bmMgPSBmdW5jc1tpbmRleF07XG4gICAgICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHByZXJlcSAmJiAhd3JhcHBlciAmJiBnZXRGdW5jTmFtZShmdW5jKSA9PSAnd3JhcHBlcicpIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gbmV3IExvZGFzaFdyYXBwZXIoW10sIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbmRleCA9IHdyYXBwZXIgPyBpbmRleCA6IGxlbmd0aDtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBmdW5jID0gZnVuY3NbaW5kZXhdO1xuXG4gICAgICAgICAgdmFyIGZ1bmNOYW1lID0gZ2V0RnVuY05hbWUoZnVuYyksXG4gICAgICAgICAgICAgIGRhdGEgPSBmdW5jTmFtZSA9PSAnd3JhcHBlcicgPyBnZXREYXRhKGZ1bmMpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgaWYgKGRhdGEgJiYgaXNMYXppYWJsZShkYXRhWzBdKSAmJlxuICAgICAgICAgICAgICAgIGRhdGFbMV0gPT0gKFdSQVBfQVJZX0ZMQUcgfCBXUkFQX0NVUlJZX0ZMQUcgfCBXUkFQX1BBUlRJQUxfRkxBRyB8IFdSQVBfUkVBUkdfRkxBRykgJiZcbiAgICAgICAgICAgICAgICAhZGF0YVs0XS5sZW5ndGggJiYgZGF0YVs5XSA9PSAxXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgd3JhcHBlciA9IHdyYXBwZXJbZ2V0RnVuY05hbWUoZGF0YVswXSldLmFwcGx5KHdyYXBwZXIsIGRhdGFbM10pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3cmFwcGVyID0gKGZ1bmMubGVuZ3RoID09IDEgJiYgaXNMYXppYWJsZShmdW5jKSlcbiAgICAgICAgICAgICAgPyB3cmFwcGVyW2Z1bmNOYW1lXSgpXG4gICAgICAgICAgICAgIDogd3JhcHBlci50aHJ1KGZ1bmMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgICAgIHZhbHVlID0gYXJnc1swXTtcblxuICAgICAgICAgIGlmICh3cmFwcGVyICYmIGFyZ3MubGVuZ3RoID09IDEgJiYgaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB3cmFwcGVyLnBsYW50KHZhbHVlKS52YWx1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICAgICAgICByZXN1bHQgPSBsZW5ndGggPyBmdW5jc1tpbmRleF0uYXBwbHkodGhpcywgYXJncykgOiB2YWx1ZTtcblxuICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jc1tpbmRleF0uY2FsbCh0aGlzLCByZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIHRvIGludm9rZSBpdCB3aXRoIG9wdGlvbmFsIGB0aGlzYFxuICAgICAqIGJpbmRpbmcgb2YgYHRoaXNBcmdgLCBwYXJ0aWFsIGFwcGxpY2F0aW9uLCBhbmQgY3VycnlpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBmdW5jIFRoZSBmdW5jdGlvbiBvciBtZXRob2QgbmFtZSB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGNyZWF0ZVdyYXBgIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gcHJlcGVuZCB0byB0aG9zZSBwcm92aWRlZCB0b1xuICAgICAqICB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtob2xkZXJzXSBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc1JpZ2h0XSBUaGUgYXJndW1lbnRzIHRvIGFwcGVuZCB0byB0aG9zZSBwcm92aWRlZFxuICAgICAqICB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtob2xkZXJzUmlnaHRdIFRoZSBgcGFydGlhbHNSaWdodGAgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbYXJnUG9zXSBUaGUgYXJndW1lbnQgcG9zaXRpb25zIG9mIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcnldIFRoZSBhcml0eSBjYXAgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHldIFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgd3JhcHBlZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVIeWJyaWQoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIHBhcnRpYWxzUmlnaHQsIGhvbGRlcnNSaWdodCwgYXJnUG9zLCBhcnksIGFyaXR5KSB7XG4gICAgICB2YXIgaXNBcnkgPSBiaXRtYXNrICYgV1JBUF9BUllfRkxBRyxcbiAgICAgICAgICBpc0JpbmQgPSBiaXRtYXNrICYgV1JBUF9CSU5EX0ZMQUcsXG4gICAgICAgICAgaXNCaW5kS2V5ID0gYml0bWFzayAmIFdSQVBfQklORF9LRVlfRkxBRyxcbiAgICAgICAgICBpc0N1cnJpZWQgPSBiaXRtYXNrICYgKFdSQVBfQ1VSUllfRkxBRyB8IFdSQVBfQ1VSUllfUklHSFRfRkxBRyksXG4gICAgICAgICAgaXNGbGlwID0gYml0bWFzayAmIFdSQVBfRkxJUF9GTEFHLFxuICAgICAgICAgIEN0b3IgPSBpc0JpbmRLZXkgPyB1bmRlZmluZWQgOiBjcmVhdGVDdG9yKGZ1bmMpO1xuXG4gICAgICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGFyZ3MgPSBBcnJheShsZW5ndGgpLFxuICAgICAgICAgICAgaW5kZXggPSBsZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgICBhcmdzW2luZGV4XSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ3VycmllZCkge1xuICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IGdldEhvbGRlcih3cmFwcGVyKSxcbiAgICAgICAgICAgICAgaG9sZGVyc0NvdW50ID0gY291bnRIb2xkZXJzKGFyZ3MsIHBsYWNlaG9sZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydGlhbHMpIHtcbiAgICAgICAgICBhcmdzID0gY29tcG9zZUFyZ3MoYXJncywgcGFydGlhbHMsIGhvbGRlcnMsIGlzQ3VycmllZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRpYWxzUmlnaHQpIHtcbiAgICAgICAgICBhcmdzID0gY29tcG9zZUFyZ3NSaWdodChhcmdzLCBwYXJ0aWFsc1JpZ2h0LCBob2xkZXJzUmlnaHQsIGlzQ3VycmllZCk7XG4gICAgICAgIH1cbiAgICAgICAgbGVuZ3RoIC09IGhvbGRlcnNDb3VudDtcbiAgICAgICAgaWYgKGlzQ3VycmllZCAmJiBsZW5ndGggPCBhcml0eSkge1xuICAgICAgICAgIHZhciBuZXdIb2xkZXJzID0gcmVwbGFjZUhvbGRlcnMoYXJncywgcGxhY2Vob2xkZXIpO1xuICAgICAgICAgIHJldHVybiBjcmVhdGVSZWN1cnJ5KFxuICAgICAgICAgICAgZnVuYywgYml0bWFzaywgY3JlYXRlSHlicmlkLCB3cmFwcGVyLnBsYWNlaG9sZGVyLCB0aGlzQXJnLFxuICAgICAgICAgICAgYXJncywgbmV3SG9sZGVycywgYXJnUG9zLCBhcnksIGFyaXR5IC0gbGVuZ3RoXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhpc0JpbmRpbmcgPSBpc0JpbmQgPyB0aGlzQXJnIDogdGhpcyxcbiAgICAgICAgICAgIGZuID0gaXNCaW5kS2V5ID8gdGhpc0JpbmRpbmdbZnVuY10gOiBmdW5jO1xuXG4gICAgICAgIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuICAgICAgICBpZiAoYXJnUG9zKSB7XG4gICAgICAgICAgYXJncyA9IHJlb3JkZXIoYXJncywgYXJnUG9zKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0ZsaXAgJiYgbGVuZ3RoID4gMSkge1xuICAgICAgICAgIGFyZ3MucmV2ZXJzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FyeSAmJiBhcnkgPCBsZW5ndGgpIHtcbiAgICAgICAgICBhcmdzLmxlbmd0aCA9IGFyeTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcyAmJiB0aGlzICE9PSByb290ICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyKSB7XG4gICAgICAgICAgZm4gPSBDdG9yIHx8IGNyZWF0ZUN0b3IoZm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gbGlrZSBgXy5pbnZlcnRCeWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlciBUaGUgZnVuY3Rpb24gdG8gc2V0IGFjY3VtdWxhdG9yIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0b0l0ZXJhdGVlIFRoZSBmdW5jdGlvbiB0byByZXNvbHZlIGl0ZXJhdGVlcy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBpbnZlcnRlciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVJbnZlcnRlcihzZXR0ZXIsIHRvSXRlcmF0ZWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGl0ZXJhdGVlKSB7XG4gICAgICAgIHJldHVybiBiYXNlSW52ZXJ0ZXIob2JqZWN0LCBzZXR0ZXIsIHRvSXRlcmF0ZWUoaXRlcmF0ZWUpLCB7fSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIGEgbWF0aGVtYXRpY2FsIG9wZXJhdGlvbiBvbiB0d28gdmFsdWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcGVyYXRvciBUaGUgZnVuY3Rpb24gdG8gcGVyZm9ybSB0aGUgb3BlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGVmYXVsdFZhbHVlXSBUaGUgdmFsdWUgdXNlZCBmb3IgYHVuZGVmaW5lZGAgYXJndW1lbnRzLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1hdGhlbWF0aWNhbCBvcGVyYXRpb24gZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlTWF0aE9wZXJhdGlvbihvcGVyYXRvciwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIG90aGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG90aGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBvdGhlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCB0eXBlb2Ygb3RoZXIgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhbHVlID0gYmFzZVRvU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICAgIG90aGVyID0gYmFzZVRvU3RyaW5nKG90aGVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBiYXNlVG9OdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgb3RoZXIgPSBiYXNlVG9OdW1iZXIob3RoZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQgPSBvcGVyYXRvcih2YWx1ZSwgb3RoZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiBsaWtlIGBfLm92ZXJgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhcnJheUZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBpdGVyYXRlZXMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgb3ZlciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVPdmVyKGFycmF5RnVuYykge1xuICAgICAgcmV0dXJuIGZsYXRSZXN0KGZ1bmN0aW9uKGl0ZXJhdGVlcykge1xuICAgICAgICBpdGVyYXRlZXMgPSBhcnJheU1hcChpdGVyYXRlZXMsIGJhc2VVbmFyeShnZXRJdGVyYXRlZSgpKSk7XG4gICAgICAgIHJldHVybiBiYXNlUmVzdChmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgdmFyIHRoaXNBcmcgPSB0aGlzO1xuICAgICAgICAgIHJldHVybiBhcnJheUZ1bmMoaXRlcmF0ZWVzLCBmdW5jdGlvbihpdGVyYXRlZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFwcGx5KGl0ZXJhdGVlLCB0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRoZSBwYWRkaW5nIGZvciBgc3RyaW5nYCBiYXNlZCBvbiBgbGVuZ3RoYC4gVGhlIGBjaGFyc2Agc3RyaW5nXG4gICAgICogaXMgdHJ1bmNhdGVkIGlmIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBleGNlZWRzIGBsZW5ndGhgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIFRoZSBwYWRkaW5nIGxlbmd0aC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NoYXJzPScgJ10gVGhlIHN0cmluZyB1c2VkIGFzIHBhZGRpbmcuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcGFkZGluZyBmb3IgYHN0cmluZ2AuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUGFkZGluZyhsZW5ndGgsIGNoYXJzKSB7XG4gICAgICBjaGFycyA9IGNoYXJzID09PSB1bmRlZmluZWQgPyAnICcgOiBiYXNlVG9TdHJpbmcoY2hhcnMpO1xuXG4gICAgICB2YXIgY2hhcnNMZW5ndGggPSBjaGFycy5sZW5ndGg7XG4gICAgICBpZiAoY2hhcnNMZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiBjaGFyc0xlbmd0aCA/IGJhc2VSZXBlYXQoY2hhcnMsIGxlbmd0aCkgOiBjaGFycztcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSBiYXNlUmVwZWF0KGNoYXJzLCBuYXRpdmVDZWlsKGxlbmd0aCAvIHN0cmluZ1NpemUoY2hhcnMpKSk7XG4gICAgICByZXR1cm4gaGFzVW5pY29kZShjaGFycylcbiAgICAgICAgPyBjYXN0U2xpY2Uoc3RyaW5nVG9BcnJheShyZXN1bHQpLCAwLCBsZW5ndGgpLmpvaW4oJycpXG4gICAgICAgIDogcmVzdWx0LnNsaWNlKDAsIGxlbmd0aCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIHRvIGludm9rZSBpdCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZ1xuICAgICAqIG9mIGB0aGlzQXJnYCBhbmQgYHBhcnRpYWxzYCBwcmVwZW5kZWQgdG8gdGhlIGFyZ3VtZW50cyBpdCByZWNlaXZlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBjcmVhdGVXcmFwYCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhcnRpYWxzIFRoZSBhcmd1bWVudHMgdG8gcHJlcGVuZCB0byB0aG9zZSBwcm92aWRlZCB0b1xuICAgICAqICB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHdyYXBwZWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUGFydGlhbChmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBwYXJ0aWFscykge1xuICAgICAgdmFyIGlzQmluZCA9IGJpdG1hc2sgJiBXUkFQX0JJTkRfRkxBRyxcbiAgICAgICAgICBDdG9yID0gY3JlYXRlQ3RvcihmdW5jKTtcblxuICAgICAgZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICAgICAgdmFyIGFyZ3NJbmRleCA9IC0xLFxuICAgICAgICAgICAgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgICAgICBsZWZ0SW5kZXggPSAtMSxcbiAgICAgICAgICAgIGxlZnRMZW5ndGggPSBwYXJ0aWFscy5sZW5ndGgsXG4gICAgICAgICAgICBhcmdzID0gQXJyYXkobGVmdExlbmd0aCArIGFyZ3NMZW5ndGgpLFxuICAgICAgICAgICAgZm4gPSAodGhpcyAmJiB0aGlzICE9PSByb290ICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyKSA/IEN0b3IgOiBmdW5jO1xuXG4gICAgICAgIHdoaWxlICgrK2xlZnRJbmRleCA8IGxlZnRMZW5ndGgpIHtcbiAgICAgICAgICBhcmdzW2xlZnRJbmRleF0gPSBwYXJ0aWFsc1tsZWZ0SW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChhcmdzTGVuZ3RoLS0pIHtcbiAgICAgICAgICBhcmdzW2xlZnRJbmRleCsrXSA9IGFyZ3VtZW50c1srK2FyZ3NJbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFwcGx5KGZuLCBpc0JpbmQgPyB0aGlzQXJnIDogdGhpcywgYXJncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8ucmFuZ2VgIG9yIGBfLnJhbmdlUmlnaHRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByYW5nZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVSYW5nZShmcm9tUmlnaHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzdGFydCwgZW5kLCBzdGVwKSB7XG4gICAgICAgIGlmIChzdGVwICYmIHR5cGVvZiBzdGVwICE9ICdudW1iZXInICYmIGlzSXRlcmF0ZWVDYWxsKHN0YXJ0LCBlbmQsIHN0ZXApKSB7XG4gICAgICAgICAgZW5kID0gc3RlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBFbnN1cmUgdGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG4gICAgICAgIHN0YXJ0ID0gdG9GaW5pdGUoc3RhcnQpO1xuICAgICAgICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBlbmQgPSBzdGFydDtcbiAgICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW5kID0gdG9GaW5pdGUoZW5kKTtcbiAgICAgICAgfVxuICAgICAgICBzdGVwID0gc3RlcCA9PT0gdW5kZWZpbmVkID8gKHN0YXJ0IDwgZW5kID8gMSA6IC0xKSA6IHRvRmluaXRlKHN0ZXApO1xuICAgICAgICByZXR1cm4gYmFzZVJhbmdlKHN0YXJ0LCBlbmQsIHN0ZXAsIGZyb21SaWdodCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIGEgcmVsYXRpb25hbCBvcGVyYXRpb24gb24gdHdvIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3BlcmF0b3IgVGhlIGZ1bmN0aW9uIHRvIHBlcmZvcm0gdGhlIG9wZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZWxhdGlvbmFsIG9wZXJhdGlvbiBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVSZWxhdGlvbmFsT3BlcmF0aW9uKG9wZXJhdG9yKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICAgIGlmICghKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyAmJiB0eXBlb2Ygb3RoZXIgPT0gJ3N0cmluZycpKSB7XG4gICAgICAgICAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG4gICAgICAgICAgb3RoZXIgPSB0b051bWJlcihvdGhlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wZXJhdG9yKHZhbHVlLCBvdGhlcik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdyYXBzIGBmdW5jYCB0byBjb250aW51ZSBjdXJyeWluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBjcmVhdGVXcmFwYCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdyYXBGdW5jIFRoZSBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGBmdW5jYCB3cmFwcGVyLlxuICAgICAqIEBwYXJhbSB7Kn0gcGxhY2Vob2xkZXIgVGhlIHBsYWNlaG9sZGVyIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3BhcnRpYWxzXSBUaGUgYXJndW1lbnRzIHRvIHByZXBlbmQgdG8gdGhvc2UgcHJvdmlkZWQgdG9cbiAgICAgKiAgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbaG9sZGVyc10gVGhlIGBwYXJ0aWFsc2AgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbYXJnUG9zXSBUaGUgYXJndW1lbnQgcG9zaXRpb25zIG9mIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcnldIFRoZSBhcml0eSBjYXAgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHldIFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgd3JhcHBlZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVSZWN1cnJ5KGZ1bmMsIGJpdG1hc2ssIHdyYXBGdW5jLCBwbGFjZWhvbGRlciwgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIGFyZ1BvcywgYXJ5LCBhcml0eSkge1xuICAgICAgdmFyIGlzQ3VycnkgPSBiaXRtYXNrICYgV1JBUF9DVVJSWV9GTEFHLFxuICAgICAgICAgIG5ld0hvbGRlcnMgPSBpc0N1cnJ5ID8gaG9sZGVycyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBuZXdIb2xkZXJzUmlnaHQgPSBpc0N1cnJ5ID8gdW5kZWZpbmVkIDogaG9sZGVycyxcbiAgICAgICAgICBuZXdQYXJ0aWFscyA9IGlzQ3VycnkgPyBwYXJ0aWFscyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBuZXdQYXJ0aWFsc1JpZ2h0ID0gaXNDdXJyeSA/IHVuZGVmaW5lZCA6IHBhcnRpYWxzO1xuXG4gICAgICBiaXRtYXNrIHw9IChpc0N1cnJ5ID8gV1JBUF9QQVJUSUFMX0ZMQUcgOiBXUkFQX1BBUlRJQUxfUklHSFRfRkxBRyk7XG4gICAgICBiaXRtYXNrICY9IH4oaXNDdXJyeSA/IFdSQVBfUEFSVElBTF9SSUdIVF9GTEFHIDogV1JBUF9QQVJUSUFMX0ZMQUcpO1xuXG4gICAgICBpZiAoIShiaXRtYXNrICYgV1JBUF9DVVJSWV9CT1VORF9GTEFHKSkge1xuICAgICAgICBiaXRtYXNrICY9IH4oV1JBUF9CSU5EX0ZMQUcgfCBXUkFQX0JJTkRfS0VZX0ZMQUcpO1xuICAgICAgfVxuICAgICAgdmFyIG5ld0RhdGEgPSBbXG4gICAgICAgIGZ1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIG5ld1BhcnRpYWxzLCBuZXdIb2xkZXJzLCBuZXdQYXJ0aWFsc1JpZ2h0LFxuICAgICAgICBuZXdIb2xkZXJzUmlnaHQsIGFyZ1BvcywgYXJ5LCBhcml0eVxuICAgICAgXTtcblxuICAgICAgdmFyIHJlc3VsdCA9IHdyYXBGdW5jLmFwcGx5KHVuZGVmaW5lZCwgbmV3RGF0YSk7XG4gICAgICBpZiAoaXNMYXppYWJsZShmdW5jKSkge1xuICAgICAgICBzZXREYXRhKHJlc3VsdCwgbmV3RGF0YSk7XG4gICAgICB9XG4gICAgICByZXN1bHQucGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlcjtcbiAgICAgIHJldHVybiBzZXRXcmFwVG9TdHJpbmcocmVzdWx0LCBmdW5jLCBiaXRtYXNrKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gbGlrZSBgXy5yb3VuZGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIFRoZSBuYW1lIG9mIHRoZSBgTWF0aGAgbWV0aG9kIHRvIHVzZSB3aGVuIHJvdW5kaW5nLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJvdW5kIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVJvdW5kKG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gTWF0aFttZXRob2ROYW1lXTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihudW1iZXIsIHByZWNpc2lvbikge1xuICAgICAgICBudW1iZXIgPSB0b051bWJlcihudW1iZXIpO1xuICAgICAgICBwcmVjaXNpb24gPSBwcmVjaXNpb24gPT0gbnVsbCA/IDAgOiBuYXRpdmVNaW4odG9JbnRlZ2VyKHByZWNpc2lvbiksIDI5Mik7XG4gICAgICAgIGlmIChwcmVjaXNpb24gJiYgbmF0aXZlSXNGaW5pdGUobnVtYmVyKSkge1xuICAgICAgICAgIC8vIFNoaWZ0IHdpdGggZXhwb25lbnRpYWwgbm90YXRpb24gdG8gYXZvaWQgZmxvYXRpbmctcG9pbnQgaXNzdWVzLlxuICAgICAgICAgIC8vIFNlZSBbTUROXShodHRwczovL21kbi5pby9yb3VuZCNFeGFtcGxlcykgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgICAgICB2YXIgcGFpciA9ICh0b1N0cmluZyhudW1iZXIpICsgJ2UnKS5zcGxpdCgnZScpLFxuICAgICAgICAgICAgICB2YWx1ZSA9IGZ1bmMocGFpclswXSArICdlJyArICgrcGFpclsxXSArIHByZWNpc2lvbikpO1xuXG4gICAgICAgICAgcGFpciA9ICh0b1N0cmluZyh2YWx1ZSkgKyAnZScpLnNwbGl0KCdlJyk7XG4gICAgICAgICAgcmV0dXJuICsocGFpclswXSArICdlJyArICgrcGFpclsxXSAtIHByZWNpc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jKG51bWJlcik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzZXQgb2JqZWN0IG9mIGB2YWx1ZXNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBhZGQgdG8gdGhlIHNldC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgc2V0LlxuICAgICAqL1xuICAgIHZhciBjcmVhdGVTZXQgPSAhKFNldCAmJiAoMSAvIHNldFRvQXJyYXkobmV3IFNldChbLC0wXSkpWzFdKSA9PSBJTkZJTklUWSkgPyBub29wIDogZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgICByZXR1cm4gbmV3IFNldCh2YWx1ZXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8udG9QYWlyc2Agb3IgYF8udG9QYWlyc0luYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBhIGdpdmVuIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYWlycyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVUb1BhaXJzKGtleXNGdW5jKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIHZhciB0YWcgPSBnZXRUYWcob2JqZWN0KTtcbiAgICAgICAgaWYgKHRhZyA9PSBtYXBUYWcpIHtcbiAgICAgICAgICByZXR1cm4gbWFwVG9BcnJheShvYmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YWcgPT0gc2V0VGFnKSB7XG4gICAgICAgICAgcmV0dXJuIHNldFRvUGFpcnMob2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFzZVRvUGFpcnMob2JqZWN0LCBrZXlzRnVuYyhvYmplY3QpKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgZWl0aGVyIGN1cnJpZXMgb3IgaW52b2tlcyBgZnVuY2Agd2l0aCBvcHRpb25hbFxuICAgICAqIGB0aGlzYCBiaW5kaW5nIGFuZCBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBmdW5jIFRoZSBmdW5jdGlvbiBvciBtZXRob2QgbmFtZSB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLlxuICAgICAqICAgIDEgLSBgXy5iaW5kYFxuICAgICAqICAgIDIgLSBgXy5iaW5kS2V5YFxuICAgICAqICAgIDQgLSBgXy5jdXJyeWAgb3IgYF8uY3VycnlSaWdodGAgb2YgYSBib3VuZCBmdW5jdGlvblxuICAgICAqICAgIDggLSBgXy5jdXJyeWBcbiAgICAgKiAgIDE2IC0gYF8uY3VycnlSaWdodGBcbiAgICAgKiAgIDMyIC0gYF8ucGFydGlhbGBcbiAgICAgKiAgIDY0IC0gYF8ucGFydGlhbFJpZ2h0YFxuICAgICAqICAxMjggLSBgXy5yZWFyZ2BcbiAgICAgKiAgMjU2IC0gYF8uYXJ5YFxuICAgICAqICA1MTIgLSBgXy5mbGlwYFxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3BhcnRpYWxzXSBUaGUgYXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtob2xkZXJzXSBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFthcmdQb3NdIFRoZSBhcmd1bWVudCBwb3NpdGlvbnMgb2YgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyeV0gVGhlIGFyaXR5IGNhcCBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVdyYXAoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIGFyZ1BvcywgYXJ5LCBhcml0eSkge1xuICAgICAgdmFyIGlzQmluZEtleSA9IGJpdG1hc2sgJiBXUkFQX0JJTkRfS0VZX0ZMQUc7XG4gICAgICBpZiAoIWlzQmluZEtleSAmJiB0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHZhciBsZW5ndGggPSBwYXJ0aWFscyA/IHBhcnRpYWxzLmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICBiaXRtYXNrICY9IH4oV1JBUF9QQVJUSUFMX0ZMQUcgfCBXUkFQX1BBUlRJQUxfUklHSFRfRkxBRyk7XG4gICAgICAgIHBhcnRpYWxzID0gaG9sZGVycyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGFyeSA9IGFyeSA9PT0gdW5kZWZpbmVkID8gYXJ5IDogbmF0aXZlTWF4KHRvSW50ZWdlcihhcnkpLCAwKTtcbiAgICAgIGFyaXR5ID0gYXJpdHkgPT09IHVuZGVmaW5lZCA/IGFyaXR5IDogdG9JbnRlZ2VyKGFyaXR5KTtcbiAgICAgIGxlbmd0aCAtPSBob2xkZXJzID8gaG9sZGVycy5sZW5ndGggOiAwO1xuXG4gICAgICBpZiAoYml0bWFzayAmIFdSQVBfUEFSVElBTF9SSUdIVF9GTEFHKSB7XG4gICAgICAgIHZhciBwYXJ0aWFsc1JpZ2h0ID0gcGFydGlhbHMsXG4gICAgICAgICAgICBob2xkZXJzUmlnaHQgPSBob2xkZXJzO1xuXG4gICAgICAgIHBhcnRpYWxzID0gaG9sZGVycyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciBkYXRhID0gaXNCaW5kS2V5ID8gdW5kZWZpbmVkIDogZ2V0RGF0YShmdW5jKTtcblxuICAgICAgdmFyIG5ld0RhdGEgPSBbXG4gICAgICAgIGZ1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIHBhcnRpYWxzLCBob2xkZXJzLCBwYXJ0aWFsc1JpZ2h0LCBob2xkZXJzUmlnaHQsXG4gICAgICAgIGFyZ1BvcywgYXJ5LCBhcml0eVxuICAgICAgXTtcblxuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgbWVyZ2VEYXRhKG5ld0RhdGEsIGRhdGEpO1xuICAgICAgfVxuICAgICAgZnVuYyA9IG5ld0RhdGFbMF07XG4gICAgICBiaXRtYXNrID0gbmV3RGF0YVsxXTtcbiAgICAgIHRoaXNBcmcgPSBuZXdEYXRhWzJdO1xuICAgICAgcGFydGlhbHMgPSBuZXdEYXRhWzNdO1xuICAgICAgaG9sZGVycyA9IG5ld0RhdGFbNF07XG4gICAgICBhcml0eSA9IG5ld0RhdGFbOV0gPSBuZXdEYXRhWzldID09PSB1bmRlZmluZWRcbiAgICAgICAgPyAoaXNCaW5kS2V5ID8gMCA6IGZ1bmMubGVuZ3RoKVxuICAgICAgICA6IG5hdGl2ZU1heChuZXdEYXRhWzldIC0gbGVuZ3RoLCAwKTtcblxuICAgICAgaWYgKCFhcml0eSAmJiBiaXRtYXNrICYgKFdSQVBfQ1VSUllfRkxBRyB8IFdSQVBfQ1VSUllfUklHSFRfRkxBRykpIHtcbiAgICAgICAgYml0bWFzayAmPSB+KFdSQVBfQ1VSUllfRkxBRyB8IFdSQVBfQ1VSUllfUklHSFRfRkxBRyk7XG4gICAgICB9XG4gICAgICBpZiAoIWJpdG1hc2sgfHwgYml0bWFzayA9PSBXUkFQX0JJTkRfRkxBRykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY3JlYXRlQmluZChmdW5jLCBiaXRtYXNrLCB0aGlzQXJnKTtcbiAgICAgIH0gZWxzZSBpZiAoYml0bWFzayA9PSBXUkFQX0NVUlJZX0ZMQUcgfHwgYml0bWFzayA9PSBXUkFQX0NVUlJZX1JJR0hUX0ZMQUcpIHtcbiAgICAgICAgcmVzdWx0ID0gY3JlYXRlQ3VycnkoZnVuYywgYml0bWFzaywgYXJpdHkpO1xuICAgICAgfSBlbHNlIGlmICgoYml0bWFzayA9PSBXUkFQX1BBUlRJQUxfRkxBRyB8fCBiaXRtYXNrID09IChXUkFQX0JJTkRfRkxBRyB8IFdSQVBfUEFSVElBTF9GTEFHKSkgJiYgIWhvbGRlcnMubGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdCA9IGNyZWF0ZVBhcnRpYWwoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gY3JlYXRlSHlicmlkLmFwcGx5KHVuZGVmaW5lZCwgbmV3RGF0YSk7XG4gICAgICB9XG4gICAgICB2YXIgc2V0dGVyID0gZGF0YSA/IGJhc2VTZXREYXRhIDogc2V0RGF0YTtcbiAgICAgIHJldHVybiBzZXRXcmFwVG9TdHJpbmcoc2V0dGVyKHJlc3VsdCwgbmV3RGF0YSksIGZ1bmMsIGJpdG1hc2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgYnkgYF8uZGVmYXVsdHNgIHRvIGN1c3RvbWl6ZSBpdHMgYF8uYXNzaWduSW5gIHVzZSB0byBhc3NpZ24gcHJvcGVydGllc1xuICAgICAqIG9mIHNvdXJjZSBvYmplY3RzIHRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QgZm9yIGFsbCBkZXN0aW5hdGlvbiBwcm9wZXJ0aWVzXG4gICAgICogdGhhdCByZXNvbHZlIHRvIGB1bmRlZmluZWRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IG9ialZhbHVlIFRoZSBkZXN0aW5hdGlvbiB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IHNyY1ZhbHVlIFRoZSBzb3VyY2UgdmFsdWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBhc3NpZ24uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgcGFyZW50IG9iamVjdCBvZiBgb2JqVmFsdWVgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB2YWx1ZSB0byBhc3NpZ24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3VzdG9tRGVmYXVsdHNBc3NpZ25JbihvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgIChlcShvYmpWYWx1ZSwgb2JqZWN0UHJvdG9ba2V5XSkgJiYgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSkge1xuICAgICAgICByZXR1cm4gc3JjVmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqVmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZCBieSBgXy5kZWZhdWx0c0RlZXBgIHRvIGN1c3RvbWl6ZSBpdHMgYF8ubWVyZ2VgIHVzZSB0byBtZXJnZSBzb3VyY2VcbiAgICAgKiBvYmplY3RzIGludG8gZGVzdGluYXRpb24gb2JqZWN0cyB0aGF0IGFyZSBwYXNzZWQgdGhydS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBvYmpWYWx1ZSBUaGUgZGVzdGluYXRpb24gdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgc291cmNlIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gbWVyZ2UuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgcGFyZW50IG9iamVjdCBvZiBgb2JqVmFsdWVgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHBhcmVudCBvYmplY3Qgb2YgYHNyY1ZhbHVlYC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSB2YWx1ZXMgYW5kIHRoZWlyIG1lcmdlZFxuICAgICAqICBjb3VudGVycGFydHMuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHZhbHVlIHRvIGFzc2lnbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjdXN0b21EZWZhdWx0c01lcmdlKG9ialZhbHVlLCBzcmNWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSwgc3RhY2spIHtcbiAgICAgIGlmIChpc09iamVjdChvYmpWYWx1ZSkgJiYgaXNPYmplY3Qoc3JjVmFsdWUpKSB7XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IG1lcmdlIG9iamVjdHMgYW5kIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgICBzdGFjay5zZXQoc3JjVmFsdWUsIG9ialZhbHVlKTtcbiAgICAgICAgYmFzZU1lcmdlKG9ialZhbHVlLCBzcmNWYWx1ZSwgdW5kZWZpbmVkLCBjdXN0b21EZWZhdWx0c01lcmdlLCBzdGFjayk7XG4gICAgICAgIHN0YWNrWydkZWxldGUnXShzcmNWYWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqVmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZCBieSBgXy5vbWl0YCB0byBjdXN0b21pemUgaXRzIGBfLmNsb25lRGVlcGAgdXNlIHRvIG9ubHkgY2xvbmUgcGxhaW5cbiAgICAgKiBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgdW5jbG9uZWQgdmFsdWUgb3IgYHVuZGVmaW5lZGAgdG8gZGVmZXIgY2xvbmluZyB0byBgXy5jbG9uZURlZXBgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGN1c3RvbU9taXRDbG9uZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzUGxhaW5PYmplY3QodmFsdWUpID8gdW5kZWZpbmVkIDogdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuICAgICAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgYXJyYXlgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcnJheXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgICAgIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUcsXG4gICAgICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICAgICAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc1BhcnRpYWwgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBDaGVjayB0aGF0IGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICAgICAgdmFyIGFyclN0YWNrZWQgPSBzdGFjay5nZXQoYXJyYXkpO1xuICAgICAgdmFyIG90aFN0YWNrZWQgPSBzdGFjay5nZXQob3RoZXIpO1xuICAgICAgaWYgKGFyclN0YWNrZWQgJiYgb3RoU3RhY2tlZCkge1xuICAgICAgICByZXR1cm4gYXJyU3RhY2tlZCA9PSBvdGhlciAmJiBvdGhTdGFja2VkID09IGFycmF5O1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gdHJ1ZSxcbiAgICAgICAgICBzZWVuID0gKGJpdG1hc2sgJiBDT01QQVJFX1VOT1JERVJFRF9GTEFHKSA/IG5ldyBTZXRDYWNoZSA6IHVuZGVmaW5lZDtcblxuICAgICAgc3RhY2suc2V0KGFycmF5LCBvdGhlcik7XG4gICAgICBzdGFjay5zZXQob3RoZXIsIGFycmF5KTtcblxuICAgICAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICAgICAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcbiAgICAgICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF07XG5cbiAgICAgICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgICAgICB2YXIgY29tcGFyZWQgPSBpc1BhcnRpYWxcbiAgICAgICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgYXJyVmFsdWUsIGluZGV4LCBvdGhlciwgYXJyYXksIHN0YWNrKVxuICAgICAgICAgICAgOiBjdXN0b21pemVyKGFyclZhbHVlLCBvdGhWYWx1ZSwgaW5kZXgsIGFycmF5LCBvdGhlciwgc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wYXJlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKGNvbXBhcmVkKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgICAgaWYgKHNlZW4pIHtcbiAgICAgICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUsIG90aEluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWNoZUhhcyhzZWVuLCBvdGhJbmRleCkgJiZcbiAgICAgICAgICAgICAgICAgICAgKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gc2Vlbi5wdXNoKG90aEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghKFxuICAgICAgICAgICAgICBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHxcbiAgICAgICAgICAgICAgICBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaylcbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3RhY2tbJ2RlbGV0ZSddKGFycmF5KTtcbiAgICAgIHN0YWNrWydkZWxldGUnXShvdGhlcik7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgY29tcGFyaW5nIG9iamVjdHMgb2ZcbiAgICAgKiB0aGUgc2FtZSBgdG9TdHJpbmdUYWdgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjb21wYXJpbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuICAgICAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIGB0b1N0cmluZ1RhZ2Agb2YgdGhlIG9iamVjdHMgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGAgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgICAgIHN3aXRjaCAodGFnKSB7XG4gICAgICAgIGNhc2UgZGF0YVZpZXdUYWc6XG4gICAgICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuICAgICAgICAgICAgICAob2JqZWN0LmJ5dGVPZmZzZXQgIT0gb3RoZXIuYnl0ZU9mZnNldCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb2JqZWN0ID0gb2JqZWN0LmJ1ZmZlcjtcbiAgICAgICAgICBvdGhlciA9IG90aGVyLmJ1ZmZlcjtcblxuICAgICAgICBjYXNlIGFycmF5QnVmZmVyVGFnOlxuICAgICAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcbiAgICAgICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIGNhc2UgYm9vbFRhZzpcbiAgICAgICAgY2FzZSBkYXRlVGFnOlxuICAgICAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgICAgICAvLyBDb2VyY2UgYm9vbGVhbnMgdG8gYDFgIG9yIGAwYCBhbmQgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzLlxuICAgICAgICAgIC8vIEludmFsaWQgZGF0ZXMgYXJlIGNvZXJjZWQgdG8gYE5hTmAuXG4gICAgICAgICAgcmV0dXJuIGVxKCtvYmplY3QsICtvdGhlcik7XG5cbiAgICAgICAgY2FzZSBlcnJvclRhZzpcbiAgICAgICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgICAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzLCBwcmltaXRpdmVzIGFuZCBvYmplY3RzLFxuICAgICAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcbiAgICAgICAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgICAgIHJldHVybiBvYmplY3QgPT0gKG90aGVyICsgJycpO1xuXG4gICAgICAgIGNhc2UgbWFwVGFnOlxuICAgICAgICAgIHZhciBjb252ZXJ0ID0gbWFwVG9BcnJheTtcblxuICAgICAgICBjYXNlIHNldFRhZzpcbiAgICAgICAgICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIENPTVBBUkVfUEFSVElBTF9GTEFHO1xuICAgICAgICAgIGNvbnZlcnQgfHwgKGNvbnZlcnQgPSBzZXRUb0FycmF5KTtcblxuICAgICAgICAgIGlmIChvYmplY3Quc2l6ZSAhPSBvdGhlci5zaXplICYmICFpc1BhcnRpYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICAgICAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gICAgICAgICAgaWYgKHN0YWNrZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiaXRtYXNrIHw9IENPTVBBUkVfVU5PUkRFUkVEX0ZMQUc7XG5cbiAgICAgICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IGVxdWFsQXJyYXlzKGNvbnZlcnQob2JqZWN0KSwgY29udmVydChvdGhlciksIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spO1xuICAgICAgICAgIHN0YWNrWydkZWxldGUnXShvYmplY3QpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICAgICAgY2FzZSBzeW1ib2xUYWc6XG4gICAgICAgICAgaWYgKHN5bWJvbFZhbHVlT2YpIHtcbiAgICAgICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuICAgICAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGAgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgICAgIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUcsXG4gICAgICAgICAgb2JqUHJvcHMgPSBnZXRBbGxLZXlzKG9iamVjdCksXG4gICAgICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuICAgICAgICAgIG90aFByb3BzID0gZ2V0QWxsS2V5cyhvdGhlciksXG4gICAgICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gICAgICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNQYXJ0aWFsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IG9iakxlbmd0aDtcbiAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgICAgIGlmICghKGlzUGFydGlhbCA/IGtleSBpbiBvdGhlciA6IGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsIGtleSkpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBDaGVjayB0aGF0IGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICAgICAgdmFyIG9ialN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTtcbiAgICAgIHZhciBvdGhTdGFja2VkID0gc3RhY2suZ2V0KG90aGVyKTtcbiAgICAgIGlmIChvYmpTdGFja2VkICYmIG90aFN0YWNrZWQpIHtcbiAgICAgICAgcmV0dXJuIG9ialN0YWNrZWQgPT0gb3RoZXIgJiYgb3RoU3RhY2tlZCA9PSBvYmplY3Q7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcbiAgICAgIHN0YWNrLnNldChvdGhlciwgb2JqZWN0KTtcblxuICAgICAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBvYmpMZW5ndGgpIHtcbiAgICAgICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgICAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgICAgIG90aFZhbHVlID0gb3RoZXJba2V5XTtcblxuICAgICAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuICAgICAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBvYmpWYWx1ZSwga2V5LCBvdGhlciwgb2JqZWN0LCBzdGFjaylcbiAgICAgICAgICAgIDogY3VzdG9taXplcihvYmpWYWx1ZSwgb3RoVmFsdWUsIGtleSwgb2JqZWN0LCBvdGhlciwgc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgICBpZiAoIShjb21wYXJlZCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgID8gKG9ialZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykpXG4gICAgICAgICAgICAgIDogY29tcGFyZWRcbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0ICYmICFza2lwQ3Rvcikge1xuICAgICAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3RvcjtcblxuICAgICAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cbiAgICAgICAgaWYgKG9iakN0b3IgIT0gb3RoQ3RvciAmJlxuICAgICAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG4gICAgICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3RhY2tbJ2RlbGV0ZSddKG9iamVjdCk7XG4gICAgICBzdGFja1snZGVsZXRlJ10ob3RoZXIpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VSZXN0YCB3aGljaCBmbGF0dGVucyB0aGUgcmVzdCBhcnJheS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmbGF0UmVzdChmdW5jKSB7XG4gICAgICByZXR1cm4gc2V0VG9TdHJpbmcob3ZlclJlc3QoZnVuYywgdW5kZWZpbmVkLCBmbGF0dGVuKSwgZnVuYyArICcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyBhbmQgc3ltYm9scy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRBbGxLZXlzKG9iamVjdCkge1xuICAgICAgcmV0dXJuIGJhc2VHZXRBbGxLZXlzKG9iamVjdCwga2V5cywgZ2V0U3ltYm9scyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZFxuICAgICAqIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEFsbEtleXNJbihvYmplY3QpIHtcbiAgICAgIHJldHVybiBiYXNlR2V0QWxsS2V5cyhvYmplY3QsIGtleXNJbiwgZ2V0U3ltYm9sc0luKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIG1ldGFkYXRhIGZvciBgZnVuY2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtZXRhZGF0YSBmb3IgYGZ1bmNgLlxuICAgICAqL1xuICAgIHZhciBnZXREYXRhID0gIW1ldGFNYXAgPyBub29wIDogZnVuY3Rpb24oZnVuYykge1xuICAgICAgcmV0dXJuIG1ldGFNYXAuZ2V0KGZ1bmMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBuYW1lIG9mIGBmdW5jYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZnVuY3Rpb24gbmFtZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRGdW5jTmFtZShmdW5jKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gKGZ1bmMubmFtZSArICcnKSxcbiAgICAgICAgICBhcnJheSA9IHJlYWxOYW1lc1tyZXN1bHRdLFxuICAgICAgICAgIGxlbmd0aCA9IGhhc093blByb3BlcnR5LmNhbGwocmVhbE5hbWVzLCByZXN1bHQpID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHZhciBkYXRhID0gYXJyYXlbbGVuZ3RoXSxcbiAgICAgICAgICAgIG90aGVyRnVuYyA9IGRhdGEuZnVuYztcbiAgICAgICAgaWYgKG90aGVyRnVuYyA9PSBudWxsIHx8IG90aGVyRnVuYyA9PSBmdW5jKSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGEubmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhcmd1bWVudCBwbGFjZWhvbGRlciB2YWx1ZSBmb3IgYGZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBwbGFjZWhvbGRlciB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRIb2xkZXIoZnVuYykge1xuICAgICAgdmFyIG9iamVjdCA9IGhhc093blByb3BlcnR5LmNhbGwobG9kYXNoLCAncGxhY2Vob2xkZXInKSA/IGxvZGFzaCA6IGZ1bmM7XG4gICAgICByZXR1cm4gb2JqZWN0LnBsYWNlaG9sZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGFwcHJvcHJpYXRlIFwiaXRlcmF0ZWVcIiBmdW5jdGlvbi4gSWYgYF8uaXRlcmF0ZWVgIGlzIGN1c3RvbWl6ZWQsXG4gICAgICogdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBjdXN0b20gbWV0aG9kLCBvdGhlcndpc2UgaXQgcmV0dXJucyBgYmFzZUl0ZXJhdGVlYC5cbiAgICAgKiBJZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkLCB0aGUgY2hvc2VuIGZ1bmN0aW9uIGlzIGludm9rZWQgd2l0aCB0aGVtIGFuZFxuICAgICAqIGl0cyByZXN1bHQgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gW3ZhbHVlXSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhbiBpdGVyYXRlZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5XSBUaGUgYXJpdHkgb2YgdGhlIGNyZWF0ZWQgaXRlcmF0ZWUuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjaG9zZW4gZnVuY3Rpb24gb3IgaXRzIHJlc3VsdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRJdGVyYXRlZSgpIHtcbiAgICAgIHZhciByZXN1bHQgPSBsb2Rhc2guaXRlcmF0ZWUgfHwgaXRlcmF0ZWU7XG4gICAgICByZXN1bHQgPSByZXN1bHQgPT09IGl0ZXJhdGVlID8gYmFzZUl0ZXJhdGVlIDogcmVzdWx0O1xuICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyByZXN1bHQoYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pIDogcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGRhdGEgZm9yIGBtYXBgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcmVmZXJlbmNlIGtleS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWFwIGRhdGEuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TWFwRGF0YShtYXAsIGtleSkge1xuICAgICAgdmFyIGRhdGEgPSBtYXAuX19kYXRhX187XG4gICAgICByZXR1cm4gaXNLZXlhYmxlKGtleSlcbiAgICAgICAgPyBkYXRhW3R5cGVvZiBrZXkgPT0gJ3N0cmluZycgPyAnc3RyaW5nJyA6ICdoYXNoJ11cbiAgICAgICAgOiBkYXRhLm1hcDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBwcm9wZXJ0eSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbWF0Y2ggZGF0YSBvZiBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRNYXRjaERhdGEob2JqZWN0KSB7XG4gICAgICB2YXIgcmVzdWx0ID0ga2V5cyhvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICB2YXIga2V5ID0gcmVzdWx0W2xlbmd0aF0sXG4gICAgICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG4gICAgICAgIHJlc3VsdFtsZW5ndGhdID0gW2tleSwgdmFsdWUsIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpO1xuICAgICAgcmV0dXJuIGJhc2VJc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VHZXRUYWdgIHdoaWNoIGlnbm9yZXMgYFN5bWJvbC50b1N0cmluZ1RhZ2AgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByYXcgYHRvU3RyaW5nVGFnYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRSYXdUYWcodmFsdWUpIHtcbiAgICAgIHZhciBpc093biA9IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHN5bVRvU3RyaW5nVGFnKSxcbiAgICAgICAgICB0YWcgPSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHVubWFza2VkID0gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIHZhciByZXN1bHQgPSBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgICAgIGlmICh1bm1hc2tlZCkge1xuICAgICAgICBpZiAoaXNPd24pIHtcbiAgICAgICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB0YWc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBzeW1ib2xzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBzeW1ib2xzLlxuICAgICAqL1xuICAgIHZhciBnZXRTeW1ib2xzID0gIW5hdGl2ZUdldFN5bWJvbHMgPyBzdHViQXJyYXkgOiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgICAgIHJldHVybiBhcnJheUZpbHRlcihuYXRpdmVHZXRTeW1ib2xzKG9iamVjdCksIGZ1bmN0aW9uKHN5bWJvbCkge1xuICAgICAgICByZXR1cm4gcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChvYmplY3QsIHN5bWJvbCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGFuZCBpbmhlcml0ZWQgZW51bWVyYWJsZSBzeW1ib2xzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBzeW1ib2xzLlxuICAgICAqL1xuICAgIHZhciBnZXRTeW1ib2xzSW4gPSAhbmF0aXZlR2V0U3ltYm9scyA/IHN0dWJBcnJheSA6IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgd2hpbGUgKG9iamVjdCkge1xuICAgICAgICBhcnJheVB1c2gocmVzdWx0LCBnZXRTeW1ib2xzKG9iamVjdCkpO1xuICAgICAgICBvYmplY3QgPSBnZXRQcm90b3R5cGUob2JqZWN0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGB0b1N0cmluZ1RhZ2Agb2YgYHZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAgICAgKi9cbiAgICB2YXIgZ2V0VGFnID0gYmFzZUdldFRhZztcblxuICAgIC8vIEZhbGxiYWNrIGZvciBkYXRhIHZpZXdzLCBtYXBzLCBzZXRzLCBhbmQgd2VhayBtYXBzIGluIElFIDExIGFuZCBwcm9taXNlcyBpbiBOb2RlLmpzIDwgNi5cbiAgICBpZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG4gICAgICAgIChNYXAgJiYgZ2V0VGFnKG5ldyBNYXApICE9IG1hcFRhZykgfHxcbiAgICAgICAgKFByb21pc2UgJiYgZ2V0VGFnKFByb21pc2UucmVzb2x2ZSgpKSAhPSBwcm9taXNlVGFnKSB8fFxuICAgICAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG4gICAgICAgIChXZWFrTWFwICYmIGdldFRhZyhuZXcgV2Vha01hcCkgIT0gd2Vha01hcFRhZykpIHtcbiAgICAgIGdldFRhZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBiYXNlR2V0VGFnKHZhbHVlKSxcbiAgICAgICAgICAgIEN0b3IgPSByZXN1bHQgPT0gb2JqZWN0VGFnID8gdmFsdWUuY29uc3RydWN0b3IgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdG9yU3RyaW5nID0gQ3RvciA/IHRvU291cmNlKEN0b3IpIDogJyc7XG5cbiAgICAgICAgaWYgKGN0b3JTdHJpbmcpIHtcbiAgICAgICAgICBzd2l0Y2ggKGN0b3JTdHJpbmcpIHtcbiAgICAgICAgICAgIGNhc2UgZGF0YVZpZXdDdG9yU3RyaW5nOiByZXR1cm4gZGF0YVZpZXdUYWc7XG4gICAgICAgICAgICBjYXNlIG1hcEN0b3JTdHJpbmc6IHJldHVybiBtYXBUYWc7XG4gICAgICAgICAgICBjYXNlIHByb21pc2VDdG9yU3RyaW5nOiByZXR1cm4gcHJvbWlzZVRhZztcbiAgICAgICAgICAgIGNhc2Ugc2V0Q3RvclN0cmluZzogcmV0dXJuIHNldFRhZztcbiAgICAgICAgICAgIGNhc2Ugd2Vha01hcEN0b3JTdHJpbmc6IHJldHVybiB3ZWFrTWFwVGFnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB2aWV3LCBhcHBseWluZyBhbnkgYHRyYW5zZm9ybXNgIHRvIHRoZSBgc3RhcnRgIGFuZCBgZW5kYCBwb3NpdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgc3RhcnQgb2YgdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIG9mIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHRyYW5zZm9ybXMgVGhlIHRyYW5zZm9ybWF0aW9ucyB0byBhcHBseSB0byB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBgc3RhcnRgIGFuZCBgZW5kYFxuICAgICAqICBwb3NpdGlvbnMgb2YgdGhlIHZpZXcuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0VmlldyhzdGFydCwgZW5kLCB0cmFuc2Zvcm1zKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSB0cmFuc2Zvcm1zLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB0cmFuc2Zvcm1zW2luZGV4XSxcbiAgICAgICAgICAgIHNpemUgPSBkYXRhLnNpemU7XG5cbiAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdkcm9wJzogICAgICBzdGFydCArPSBzaXplOyBicmVhaztcbiAgICAgICAgICBjYXNlICdkcm9wUmlnaHQnOiBlbmQgLT0gc2l6ZTsgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndGFrZSc6ICAgICAgZW5kID0gbmF0aXZlTWluKGVuZCwgc3RhcnQgKyBzaXplKTsgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndGFrZVJpZ2h0Jzogc3RhcnQgPSBuYXRpdmVNYXgoc3RhcnQsIGVuZCAtIHNpemUpOyBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHsgJ3N0YXJ0Jzogc3RhcnQsICdlbmQnOiBlbmQgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyB3cmFwcGVyIGRldGFpbHMgZnJvbSB0aGUgYHNvdXJjZWAgYm9keSBjb21tZW50LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc291cmNlIFRoZSBzb3VyY2UgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHdyYXBwZXIgZGV0YWlscy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRXcmFwRGV0YWlscyhzb3VyY2UpIHtcbiAgICAgIHZhciBtYXRjaCA9IHNvdXJjZS5tYXRjaChyZVdyYXBEZXRhaWxzKTtcbiAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdLnNwbGl0KHJlU3BsaXREZXRhaWxzKSA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgcGF0aGAgZXhpc3RzIG9uIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFzRnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgcHJvcGVydGllcy5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHBhdGhgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBoYXNGdW5jKSB7XG4gICAgICBwYXRoID0gY2FzdFBhdGgocGF0aCwgb2JqZWN0KTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSB0b0tleShwYXRoW2luZGV4XSk7XG4gICAgICAgIGlmICghKHJlc3VsdCA9IG9iamVjdCAhPSBudWxsICYmIGhhc0Z1bmMob2JqZWN0LCBrZXkpKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIG9iamVjdCA9IG9iamVjdFtrZXldO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdCB8fCArK2luZGV4ICE9IGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgbGVuZ3RoID0gb2JqZWN0ID09IG51bGwgPyAwIDogb2JqZWN0Lmxlbmd0aDtcbiAgICAgIHJldHVybiAhIWxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmIGlzSW5kZXgoa2V5LCBsZW5ndGgpICYmXG4gICAgICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYW4gYXJyYXkgY2xvbmUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGluaXRpYWxpemVkIGNsb25lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRDbG9uZUFycmF5KGFycmF5KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IG5ldyBhcnJheS5jb25zdHJ1Y3RvcihsZW5ndGgpO1xuXG4gICAgICAvLyBBZGQgcHJvcGVydGllcyBhc3NpZ25lZCBieSBgUmVnRXhwI2V4ZWNgLlxuICAgICAgaWYgKGxlbmd0aCAmJiB0eXBlb2YgYXJyYXlbMF0gPT0gJ3N0cmluZycgJiYgaGFzT3duUHJvcGVydHkuY2FsbChhcnJheSwgJ2luZGV4JykpIHtcbiAgICAgICAgcmVzdWx0LmluZGV4ID0gYXJyYXkuaW5kZXg7XG4gICAgICAgIHJlc3VsdC5pbnB1dCA9IGFycmF5LmlucHV0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhbiBvYmplY3QgY2xvbmUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBpbml0aWFsaXplZCBjbG9uZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0Q2xvbmVPYmplY3Qob2JqZWN0KSB7XG4gICAgICByZXR1cm4gKHR5cGVvZiBvYmplY3QuY29uc3RydWN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNQcm90b3R5cGUob2JqZWN0KSlcbiAgICAgICAgPyBiYXNlQ3JlYXRlKGdldFByb3RvdHlwZShvYmplY3QpKVxuICAgICAgICA6IHt9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIG9iamVjdCBjbG9uZSBiYXNlZCBvbiBpdHMgYHRvU3RyaW5nVGFnYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY2xvbmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG4gICAgICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBNYXBgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIGBTZXRgLCBvciBgU3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNsb25lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIGB0b1N0cmluZ1RhZ2Agb2YgdGhlIG9iamVjdCB0byBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXBdIFNwZWNpZnkgYSBkZWVwIGNsb25lLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGluaXRpYWxpemVkIGNsb25lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRDbG9uZUJ5VGFnKG9iamVjdCwgdGFnLCBpc0RlZXApIHtcbiAgICAgIHZhciBDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yO1xuICAgICAgc3dpdGNoICh0YWcpIHtcbiAgICAgICAgY2FzZSBhcnJheUJ1ZmZlclRhZzpcbiAgICAgICAgICByZXR1cm4gY2xvbmVBcnJheUJ1ZmZlcihvYmplY3QpO1xuXG4gICAgICAgIGNhc2UgYm9vbFRhZzpcbiAgICAgICAgY2FzZSBkYXRlVGFnOlxuICAgICAgICAgIHJldHVybiBuZXcgQ3Rvcigrb2JqZWN0KTtcblxuICAgICAgICBjYXNlIGRhdGFWaWV3VGFnOlxuICAgICAgICAgIHJldHVybiBjbG9uZURhdGFWaWV3KG9iamVjdCwgaXNEZWVwKTtcblxuICAgICAgICBjYXNlIGZsb2F0MzJUYWc6IGNhc2UgZmxvYXQ2NFRhZzpcbiAgICAgICAgY2FzZSBpbnQ4VGFnOiBjYXNlIGludDE2VGFnOiBjYXNlIGludDMyVGFnOlxuICAgICAgICBjYXNlIHVpbnQ4VGFnOiBjYXNlIHVpbnQ4Q2xhbXBlZFRhZzogY2FzZSB1aW50MTZUYWc6IGNhc2UgdWludDMyVGFnOlxuICAgICAgICAgIHJldHVybiBjbG9uZVR5cGVkQXJyYXkob2JqZWN0LCBpc0RlZXApO1xuXG4gICAgICAgIGNhc2UgbWFwVGFnOlxuICAgICAgICAgIHJldHVybiBuZXcgQ3RvcjtcblxuICAgICAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgICAgY2FzZSBzdHJpbmdUYWc6XG4gICAgICAgICAgcmV0dXJuIG5ldyBDdG9yKG9iamVjdCk7XG5cbiAgICAgICAgY2FzZSByZWdleHBUYWc6XG4gICAgICAgICAgcmV0dXJuIGNsb25lUmVnRXhwKG9iamVjdCk7XG5cbiAgICAgICAgY2FzZSBzZXRUYWc6XG4gICAgICAgICAgcmV0dXJuIG5ldyBDdG9yO1xuXG4gICAgICAgIGNhc2Ugc3ltYm9sVGFnOlxuICAgICAgICAgIHJldHVybiBjbG9uZVN5bWJvbChvYmplY3QpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc2VydHMgd3JhcHBlciBgZGV0YWlsc2AgaW4gYSBjb21tZW50IGF0IHRoZSB0b3Agb2YgdGhlIGBzb3VyY2VgIGJvZHkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2UgVGhlIHNvdXJjZSB0byBtb2RpZnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBkZXRhaWxzIFRoZSBkZXRhaWxzIHRvIGluc2VydC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBtb2RpZmllZCBzb3VyY2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5zZXJ0V3JhcERldGFpbHMoc291cmNlLCBkZXRhaWxzKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gZGV0YWlscy5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgICAgfVxuICAgICAgdmFyIGxhc3RJbmRleCA9IGxlbmd0aCAtIDE7XG4gICAgICBkZXRhaWxzW2xhc3RJbmRleF0gPSAobGVuZ3RoID4gMSA/ICcmICcgOiAnJykgKyBkZXRhaWxzW2xhc3RJbmRleF07XG4gICAgICBkZXRhaWxzID0gZGV0YWlscy5qb2luKGxlbmd0aCA+IDIgPyAnLCAnIDogJyAnKTtcbiAgICAgIHJldHVybiBzb3VyY2UucmVwbGFjZShyZVdyYXBDb21tZW50LCAne1xcbi8qIFt3cmFwcGVkIHdpdGggJyArIGRldGFpbHMgKyAnXSAqL1xcbicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZmxhdHRlbmFibGUgYGFyZ3VtZW50c2Agb2JqZWN0IG9yIGFycmF5LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBmbGF0dGVuYWJsZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRmxhdHRlbmFibGUodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc0FycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkgfHxcbiAgICAgICAgISEoc3ByZWFkYWJsZVN5bWJvbCAmJiB2YWx1ZSAmJiB2YWx1ZVtzcHJlYWRhYmxlU3ltYm9sXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG5cbiAgICAgIHJldHVybiAhIWxlbmd0aCAmJlxuICAgICAgICAodHlwZSA9PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICh0eXBlICE9ICdzeW1ib2wnICYmIHJlSXNVaW50LnRlc3QodmFsdWUpKSkgJiZcbiAgICAgICAgICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgdmFsdWUgYXJndW1lbnQuXG4gICAgICogQHBhcmFtIHsqfSBpbmRleCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIGluZGV4IG9yIGtleSBhcmd1bWVudC5cbiAgICAgKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIG9iamVjdCBhcmd1bWVudC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGluZGV4LCBvYmplY3QpIHtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiBpbmRleDtcbiAgICAgIGlmICh0eXBlID09ICdudW1iZXInXG4gICAgICAgICAgICA/IChpc0FycmF5TGlrZShvYmplY3QpICYmIGlzSW5kZXgoaW5kZXgsIG9iamVjdC5sZW5ndGgpKVxuICAgICAgICAgICAgOiAodHlwZSA9PSAnc3RyaW5nJyAmJiBpbmRleCBpbiBvYmplY3QpXG4gICAgICAgICAgKSB7XG4gICAgICAgIHJldHVybiBlcShvYmplY3RbaW5kZXhdLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeSBrZXlzIG9uLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzS2V5KHZhbHVlLCBvYmplY3QpIHtcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgIGlmICh0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicgfHxcbiAgICAgICAgICB2YWx1ZSA9PSBudWxsIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZUlzUGxhaW5Qcm9wLnRlc3QodmFsdWUpIHx8ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSkgfHxcbiAgICAgICAgKG9iamVjdCAhPSBudWxsICYmIHZhbHVlIGluIE9iamVjdChvYmplY3QpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3IgdXNlIGFzIHVuaXF1ZSBvYmplY3Qga2V5LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSkge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICByZXR1cm4gKHR5cGUgPT0gJ3N0cmluZycgfHwgdHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nKVxuICAgICAgICA/ICh2YWx1ZSAhPT0gJ19fcHJvdG9fXycpXG4gICAgICAgIDogKHZhbHVlID09PSBudWxsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBhIGxhenkgY291bnRlcnBhcnQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaGFzIGEgbGF6eSBjb3VudGVycGFydCxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTGF6aWFibGUoZnVuYykge1xuICAgICAgdmFyIGZ1bmNOYW1lID0gZ2V0RnVuY05hbWUoZnVuYyksXG4gICAgICAgICAgb3RoZXIgPSBsb2Rhc2hbZnVuY05hbWVdO1xuXG4gICAgICBpZiAodHlwZW9mIG90aGVyICE9ICdmdW5jdGlvbicgfHwgIShmdW5jTmFtZSBpbiBMYXp5V3JhcHBlci5wcm90b3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChmdW5jID09PSBvdGhlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHZhciBkYXRhID0gZ2V0RGF0YShvdGhlcik7XG4gICAgICByZXR1cm4gISFkYXRhICYmIGZ1bmMgPT09IGRhdGFbMF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykge1xuICAgICAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYGZ1bmNgIGlzIGNhcGFibGUgb2YgYmVpbmcgbWFza2VkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGZ1bmNgIGlzIG1hc2thYmxlLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgdmFyIGlzTWFza2FibGUgPSBjb3JlSnNEYXRhID8gaXNGdW5jdGlvbiA6IHN0dWJGYWxzZTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIHByb3RvdHlwZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHtcbiAgICAgIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG4gICAgICAgICAgcHJvdG8gPSAodHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSkgfHwgb2JqZWN0UHJvdG87XG5cbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHN0cmljdCBlcXVhbGl0eSBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaWYgc3VpdGFibGUgZm9yIHN0cmljdFxuICAgICAqICBlcXVhbGl0eSBjb21wYXJpc29ucywgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSAmJiAhaXNPYmplY3QodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgbWF0Y2hlc1Byb3BlcnR5YCBmb3Igc291cmNlIHZhbHVlcyBzdWl0YWJsZVxuICAgICAqIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUoa2V5LCBzcmNWYWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdFtrZXldID09PSBzcmNWYWx1ZSAmJlxuICAgICAgICAgIChzcmNWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gT2JqZWN0KG9iamVjdCkpKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLm1lbW9pemVgIHdoaWNoIGNsZWFycyB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24nc1xuICAgICAqIGNhY2hlIHdoZW4gaXQgZXhjZWVkcyBgTUFYX01FTU9JWkVfU0laRWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGhhdmUgaXRzIG91dHB1dCBtZW1vaXplZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXplZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtZW1vaXplQ2FwcGVkKGZ1bmMpIHtcbiAgICAgIHZhciByZXN1bHQgPSBtZW1vaXplKGZ1bmMsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgICBpZiAoY2FjaGUuc2l6ZSA9PT0gTUFYX01FTU9JWkVfU0laRSkge1xuICAgICAgICAgIGNhY2hlLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgY2FjaGUgPSByZXN1bHQuY2FjaGU7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1lcmdlcyB0aGUgZnVuY3Rpb24gbWV0YWRhdGEgb2YgYHNvdXJjZWAgaW50byBgZGF0YWAuXG4gICAgICpcbiAgICAgKiBNZXJnaW5nIG1ldGFkYXRhIHJlZHVjZXMgdGhlIG51bWJlciBvZiB3cmFwcGVycyB1c2VkIHRvIGludm9rZSBhIGZ1bmN0aW9uLlxuICAgICAqIFRoaXMgaXMgcG9zc2libGUgYmVjYXVzZSBtZXRob2RzIGxpa2UgYF8uYmluZGAsIGBfLmN1cnJ5YCwgYW5kIGBfLnBhcnRpYWxgXG4gICAgICogbWF5IGJlIGFwcGxpZWQgcmVnYXJkbGVzcyBvZiBleGVjdXRpb24gb3JkZXIuIE1ldGhvZHMgbGlrZSBgXy5hcnlgIGFuZFxuICAgICAqIGBfLnJlYXJnYCBtb2RpZnkgZnVuY3Rpb24gYXJndW1lbnRzLCBtYWtpbmcgdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgYXJlXG4gICAgICogZXhlY3V0ZWQgaW1wb3J0YW50LCBwcmV2ZW50aW5nIHRoZSBtZXJnaW5nIG9mIG1ldGFkYXRhLiBIb3dldmVyLCB3ZSBtYWtlXG4gICAgICogYW4gZXhjZXB0aW9uIGZvciBhIHNhZmUgY29tYmluZWQgY2FzZSB3aGVyZSBjdXJyaWVkIGZ1bmN0aW9ucyBoYXZlIGBfLmFyeWBcbiAgICAgKiBhbmQgb3IgYF8ucmVhcmdgIGFwcGxpZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGRhdGEgVGhlIGRlc3RpbmF0aW9uIG1ldGFkYXRhLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZSBUaGUgc291cmNlIG1ldGFkYXRhLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgZGF0YWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVyZ2VEYXRhKGRhdGEsIHNvdXJjZSkge1xuICAgICAgdmFyIGJpdG1hc2sgPSBkYXRhWzFdLFxuICAgICAgICAgIHNyY0JpdG1hc2sgPSBzb3VyY2VbMV0sXG4gICAgICAgICAgbmV3Qml0bWFzayA9IGJpdG1hc2sgfCBzcmNCaXRtYXNrLFxuICAgICAgICAgIGlzQ29tbW9uID0gbmV3Qml0bWFzayA8IChXUkFQX0JJTkRfRkxBRyB8IFdSQVBfQklORF9LRVlfRkxBRyB8IFdSQVBfQVJZX0ZMQUcpO1xuXG4gICAgICB2YXIgaXNDb21ibyA9XG4gICAgICAgICgoc3JjQml0bWFzayA9PSBXUkFQX0FSWV9GTEFHKSAmJiAoYml0bWFzayA9PSBXUkFQX0NVUlJZX0ZMQUcpKSB8fFxuICAgICAgICAoKHNyY0JpdG1hc2sgPT0gV1JBUF9BUllfRkxBRykgJiYgKGJpdG1hc2sgPT0gV1JBUF9SRUFSR19GTEFHKSAmJiAoZGF0YVs3XS5sZW5ndGggPD0gc291cmNlWzhdKSkgfHxcbiAgICAgICAgKChzcmNCaXRtYXNrID09IChXUkFQX0FSWV9GTEFHIHwgV1JBUF9SRUFSR19GTEFHKSkgJiYgKHNvdXJjZVs3XS5sZW5ndGggPD0gc291cmNlWzhdKSAmJiAoYml0bWFzayA9PSBXUkFQX0NVUlJZX0ZMQUcpKTtcblxuICAgICAgLy8gRXhpdCBlYXJseSBpZiBtZXRhZGF0YSBjYW4ndCBiZSBtZXJnZWQuXG4gICAgICBpZiAoIShpc0NvbW1vbiB8fCBpc0NvbWJvKSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH1cbiAgICAgIC8vIFVzZSBzb3VyY2UgYHRoaXNBcmdgIGlmIGF2YWlsYWJsZS5cbiAgICAgIGlmIChzcmNCaXRtYXNrICYgV1JBUF9CSU5EX0ZMQUcpIHtcbiAgICAgICAgZGF0YVsyXSA9IHNvdXJjZVsyXTtcbiAgICAgICAgLy8gU2V0IHdoZW4gY3VycnlpbmcgYSBib3VuZCBmdW5jdGlvbi5cbiAgICAgICAgbmV3Qml0bWFzayB8PSBiaXRtYXNrICYgV1JBUF9CSU5EX0ZMQUcgPyAwIDogV1JBUF9DVVJSWV9CT1VORF9GTEFHO1xuICAgICAgfVxuICAgICAgLy8gQ29tcG9zZSBwYXJ0aWFsIGFyZ3VtZW50cy5cbiAgICAgIHZhciB2YWx1ZSA9IHNvdXJjZVszXTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB2YXIgcGFydGlhbHMgPSBkYXRhWzNdO1xuICAgICAgICBkYXRhWzNdID0gcGFydGlhbHMgPyBjb21wb3NlQXJncyhwYXJ0aWFscywgdmFsdWUsIHNvdXJjZVs0XSkgOiB2YWx1ZTtcbiAgICAgICAgZGF0YVs0XSA9IHBhcnRpYWxzID8gcmVwbGFjZUhvbGRlcnMoZGF0YVszXSwgUExBQ0VIT0xERVIpIDogc291cmNlWzRdO1xuICAgICAgfVxuICAgICAgLy8gQ29tcG9zZSBwYXJ0aWFsIHJpZ2h0IGFyZ3VtZW50cy5cbiAgICAgIHZhbHVlID0gc291cmNlWzVdO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHBhcnRpYWxzID0gZGF0YVs1XTtcbiAgICAgICAgZGF0YVs1XSA9IHBhcnRpYWxzID8gY29tcG9zZUFyZ3NSaWdodChwYXJ0aWFscywgdmFsdWUsIHNvdXJjZVs2XSkgOiB2YWx1ZTtcbiAgICAgICAgZGF0YVs2XSA9IHBhcnRpYWxzID8gcmVwbGFjZUhvbGRlcnMoZGF0YVs1XSwgUExBQ0VIT0xERVIpIDogc291cmNlWzZdO1xuICAgICAgfVxuICAgICAgLy8gVXNlIHNvdXJjZSBgYXJnUG9zYCBpZiBhdmFpbGFibGUuXG4gICAgICB2YWx1ZSA9IHNvdXJjZVs3XTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBkYXRhWzddID0gdmFsdWU7XG4gICAgICB9XG4gICAgICAvLyBVc2Ugc291cmNlIGBhcnlgIGlmIGl0J3Mgc21hbGxlci5cbiAgICAgIGlmIChzcmNCaXRtYXNrICYgV1JBUF9BUllfRkxBRykge1xuICAgICAgICBkYXRhWzhdID0gZGF0YVs4XSA9PSBudWxsID8gc291cmNlWzhdIDogbmF0aXZlTWluKGRhdGFbOF0sIHNvdXJjZVs4XSk7XG4gICAgICB9XG4gICAgICAvLyBVc2Ugc291cmNlIGBhcml0eWAgaWYgb25lIGlzIG5vdCBwcm92aWRlZC5cbiAgICAgIGlmIChkYXRhWzldID09IG51bGwpIHtcbiAgICAgICAgZGF0YVs5XSA9IHNvdXJjZVs5XTtcbiAgICAgIH1cbiAgICAgIC8vIFVzZSBzb3VyY2UgYGZ1bmNgIGFuZCBtZXJnZSBiaXRtYXNrcy5cbiAgICAgIGRhdGFbMF0gPSBzb3VyY2VbMF07XG4gICAgICBkYXRhWzFdID0gbmV3Qml0bWFzaztcblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBsaWtlXG4gICAgICogW2BPYmplY3Qua2V5c2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5rZXlzKVxuICAgICAqIGV4Y2VwdCB0aGF0IGl0IGluY2x1ZGVzIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5hdGl2ZUtleXNJbihvYmplY3QpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIGlmIChvYmplY3QgIT0gbnVsbCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgdXNpbmcgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuXG4gICAgICovXG4gICAgZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcodmFsdWUpIHtcbiAgICAgIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VSZXN0YCB3aGljaCB0cmFuc2Zvcm1zIHRoZSByZXN0IGFycmF5LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIHJlc3QgYXJyYXkgdHJhbnNmb3JtLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG92ZXJSZXN0KGZ1bmMsIHN0YXJ0LCB0cmFuc2Zvcm0pIHtcbiAgICAgIHN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0ID09PSB1bmRlZmluZWQgPyAoZnVuYy5sZW5ndGggLSAxKSA6IHN0YXJ0LCAwKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gc3RhcnQsIDApLFxuICAgICAgICAgICAgYXJyYXkgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgYXJyYXlbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICB2YXIgb3RoZXJBcmdzID0gQXJyYXkoc3RhcnQgKyAxKTtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkge1xuICAgICAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBvdGhlckFyZ3Nbc3RhcnRdID0gdHJhbnNmb3JtKGFycmF5KTtcbiAgICAgICAgcmV0dXJuIGFwcGx5KGZ1bmMsIHRoaXMsIG90aGVyQXJncyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHBhcmVudCB2YWx1ZSBhdCBgcGF0aGAgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXRoIFRoZSBwYXRoIHRvIGdldCB0aGUgcGFyZW50IHZhbHVlIG9mLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBwYXJlbnQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFyZW50KG9iamVjdCwgcGF0aCkge1xuICAgICAgcmV0dXJuIHBhdGgubGVuZ3RoIDwgMiA/IG9iamVjdCA6IGJhc2VHZXQob2JqZWN0LCBiYXNlU2xpY2UocGF0aCwgMCwgLTEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW9yZGVyIGBhcnJheWAgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgaW5kZXhlcyB3aGVyZSB0aGUgZWxlbWVudCBhdFxuICAgICAqIHRoZSBmaXJzdCBpbmRleCBpcyBhc3NpZ25lZCBhcyB0aGUgZmlyc3QgZWxlbWVudCwgdGhlIGVsZW1lbnQgYXRcbiAgICAgKiB0aGUgc2Vjb25kIGluZGV4IGlzIGFzc2lnbmVkIGFzIHRoZSBzZWNvbmQgZWxlbWVudCwgYW5kIHNvIG9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcmVvcmRlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBpbmRleGVzIFRoZSBhcnJhbmdlZCBhcnJheSBpbmRleGVzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlb3JkZXIoYXJyYXksIGluZGV4ZXMpIHtcbiAgICAgIHZhciBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWluKGluZGV4ZXMubGVuZ3RoLCBhcnJMZW5ndGgpLFxuICAgICAgICAgIG9sZEFycmF5ID0gY29weUFycmF5KGFycmF5KTtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGluZGV4ZXNbbGVuZ3RoXTtcbiAgICAgICAgYXJyYXlbbGVuZ3RoXSA9IGlzSW5kZXgoaW5kZXgsIGFyckxlbmd0aCkgPyBvbGRBcnJheVtpbmRleF0gOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAsIHVubGVzcyBga2V5YCBpcyBcIl9fcHJvdG9fX1wiIG9yIFwiY29uc3RydWN0b3JcIi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzYWZlR2V0KG9iamVjdCwga2V5KSB7XG4gICAgICBpZiAoa2V5ID09PSAnY29uc3RydWN0b3InICYmIHR5cGVvZiBvYmplY3Rba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChrZXkgPT0gJ19fcHJvdG9fXycpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2JqZWN0W2tleV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBtZXRhZGF0YSBmb3IgYGZ1bmNgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIElmIHRoaXMgZnVuY3Rpb24gYmVjb21lcyBob3QsIGkuZS4gaXMgaW52b2tlZCBhIGxvdCBpbiBhIHNob3J0XG4gICAgICogcGVyaW9kIG9mIHRpbWUsIGl0IHdpbGwgdHJpcCBpdHMgYnJlYWtlciBhbmQgdHJhbnNpdGlvbiB0byBhbiBpZGVudGl0eVxuICAgICAqIGZ1bmN0aW9uIHRvIGF2b2lkIGdhcmJhZ2UgY29sbGVjdGlvbiBwYXVzZXMgaW4gVjguIFNlZVxuICAgICAqIFtWOCBpc3N1ZSAyMDcwXShodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMDcwKVxuICAgICAqIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFzc29jaWF0ZSBtZXRhZGF0YSB3aXRoLlxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgbWV0YWRhdGEuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGBmdW5jYC5cbiAgICAgKi9cbiAgICB2YXIgc2V0RGF0YSA9IHNob3J0T3V0KGJhc2VTZXREYXRhKTtcblxuICAgIC8qKlxuICAgICAqIEEgc2ltcGxlIHdyYXBwZXIgYXJvdW5kIHRoZSBnbG9iYWwgW2BzZXRUaW1lb3V0YF0oaHR0cHM6Ly9tZG4uaW8vc2V0VGltZW91dCkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGludm9jYXRpb24uXG4gICAgICogQHJldHVybnMge251bWJlcnxPYmplY3R9IFJldHVybnMgdGhlIHRpbWVyIGlkIG9yIHRpbWVvdXQgb2JqZWN0LlxuICAgICAqL1xuICAgIHZhciBzZXRUaW1lb3V0ID0gY3R4U2V0VGltZW91dCB8fCBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG4gICAgICByZXR1cm4gcm9vdC5zZXRUaW1lb3V0KGZ1bmMsIHdhaXQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBgdG9TdHJpbmdgIG1ldGhvZCBvZiBgZnVuY2AgdG8gcmV0dXJuIGBzdHJpbmdgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3RyaW5nIFRoZSBgdG9TdHJpbmdgIHJlc3VsdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYGZ1bmNgLlxuICAgICAqL1xuICAgIHZhciBzZXRUb1N0cmluZyA9IHNob3J0T3V0KGJhc2VTZXRUb1N0cmluZyk7XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBgdG9TdHJpbmdgIG1ldGhvZCBvZiBgd3JhcHBlcmAgdG8gbWltaWMgdGhlIHNvdXJjZSBvZiBgcmVmZXJlbmNlYFxuICAgICAqIHdpdGggd3JhcHBlciBkZXRhaWxzIGluIGEgY29tbWVudCBhdCB0aGUgdG9wIG9mIHRoZSBzb3VyY2UgYm9keS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gd3JhcHBlciBUaGUgZnVuY3Rpb24gdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlZmVyZW5jZSBUaGUgcmVmZXJlbmNlIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGNyZWF0ZVdyYXBgIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGB3cmFwcGVyYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXRXcmFwVG9TdHJpbmcod3JhcHBlciwgcmVmZXJlbmNlLCBiaXRtYXNrKSB7XG4gICAgICB2YXIgc291cmNlID0gKHJlZmVyZW5jZSArICcnKTtcbiAgICAgIHJldHVybiBzZXRUb1N0cmluZyh3cmFwcGVyLCBpbnNlcnRXcmFwRGV0YWlscyhzb3VyY2UsIHVwZGF0ZVdyYXBEZXRhaWxzKGdldFdyYXBEZXRhaWxzKHNvdXJjZSksIGJpdG1hc2spKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQnbGwgc2hvcnQgb3V0IGFuZCBpbnZva2UgYGlkZW50aXR5YCBpbnN0ZWFkXG4gICAgICogb2YgYGZ1bmNgIHdoZW4gaXQncyBjYWxsZWQgYEhPVF9DT1VOVGAgb3IgbW9yZSB0aW1lcyBpbiBgSE9UX1NQQU5gXG4gICAgICogbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzaG9ydGFibGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2hvcnRPdXQoZnVuYykge1xuICAgICAgdmFyIGNvdW50ID0gMCxcbiAgICAgICAgICBsYXN0Q2FsbGVkID0gMDtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3RhbXAgPSBuYXRpdmVOb3coKSxcbiAgICAgICAgICAgIHJlbWFpbmluZyA9IEhPVF9TUEFOIC0gKHN0YW1wIC0gbGFzdENhbGxlZCk7XG5cbiAgICAgICAgbGFzdENhbGxlZCA9IHN0YW1wO1xuICAgICAgICBpZiAocmVtYWluaW5nID4gMCkge1xuICAgICAgICAgIGlmICgrK2NvdW50ID49IEhPVF9DT1VOVCkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY291bnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnNodWZmbGVgIHdoaWNoIG11dGF0ZXMgYW5kIHNldHMgdGhlIHNpemUgb2YgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNodWZmbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzaXplPWFycmF5Lmxlbmd0aF0gVGhlIHNpemUgb2YgYGFycmF5YC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaHVmZmxlU2VsZihhcnJheSwgc2l6ZSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIGxhc3RJbmRleCA9IGxlbmd0aCAtIDE7XG5cbiAgICAgIHNpemUgPSBzaXplID09PSB1bmRlZmluZWQgPyBsZW5ndGggOiBzaXplO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBzaXplKSB7XG4gICAgICAgIHZhciByYW5kID0gYmFzZVJhbmRvbShpbmRleCwgbGFzdEluZGV4KSxcbiAgICAgICAgICAgIHZhbHVlID0gYXJyYXlbcmFuZF07XG5cbiAgICAgICAgYXJyYXlbcmFuZF0gPSBhcnJheVtpbmRleF07XG4gICAgICAgIGFycmF5W2luZGV4XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgYXJyYXkubGVuZ3RoID0gc2l6ZTtcbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBhIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAgICAgKi9cbiAgICB2YXIgc3RyaW5nVG9QYXRoID0gbWVtb2l6ZUNhcHBlZChmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIGlmIChzdHJpbmcuY2hhckNvZGVBdCgwKSA9PT0gNDYgLyogLiAqLykge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7XG4gICAgICB9XG4gICAgICBzdHJpbmcucmVwbGFjZShyZVByb3BOYW1lLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyLCBxdW90ZSwgc3ViU3RyaW5nKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3ViU3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcga2V5IGlmIGl0J3Mgbm90IGEgc3RyaW5nIG9yIHN5bWJvbC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHN5bWJvbH0gUmV0dXJucyB0aGUga2V5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvS2V5KHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICAgICAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBmdW5jYCB0byBpdHMgc291cmNlIGNvZGUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9Tb3VyY2UoZnVuYykge1xuICAgICAgaWYgKGZ1bmMgIT0gbnVsbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBmdW5jVG9TdHJpbmcuY2FsbChmdW5jKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gKGZ1bmMgKyAnJyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB3cmFwcGVyIGBkZXRhaWxzYCBiYXNlZCBvbiBgYml0bWFza2AgZmxhZ3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gZGV0YWlscyBUaGUgZGV0YWlscyB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgY3JlYXRlV3JhcGAgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGRldGFpbHNgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVdyYXBEZXRhaWxzKGRldGFpbHMsIGJpdG1hc2spIHtcbiAgICAgIGFycmF5RWFjaCh3cmFwRmxhZ3MsIGZ1bmN0aW9uKHBhaXIpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gJ18uJyArIHBhaXJbMF07XG4gICAgICAgIGlmICgoYml0bWFzayAmIHBhaXJbMV0pICYmICFhcnJheUluY2x1ZGVzKGRldGFpbHMsIHZhbHVlKSkge1xuICAgICAgICAgIGRldGFpbHMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRldGFpbHMuc29ydCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiBgd3JhcHBlcmAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB3cmFwcGVyIFRoZSB3cmFwcGVyIHRvIGNsb25lLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNsb25lZCB3cmFwcGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJDbG9uZSh3cmFwcGVyKSB7XG4gICAgICBpZiAod3JhcHBlciBpbnN0YW5jZW9mIExhenlXcmFwcGVyKSB7XG4gICAgICAgIHJldHVybiB3cmFwcGVyLmNsb25lKCk7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IExvZGFzaFdyYXBwZXIod3JhcHBlci5fX3dyYXBwZWRfXywgd3JhcHBlci5fX2NoYWluX18pO1xuICAgICAgcmVzdWx0Ll9fYWN0aW9uc19fID0gY29weUFycmF5KHdyYXBwZXIuX19hY3Rpb25zX18pO1xuICAgICAgcmVzdWx0Ll9faW5kZXhfXyAgPSB3cmFwcGVyLl9faW5kZXhfXztcbiAgICAgIHJlc3VsdC5fX3ZhbHVlc19fID0gd3JhcHBlci5fX3ZhbHVlc19fO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGVsZW1lbnRzIHNwbGl0IGludG8gZ3JvdXBzIHRoZSBsZW5ndGggb2YgYHNpemVgLlxuICAgICAqIElmIGBhcnJheWAgY2FuJ3QgYmUgc3BsaXQgZXZlbmx5LCB0aGUgZmluYWwgY2h1bmsgd2lsbCBiZSB0aGUgcmVtYWluaW5nXG4gICAgICogZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NpemU9MV0gVGhlIGxlbmd0aCBvZiBlYWNoIGNodW5rXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGFuIGl0ZXJhdGVlIGZvciBtZXRob2RzIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBjaHVua3MuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY2h1bmsoWydhJywgJ2InLCAnYycsICdkJ10sIDIpO1xuICAgICAqIC8vID0+IFtbJ2EnLCAnYiddLCBbJ2MnLCAnZCddXVxuICAgICAqXG4gICAgICogXy5jaHVuayhbJ2EnLCAnYicsICdjJywgJ2QnXSwgMyk7XG4gICAgICogLy8gPT4gW1snYScsICdiJywgJ2MnXSwgWydkJ11dXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2h1bmsoYXJyYXksIHNpemUsIGd1YXJkKSB7XG4gICAgICBpZiAoKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwoYXJyYXksIHNpemUsIGd1YXJkKSA6IHNpemUgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgc2l6ZSA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaXplID0gbmF0aXZlTWF4KHRvSW50ZWdlcihzaXplKSwgMCk7XG4gICAgICB9XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCB8fCBzaXplIDwgMSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICAgIHJlc0luZGV4ID0gMCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShuYXRpdmVDZWlsKGxlbmd0aCAvIHNpemUpKTtcblxuICAgICAgd2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtyZXNJbmRleCsrXSA9IGJhc2VTbGljZShhcnJheSwgaW5kZXgsIChpbmRleCArPSBzaXplKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgZmFsc2V5IHZhbHVlcyByZW1vdmVkLiBUaGUgdmFsdWVzIGBmYWxzZWAsIGBudWxsYCxcbiAgICAgKiBgMGAsIGBcIlwiYCwgYHVuZGVmaW5lZGAsIGFuZCBgTmFOYCBhcmUgZmFsc2V5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNvbXBhY3QoWzAsIDEsIGZhbHNlLCAyLCAnJywgM10pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBhY3QoYXJyYXkpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIHJlc0luZGV4ID0gMCxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICByZXN1bHRbcmVzSW5kZXgrK10gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGFycmF5IGNvbmNhdGVuYXRpbmcgYGFycmF5YCB3aXRoIGFueSBhZGRpdGlvbmFsIGFycmF5c1xuICAgICAqIGFuZC9vciB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29uY2F0ZW5hdGUuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNvbmNhdGVuYXRlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGNvbmNhdGVuYXRlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzFdO1xuICAgICAqIHZhciBvdGhlciA9IF8uY29uY2F0KGFycmF5LCAyLCBbM10sIFtbNF1dKTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKG90aGVyKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgWzRdXVxuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbmNhdCgpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGggLSAxKSxcbiAgICAgICAgICBhcnJheSA9IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICBpbmRleCA9IGxlbmd0aDtcblxuICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgYXJnc1tpbmRleCAtIDFdID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheVB1c2goaXNBcnJheShhcnJheSkgPyBjb3B5QXJyYXkoYXJyYXkpIDogW2FycmF5XSwgYmFzZUZsYXR0ZW4oYXJncywgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgYGFycmF5YCB2YWx1ZXMgbm90IGluY2x1ZGVkIGluIHRoZSBvdGhlciBnaXZlbiBhcnJheXNcbiAgICAgKiB1c2luZyBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy4gVGhlIG9yZGVyIGFuZCByZWZlcmVuY2VzIG9mIHJlc3VsdCB2YWx1ZXMgYXJlXG4gICAgICogZGV0ZXJtaW5lZCBieSB0aGUgZmlyc3QgYXJyYXkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLnB1bGxBbGxgLCB0aGlzIG1ldGhvZCByZXR1cm5zIGEgbmV3IGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAc2VlIF8ud2l0aG91dCwgXy54b3JcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kaWZmZXJlbmNlKFsyLCAxXSwgWzIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMV1cbiAgICAgKi9cbiAgICB2YXIgZGlmZmVyZW5jZSA9IGJhc2VSZXN0KGZ1bmN0aW9uKGFycmF5LCB2YWx1ZXMpIHtcbiAgICAgIHJldHVybiBpc0FycmF5TGlrZU9iamVjdChhcnJheSlcbiAgICAgICAgPyBiYXNlRGlmZmVyZW5jZShhcnJheSwgYmFzZUZsYXR0ZW4odmFsdWVzLCAxLCBpc0FycmF5TGlrZU9iamVjdCwgdHJ1ZSkpXG4gICAgICAgIDogW107XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmRpZmZlcmVuY2VgIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYGl0ZXJhdGVlYCB3aGljaFxuICAgICAqIGlzIGludm9rZWQgZm9yIGVhY2ggZWxlbWVudCBvZiBgYXJyYXlgIGFuZCBgdmFsdWVzYCB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uXG4gICAgICogYnkgd2hpY2ggdGhleSdyZSBjb21wYXJlZC4gVGhlIG9yZGVyIGFuZCByZWZlcmVuY2VzIG9mIHJlc3VsdCB2YWx1ZXMgYXJlXG4gICAgICogZGV0ZXJtaW5lZCBieSB0aGUgZmlyc3QgYXJyYXkuIFRoZSBpdGVyYXRlZSBpcyBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OlxuICAgICAqICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLnB1bGxBbGxCeWAsIHRoaXMgbWV0aG9kIHJldHVybnMgYSBuZXcgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGV4Y2x1ZGUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBpdGVyYXRlZSBpbnZva2VkIHBlciBlbGVtZW50LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kaWZmZXJlbmNlQnkoWzIuMSwgMS4yXSwgWzIuMywgMy40XSwgTWF0aC5mbG9vcik7XG4gICAgICogLy8gPT4gWzEuMl1cbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZGlmZmVyZW5jZUJ5KFt7ICd4JzogMiB9LCB7ICd4JzogMSB9XSwgW3sgJ3gnOiAxIH1dLCAneCcpO1xuICAgICAqIC8vID0+IFt7ICd4JzogMiB9XVxuICAgICAqL1xuICAgIHZhciBkaWZmZXJlbmNlQnkgPSBiYXNlUmVzdChmdW5jdGlvbihhcnJheSwgdmFsdWVzKSB7XG4gICAgICB2YXIgaXRlcmF0ZWUgPSBsYXN0KHZhbHVlcyk7XG4gICAgICBpZiAoaXNBcnJheUxpa2VPYmplY3QoaXRlcmF0ZWUpKSB7XG4gICAgICAgIGl0ZXJhdGVlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzQXJyYXlMaWtlT2JqZWN0KGFycmF5KVxuICAgICAgICA/IGJhc2VEaWZmZXJlbmNlKGFycmF5LCBiYXNlRmxhdHRlbih2YWx1ZXMsIDEsIGlzQXJyYXlMaWtlT2JqZWN0LCB0cnVlKSwgZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsIDIpKVxuICAgICAgICA6IFtdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5kaWZmZXJlbmNlYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBjb21wYXJhdG9yYFxuICAgICAqIHdoaWNoIGlzIGludm9rZWQgdG8gY29tcGFyZSBlbGVtZW50cyBvZiBgYXJyYXlgIHRvIGB2YWx1ZXNgLiBUaGUgb3JkZXIgYW5kXG4gICAgICogcmVmZXJlbmNlcyBvZiByZXN1bHQgdmFsdWVzIGFyZSBkZXRlcm1pbmVkIGJ5IHRoZSBmaXJzdCBhcnJheS4gVGhlIGNvbXBhcmF0b3JcbiAgICAgKiBpcyBpbnZva2VkIHdpdGggdHdvIGFyZ3VtZW50czogKGFyclZhbCwgb3RoVmFsKS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBVbmxpa2UgYF8ucHVsbEFsbFdpdGhgLCB0aGlzIG1ldGhvZCByZXR1cm5zIGEgbmV3IGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJhdG9yXSBUaGUgY29tcGFyYXRvciBpbnZva2VkIHBlciBlbGVtZW50LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbeyAneCc6IDEsICd5JzogMiB9LCB7ICd4JzogMiwgJ3knOiAxIH1dO1xuICAgICAqXG4gICAgICogXy5kaWZmZXJlbmNlV2l0aChvYmplY3RzLCBbeyAneCc6IDEsICd5JzogMiB9XSwgXy5pc0VxdWFsKTtcbiAgICAgKiAvLyA9PiBbeyAneCc6IDIsICd5JzogMSB9XVxuICAgICAqL1xuICAgIHZhciBkaWZmZXJlbmNlV2l0aCA9IGJhc2VSZXN0KGZ1bmN0aW9uKGFycmF5LCB2YWx1ZXMpIHtcbiAgICAgIHZhciBjb21wYXJhdG9yID0gbGFzdCh2YWx1ZXMpO1xuICAgICAgaWYgKGlzQXJyYXlMaWtlT2JqZWN0KGNvbXBhcmF0b3IpKSB7XG4gICAgICAgIGNvbXBhcmF0b3IgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNBcnJheUxpa2VPYmplY3QoYXJyYXkpXG4gICAgICAgID8gYmFzZURpZmZlcmVuY2UoYXJyYXksIGJhc2VGbGF0dGVuKHZhbHVlcywgMSwgaXNBcnJheUxpa2VPYmplY3QsIHRydWUpLCB1bmRlZmluZWQsIGNvbXBhcmF0b3IpXG4gICAgICAgIDogW107XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCB3aXRoIGBuYCBlbGVtZW50cyBkcm9wcGVkIGZyb20gdGhlIGJlZ2lubmluZy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjUuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MV0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBkcm9wLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRyb3AoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKlxuICAgICAqIF8uZHJvcChbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFszXVxuICAgICAqXG4gICAgICogXy5kcm9wKFsxLCAyLCAzXSwgNSk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKlxuICAgICAqIF8uZHJvcChbMSwgMiwgM10sIDApO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRyb3AoYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBuID0gKGd1YXJkIHx8IG4gPT09IHVuZGVmaW5lZCkgPyAxIDogdG9JbnRlZ2VyKG4pO1xuICAgICAgcmV0dXJuIGJhc2VTbGljZShhcnJheSwgbiA8IDAgPyAwIDogbiwgbGVuZ3RoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCB3aXRoIGBuYCBlbGVtZW50cyBkcm9wcGVkIGZyb20gdGhlIGVuZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MV0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBkcm9wLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRyb3BSaWdodChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogXy5kcm9wUmlnaHQoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbMV1cbiAgICAgKlxuICAgICAqIF8uZHJvcFJpZ2h0KFsxLCAyLCAzXSwgNSk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKlxuICAgICAqIF8uZHJvcFJpZ2h0KFsxLCAyLCAzXSwgMCk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gZHJvcFJpZ2h0KGFycmF5LCBuLCBndWFyZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgbiA9IChndWFyZCB8fCBuID09PSB1bmRlZmluZWQpID8gMSA6IHRvSW50ZWdlcihuKTtcbiAgICAgIG4gPSBsZW5ndGggLSBuO1xuICAgICAgcmV0dXJuIGJhc2VTbGljZShhcnJheSwgMCwgbiA8IDAgPyAwIDogbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgZXhjbHVkaW5nIGVsZW1lbnRzIGRyb3BwZWQgZnJvbSB0aGUgZW5kLlxuICAgICAqIEVsZW1lbnRzIGFyZSBkcm9wcGVkIHVudGlsIGBwcmVkaWNhdGVgIHJldHVybnMgZmFsc2V5LiBUaGUgcHJlZGljYXRlIGlzXG4gICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZHJvcFJpZ2h0V2hpbGUodXNlcnMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuICFvLmFjdGl2ZTsgfSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgWydiYXJuZXknXVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmRyb3BSaWdodFdoaWxlKHVzZXJzLCB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgWydiYXJuZXknLCAnZnJlZCddXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5kcm9wUmlnaHRXaGlsZSh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnYmFybmV5J11cbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZHJvcFJpZ2h0V2hpbGUodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiBvYmplY3RzIGZvciBbJ2Jhcm5leScsICdmcmVkJywgJ3BlYmJsZXMnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRyb3BSaWdodFdoaWxlKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VXaGlsZShhcnJheSwgZ2V0SXRlcmF0ZWUocHJlZGljYXRlLCAzKSwgdHJ1ZSwgdHJ1ZSlcbiAgICAgICAgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCBleGNsdWRpbmcgZWxlbWVudHMgZHJvcHBlZCBmcm9tIHRoZSBiZWdpbm5pbmcuXG4gICAgICogRWxlbWVudHMgYXJlIGRyb3BwZWQgdW50aWwgYHByZWRpY2F0ZWAgcmV0dXJucyBmYWxzZXkuIFRoZSBwcmVkaWNhdGUgaXNcbiAgICAgKiBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5kcm9wV2hpbGUodXNlcnMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuICFvLmFjdGl2ZTsgfSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgWydwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5tYXRjaGVzYCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5kcm9wV2hpbGUodXNlcnMsIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmRyb3BXaGlsZSh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsncGViYmxlcyddXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmRyb3BXaGlsZSh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnYmFybmV5JywgJ2ZyZWQnLCAncGViYmxlcyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gZHJvcFdoaWxlKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VXaGlsZShhcnJheSwgZ2V0SXRlcmF0ZWUocHJlZGljYXRlLCAzKSwgdHJ1ZSlcbiAgICAgICAgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWxscyBlbGVtZW50cyBvZiBgYXJyYXlgIHdpdGggYHZhbHVlYCBmcm9tIGBzdGFydGAgdXAgdG8sIGJ1dCBub3RcbiAgICAgKiBpbmNsdWRpbmcsIGBlbmRgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjIuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmaWxsLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGZpbGwgYGFycmF5YCB3aXRoLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kPWFycmF5Lmxlbmd0aF0gVGhlIGVuZCBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDNdO1xuICAgICAqXG4gICAgICogXy5maWxsKGFycmF5LCAnYScpO1xuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYScsICdhJ11cbiAgICAgKlxuICAgICAqIF8uZmlsbChBcnJheSgzKSwgMik7XG4gICAgICogLy8gPT4gWzIsIDIsIDJdXG4gICAgICpcbiAgICAgKiBfLmZpbGwoWzQsIDYsIDgsIDEwXSwgJyonLCAxLCAzKTtcbiAgICAgKiAvLyA9PiBbNCwgJyonLCAnKicsIDEwXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbGwoYXJyYXksIHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoc3RhcnQgJiYgdHlwZW9mIHN0YXJ0ICE9ICdudW1iZXInICYmIGlzSXRlcmF0ZWVDYWxsKGFycmF5LCB2YWx1ZSwgc3RhcnQpKSB7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgZW5kID0gbGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VGaWxsKGFycmF5LCB2YWx1ZSwgc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3RcbiAgICAgKiBlbGVtZW50IGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAxLjEuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5maW5kSW5kZXgodXNlcnMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuIG8udXNlciA9PSAnYmFybmV5JzsgfSk7XG4gICAgICogLy8gPT4gMFxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbmRJbmRleCh1c2VycywgeyAndXNlcic6ICdmcmVkJywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbmRJbmRleCh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IDBcbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZmluZEluZGV4KHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gMlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IGZyb21JbmRleCA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihmcm9tSW5kZXgpO1xuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICBpbmRleCA9IG5hdGl2ZU1heChsZW5ndGggKyBpbmRleCwgMCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUZpbmRJbmRleChhcnJheSwgZ2V0SXRlcmF0ZWUocHJlZGljYXRlLCAzKSwgaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZEluZGV4YCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXG4gICAgICogb2YgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAyLjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD1hcnJheS5sZW5ndGgtMV0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmluZExhc3RJbmRleCh1c2VycywgZnVuY3Rpb24obykgeyByZXR1cm4gby51c2VyID09ICdwZWJibGVzJzsgfSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbmRMYXN0SW5kZXgodXNlcnMsIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IHRydWUgfSk7XG4gICAgICogLy8gPT4gMFxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZmluZExhc3RJbmRleCh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZmluZExhc3RJbmRleCh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+IDBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21JbmRleCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gbGVuZ3RoIC0gMTtcbiAgICAgIGlmIChmcm9tSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpbmRleCA9IHRvSW50ZWdlcihmcm9tSW5kZXgpO1xuICAgICAgICBpbmRleCA9IGZyb21JbmRleCA8IDBcbiAgICAgICAgICA/IG5hdGl2ZU1heChsZW5ndGggKyBpbmRleCwgMClcbiAgICAgICAgICA6IG5hdGl2ZU1pbihpbmRleCwgbGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUZpbmRJbmRleChhcnJheSwgZ2V0SXRlcmF0ZWUocHJlZGljYXRlLCAzKSwgaW5kZXgsIHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZsYXR0ZW5zIGBhcnJheWAgYSBzaW5nbGUgbGV2ZWwgZGVlcC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmbGF0dGVuLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZsYXR0ZW5lZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5mbGF0dGVuKFsxLCBbMiwgWzMsIFs0XV0sIDVdXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIFszLCBbNF1dLCA1XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZsYXR0ZW4oYXJyYXkpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcbiAgICAgIHJldHVybiBsZW5ndGggPyBiYXNlRmxhdHRlbihhcnJheSwgMSkgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWN1cnNpdmVseSBmbGF0dGVucyBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZsYXR0ZW4uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmxhdHRlbmVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZsYXR0ZW5EZWVwKFsxLCBbMiwgWzMsIFs0XV0sIDVdXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIDQsIDVdXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmxhdHRlbkRlZXAoYXJyYXkpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcbiAgICAgIHJldHVybiBsZW5ndGggPyBiYXNlRmxhdHRlbihhcnJheSwgSU5GSU5JVFkpIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlbHkgZmxhdHRlbiBgYXJyYXlgIHVwIHRvIGBkZXB0aGAgdGltZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC40LjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmxhdHRlbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2RlcHRoPTFdIFRoZSBtYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmbGF0dGVuZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxLCBbMiwgWzMsIFs0XV0sIDVdXTtcbiAgICAgKlxuICAgICAqIF8uZmxhdHRlbkRlcHRoKGFycmF5LCAxKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgWzMsIFs0XV0sIDVdXG4gICAgICpcbiAgICAgKiBfLmZsYXR0ZW5EZXB0aChhcnJheSwgMik7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIFs0XSwgNV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmbGF0dGVuRGVwdGgoYXJyYXksIGRlcHRoKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBkZXB0aCA9IGRlcHRoID09PSB1bmRlZmluZWQgPyAxIDogdG9JbnRlZ2VyKGRlcHRoKTtcbiAgICAgIHJldHVybiBiYXNlRmxhdHRlbihhcnJheSwgZGVwdGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBpbnZlcnNlIG9mIGBfLnRvUGFpcnNgOyB0aGlzIG1ldGhvZCByZXR1cm5zIGFuIG9iamVjdCBjb21wb3NlZFxuICAgICAqIGZyb20ga2V5LXZhbHVlIGBwYWlyc2AuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYWlycyBUaGUga2V5LXZhbHVlIHBhaXJzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZnJvbVBhaXJzKFtbJ2EnLCAxXSwgWydiJywgMl1dKTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMSwgJ2InOiAyIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmcm9tUGFpcnMocGFpcnMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHBhaXJzID09IG51bGwgPyAwIDogcGFpcnMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgcGFpciA9IHBhaXJzW2luZGV4XTtcbiAgICAgICAgcmVzdWx0W3BhaXJbMF1dID0gcGFpclsxXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZmlyc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGFsaWFzIGZpcnN0XG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaGVhZChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIF8uaGVhZChbXSk7XG4gICAgICogLy8gPT4gdW5kZWZpbmVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gaGVhZChhcnJheSkge1xuICAgICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpID8gYXJyYXlbMF0gOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYHZhbHVlYCBpcyBmb3VuZCBpbiBgYXJyYXlgXG4gICAgICogdXNpbmcgW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICAgKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuIElmIGBmcm9tSW5kZXhgIGlzIG5lZ2F0aXZlLCBpdCdzIHVzZWQgYXMgdGhlXG4gICAgICogb2Zmc2V0IGZyb20gdGhlIGVuZCBvZiBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbmRleE9mKFsxLCAyLCAxLCAyXSwgMik7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogLy8gU2VhcmNoIGZyb20gdGhlIGBmcm9tSW5kZXhgLlxuICAgICAqIF8uaW5kZXhPZihbMSwgMiwgMSwgMl0sIDIsIDIpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSBmcm9tSW5kZXggPT0gbnVsbCA/IDAgOiB0b0ludGVnZXIoZnJvbUluZGV4KTtcbiAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgaW5kZXggPSBuYXRpdmVNYXgobGVuZ3RoICsgaW5kZXgsIDApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VJbmRleE9mKGFycmF5LCB2YWx1ZSwgaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGJ1dCB0aGUgbGFzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmluaXRpYWwoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0aWFsKGFycmF5KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICByZXR1cm4gbGVuZ3RoID8gYmFzZVNsaWNlKGFycmF5LCAwLCAtMSkgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSB2YWx1ZXMgdGhhdCBhcmUgaW5jbHVkZWQgaW4gYWxsIGdpdmVuIGFycmF5c1xuICAgICAqIHVzaW5nIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLiBUaGUgb3JkZXIgYW5kIHJlZmVyZW5jZXMgb2YgcmVzdWx0IHZhbHVlcyBhcmVcbiAgICAgKiBkZXRlcm1pbmVkIGJ5IHRoZSBmaXJzdCBhcnJheS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheXNdIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBpbnRlcnNlY3RpbmcgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmludGVyc2VjdGlvbihbMiwgMV0sIFsyLCAzXSk7XG4gICAgICogLy8gPT4gWzJdXG4gICAgICovXG4gICAgdmFyIGludGVyc2VjdGlvbiA9IGJhc2VSZXN0KGZ1bmN0aW9uKGFycmF5cykge1xuICAgICAgdmFyIG1hcHBlZCA9IGFycmF5TWFwKGFycmF5cywgY2FzdEFycmF5TGlrZU9iamVjdCk7XG4gICAgICByZXR1cm4gKG1hcHBlZC5sZW5ndGggJiYgbWFwcGVkWzBdID09PSBhcnJheXNbMF0pXG4gICAgICAgID8gYmFzZUludGVyc2VjdGlvbihtYXBwZWQpXG4gICAgICAgIDogW107XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmludGVyc2VjdGlvbmAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBgaXRlcmF0ZWVgXG4gICAgICogd2hpY2ggaXMgaW52b2tlZCBmb3IgZWFjaCBlbGVtZW50IG9mIGVhY2ggYGFycmF5c2AgdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvblxuICAgICAqIGJ5IHdoaWNoIHRoZXkncmUgY29tcGFyZWQuIFRoZSBvcmRlciBhbmQgcmVmZXJlbmNlcyBvZiByZXN1bHQgdmFsdWVzIGFyZVxuICAgICAqIGRldGVybWluZWQgYnkgdGhlIGZpcnN0IGFycmF5LiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDpcbiAgICAgKiAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBpbnRlcnNlY3RpbmcgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmludGVyc2VjdGlvbkJ5KFsyLjEsIDEuMl0sIFsyLjMsIDMuNF0sIE1hdGguZmxvb3IpO1xuICAgICAqIC8vID0+IFsyLjFdXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmludGVyc2VjdGlvbkJ5KFt7ICd4JzogMSB9XSwgW3sgJ3gnOiAyIH0sIHsgJ3gnOiAxIH1dLCAneCcpO1xuICAgICAqIC8vID0+IFt7ICd4JzogMSB9XVxuICAgICAqL1xuICAgIHZhciBpbnRlcnNlY3Rpb25CeSA9IGJhc2VSZXN0KGZ1bmN0aW9uKGFycmF5cykge1xuICAgICAgdmFyIGl0ZXJhdGVlID0gbGFzdChhcnJheXMpLFxuICAgICAgICAgIG1hcHBlZCA9IGFycmF5TWFwKGFycmF5cywgY2FzdEFycmF5TGlrZU9iamVjdCk7XG5cbiAgICAgIGlmIChpdGVyYXRlZSA9PT0gbGFzdChtYXBwZWQpKSB7XG4gICAgICAgIGl0ZXJhdGVlID0gdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWFwcGVkLnBvcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChtYXBwZWQubGVuZ3RoICYmIG1hcHBlZFswXSA9PT0gYXJyYXlzWzBdKVxuICAgICAgICA/IGJhc2VJbnRlcnNlY3Rpb24obWFwcGVkLCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgMikpXG4gICAgICAgIDogW107XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmludGVyc2VjdGlvbmAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBgY29tcGFyYXRvcmBcbiAgICAgKiB3aGljaCBpcyBpbnZva2VkIHRvIGNvbXBhcmUgZWxlbWVudHMgb2YgYGFycmF5c2AuIFRoZSBvcmRlciBhbmQgcmVmZXJlbmNlc1xuICAgICAqIG9mIHJlc3VsdCB2YWx1ZXMgYXJlIGRldGVybWluZWQgYnkgdGhlIGZpcnN0IGFycmF5LiBUaGUgY29tcGFyYXRvciBpc1xuICAgICAqIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnRzOiAoYXJyVmFsLCBvdGhWYWwpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJhdG9yXSBUaGUgY29tcGFyYXRvciBpbnZva2VkIHBlciBlbGVtZW50LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGludGVyc2VjdGluZyB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3RzID0gW3sgJ3gnOiAxLCAneSc6IDIgfSwgeyAneCc6IDIsICd5JzogMSB9XTtcbiAgICAgKiB2YXIgb3RoZXJzID0gW3sgJ3gnOiAxLCAneSc6IDEgfSwgeyAneCc6IDEsICd5JzogMiB9XTtcbiAgICAgKlxuICAgICAqIF8uaW50ZXJzZWN0aW9uV2l0aChvYmplY3RzLCBvdGhlcnMsIF8uaXNFcXVhbCk7XG4gICAgICogLy8gPT4gW3sgJ3gnOiAxLCAneSc6IDIgfV1cbiAgICAgKi9cbiAgICB2YXIgaW50ZXJzZWN0aW9uV2l0aCA9IGJhc2VSZXN0KGZ1bmN0aW9uKGFycmF5cykge1xuICAgICAgdmFyIGNvbXBhcmF0b3IgPSBsYXN0KGFycmF5cyksXG4gICAgICAgICAgbWFwcGVkID0gYXJyYXlNYXAoYXJyYXlzLCBjYXN0QXJyYXlMaWtlT2JqZWN0KTtcblxuICAgICAgY29tcGFyYXRvciA9IHR5cGVvZiBjb21wYXJhdG9yID09ICdmdW5jdGlvbicgPyBjb21wYXJhdG9yIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKGNvbXBhcmF0b3IpIHtcbiAgICAgICAgbWFwcGVkLnBvcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChtYXBwZWQubGVuZ3RoICYmIG1hcHBlZFswXSA9PT0gYXJyYXlzWzBdKVxuICAgICAgICA/IGJhc2VJbnRlcnNlY3Rpb24obWFwcGVkLCB1bmRlZmluZWQsIGNvbXBhcmF0b3IpXG4gICAgICAgIDogW107XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhbGwgZWxlbWVudHMgaW4gYGFycmF5YCBpbnRvIGEgc3RyaW5nIHNlcGFyYXRlZCBieSBgc2VwYXJhdG9yYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb252ZXJ0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc2VwYXJhdG9yPScsJ10gVGhlIGVsZW1lbnQgc2VwYXJhdG9yLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGpvaW5lZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uam9pbihbJ2EnLCAnYicsICdjJ10sICd+Jyk7XG4gICAgICogLy8gPT4gJ2F+Yn5jJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGpvaW4oYXJyYXksIHNlcGFyYXRvcikge1xuICAgICAgcmV0dXJuIGFycmF5ID09IG51bGwgPyAnJyA6IG5hdGl2ZUpvaW4uY2FsbChhcnJheSwgc2VwYXJhdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsYXN0IGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbGFzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubGFzdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IDNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsYXN0KGFycmF5KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICByZXR1cm4gbGVuZ3RoID8gYXJyYXlbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pbmRleE9mYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mXG4gICAgICogYGFycmF5YCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PWFycmF5Lmxlbmd0aC0xXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5sYXN0SW5kZXhPZihbMSwgMiwgMSwgMl0sIDIpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIC8vIFNlYXJjaCBmcm9tIHRoZSBgZnJvbUluZGV4YC5cbiAgICAgKiBfLmxhc3RJbmRleE9mKFsxLCAyLCAxLCAyXSwgMiwgMik7XG4gICAgICogLy8gPT4gMVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxhc3RJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSBsZW5ndGg7XG4gICAgICBpZiAoZnJvbUluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW5kZXggPSB0b0ludGVnZXIoZnJvbUluZGV4KTtcbiAgICAgICAgaW5kZXggPSBpbmRleCA8IDAgPyBuYXRpdmVNYXgobGVuZ3RoICsgaW5kZXgsIDApIDogbmF0aXZlTWluKGluZGV4LCBsZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWVcbiAgICAgICAgPyBzdHJpY3RMYXN0SW5kZXhPZihhcnJheSwgdmFsdWUsIGluZGV4KVxuICAgICAgICA6IGJhc2VGaW5kSW5kZXgoYXJyYXksIGJhc2VJc05hTiwgaW5kZXgsIHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVsZW1lbnQgYXQgaW5kZXggYG5gIG9mIGBhcnJheWAuIElmIGBuYCBpcyBuZWdhdGl2ZSwgdGhlIG50aFxuICAgICAqIGVsZW1lbnQgZnJvbSB0aGUgZW5kIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMTEuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MF0gVGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IHRvIHJldHVybi5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbnRoIGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWydhJywgJ2InLCAnYycsICdkJ107XG4gICAgICpcbiAgICAgKiBfLm50aChhcnJheSwgMSk7XG4gICAgICogLy8gPT4gJ2InXG4gICAgICpcbiAgICAgKiBfLm50aChhcnJheSwgLTIpO1xuICAgICAqIC8vID0+ICdjJztcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBudGgoYXJyYXksIG4pIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSA/IGJhc2VOdGgoYXJyYXksIHRvSW50ZWdlcihuKSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgZ2l2ZW4gdmFsdWVzIGZyb20gYGFycmF5YCB1c2luZ1xuICAgICAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFVubGlrZSBgXy53aXRob3V0YCwgdGhpcyBtZXRob2QgbXV0YXRlcyBgYXJyYXlgLiBVc2UgYF8ucmVtb3ZlYFxuICAgICAqIHRvIHJlbW92ZSBlbGVtZW50cyBmcm9tIGFuIGFycmF5IGJ5IHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAyLjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWydhJywgJ2InLCAnYycsICdhJywgJ2InLCAnYyddO1xuICAgICAqXG4gICAgICogXy5wdWxsKGFycmF5LCAnYScsICdjJyk7XG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsnYicsICdiJ11cbiAgICAgKi9cbiAgICB2YXIgcHVsbCA9IGJhc2VSZXN0KHB1bGxBbGwpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5wdWxsYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGFuIGFycmF5IG9mIHZhbHVlcyB0byByZW1vdmUuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLmRpZmZlcmVuY2VgLCB0aGlzIG1ldGhvZCBtdXRhdGVzIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlcyBUaGUgdmFsdWVzIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWydhJywgJ2InLCAnYycsICdhJywgJ2InLCAnYyddO1xuICAgICAqXG4gICAgICogXy5wdWxsQWxsKGFycmF5LCBbJ2EnLCAnYyddKTtcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWydiJywgJ2InXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHB1bGxBbGwoYXJyYXksIHZhbHVlcykge1xuICAgICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGggJiYgdmFsdWVzICYmIHZhbHVlcy5sZW5ndGgpXG4gICAgICAgID8gYmFzZVB1bGxBbGwoYXJyYXksIHZhbHVlcylcbiAgICAgICAgOiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnB1bGxBbGxgIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYGl0ZXJhdGVlYCB3aGljaCBpc1xuICAgICAqIGludm9rZWQgZm9yIGVhY2ggZWxlbWVudCBvZiBgYXJyYXlgIGFuZCBgdmFsdWVzYCB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uXG4gICAgICogYnkgd2hpY2ggdGhleSdyZSBjb21wYXJlZC4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ6ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLmRpZmZlcmVuY2VCeWAsIHRoaXMgbWV0aG9kIG11dGF0ZXMgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtBcnJheX0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gcmVtb3ZlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gW3sgJ3gnOiAxIH0sIHsgJ3gnOiAyIH0sIHsgJ3gnOiAzIH0sIHsgJ3gnOiAxIH1dO1xuICAgICAqXG4gICAgICogXy5wdWxsQWxsQnkoYXJyYXksIFt7ICd4JzogMSB9LCB7ICd4JzogMyB9XSwgJ3gnKTtcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gW3sgJ3gnOiAyIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHVsbEFsbEJ5KGFycmF5LCB2YWx1ZXMsIGl0ZXJhdGVlKSB7XG4gICAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aCAmJiB2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aClcbiAgICAgICAgPyBiYXNlUHVsbEFsbChhcnJheSwgdmFsdWVzLCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgMikpXG4gICAgICAgIDogYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5wdWxsQWxsYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBjb21wYXJhdG9yYCB3aGljaFxuICAgICAqIGlzIGludm9rZWQgdG8gY29tcGFyZSBlbGVtZW50cyBvZiBgYXJyYXlgIHRvIGB2YWx1ZXNgLiBUaGUgY29tcGFyYXRvciBpc1xuICAgICAqIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnRzOiAoYXJyVmFsLCBvdGhWYWwpLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFVubGlrZSBgXy5kaWZmZXJlbmNlV2l0aGAsIHRoaXMgbWV0aG9kIG11dGF0ZXMgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjYuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtBcnJheX0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gcmVtb3ZlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJhdG9yXSBUaGUgY29tcGFyYXRvciBpbnZva2VkIHBlciBlbGVtZW50LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbeyAneCc6IDEsICd5JzogMiB9LCB7ICd4JzogMywgJ3knOiA0IH0sIHsgJ3gnOiA1LCAneSc6IDYgfV07XG4gICAgICpcbiAgICAgKiBfLnB1bGxBbGxXaXRoKGFycmF5LCBbeyAneCc6IDMsICd5JzogNCB9XSwgXy5pc0VxdWFsKTtcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gW3sgJ3gnOiAxLCAneSc6IDIgfSwgeyAneCc6IDUsICd5JzogNiB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHB1bGxBbGxXaXRoKGFycmF5LCB2YWx1ZXMsIGNvbXBhcmF0b3IpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoICYmIHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoKVxuICAgICAgICA/IGJhc2VQdWxsQWxsKGFycmF5LCB2YWx1ZXMsIHVuZGVmaW5lZCwgY29tcGFyYXRvcilcbiAgICAgICAgOiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGVsZW1lbnRzIGZyb20gYGFycmF5YCBjb3JyZXNwb25kaW5nIHRvIGBpbmRleGVzYCBhbmQgcmV0dXJucyBhblxuICAgICAqIGFycmF5IG9mIHJlbW92ZWQgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLmF0YCwgdGhpcyBtZXRob2QgbXV0YXRlcyBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0gey4uLihudW1iZXJ8bnVtYmVyW10pfSBbaW5kZXhlc10gVGhlIGluZGV4ZXMgb2YgZWxlbWVudHMgdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHJlbW92ZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsnYScsICdiJywgJ2MnLCAnZCddO1xuICAgICAqIHZhciBwdWxsZWQgPSBfLnB1bGxBdChhcnJheSwgWzEsIDNdKTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYyddXG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhwdWxsZWQpO1xuICAgICAqIC8vID0+IFsnYicsICdkJ11cbiAgICAgKi9cbiAgICB2YXIgcHVsbEF0ID0gZmxhdFJlc3QoZnVuY3Rpb24oYXJyYXksIGluZGV4ZXMpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBiYXNlQXQoYXJyYXksIGluZGV4ZXMpO1xuXG4gICAgICBiYXNlUHVsbEF0KGFycmF5LCBhcnJheU1hcChpbmRleGVzLCBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICByZXR1cm4gaXNJbmRleChpbmRleCwgbGVuZ3RoKSA/ICtpbmRleCA6IGluZGV4O1xuICAgICAgfSkuc29ydChjb21wYXJlQXNjZW5kaW5nKSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBlbGVtZW50cyBmcm9tIGBhcnJheWAgdGhhdCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3JcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgcmVtb3ZlZCBlbGVtZW50cy4gVGhlIHByZWRpY2F0ZSBpcyBpbnZva2VkXG4gICAgICogd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBVbmxpa2UgYF8uZmlsdGVyYCwgdGhpcyBtZXRob2QgbXV0YXRlcyBgYXJyYXlgLiBVc2UgYF8ucHVsbGBcbiAgICAgKiB0byBwdWxsIGVsZW1lbnRzIGZyb20gYW4gYXJyYXkgYnkgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMi4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiByZW1vdmVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMiwgMywgNF07XG4gICAgICogdmFyIGV2ZW5zID0gXy5yZW1vdmUoYXJyYXksIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICUgMiA9PSAwO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAzXVxuICAgICAqXG4gICAgICogY29uc29sZS5sb2coZXZlbnMpO1xuICAgICAqIC8vID0+IFsyLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZShhcnJheSwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICBpZiAoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpbmRleGVzID0gW10sXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICBwcmVkaWNhdGUgPSBnZXRJdGVyYXRlZShwcmVkaWNhdGUsIDMpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJhc2VQdWxsQXQoYXJyYXksIGluZGV4ZXMpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXZlcnNlcyBgYXJyYXlgIHNvIHRoYXQgdGhlIGZpcnN0IGVsZW1lbnQgYmVjb21lcyB0aGUgbGFzdCwgdGhlIHNlY29uZFxuICAgICAqIGVsZW1lbnQgYmVjb21lcyB0aGUgc2Vjb25kIHRvIGxhc3QsIGFuZCBzbyBvbi5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBhcnJheWAgYW5kIGlzIGJhc2VkIG9uXG4gICAgICogW2BBcnJheSNyZXZlcnNlYF0oaHR0cHM6Ly9tZG4uaW8vQXJyYXkvcmV2ZXJzZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMiwgM107XG4gICAgICpcbiAgICAgKiBfLnJldmVyc2UoYXJyYXkpO1xuICAgICAqIC8vID0+IFszLCAyLCAxXVxuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFszLCAyLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJldmVyc2UoYXJyYXkpIHtcbiAgICAgIHJldHVybiBhcnJheSA9PSBudWxsID8gYXJyYXkgOiBuYXRpdmVSZXZlcnNlLmNhbGwoYXJyYXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIGZyb20gYHN0YXJ0YCB1cCB0bywgYnV0IG5vdCBpbmNsdWRpbmcsIGBlbmRgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIHVzZWQgaW5zdGVhZCBvZlxuICAgICAqIFtgQXJyYXkjc2xpY2VgXShodHRwczovL21kbi5pby9BcnJheS9zbGljZSkgdG8gZW5zdXJlIGRlbnNlIGFycmF5cyBhcmVcbiAgICAgKiByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzbGljZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNsaWNlKGFycmF5LCBzdGFydCwgZW5kKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoZW5kICYmIHR5cGVvZiBlbmQgIT0gJ251bWJlcicgJiYgaXNJdGVyYXRlZUNhbGwoYXJyYXksIHN0YXJ0LCBlbmQpKSB7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgZW5kID0gbGVuZ3RoO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHN0YXJ0ID0gc3RhcnQgPT0gbnVsbCA/IDAgOiB0b0ludGVnZXIoc3RhcnQpO1xuICAgICAgICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbmd0aCA6IHRvSW50ZWdlcihlbmQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlcyBhIGJpbmFyeSBzZWFyY2ggdG8gZGV0ZXJtaW5lIHRoZSBsb3dlc3QgaW5kZXggYXQgd2hpY2ggYHZhbHVlYFxuICAgICAqIHNob3VsZCBiZSBpbnNlcnRlZCBpbnRvIGBhcnJheWAgaW4gb3JkZXIgdG8gbWFpbnRhaW4gaXRzIHNvcnQgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgc29ydGVkIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZXZhbHVhdGUuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWRcbiAgICAgKiAgaW50byBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNvcnRlZEluZGV4KFszMCwgNTBdLCA0MCk7XG4gICAgICogLy8gPT4gMVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvcnRlZEluZGV4KGFycmF5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGJhc2VTb3J0ZWRJbmRleChhcnJheSwgdmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uc29ydGVkSW5kZXhgIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYGl0ZXJhdGVlYFxuICAgICAqIHdoaWNoIGlzIGludm9rZWQgZm9yIGB2YWx1ZWAgYW5kIGVhY2ggZWxlbWVudCBvZiBgYXJyYXlgIHRvIGNvbXB1dGUgdGhlaXJcbiAgICAgKiBzb3J0IHJhbmtpbmcuIFRoZSBpdGVyYXRlZSBpcyBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OiAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvcnRlZCBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGV2YWx1YXRlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZCBiZSBpbnNlcnRlZFxuICAgICAqICBpbnRvIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3RzID0gW3sgJ3gnOiA0IH0sIHsgJ3gnOiA1IH1dO1xuICAgICAqXG4gICAgICogXy5zb3J0ZWRJbmRleEJ5KG9iamVjdHMsIHsgJ3gnOiA0IH0sIGZ1bmN0aW9uKG8pIHsgcmV0dXJuIG8ueDsgfSk7XG4gICAgICogLy8gPT4gMFxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5zb3J0ZWRJbmRleEJ5KG9iamVjdHMsIHsgJ3gnOiA0IH0sICd4Jyk7XG4gICAgICogLy8gPT4gMFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvcnRlZEluZGV4QnkoYXJyYXksIHZhbHVlLCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIGJhc2VTb3J0ZWRJbmRleEJ5KGFycmF5LCB2YWx1ZSwgZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsIDIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmluZGV4T2ZgIGV4Y2VwdCB0aGF0IGl0IHBlcmZvcm1zIGEgYmluYXJ5XG4gICAgICogc2VhcmNoIG9uIGEgc29ydGVkIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29ydGVkSW5kZXhPZihbNCwgNSwgNSwgNSwgNl0sIDUpO1xuICAgICAqIC8vID0+IDFcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzb3J0ZWRJbmRleE9mKGFycmF5LCB2YWx1ZSkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCkge1xuICAgICAgICB2YXIgaW5kZXggPSBiYXNlU29ydGVkSW5kZXgoYXJyYXksIHZhbHVlKTtcbiAgICAgICAgaWYgKGluZGV4IDwgbGVuZ3RoICYmIGVxKGFycmF5W2luZGV4XSwgdmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5zb3J0ZWRJbmRleGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUgaGlnaGVzdFxuICAgICAqIGluZGV4IGF0IHdoaWNoIGB2YWx1ZWAgc2hvdWxkIGJlIGluc2VydGVkIGludG8gYGFycmF5YCBpbiBvcmRlciB0b1xuICAgICAqIG1haW50YWluIGl0cyBzb3J0IG9yZGVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvcnRlZCBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGV2YWx1YXRlLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IGF0IHdoaWNoIGB2YWx1ZWAgc2hvdWxkIGJlIGluc2VydGVkXG4gICAgICogIGludG8gYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zb3J0ZWRMYXN0SW5kZXgoWzQsIDUsIDUsIDUsIDZdLCA1KTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICovXG4gICAgZnVuY3Rpb24gc29ydGVkTGFzdEluZGV4KGFycmF5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGJhc2VTb3J0ZWRJbmRleChhcnJheSwgdmFsdWUsIHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uc29ydGVkTGFzdEluZGV4YCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBpdGVyYXRlZWBcbiAgICAgKiB3aGljaCBpcyBpbnZva2VkIGZvciBgdmFsdWVgIGFuZCBlYWNoIGVsZW1lbnQgb2YgYGFycmF5YCB0byBjb21wdXRlIHRoZWlyXG4gICAgICogc29ydCByYW5raW5nLiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDogKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBzb3J0ZWQgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBldmFsdWF0ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGl0ZXJhdGVlIGludm9rZWQgcGVyIGVsZW1lbnQuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWRcbiAgICAgKiAgaW50byBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFt7ICd4JzogNCB9LCB7ICd4JzogNSB9XTtcbiAgICAgKlxuICAgICAqIF8uc29ydGVkTGFzdEluZGV4Qnkob2JqZWN0cywgeyAneCc6IDQgfSwgZnVuY3Rpb24obykgeyByZXR1cm4gby54OyB9KTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLnNvcnRlZExhc3RJbmRleEJ5KG9iamVjdHMsIHsgJ3gnOiA0IH0sICd4Jyk7XG4gICAgICogLy8gPT4gMVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvcnRlZExhc3RJbmRleEJ5KGFycmF5LCB2YWx1ZSwgaXRlcmF0ZWUpIHtcbiAgICAgIHJldHVybiBiYXNlU29ydGVkSW5kZXhCeShhcnJheSwgdmFsdWUsIGdldEl0ZXJhdGVlKGl0ZXJhdGVlLCAyKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5sYXN0SW5kZXhPZmAgZXhjZXB0IHRoYXQgaXQgcGVyZm9ybXMgYSBiaW5hcnlcbiAgICAgKiBzZWFyY2ggb24gYSBzb3J0ZWQgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zb3J0ZWRMYXN0SW5kZXhPZihbNCwgNSwgNSwgNSwgNl0sIDUpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzb3J0ZWRMYXN0SW5kZXhPZihhcnJheSwgdmFsdWUpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGgpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gYmFzZVNvcnRlZEluZGV4KGFycmF5LCB2YWx1ZSwgdHJ1ZSkgLSAxO1xuICAgICAgICBpZiAoZXEoYXJyYXlbaW5kZXhdLCB2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnVuaXFgIGV4Y2VwdCB0aGF0IGl0J3MgZGVzaWduZWQgYW5kIG9wdGltaXplZFxuICAgICAqIGZvciBzb3J0ZWQgYXJyYXlzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZHVwbGljYXRlIGZyZWUgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29ydGVkVW5pcShbMSwgMSwgMl0pO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvcnRlZFVuaXEoYXJyYXkpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VTb3J0ZWRVbmlxKGFycmF5KVxuICAgICAgICA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8udW5pcUJ5YCBleGNlcHQgdGhhdCBpdCdzIGRlc2lnbmVkIGFuZCBvcHRpbWl6ZWRcbiAgICAgKiBmb3Igc29ydGVkIGFycmF5cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZV0gVGhlIGl0ZXJhdGVlIGludm9rZWQgcGVyIGVsZW1lbnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZHVwbGljYXRlIGZyZWUgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29ydGVkVW5pcUJ5KFsxLjEsIDEuMiwgMi4zLCAyLjRdLCBNYXRoLmZsb29yKTtcbiAgICAgKiAvLyA9PiBbMS4xLCAyLjNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gc29ydGVkVW5pcUJ5KGFycmF5LCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpXG4gICAgICAgID8gYmFzZVNvcnRlZFVuaXEoYXJyYXksIGdldEl0ZXJhdGVlKGl0ZXJhdGVlLCAyKSlcbiAgICAgICAgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCBidXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udGFpbChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRhaWwoYXJyYXkpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcbiAgICAgIHJldHVybiBsZW5ndGggPyBiYXNlU2xpY2UoYXJyYXksIDEsIGxlbmd0aCkgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCB3aXRoIGBuYCBlbGVtZW50cyB0YWtlbiBmcm9tIHRoZSBiZWdpbm5pbmcuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuPTFdIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gdGFrZS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50YWtlKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzFdXG4gICAgICpcbiAgICAgKiBfLnRha2UoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIF8udGFrZShbMSwgMiwgM10sIDUpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogXy50YWtlKFsxLCAyLCAzXSwgMCk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0YWtlKGFycmF5LCBuLCBndWFyZCkge1xuICAgICAgaWYgKCEoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBuID0gKGd1YXJkIHx8IG4gPT09IHVuZGVmaW5lZCkgPyAxIDogdG9JbnRlZ2VyKG4pO1xuICAgICAgcmV0dXJuIGJhc2VTbGljZShhcnJheSwgMCwgbiA8IDAgPyAwIDogbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgd2l0aCBgbmAgZWxlbWVudHMgdGFrZW4gZnJvbSB0aGUgZW5kLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbj0xXSBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHRha2UuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGFuIGl0ZXJhdGVlIGZvciBtZXRob2RzIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udGFrZVJpZ2h0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzNdXG4gICAgICpcbiAgICAgKiBfLnRha2VSaWdodChbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqXG4gICAgICogXy50YWtlUmlnaHQoWzEsIDIsIDNdLCA1KTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIF8udGFrZVJpZ2h0KFsxLCAyLCAzXSwgMCk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0YWtlUmlnaHQoYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBuID0gKGd1YXJkIHx8IG4gPT09IHVuZGVmaW5lZCkgPyAxIDogdG9JbnRlZ2VyKG4pO1xuICAgICAgbiA9IGxlbmd0aCAtIG47XG4gICAgICByZXR1cm4gYmFzZVNsaWNlKGFycmF5LCBuIDwgMCA/IDAgOiBuLCBsZW5ndGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIHdpdGggZWxlbWVudHMgdGFrZW4gZnJvbSB0aGUgZW5kLiBFbGVtZW50cyBhcmVcbiAgICAgKiB0YWtlbiB1bnRpbCBgcHJlZGljYXRlYCByZXR1cm5zIGZhbHNleS4gVGhlIHByZWRpY2F0ZSBpcyBpbnZva2VkIHdpdGhcbiAgICAgKiB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLnRha2VSaWdodFdoaWxlKHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiAhby5hY3RpdmU7IH0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5tYXRjaGVzYCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy50YWtlUmlnaHRXaGlsZSh1c2VycywgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsncGViYmxlcyddXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy50YWtlUmlnaHRXaGlsZSh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8udGFrZVJpZ2h0V2hpbGUodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRha2VSaWdodFdoaWxlKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VXaGlsZShhcnJheSwgZ2V0SXRlcmF0ZWUocHJlZGljYXRlLCAzKSwgZmFsc2UsIHRydWUpXG4gICAgICAgIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgd2l0aCBlbGVtZW50cyB0YWtlbiBmcm9tIHRoZSBiZWdpbm5pbmcuIEVsZW1lbnRzXG4gICAgICogYXJlIHRha2VuIHVudGlsIGBwcmVkaWNhdGVgIHJldHVybnMgZmFsc2V5LiBUaGUgcHJlZGljYXRlIGlzIGludm9rZWQgd2l0aFxuICAgICAqIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8udGFrZVdoaWxlKHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiAhby5hY3RpdmU7IH0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLnRha2VXaGlsZSh1c2VycywgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgWydiYXJuZXknXVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8udGFrZVdoaWxlKHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgWydiYXJuZXknLCAnZnJlZCddXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLnRha2VXaGlsZSh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+IFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGFrZVdoaWxlKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VXaGlsZShhcnJheSwgZ2V0SXRlcmF0ZWUocHJlZGljYXRlLCAzKSlcbiAgICAgICAgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSB2YWx1ZXMsIGluIG9yZGVyLCBmcm9tIGFsbCBnaXZlbiBhcnJheXMgdXNpbmdcbiAgICAgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheXNdIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBjb21iaW5lZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pb24oWzJdLCBbMSwgMl0pO1xuICAgICAqIC8vID0+IFsyLCAxXVxuICAgICAqL1xuICAgIHZhciB1bmlvbiA9IGJhc2VSZXN0KGZ1bmN0aW9uKGFycmF5cykge1xuICAgICAgcmV0dXJuIGJhc2VVbmlxKGJhc2VGbGF0dGVuKGFycmF5cywgMSwgaXNBcnJheUxpa2VPYmplY3QsIHRydWUpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8udW5pb25gIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYGl0ZXJhdGVlYCB3aGljaCBpc1xuICAgICAqIGludm9rZWQgZm9yIGVhY2ggZWxlbWVudCBvZiBlYWNoIGBhcnJheXNgIHRvIGdlbmVyYXRlIHRoZSBjcml0ZXJpb24gYnlcbiAgICAgKiB3aGljaCB1bmlxdWVuZXNzIGlzIGNvbXB1dGVkLiBSZXN1bHQgdmFsdWVzIGFyZSBjaG9zZW4gZnJvbSB0aGUgZmlyc3RcbiAgICAgKiBhcnJheSBpbiB3aGljaCB0aGUgdmFsdWUgb2NjdXJzLiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDpcbiAgICAgKiAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBjb21iaW5lZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pb25CeShbMi4xXSwgWzEuMiwgMi4zXSwgTWF0aC5mbG9vcik7XG4gICAgICogLy8gPT4gWzIuMSwgMS4yXVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy51bmlvbkJ5KFt7ICd4JzogMSB9XSwgW3sgJ3gnOiAyIH0sIHsgJ3gnOiAxIH1dLCAneCcpO1xuICAgICAqIC8vID0+IFt7ICd4JzogMSB9LCB7ICd4JzogMiB9XVxuICAgICAqL1xuICAgIHZhciB1bmlvbkJ5ID0gYmFzZVJlc3QoZnVuY3Rpb24oYXJyYXlzKSB7XG4gICAgICB2YXIgaXRlcmF0ZWUgPSBsYXN0KGFycmF5cyk7XG4gICAgICBpZiAoaXNBcnJheUxpa2VPYmplY3QoaXRlcmF0ZWUpKSB7XG4gICAgICAgIGl0ZXJhdGVlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VVbmlxKGJhc2VGbGF0dGVuKGFycmF5cywgMSwgaXNBcnJheUxpa2VPYmplY3QsIHRydWUpLCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgMikpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy51bmlvbmAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBgY29tcGFyYXRvcmAgd2hpY2hcbiAgICAgKiBpcyBpbnZva2VkIHRvIGNvbXBhcmUgZWxlbWVudHMgb2YgYGFycmF5c2AuIFJlc3VsdCB2YWx1ZXMgYXJlIGNob3NlbiBmcm9tXG4gICAgICogdGhlIGZpcnN0IGFycmF5IGluIHdoaWNoIHRoZSB2YWx1ZSBvY2N1cnMuIFRoZSBjb21wYXJhdG9yIGlzIGludm9rZWRcbiAgICAgKiB3aXRoIHR3byBhcmd1bWVudHM6IChhcnJWYWwsIG90aFZhbCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXlzXSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmF0b3JdIFRoZSBjb21wYXJhdG9yIGludm9rZWQgcGVyIGVsZW1lbnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgY29tYmluZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFt7ICd4JzogMSwgJ3knOiAyIH0sIHsgJ3gnOiAyLCAneSc6IDEgfV07XG4gICAgICogdmFyIG90aGVycyA9IFt7ICd4JzogMSwgJ3knOiAxIH0sIHsgJ3gnOiAxLCAneSc6IDIgfV07XG4gICAgICpcbiAgICAgKiBfLnVuaW9uV2l0aChvYmplY3RzLCBvdGhlcnMsIF8uaXNFcXVhbCk7XG4gICAgICogLy8gPT4gW3sgJ3gnOiAxLCAneSc6IDIgfSwgeyAneCc6IDIsICd5JzogMSB9LCB7ICd4JzogMSwgJ3knOiAxIH1dXG4gICAgICovXG4gICAgdmFyIHVuaW9uV2l0aCA9IGJhc2VSZXN0KGZ1bmN0aW9uKGFycmF5cykge1xuICAgICAgdmFyIGNvbXBhcmF0b3IgPSBsYXN0KGFycmF5cyk7XG4gICAgICBjb21wYXJhdG9yID0gdHlwZW9mIGNvbXBhcmF0b3IgPT0gJ2Z1bmN0aW9uJyA/IGNvbXBhcmF0b3IgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gYmFzZVVuaXEoYmFzZUZsYXR0ZW4oYXJyYXlzLCAxLCBpc0FycmF5TGlrZU9iamVjdCwgdHJ1ZSksIHVuZGVmaW5lZCwgY29tcGFyYXRvcik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiBhbiBhcnJheSwgdXNpbmdcbiAgICAgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucywgaW4gd2hpY2ggb25seSB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBlYWNoIGVsZW1lbnRcbiAgICAgKiBpcyBrZXB0LiBUaGUgb3JkZXIgb2YgcmVzdWx0IHZhbHVlcyBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBvcmRlciB0aGV5IG9jY3VyXG4gICAgICogaW4gdGhlIGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZHVwbGljYXRlIGZyZWUgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pcShbMiwgMSwgMl0pO1xuICAgICAqIC8vID0+IFsyLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuaXEoYXJyYXkpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSA/IGJhc2VVbmlxKGFycmF5KSA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8udW5pcWAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBgaXRlcmF0ZWVgIHdoaWNoIGlzXG4gICAgICogaW52b2tlZCBmb3IgZWFjaCBlbGVtZW50IGluIGBhcnJheWAgdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieSB3aGljaFxuICAgICAqIHVuaXF1ZW5lc3MgaXMgY29tcHV0ZWQuIFRoZSBvcmRlciBvZiByZXN1bHQgdmFsdWVzIGlzIGRldGVybWluZWQgYnkgdGhlXG4gICAgICogb3JkZXIgdGhleSBvY2N1ciBpbiB0aGUgYXJyYXkuIFRoZSBpdGVyYXRlZSBpcyBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OlxuICAgICAqICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGl0ZXJhdGVlIGludm9rZWQgcGVyIGVsZW1lbnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZHVwbGljYXRlIGZyZWUgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pcUJ5KFsyLjEsIDEuMiwgMi4zXSwgTWF0aC5mbG9vcik7XG4gICAgICogLy8gPT4gWzIuMSwgMS4yXVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy51bmlxQnkoW3sgJ3gnOiAxIH0sIHsgJ3gnOiAyIH0sIHsgJ3gnOiAxIH1dLCAneCcpO1xuICAgICAqIC8vID0+IFt7ICd4JzogMSB9LCB7ICd4JzogMiB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuaXFCeShhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSA/IGJhc2VVbmlxKGFycmF5LCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgMikpIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy51bmlxYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBjb21wYXJhdG9yYCB3aGljaFxuICAgICAqIGlzIGludm9rZWQgdG8gY29tcGFyZSBlbGVtZW50cyBvZiBgYXJyYXlgLiBUaGUgb3JkZXIgb2YgcmVzdWx0IHZhbHVlcyBpc1xuICAgICAqIGRldGVybWluZWQgYnkgdGhlIG9yZGVyIHRoZXkgb2NjdXIgaW4gdGhlIGFycmF5LlRoZSBjb21wYXJhdG9yIGlzIGludm9rZWRcbiAgICAgKiB3aXRoIHR3byBhcmd1bWVudHM6IChhcnJWYWwsIG90aFZhbCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyYXRvcl0gVGhlIGNvbXBhcmF0b3IgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBkdXBsaWNhdGUgZnJlZSBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbeyAneCc6IDEsICd5JzogMiB9LCB7ICd4JzogMiwgJ3knOiAxIH0sIHsgJ3gnOiAxLCAneSc6IDIgfV07XG4gICAgICpcbiAgICAgKiBfLnVuaXFXaXRoKG9iamVjdHMsIF8uaXNFcXVhbCk7XG4gICAgICogLy8gPT4gW3sgJ3gnOiAxLCAneSc6IDIgfSwgeyAneCc6IDIsICd5JzogMSB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuaXFXaXRoKGFycmF5LCBjb21wYXJhdG9yKSB7XG4gICAgICBjb21wYXJhdG9yID0gdHlwZW9mIGNvbXBhcmF0b3IgPT0gJ2Z1bmN0aW9uJyA/IGNvbXBhcmF0b3IgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkgPyBiYXNlVW5pcShhcnJheSwgdW5kZWZpbmVkLCBjb21wYXJhdG9yKSA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uemlwYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGFuIGFycmF5IG9mIGdyb3VwZWRcbiAgICAgKiBlbGVtZW50cyBhbmQgY3JlYXRlcyBhbiBhcnJheSByZWdyb3VwaW5nIHRoZSBlbGVtZW50cyB0byB0aGVpciBwcmUtemlwXG4gICAgICogY29uZmlndXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzIHRvIHByb2Nlc3MuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcmVncm91cGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgemlwcGVkID0gXy56aXAoWydhJywgJ2InXSwgWzEsIDJdLCBbdHJ1ZSwgZmFsc2VdKTtcbiAgICAgKiAvLyA9PiBbWydhJywgMSwgdHJ1ZV0sIFsnYicsIDIsIGZhbHNlXV1cbiAgICAgKlxuICAgICAqIF8udW56aXAoemlwcGVkKTtcbiAgICAgKiAvLyA9PiBbWydhJywgJ2InXSwgWzEsIDJdLCBbdHJ1ZSwgZmFsc2VdXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuemlwKGFycmF5KSB7XG4gICAgICBpZiAoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBsZW5ndGggPSAwO1xuICAgICAgYXJyYXkgPSBhcnJheUZpbHRlcihhcnJheSwgZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgaWYgKGlzQXJyYXlMaWtlT2JqZWN0KGdyb3VwKSkge1xuICAgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChncm91cC5sZW5ndGgsIGxlbmd0aCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGJhc2VUaW1lcyhsZW5ndGgsIGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBhcnJheU1hcChhcnJheSwgYmFzZVByb3BlcnR5KGluZGV4KSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnVuemlwYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBpdGVyYXRlZWAgdG8gc3BlY2lmeVxuICAgICAqIGhvdyByZWdyb3VwZWQgdmFsdWVzIHNob3VsZCBiZSBjb21iaW5lZC4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCB0aGVcbiAgICAgKiBlbGVtZW50cyBvZiBlYWNoIGdyb3VwOiAoLi4uZ3JvdXApLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuOC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIHRvIGNvbWJpbmVcbiAgICAgKiAgcmVncm91cGVkIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiByZWdyb3VwZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB6aXBwZWQgPSBfLnppcChbMSwgMl0sIFsxMCwgMjBdLCBbMTAwLCAyMDBdKTtcbiAgICAgKiAvLyA9PiBbWzEsIDEwLCAxMDBdLCBbMiwgMjAsIDIwMF1dXG4gICAgICpcbiAgICAgKiBfLnVuemlwV2l0aCh6aXBwZWQsIF8uYWRkKTtcbiAgICAgKiAvLyA9PiBbMywgMzAsIDMwMF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bnppcFdpdGgoYXJyYXksIGl0ZXJhdGVlKSB7XG4gICAgICBpZiAoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSB1bnppcChhcnJheSk7XG4gICAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5TWFwKHJlc3VsdCwgZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgcmV0dXJuIGFwcGx5KGl0ZXJhdGVlLCB1bmRlZmluZWQsIGdyb3VwKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgZXhjbHVkaW5nIGFsbCBnaXZlbiB2YWx1ZXMgdXNpbmdcbiAgICAgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBVbmxpa2UgYF8ucHVsbGAsIHRoaXMgbWV0aG9kIHJldHVybnMgYSBuZXcgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0gey4uLip9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gZXhjbHVkZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICogQHNlZSBfLmRpZmZlcmVuY2UsIF8ueG9yXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ud2l0aG91dChbMiwgMSwgMiwgM10sIDEsIDIpO1xuICAgICAqIC8vID0+IFszXVxuICAgICAqL1xuICAgIHZhciB3aXRob3V0ID0gYmFzZVJlc3QoZnVuY3Rpb24oYXJyYXksIHZhbHVlcykge1xuICAgICAgcmV0dXJuIGlzQXJyYXlMaWtlT2JqZWN0KGFycmF5KVxuICAgICAgICA/IGJhc2VEaWZmZXJlbmNlKGFycmF5LCB2YWx1ZXMpXG4gICAgICAgIDogW107XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSB2YWx1ZXMgdGhhdCBpcyB0aGVcbiAgICAgKiBbc3ltbWV0cmljIGRpZmZlcmVuY2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N5bW1ldHJpY19kaWZmZXJlbmNlKVxuICAgICAqIG9mIHRoZSBnaXZlbiBhcnJheXMuIFRoZSBvcmRlciBvZiByZXN1bHQgdmFsdWVzIGlzIGRldGVybWluZWQgYnkgdGhlIG9yZGVyXG4gICAgICogdGhleSBvY2N1ciBpbiB0aGUgYXJyYXlzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDIuNC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAc2VlIF8uZGlmZmVyZW5jZSwgXy53aXRob3V0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ueG9yKFsyLCAxXSwgWzIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMSwgM11cbiAgICAgKi9cbiAgICB2YXIgeG9yID0gYmFzZVJlc3QoZnVuY3Rpb24oYXJyYXlzKSB7XG4gICAgICByZXR1cm4gYmFzZVhvcihhcnJheUZpbHRlcihhcnJheXMsIGlzQXJyYXlMaWtlT2JqZWN0KSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnhvcmAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBgaXRlcmF0ZWVgIHdoaWNoIGlzXG4gICAgICogaW52b2tlZCBmb3IgZWFjaCBlbGVtZW50IG9mIGVhY2ggYGFycmF5c2AgdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieVxuICAgICAqIHdoaWNoIGJ5IHdoaWNoIHRoZXkncmUgY29tcGFyZWQuIFRoZSBvcmRlciBvZiByZXN1bHQgdmFsdWVzIGlzIGRldGVybWluZWRcbiAgICAgKiBieSB0aGUgb3JkZXIgdGhleSBvY2N1ciBpbiB0aGUgYXJyYXlzLiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIG9uZVxuICAgICAqIGFyZ3VtZW50OiAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ueG9yQnkoWzIuMSwgMS4yXSwgWzIuMywgMy40XSwgTWF0aC5mbG9vcik7XG4gICAgICogLy8gPT4gWzEuMiwgMy40XVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy54b3JCeShbeyAneCc6IDEgfV0sIFt7ICd4JzogMiB9LCB7ICd4JzogMSB9XSwgJ3gnKTtcbiAgICAgKiAvLyA9PiBbeyAneCc6IDIgfV1cbiAgICAgKi9cbiAgICB2YXIgeG9yQnkgPSBiYXNlUmVzdChmdW5jdGlvbihhcnJheXMpIHtcbiAgICAgIHZhciBpdGVyYXRlZSA9IGxhc3QoYXJyYXlzKTtcbiAgICAgIGlmIChpc0FycmF5TGlrZU9iamVjdChpdGVyYXRlZSkpIHtcbiAgICAgICAgaXRlcmF0ZWUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVhvcihhcnJheUZpbHRlcihhcnJheXMsIGlzQXJyYXlMaWtlT2JqZWN0KSwgZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsIDIpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ueG9yYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBjb21wYXJhdG9yYCB3aGljaCBpc1xuICAgICAqIGludm9rZWQgdG8gY29tcGFyZSBlbGVtZW50cyBvZiBgYXJyYXlzYC4gVGhlIG9yZGVyIG9mIHJlc3VsdCB2YWx1ZXMgaXNcbiAgICAgKiBkZXRlcm1pbmVkIGJ5IHRoZSBvcmRlciB0aGV5IG9jY3VyIGluIHRoZSBhcnJheXMuIFRoZSBjb21wYXJhdG9yIGlzIGludm9rZWRcbiAgICAgKiB3aXRoIHR3byBhcmd1bWVudHM6IChhcnJWYWwsIG90aFZhbCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXlzXSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmF0b3JdIFRoZSBjb21wYXJhdG9yIGludm9rZWQgcGVyIGVsZW1lbnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFt7ICd4JzogMSwgJ3knOiAyIH0sIHsgJ3gnOiAyLCAneSc6IDEgfV07XG4gICAgICogdmFyIG90aGVycyA9IFt7ICd4JzogMSwgJ3knOiAxIH0sIHsgJ3gnOiAxLCAneSc6IDIgfV07XG4gICAgICpcbiAgICAgKiBfLnhvcldpdGgob2JqZWN0cywgb3RoZXJzLCBfLmlzRXF1YWwpO1xuICAgICAqIC8vID0+IFt7ICd4JzogMiwgJ3knOiAxIH0sIHsgJ3gnOiAxLCAneSc6IDEgfV1cbiAgICAgKi9cbiAgICB2YXIgeG9yV2l0aCA9IGJhc2VSZXN0KGZ1bmN0aW9uKGFycmF5cykge1xuICAgICAgdmFyIGNvbXBhcmF0b3IgPSBsYXN0KGFycmF5cyk7XG4gICAgICBjb21wYXJhdG9yID0gdHlwZW9mIGNvbXBhcmF0b3IgPT0gJ2Z1bmN0aW9uJyA/IGNvbXBhcmF0b3IgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gYmFzZVhvcihhcnJheUZpbHRlcihhcnJheXMsIGlzQXJyYXlMaWtlT2JqZWN0KSwgdW5kZWZpbmVkLCBjb21wYXJhdG9yKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cywgdGhlIGZpcnN0IG9mIHdoaWNoIGNvbnRhaW5zIHRoZVxuICAgICAqIGZpcnN0IGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBhcnJheXMsIHRoZSBzZWNvbmQgb2Ygd2hpY2ggY29udGFpbnMgdGhlXG4gICAgICogc2Vjb25kIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBhcnJheXMsIGFuZCBzbyBvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheXNdIFRoZSBhcnJheXMgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnppcChbJ2EnLCAnYiddLCBbMSwgMl0sIFt0cnVlLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IFtbJ2EnLCAxLCB0cnVlXSwgWydiJywgMiwgZmFsc2VdXVxuICAgICAqL1xuICAgIHZhciB6aXAgPSBiYXNlUmVzdCh1bnppcCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZyb21QYWlyc2AgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyB0d28gYXJyYXlzLFxuICAgICAqIG9uZSBvZiBwcm9wZXJ0eSBpZGVudGlmaWVycyBhbmQgb25lIG9mIGNvcnJlc3BvbmRpbmcgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuNC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gW3Byb3BzPVtdXSBUaGUgcHJvcGVydHkgaWRlbnRpZmllcnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlcz1bXV0gVGhlIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnppcE9iamVjdChbJ2EnLCAnYiddLCBbMSwgMl0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHppcE9iamVjdChwcm9wcywgdmFsdWVzKSB7XG4gICAgICByZXR1cm4gYmFzZVppcE9iamVjdChwcm9wcyB8fCBbXSwgdmFsdWVzIHx8IFtdLCBhc3NpZ25WYWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy56aXBPYmplY3RgIGV4Y2VwdCB0aGF0IGl0IHN1cHBvcnRzIHByb3BlcnR5IHBhdGhzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMS4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gW3Byb3BzPVtdXSBUaGUgcHJvcGVydHkgaWRlbnRpZmllcnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlcz1bXV0gVGhlIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnppcE9iamVjdERlZXAoWydhLmJbMF0uYycsICdhLmJbMV0uZCddLCBbMSwgMl0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiB7ICdiJzogW3sgJ2MnOiAxIH0sIHsgJ2QnOiAyIH1dIH0gfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHppcE9iamVjdERlZXAocHJvcHMsIHZhbHVlcykge1xuICAgICAgcmV0dXJuIGJhc2VaaXBPYmplY3QocHJvcHMgfHwgW10sIHZhbHVlcyB8fCBbXSwgYmFzZVNldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy56aXBgIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYGl0ZXJhdGVlYCB0byBzcGVjaWZ5XG4gICAgICogaG93IGdyb3VwZWQgdmFsdWVzIHNob3VsZCBiZSBjb21iaW5lZC4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCB0aGVcbiAgICAgKiBlbGVtZW50cyBvZiBlYWNoIGdyb3VwOiAoLi4uZ3JvdXApLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuOC4wXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBwcm9jZXNzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gdG8gY29tYmluZVxuICAgICAqICBncm91cGVkIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnppcFdpdGgoWzEsIDJdLCBbMTAsIDIwXSwgWzEwMCwgMjAwXSwgZnVuY3Rpb24oYSwgYiwgYykge1xuICAgICAqICAgcmV0dXJuIGEgKyBiICsgYztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMTExLCAyMjJdXG4gICAgICovXG4gICAgdmFyIHppcFdpdGggPSBiYXNlUmVzdChmdW5jdGlvbihhcnJheXMpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheXMubGVuZ3RoLFxuICAgICAgICAgIGl0ZXJhdGVlID0gbGVuZ3RoID4gMSA/IGFycmF5c1tsZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcblxuICAgICAgaXRlcmF0ZWUgPSB0eXBlb2YgaXRlcmF0ZWUgPT0gJ2Z1bmN0aW9uJyA/IChhcnJheXMucG9wKCksIGl0ZXJhdGVlKSA6IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiB1bnppcFdpdGgoYXJyYXlzLCBpdGVyYXRlZSk7XG4gICAgfSk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZSB0aGF0IHdyYXBzIGB2YWx1ZWAgd2l0aCBleHBsaWNpdCBtZXRob2RcbiAgICAgKiBjaGFpbiBzZXF1ZW5jZXMgZW5hYmxlZC4gVGhlIHJlc3VsdCBvZiBzdWNoIHNlcXVlbmNlcyBtdXN0IGJlIHVud3JhcHBlZFxuICAgICAqIHdpdGggYF8jdmFsdWVgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDEuMy4wXG4gICAgICogQGNhdGVnb3J5IFNlcVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FnZSc6IDQwIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIHZhciB5b3VuZ2VzdCA9IF9cbiAgICAgKiAgIC5jaGFpbih1c2VycylcbiAgICAgKiAgIC5zb3J0QnkoJ2FnZScpXG4gICAgICogICAubWFwKGZ1bmN0aW9uKG8pIHtcbiAgICAgKiAgICAgcmV0dXJuIG8udXNlciArICcgaXMgJyArIG8uYWdlO1xuICAgICAqICAgfSlcbiAgICAgKiAgIC5oZWFkKClcbiAgICAgKiAgIC52YWx1ZSgpO1xuICAgICAqIC8vID0+ICdwZWJibGVzIGlzIDEnXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2hhaW4odmFsdWUpIHtcbiAgICAgIHZhciByZXN1bHQgPSBsb2Rhc2godmFsdWUpO1xuICAgICAgcmVzdWx0Ll9fY2hhaW5fXyA9IHRydWU7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGludm9rZXMgYGludGVyY2VwdG9yYCBhbmQgcmV0dXJucyBgdmFsdWVgLiBUaGUgaW50ZXJjZXB0b3JcbiAgICAgKiBpcyBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLiBUaGUgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0b1xuICAgICAqIFwidGFwIGludG9cIiBhIG1ldGhvZCBjaGFpbiBzZXF1ZW5jZSBpbiBvcmRlciB0byBtb2RpZnkgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgU2VxXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvdmlkZSB0byBgaW50ZXJjZXB0b3JgLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGludGVyY2VwdG9yIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMiwgM10pXG4gICAgICogIC50YXAoZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgKiAgICAvLyBNdXRhdGUgaW5wdXQgYXJyYXkuXG4gICAgICogICAgYXJyYXkucG9wKCk7XG4gICAgICogIH0pXG4gICAgICogIC5yZXZlcnNlKClcbiAgICAgKiAgLnZhbHVlKCk7XG4gICAgICogLy8gPT4gWzIsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGFwKHZhbHVlLCBpbnRlcmNlcHRvcikge1xuICAgICAgaW50ZXJjZXB0b3IodmFsdWUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8udGFwYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSByZXN1bHQgb2YgYGludGVyY2VwdG9yYC5cbiAgICAgKiBUaGUgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byBcInBhc3MgdGhydVwiIHZhbHVlcyByZXBsYWNpbmcgaW50ZXJtZWRpYXRlXG4gICAgICogcmVzdWx0cyBpbiBhIG1ldGhvZCBjaGFpbiBzZXF1ZW5jZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBTZXFcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm92aWRlIHRvIGBpbnRlcmNlcHRvcmAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW50ZXJjZXB0b3IgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBpbnRlcmNlcHRvcmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oJyAgYWJjICAnKVxuICAgICAqICAuY2hhaW4oKVxuICAgICAqICAudHJpbSgpXG4gICAgICogIC50aHJ1KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICAgcmV0dXJuIFt2YWx1ZV07XG4gICAgICogIH0pXG4gICAgICogIC52YWx1ZSgpO1xuICAgICAqIC8vID0+IFsnYWJjJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aHJ1KHZhbHVlLCBpbnRlcmNlcHRvcikge1xuICAgICAgcmV0dXJuIGludGVyY2VwdG9yKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB0aGUgd3JhcHBlciB2ZXJzaW9uIG9mIGBfLmF0YC5cbiAgICAgKlxuICAgICAqIEBuYW1lIGF0XG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgU2VxXG4gICAgICogQHBhcmFtIHsuLi4oc3RyaW5nfHN0cmluZ1tdKX0gW3BhdGhzXSBUaGUgcHJvcGVydHkgcGF0aHMgdG8gcGljay5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfSwgNF0gfTtcbiAgICAgKlxuICAgICAqIF8ob2JqZWN0KS5hdChbJ2FbMF0uYi5jJywgJ2FbMV0nXSkudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbMywgNF1cbiAgICAgKi9cbiAgICB2YXIgd3JhcHBlckF0ID0gZmxhdFJlc3QoZnVuY3Rpb24ocGF0aHMpIHtcbiAgICAgIHZhciBsZW5ndGggPSBwYXRocy5sZW5ndGgsXG4gICAgICAgICAgc3RhcnQgPSBsZW5ndGggPyBwYXRoc1swXSA6IDAsXG4gICAgICAgICAgdmFsdWUgPSB0aGlzLl9fd3JhcHBlZF9fLFxuICAgICAgICAgIGludGVyY2VwdG9yID0gZnVuY3Rpb24ob2JqZWN0KSB7IHJldHVybiBiYXNlQXQob2JqZWN0LCBwYXRocyk7IH07XG5cbiAgICAgIGlmIChsZW5ndGggPiAxIHx8IHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoIHx8XG4gICAgICAgICAgISh2YWx1ZSBpbnN0YW5jZW9mIExhenlXcmFwcGVyKSB8fCAhaXNJbmRleChzdGFydCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhydShpbnRlcmNlcHRvcik7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKHN0YXJ0LCArc3RhcnQgKyAobGVuZ3RoID8gMSA6IDApKTtcbiAgICAgIHZhbHVlLl9fYWN0aW9uc19fLnB1c2goe1xuICAgICAgICAnZnVuYyc6IHRocnUsXG4gICAgICAgICdhcmdzJzogW2ludGVyY2VwdG9yXSxcbiAgICAgICAgJ3RoaXNBcmcnOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ldyBMb2Rhc2hXcmFwcGVyKHZhbHVlLCB0aGlzLl9fY2hhaW5fXykudGhydShmdW5jdGlvbihhcnJheSkge1xuICAgICAgICBpZiAobGVuZ3RoICYmICFhcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICBhcnJheS5wdXNoKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZSB3aXRoIGV4cGxpY2l0IG1ldGhvZCBjaGFpbiBzZXF1ZW5jZXMgZW5hYmxlZC5cbiAgICAgKlxuICAgICAqIEBuYW1lIGNoYWluXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgU2VxXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIEEgc2VxdWVuY2Ugd2l0aG91dCBleHBsaWNpdCBjaGFpbmluZy5cbiAgICAgKiBfKHVzZXJzKS5oZWFkKCk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICAgICAqXG4gICAgICogLy8gQSBzZXF1ZW5jZSB3aXRoIGV4cGxpY2l0IGNoYWluaW5nLlxuICAgICAqIF8odXNlcnMpXG4gICAgICogICAuY2hhaW4oKVxuICAgICAqICAgLmhlYWQoKVxuICAgICAqICAgLnBpY2soJ3VzZXInKVxuICAgICAqICAgLnZhbHVlKCk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyQ2hhaW4oKSB7XG4gICAgICByZXR1cm4gY2hhaW4odGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGNoYWluIHNlcXVlbmNlIGFuZCByZXR1cm5zIHRoZSB3cmFwcGVkIHJlc3VsdC5cbiAgICAgKlxuICAgICAqIEBuYW1lIGNvbW1pdFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMi4wXG4gICAgICogQGNhdGVnb3J5IFNlcVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMl07XG4gICAgICogdmFyIHdyYXBwZWQgPSBfKGFycmF5KS5wdXNoKDMpO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogd3JhcHBlZCA9IHdyYXBwZWQuY29tbWl0KCk7XG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogd3JhcHBlZC5sYXN0KCk7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJDb21taXQoKSB7XG4gICAgICByZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIodGhpcy52YWx1ZSgpLCB0aGlzLl9fY2hhaW5fXyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbmV4dCB2YWx1ZSBvbiBhIHdyYXBwZWQgb2JqZWN0IGZvbGxvd2luZyB0aGVcbiAgICAgKiBbaXRlcmF0b3IgcHJvdG9jb2xdKGh0dHBzOi8vbWRuLmlvL2l0ZXJhdGlvbl9wcm90b2NvbHMjaXRlcmF0b3IpLlxuICAgICAqXG4gICAgICogQG5hbWUgbmV4dFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFNlcVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5leHQgaXRlcmF0b3IgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB3cmFwcGVkID0gXyhbMSwgMl0pO1xuICAgICAqXG4gICAgICogd3JhcHBlZC5uZXh0KCk7XG4gICAgICogLy8gPT4geyAnZG9uZSc6IGZhbHNlLCAndmFsdWUnOiAxIH1cbiAgICAgKlxuICAgICAqIHdyYXBwZWQubmV4dCgpO1xuICAgICAqIC8vID0+IHsgJ2RvbmUnOiBmYWxzZSwgJ3ZhbHVlJzogMiB9XG4gICAgICpcbiAgICAgKiB3cmFwcGVkLm5leHQoKTtcbiAgICAgKiAvLyA9PiB7ICdkb25lJzogdHJ1ZSwgJ3ZhbHVlJzogdW5kZWZpbmVkIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyTmV4dCgpIHtcbiAgICAgIGlmICh0aGlzLl9fdmFsdWVzX18gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9fdmFsdWVzX18gPSB0b0FycmF5KHRoaXMudmFsdWUoKSk7XG4gICAgICB9XG4gICAgICB2YXIgZG9uZSA9IHRoaXMuX19pbmRleF9fID49IHRoaXMuX192YWx1ZXNfXy5sZW5ndGgsXG4gICAgICAgICAgdmFsdWUgPSBkb25lID8gdW5kZWZpbmVkIDogdGhpcy5fX3ZhbHVlc19fW3RoaXMuX19pbmRleF9fKytdO1xuXG4gICAgICByZXR1cm4geyAnZG9uZSc6IGRvbmUsICd2YWx1ZSc6IHZhbHVlIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlcyB0aGUgd3JhcHBlciB0byBiZSBpdGVyYWJsZS5cbiAgICAgKlxuICAgICAqIEBuYW1lIFN5bWJvbC5pdGVyYXRvclxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFNlcVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHdyYXBwZXIgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgd3JhcHBlZCA9IF8oWzEsIDJdKTtcbiAgICAgKlxuICAgICAqIHdyYXBwZWRbU3ltYm9sLml0ZXJhdG9yXSgpID09PSB3cmFwcGVkO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIEFycmF5LmZyb20od3JhcHBlZCk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlclRvSXRlcmF0b3IoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgdGhlIGNoYWluIHNlcXVlbmNlIHBsYW50aW5nIGB2YWx1ZWAgYXMgdGhlIHdyYXBwZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAbmFtZSBwbGFudFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMi4wXG4gICAgICogQGNhdGVnb3J5IFNlcVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBsYW50LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBzcXVhcmUobikge1xuICAgICAqICAgcmV0dXJuIG4gKiBuO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciB3cmFwcGVkID0gXyhbMSwgMl0pLm1hcChzcXVhcmUpO1xuICAgICAqIHZhciBvdGhlciA9IHdyYXBwZWQucGxhbnQoWzMsIDRdKTtcbiAgICAgKlxuICAgICAqIG90aGVyLnZhbHVlKCk7XG4gICAgICogLy8gPT4gWzksIDE2XVxuICAgICAqXG4gICAgICogd3JhcHBlZC52YWx1ZSgpO1xuICAgICAqIC8vID0+IFsxLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJQbGFudCh2YWx1ZSkge1xuICAgICAgdmFyIHJlc3VsdCxcbiAgICAgICAgICBwYXJlbnQgPSB0aGlzO1xuXG4gICAgICB3aGlsZSAocGFyZW50IGluc3RhbmNlb2YgYmFzZUxvZGFzaCkge1xuICAgICAgICB2YXIgY2xvbmUgPSB3cmFwcGVyQ2xvbmUocGFyZW50KTtcbiAgICAgICAgY2xvbmUuX19pbmRleF9fID0gMDtcbiAgICAgICAgY2xvbmUuX192YWx1ZXNfXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHByZXZpb3VzLl9fd3JhcHBlZF9fID0gY2xvbmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gY2xvbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZpb3VzID0gY2xvbmU7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5fX3dyYXBwZWRfXztcbiAgICAgIH1cbiAgICAgIHByZXZpb3VzLl9fd3JhcHBlZF9fID0gdmFsdWU7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHRoZSB3cmFwcGVyIHZlcnNpb24gb2YgYF8ucmV2ZXJzZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyB0aGUgd3JhcHBlZCBhcnJheS5cbiAgICAgKlxuICAgICAqIEBuYW1lIHJldmVyc2VcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBTZXFcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDNdO1xuICAgICAqXG4gICAgICogXyhhcnJheSkucmV2ZXJzZSgpLnZhbHVlKClcbiAgICAgKiAvLyA9PiBbMywgMiwgMV1cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMywgMiwgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyUmV2ZXJzZSgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX193cmFwcGVkX187XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBMYXp5V3JhcHBlcikge1xuICAgICAgICB2YXIgd3JhcHBlZCA9IHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgpIHtcbiAgICAgICAgICB3cmFwcGVkID0gbmV3IExhenlXcmFwcGVyKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHdyYXBwZWQgPSB3cmFwcGVkLnJldmVyc2UoKTtcbiAgICAgICAgd3JhcHBlZC5fX2FjdGlvbnNfXy5wdXNoKHtcbiAgICAgICAgICAnZnVuYyc6IHRocnUsXG4gICAgICAgICAgJ2FyZ3MnOiBbcmV2ZXJzZV0sXG4gICAgICAgICAgJ3RoaXNBcmcnOiB1bmRlZmluZWRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgTG9kYXNoV3JhcHBlcih3cmFwcGVkLCB0aGlzLl9fY2hhaW5fXyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy50aHJ1KHJldmVyc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBjaGFpbiBzZXF1ZW5jZSB0byByZXNvbHZlIHRoZSB1bndyYXBwZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAbmFtZSB2YWx1ZVxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGFsaWFzIHRvSlNPTiwgdmFsdWVPZlxuICAgICAqIEBjYXRlZ29yeSBTZXFcbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdW53cmFwcGVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyLCAzXSkudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyVmFsdWUoKSB7XG4gICAgICByZXR1cm4gYmFzZVdyYXBwZXJWYWx1ZSh0aGlzLl9fd3JhcHBlZF9fLCB0aGlzLl9fYWN0aW9uc19fKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gIHRocnUgYGl0ZXJhdGVlYC4gVGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgb2ZcbiAgICAgKiBlYWNoIGtleSBpcyB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBrZXkgd2FzIHJldHVybmVkIGJ5IGBpdGVyYXRlZWAuIFRoZVxuICAgICAqIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ6ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC41LjBcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGl0ZXJhdGVlIHRvIHRyYW5zZm9ybSBrZXlzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbXBvc2VkIGFnZ3JlZ2F0ZSBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY291bnRCeShbNi4xLCA0LjIsIDYuM10sIE1hdGguZmxvb3IpO1xuICAgICAqIC8vID0+IHsgJzQnOiAxLCAnNic6IDIgfVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5jb3VudEJ5KFsnb25lJywgJ3R3bycsICd0aHJlZSddLCAnbGVuZ3RoJyk7XG4gICAgICogLy8gPT4geyAnMyc6IDIsICc1JzogMSB9XG4gICAgICovXG4gICAgdmFyIGNvdW50QnkgPSBjcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBrZXkpKSB7XG4gICAgICAgICsrcmVzdWx0W2tleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYXNlQXNzaWduVmFsdWUocmVzdWx0LCBrZXksIDEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciAqKmFsbCoqIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBJdGVyYXRpb24gaXMgc3RvcHBlZCBvbmNlIGBwcmVkaWNhdGVgIHJldHVybnMgZmFsc2V5LiBUaGUgcHJlZGljYXRlIGlzXG4gICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHJldHVybnMgYHRydWVgIGZvclxuICAgICAqIFtlbXB0eSBjb2xsZWN0aW9uc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRW1wdHlfc2V0KSBiZWNhdXNlXG4gICAgICogW2V2ZXJ5dGhpbmcgaXMgdHJ1ZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVmFjdW91c190cnV0aCkgb2ZcbiAgICAgKiBlbGVtZW50cyBvZiBlbXB0eSBjb2xsZWN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgcGFzcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZXZlcnkoW3RydWUsIDEsIG51bGwsICd5ZXMnXSwgQm9vbGVhbik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ubWF0Y2hlc2AgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZXZlcnkodXNlcnMsIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5ldmVyeSh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZXZlcnkodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGV2ZXJ5KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgZ3VhcmQpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5RXZlcnkgOiBiYXNlRXZlcnk7XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbiwgcHJlZGljYXRlLCBndWFyZCkpIHtcbiAgICAgICAgcHJlZGljYXRlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbiwgZ2V0SXRlcmF0ZWUocHJlZGljYXRlLCAzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBgY29sbGVjdGlvbmAsIHJldHVybmluZyBhbiBhcnJheSBvZiBhbGwgZWxlbWVudHNcbiAgICAgKiBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IuIFRoZSBwcmVkaWNhdGUgaXMgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLnJlbW92ZWAsIHRoaXMgbWV0aG9kIHJldHVybnMgYSBuZXcgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmlsdGVyZWQgYXJyYXkuXG4gICAgICogQHNlZSBfLnJlamVjdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmZpbHRlcih1c2VycywgZnVuY3Rpb24obykgeyByZXR1cm4gIW8uYWN0aXZlOyB9KTtcbiAgICAgKiAvLyA9PiBvYmplY3RzIGZvciBbJ2ZyZWQnXVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbHRlcih1c2VycywgeyAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnYmFybmV5J11cbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbHRlcih1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnZnJlZCddXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbHRlcih1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnYmFybmV5J11cbiAgICAgKlxuICAgICAqIC8vIENvbWJpbmluZyBzZXZlcmFsIHByZWRpY2F0ZXMgdXNpbmcgYF8ub3ZlckV2ZXJ5YCBvciBgXy5vdmVyU29tZWAuXG4gICAgICogXy5maWx0ZXIodXNlcnMsIF8ub3ZlclNvbWUoW3sgJ2FnZSc6IDM2IH0sIFsnYWdlJywgNDBdXSkpO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnZnJlZCcsICdiYXJuZXknXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbHRlcihjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5RmlsdGVyIDogYmFzZUZpbHRlcjtcbiAgICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwgMykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYGNvbGxlY3Rpb25gLCByZXR1cm5pbmcgdGhlIGZpcnN0IGVsZW1lbnRcbiAgICAgKiBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IuIFRoZSBwcmVkaWNhdGUgaXMgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF0Y2hlZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FnZSc6IDEsICAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmluZCh1c2VycywgZnVuY3Rpb24obykgeyByZXR1cm4gby5hZ2UgPCA0MDsgfSk7XG4gICAgICogLy8gPT4gb2JqZWN0IGZvciAnYmFybmV5J1xuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbmQodXNlcnMsIHsgJ2FnZSc6IDEsICdhY3RpdmUnOiB0cnVlIH0pO1xuICAgICAqIC8vID0+IG9iamVjdCBmb3IgJ3BlYmJsZXMnXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5maW5kKHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG4gICAgICogLy8gPT4gb2JqZWN0IGZvciAnZnJlZCdcbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZmluZCh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+IG9iamVjdCBmb3IgJ2Jhcm5leSdcbiAgICAgKi9cbiAgICB2YXIgZmluZCA9IGNyZWF0ZUZpbmQoZmluZEluZGV4KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZlxuICAgICAqIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMi4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PWNvbGxlY3Rpb24ubGVuZ3RoLTFdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF0Y2hlZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZpbmRMYXN0KFsxLCAyLCAzLCA0XSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gJSAyID09IDE7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqL1xuICAgIHZhciBmaW5kTGFzdCA9IGNyZWF0ZUZpbmQoZmluZExhc3RJbmRleCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmxhdHRlbmVkIGFycmF5IG9mIHZhbHVlcyBieSBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmBcbiAgICAgKiB0aHJ1IGBpdGVyYXRlZWAgYW5kIGZsYXR0ZW5pbmcgdGhlIG1hcHBlZCByZXN1bHRzLiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZFxuICAgICAqIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmbGF0dGVuZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGR1cGxpY2F0ZShuKSB7XG4gICAgICogICByZXR1cm4gW24sIG5dO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIF8uZmxhdE1hcChbMSwgMl0sIGR1cGxpY2F0ZSk7XG4gICAgICogLy8gPT4gWzEsIDEsIDIsIDJdXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmxhdE1hcChjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIGJhc2VGbGF0dGVuKG1hcChjb2xsZWN0aW9uLCBpdGVyYXRlZSksIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmxhdE1hcGAgZXhjZXB0IHRoYXQgaXQgcmVjdXJzaXZlbHkgZmxhdHRlbnMgdGhlXG4gICAgICogbWFwcGVkIHJlc3VsdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmbGF0dGVuZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGR1cGxpY2F0ZShuKSB7XG4gICAgICogICByZXR1cm4gW1tbbiwgbl1dXTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLmZsYXRNYXBEZWVwKFsxLCAyXSwgZHVwbGljYXRlKTtcbiAgICAgKiAvLyA9PiBbMSwgMSwgMiwgMl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmbGF0TWFwRGVlcChjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIGJhc2VGbGF0dGVuKG1hcChjb2xsZWN0aW9uLCBpdGVyYXRlZSksIElORklOSVRZKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZsYXRNYXBgIGV4Y2VwdCB0aGF0IGl0IHJlY3Vyc2l2ZWx5IGZsYXR0ZW5zIHRoZVxuICAgICAqIG1hcHBlZCByZXN1bHRzIHVwIHRvIGBkZXB0aGAgdGltZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2RlcHRoPTFdIFRoZSBtYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmbGF0dGVuZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGR1cGxpY2F0ZShuKSB7XG4gICAgICogICByZXR1cm4gW1tbbiwgbl1dXTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLmZsYXRNYXBEZXB0aChbMSwgMl0sIGR1cGxpY2F0ZSwgMik7XG4gICAgICogLy8gPT4gW1sxLCAxXSwgWzIsIDJdXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZsYXRNYXBEZXB0aChjb2xsZWN0aW9uLCBpdGVyYXRlZSwgZGVwdGgpIHtcbiAgICAgIGRlcHRoID0gZGVwdGggPT09IHVuZGVmaW5lZCA/IDEgOiB0b0ludGVnZXIoZGVwdGgpO1xuICAgICAgcmV0dXJuIGJhc2VGbGF0dGVuKG1hcChjb2xsZWN0aW9uLCBpdGVyYXRlZSksIGRlcHRoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYCBhbmQgaW52b2tlcyBgaXRlcmF0ZWVgIGZvciBlYWNoIGVsZW1lbnQuXG4gICAgICogVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogQXMgd2l0aCBvdGhlciBcIkNvbGxlY3Rpb25zXCIgbWV0aG9kcywgb2JqZWN0cyB3aXRoIGEgXCJsZW5ndGhcIlxuICAgICAqIHByb3BlcnR5IGFyZSBpdGVyYXRlZCBsaWtlIGFycmF5cy4gVG8gYXZvaWQgdGhpcyBiZWhhdmlvciB1c2UgYF8uZm9ySW5gXG4gICAgICogb3IgYF8uZm9yT3duYCBmb3Igb2JqZWN0IGl0ZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBhbGlhcyBlYWNoXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdH0gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAgICogQHNlZSBfLmZvckVhY2hSaWdodFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZvckVhY2goWzEsIDJdLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IExvZ3MgYDFgIHRoZW4gYDJgLlxuICAgICAqXG4gICAgICogXy5mb3JFYWNoKHsgJ2EnOiAxLCAnYic6IDIgfSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBMb2dzICdhJyB0aGVuICdiJyAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JFYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheUVhY2ggOiBiYXNlRWFjaDtcbiAgICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIGdldEl0ZXJhdGVlKGl0ZXJhdGVlLCAzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JFYWNoYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mXG4gICAgICogYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAyLjAuMFxuICAgICAqIEBhbGlhcyBlYWNoUmlnaHRcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBAc2VlIF8uZm9yRWFjaFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZvckVhY2hSaWdodChbMSwgMl0sIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gTG9ncyBgMmAgdGhlbiBgMWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9yRWFjaFJpZ2h0KGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheUVhY2hSaWdodCA6IGJhc2VFYWNoUmlnaHQ7XG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgMykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xuICAgICAqIGVhY2ggZWxlbWVudCBvZiBgY29sbGVjdGlvbmAgdGhydSBgaXRlcmF0ZWVgLiBUaGUgb3JkZXIgb2YgZ3JvdXBlZCB2YWx1ZXNcbiAgICAgKiBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBvcmRlciB0aGV5IG9jY3VyIGluIGBjb2xsZWN0aW9uYC4gVGhlIGNvcnJlc3BvbmRpbmdcbiAgICAgKiB2YWx1ZSBvZiBlYWNoIGtleSBpcyBhbiBhcnJheSBvZiBlbGVtZW50cyByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyB0aGVcbiAgICAgKiBrZXkuIFRoZSBpdGVyYXRlZSBpcyBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OiAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBpdGVyYXRlZSB0byB0cmFuc2Zvcm0ga2V5cy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmdyb3VwQnkoWzYuMSwgNC4yLCA2LjNdLCBNYXRoLmZsb29yKTtcbiAgICAgKiAvLyA9PiB7ICc0JzogWzQuMl0sICc2JzogWzYuMSwgNi4zXSB9XG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmdyb3VwQnkoWydvbmUnLCAndHdvJywgJ3RocmVlJ10sICdsZW5ndGgnKTtcbiAgICAgKiAvLyA9PiB7ICczJzogWydvbmUnLCAndHdvJ10sICc1JzogWyd0aHJlZSddIH1cbiAgICAgKi9cbiAgICB2YXIgZ3JvdXBCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIGtleSkpIHtcbiAgICAgICAgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYXNlQXNzaWduVmFsdWUocmVzdWx0LCBrZXksIFt2YWx1ZV0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgaW4gYGNvbGxlY3Rpb25gLiBJZiBgY29sbGVjdGlvbmAgaXMgYSBzdHJpbmcsIGl0J3NcbiAgICAgKiBjaGVja2VkIGZvciBhIHN1YnN0cmluZyBvZiBgdmFsdWVgLCBvdGhlcndpc2VcbiAgICAgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGlzIHVzZWQgZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLiBJZiBgZnJvbUluZGV4YCBpcyBuZWdhdGl2ZSwgaXQncyB1c2VkIGFzXG4gICAgICogdGhlIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgYGNvbGxlY3Rpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5yZWR1Y2VgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW5jbHVkZXMoWzEsIDIsIDNdLCAxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmluY2x1ZGVzKFsxLCAyLCAzXSwgMSwgMik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaW5jbHVkZXMoeyAnYSc6IDEsICdiJzogMiB9LCAxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmluY2x1ZGVzKCdhYmNkJywgJ2JjJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluY2x1ZGVzKGNvbGxlY3Rpb24sIHZhbHVlLCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgICBjb2xsZWN0aW9uID0gaXNBcnJheUxpa2UoY29sbGVjdGlvbikgPyBjb2xsZWN0aW9uIDogdmFsdWVzKGNvbGxlY3Rpb24pO1xuICAgICAgZnJvbUluZGV4ID0gKGZyb21JbmRleCAmJiAhZ3VhcmQpID8gdG9JbnRlZ2VyKGZyb21JbmRleCkgOiAwO1xuXG4gICAgICB2YXIgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG4gICAgICBpZiAoZnJvbUluZGV4IDwgMCkge1xuICAgICAgICBmcm9tSW5kZXggPSBuYXRpdmVNYXgobGVuZ3RoICsgZnJvbUluZGV4LCAwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc1N0cmluZyhjb2xsZWN0aW9uKVxuICAgICAgICA/IChmcm9tSW5kZXggPD0gbGVuZ3RoICYmIGNvbGxlY3Rpb24uaW5kZXhPZih2YWx1ZSwgZnJvbUluZGV4KSA+IC0xKVxuICAgICAgICA6ICghIWxlbmd0aCAmJiBiYXNlSW5kZXhPZihjb2xsZWN0aW9uLCB2YWx1ZSwgZnJvbUluZGV4KSA+IC0xKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBtZXRob2QgYXQgYHBhdGhgIG9mIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAsIHJldHVybmluZ1xuICAgICAqIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggaW52b2tlZCBtZXRob2QuIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgICAqIGFyZSBwcm92aWRlZCB0byBlYWNoIGludm9rZWQgbWV0aG9kLiBJZiBgcGF0aGAgaXMgYSBmdW5jdGlvbiwgaXQncyBpbnZva2VkXG4gICAgICogZm9yLCBhbmQgYHRoaXNgIGJvdW5kIHRvLCBlYWNoIGVsZW1lbnQgaW4gYGNvbGxlY3Rpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbnxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIG1ldGhvZCB0byBpbnZva2Ugb3JcbiAgICAgKiAgdGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBlYWNoIG1ldGhvZCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbnZva2VNYXAoW1s1LCAxLCA3XSwgWzMsIDIsIDFdXSwgJ3NvcnQnKTtcbiAgICAgKiAvLyA9PiBbWzEsIDUsIDddLCBbMSwgMiwgM11dXG4gICAgICpcbiAgICAgKiBfLmludm9rZU1hcChbMTIzLCA0NTZdLCBTdHJpbmcucHJvdG90eXBlLnNwbGl0LCAnJyk7XG4gICAgICogLy8gPT4gW1snMScsICcyJywgJzMnXSwgWyc0JywgJzUnLCAnNiddXVxuICAgICAqL1xuICAgIHZhciBpbnZva2VNYXAgPSBiYXNlUmVzdChmdW5jdGlvbihjb2xsZWN0aW9uLCBwYXRoLCBhcmdzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpc0Z1bmMgPSB0eXBlb2YgcGF0aCA9PSAnZnVuY3Rpb24nLFxuICAgICAgICAgIHJlc3VsdCA9IGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pID8gQXJyYXkoY29sbGVjdGlvbi5sZW5ndGgpIDogW107XG5cbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJlc3VsdFsrK2luZGV4XSA9IGlzRnVuYyA/IGFwcGx5KHBhdGgsIHZhbHVlLCBhcmdzKSA6IGJhc2VJbnZva2UodmFsdWUsIHBhdGgsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nXG4gICAgICogZWFjaCBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYCB0aHJ1IGBpdGVyYXRlZWAuIFRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIG9mXG4gICAgICogZWFjaCBrZXkgaXMgdGhlIGxhc3QgZWxlbWVudCByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyB0aGUga2V5LiBUaGVcbiAgICAgKiBpdGVyYXRlZSBpcyBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OiAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBpdGVyYXRlZSB0byB0cmFuc2Zvcm0ga2V5cy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbXG4gICAgICogICB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSxcbiAgICAgKiAgIHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5rZXlCeShhcnJheSwgZnVuY3Rpb24obykge1xuICAgICAqICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoby5jb2RlKTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICdhJzogeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sICdkJzogeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfSB9XG4gICAgICpcbiAgICAgKiBfLmtleUJ5KGFycmF5LCAnZGlyJyk7XG4gICAgICogLy8gPT4geyAnbGVmdCc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAncmlnaHQnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cbiAgICAgKi9cbiAgICB2YXIga2V5QnkgPSBjcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgICAgYmFzZUFzc2lnblZhbHVlKHJlc3VsdCwga2V5LCB2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHZhbHVlcyBieSBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAgdGhydVxuICAgICAqIGBpdGVyYXRlZWAuIFRoZSBpdGVyYXRlZSBpcyBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIE1hbnkgbG9kYXNoIG1ldGhvZHMgYXJlIGd1YXJkZWQgdG8gd29yayBhcyBpdGVyYXRlZXMgZm9yIG1ldGhvZHMgbGlrZVxuICAgICAqIGBfLmV2ZXJ5YCwgYF8uZmlsdGVyYCwgYF8ubWFwYCwgYF8ubWFwVmFsdWVzYCwgYF8ucmVqZWN0YCwgYW5kIGBfLnNvbWVgLlxuICAgICAqXG4gICAgICogVGhlIGd1YXJkZWQgbWV0aG9kcyBhcmU6XG4gICAgICogYGFyeWAsIGBjaHVua2AsIGBjdXJyeWAsIGBjdXJyeVJpZ2h0YCwgYGRyb3BgLCBgZHJvcFJpZ2h0YCwgYGV2ZXJ5YCxcbiAgICAgKiBgZmlsbGAsIGBpbnZlcnRgLCBgcGFyc2VJbnRgLCBgcmFuZG9tYCwgYHJhbmdlYCwgYHJhbmdlUmlnaHRgLCBgcmVwZWF0YCxcbiAgICAgKiBgc2FtcGxlU2l6ZWAsIGBzbGljZWAsIGBzb21lYCwgYHNvcnRCeWAsIGBzcGxpdGAsIGB0YWtlYCwgYHRha2VSaWdodGAsXG4gICAgICogYHRlbXBsYXRlYCwgYHRyaW1gLCBgdHJpbUVuZGAsIGB0cmltU3RhcnRgLCBhbmQgYHdvcmRzYFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBzcXVhcmUobikge1xuICAgICAqICAgcmV0dXJuIG4gKiBuO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIF8ubWFwKFs0LCA4XSwgc3F1YXJlKTtcbiAgICAgKiAvLyA9PiBbMTYsIDY0XVxuICAgICAqXG4gICAgICogXy5tYXAoeyAnYSc6IDQsICdiJzogOCB9LCBzcXVhcmUpO1xuICAgICAqIC8vID0+IFsxNiwgNjRdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLm1hcCh1c2VycywgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXAoY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5TWFwIDogYmFzZU1hcDtcbiAgICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIGdldEl0ZXJhdGVlKGl0ZXJhdGVlLCAzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5zb3J0QnlgIGV4Y2VwdCB0aGF0IGl0IGFsbG93cyBzcGVjaWZ5aW5nIHRoZSBzb3J0XG4gICAgICogb3JkZXJzIG9mIHRoZSBpdGVyYXRlZXMgdG8gc29ydCBieS4gSWYgYG9yZGVyc2AgaXMgdW5zcGVjaWZpZWQsIGFsbCB2YWx1ZXNcbiAgICAgKiBhcmUgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlci4gT3RoZXJ3aXNlLCBzcGVjaWZ5IGFuIG9yZGVyIG9mIFwiZGVzY1wiIGZvclxuICAgICAqIGRlc2NlbmRpbmcgb3IgXCJhc2NcIiBmb3IgYXNjZW5kaW5nIHNvcnQgb3JkZXIgb2YgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5W118RnVuY3Rpb25bXXxPYmplY3RbXXxzdHJpbmdbXX0gW2l0ZXJhdGVlcz1bXy5pZGVudGl0eV1dXG4gICAgICogIFRoZSBpdGVyYXRlZXMgdG8gc29ydCBieS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbb3JkZXJzXSBUaGUgc29ydCBvcmRlcnMgb2YgYGl0ZXJhdGVlc2AuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGFuIGl0ZXJhdGVlIGZvciBtZXRob2RzIGxpa2UgYF8ucmVkdWNlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBzb3J0ZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQ4IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNCB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gU29ydCBieSBgdXNlcmAgaW4gYXNjZW5kaW5nIG9yZGVyIGFuZCBieSBgYWdlYCBpbiBkZXNjZW5kaW5nIG9yZGVyLlxuICAgICAqIF8ub3JkZXJCeSh1c2VycywgWyd1c2VyJywgJ2FnZSddLCBbJ2FzYycsICdkZXNjJ10pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFtbJ2Jhcm5leScsIDM2XSwgWydiYXJuZXknLCAzNF0sIFsnZnJlZCcsIDQ4XSwgWydmcmVkJywgNDBdXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9yZGVyQnkoY29sbGVjdGlvbiwgaXRlcmF0ZWVzLCBvcmRlcnMsIGd1YXJkKSB7XG4gICAgICBpZiAoY29sbGVjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNBcnJheShpdGVyYXRlZXMpKSB7XG4gICAgICAgIGl0ZXJhdGVlcyA9IGl0ZXJhdGVlcyA9PSBudWxsID8gW10gOiBbaXRlcmF0ZWVzXTtcbiAgICAgIH1cbiAgICAgIG9yZGVycyA9IGd1YXJkID8gdW5kZWZpbmVkIDogb3JkZXJzO1xuICAgICAgaWYgKCFpc0FycmF5KG9yZGVycykpIHtcbiAgICAgICAgb3JkZXJzID0gb3JkZXJzID09IG51bGwgPyBbXSA6IFtvcmRlcnNdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VPcmRlckJ5KGNvbGxlY3Rpb24sIGl0ZXJhdGVlcywgb3JkZXJzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGVsZW1lbnRzIHNwbGl0IGludG8gdHdvIGdyb3VwcywgdGhlIGZpcnN0IG9mIHdoaWNoXG4gICAgICogY29udGFpbnMgZWxlbWVudHMgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yLCB0aGUgc2Vjb25kIG9mIHdoaWNoXG4gICAgICogY29udGFpbnMgZWxlbWVudHMgYHByZWRpY2F0ZWAgcmV0dXJucyBmYWxzZXkgZm9yLiBUaGUgcHJlZGljYXRlIGlzXG4gICAgICogaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDogKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWdlJzogMSwgICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ucGFydGl0aW9uKHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiBvLmFjdGl2ZTsgfSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgW1snZnJlZCddLCBbJ2Jhcm5leScsICdwZWJibGVzJ11dXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ubWF0Y2hlc2AgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8ucGFydGl0aW9uKHVzZXJzLCB7ICdhZ2UnOiAxLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgW1sncGViYmxlcyddLCBbJ2Jhcm5leScsICdmcmVkJ11dXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5wYXJ0aXRpb24odXNlcnMsIFsnYWN0aXZlJywgZmFsc2VdKTtcbiAgICAgKiAvLyA9PiBvYmplY3RzIGZvciBbWydiYXJuZXknLCAncGViYmxlcyddLCBbJ2ZyZWQnXV1cbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8ucGFydGl0aW9uKHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgW1snZnJlZCddLCBbJ2Jhcm5leScsICdwZWJibGVzJ11dXG4gICAgICovXG4gICAgdmFyIHBhcnRpdGlvbiA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICByZXN1bHRba2V5ID8gMCA6IDFdLnB1c2godmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uKCkgeyByZXR1cm4gW1tdLCBbXV07IH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVkdWNlcyBgY29sbGVjdGlvbmAgdG8gYSB2YWx1ZSB3aGljaCBpcyB0aGUgYWNjdW11bGF0ZWQgcmVzdWx0IG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgaW4gYGNvbGxlY3Rpb25gIHRocnUgYGl0ZXJhdGVlYCwgd2hlcmUgZWFjaCBzdWNjZXNzaXZlXG4gICAgICogaW52b2NhdGlvbiBpcyBzdXBwbGllZCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwcmV2aW91cy4gSWYgYGFjY3VtdWxhdG9yYFxuICAgICAqIGlzIG5vdCBnaXZlbiwgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gIGlzIHVzZWQgYXMgdGhlIGluaXRpYWxcbiAgICAgKiB2YWx1ZS4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czpcbiAgICAgKiAoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogTWFueSBsb2Rhc2ggbWV0aG9kcyBhcmUgZ3VhcmRlZCB0byB3b3JrIGFzIGl0ZXJhdGVlcyBmb3IgbWV0aG9kcyBsaWtlXG4gICAgICogYF8ucmVkdWNlYCwgYF8ucmVkdWNlUmlnaHRgLCBhbmQgYF8udHJhbnNmb3JtYC5cbiAgICAgKlxuICAgICAqIFRoZSBndWFyZGVkIG1ldGhvZHMgYXJlOlxuICAgICAqIGBhc3NpZ25gLCBgZGVmYXVsdHNgLCBgZGVmYXVsdHNEZWVwYCwgYGluY2x1ZGVzYCwgYG1lcmdlYCwgYG9yZGVyQnlgLFxuICAgICAqIGFuZCBgc29ydEJ5YFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIFRoZSBpbml0aWFsIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAc2VlIF8ucmVkdWNlUmlnaHRcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yZWR1Y2UoWzEsIDJdLCBmdW5jdGlvbihzdW0sIG4pIHtcbiAgICAgKiAgIHJldHVybiBzdW0gKyBuO1xuICAgICAqIH0sIDApO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIF8ucmVkdWNlKHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMSB9LCBmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIChyZXN1bHRbdmFsdWVdIHx8IChyZXN1bHRbdmFsdWVdID0gW10pKS5wdXNoKGtleSk7XG4gICAgICogICByZXR1cm4gcmVzdWx0O1xuICAgICAqIH0sIHt9KTtcbiAgICAgKiAvLyA9PiB7ICcxJzogWydhJywgJ2MnXSwgJzInOiBbJ2InXSB9IChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVkdWNlKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCBhY2N1bXVsYXRvcikge1xuICAgICAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlSZWR1Y2UgOiBiYXNlUmVkdWNlLFxuICAgICAgICAgIGluaXRBY2N1bSA9IGFyZ3VtZW50cy5sZW5ndGggPCAzO1xuXG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgNCksIGFjY3VtdWxhdG9yLCBpbml0QWNjdW0sIGJhc2VFYWNoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnJlZHVjZWAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZlxuICAgICAqIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gVGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqIEBzZWUgXy5yZWR1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gW1swLCAxXSwgWzIsIDNdLCBbNCwgNV1dO1xuICAgICAqXG4gICAgICogXy5yZWR1Y2VSaWdodChhcnJheSwgZnVuY3Rpb24oZmxhdHRlbmVkLCBvdGhlcikge1xuICAgICAqICAgcmV0dXJuIGZsYXR0ZW5lZC5jb25jYXQob3RoZXIpO1xuICAgICAqIH0sIFtdKTtcbiAgICAgKiAvLyA9PiBbNCwgNSwgMiwgMywgMCwgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWR1Y2VSaWdodChjb2xsZWN0aW9uLCBpdGVyYXRlZSwgYWNjdW11bGF0b3IpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5UmVkdWNlUmlnaHQgOiBiYXNlUmVkdWNlLFxuICAgICAgICAgIGluaXRBY2N1bSA9IGFyZ3VtZW50cy5sZW5ndGggPCAzO1xuXG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgNCksIGFjY3VtdWxhdG9yLCBpbml0QWNjdW0sIGJhc2VFYWNoUmlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5maWx0ZXJgOyB0aGlzIG1ldGhvZCByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiBgY29sbGVjdGlvbmBcbiAgICAgKiB0aGF0IGBwcmVkaWNhdGVgIGRvZXMgKipub3QqKiByZXR1cm4gdHJ1dGh5IGZvci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS5cbiAgICAgKiBAc2VlIF8uZmlsdGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ucmVqZWN0KHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiAhby5hY3RpdmU7IH0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFsnZnJlZCddXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ubWF0Y2hlc2AgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8ucmVqZWN0KHVzZXJzLCB7ICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IHRydWUgfSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgWydiYXJuZXknXVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8ucmVqZWN0KHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgWydmcmVkJ11cbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8ucmVqZWN0KHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgWydiYXJuZXknXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlamVjdChjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5RmlsdGVyIDogYmFzZUZpbHRlcjtcbiAgICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIG5lZ2F0ZShnZXRJdGVyYXRlZShwcmVkaWNhdGUsIDMpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIHJhbmRvbSBlbGVtZW50IGZyb20gYGNvbGxlY3Rpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDIuMC4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzYW1wbGUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJhbmRvbSBlbGVtZW50LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNhbXBsZShbMSwgMiwgMywgNF0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzYW1wbGUoY29sbGVjdGlvbikge1xuICAgICAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlTYW1wbGUgOiBiYXNlU2FtcGxlO1xuICAgICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBgbmAgcmFuZG9tIGVsZW1lbnRzIGF0IHVuaXF1ZSBrZXlzIGZyb20gYGNvbGxlY3Rpb25gIHVwIHRvIHRoZVxuICAgICAqIHNpemUgb2YgYGNvbGxlY3Rpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzYW1wbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuPTFdIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gc2FtcGxlLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSByYW5kb20gZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc2FtcGxlU2l6ZShbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFszLCAxXVxuICAgICAqXG4gICAgICogXy5zYW1wbGVTaXplKFsxLCAyLCAzXSwgNCk7XG4gICAgICogLy8gPT4gWzIsIDMsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2FtcGxlU2l6ZShjb2xsZWN0aW9uLCBuLCBndWFyZCkge1xuICAgICAgaWYgKChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24sIG4sIGd1YXJkKSA6IG4gPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgbiA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuID0gdG9JbnRlZ2VyKG4pO1xuICAgICAgfVxuICAgICAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlTYW1wbGVTaXplIDogYmFzZVNhbXBsZVNpemU7XG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHNodWZmbGVkIHZhbHVlcywgdXNpbmcgYSB2ZXJzaW9uIG9mIHRoZVxuICAgICAqIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVyLVlhdGVzX3NodWZmbGUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzaHVmZmxlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNodWZmbGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNodWZmbGUoWzEsIDIsIDMsIDRdKTtcbiAgICAgKiAvLyA9PiBbNCwgMSwgMywgMl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaHVmZmxlKGNvbGxlY3Rpb24pIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5U2h1ZmZsZSA6IGJhc2VTaHVmZmxlO1xuICAgICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc2l6ZSBvZiBgY29sbGVjdGlvbmAgYnkgcmV0dXJuaW5nIGl0cyBsZW5ndGggZm9yIGFycmF5LWxpa2VcbiAgICAgKiB2YWx1ZXMgb3IgdGhlIG51bWJlciBvZiBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWQgcHJvcGVydGllcyBmb3Igb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29sbGVjdGlvbiBzaXplLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNpemUoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLnNpemUoeyAnYSc6IDEsICdiJzogMiB9KTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiBfLnNpemUoJ3BlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiA3XG4gICAgICovXG4gICAgZnVuY3Rpb24gc2l6ZShjb2xsZWN0aW9uKSB7XG4gICAgICBpZiAoY29sbGVjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaWYgKGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pKSB7XG4gICAgICAgIHJldHVybiBpc1N0cmluZyhjb2xsZWN0aW9uKSA/IHN0cmluZ1NpemUoY29sbGVjdGlvbikgOiBjb2xsZWN0aW9uLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHZhciB0YWcgPSBnZXRUYWcoY29sbGVjdGlvbik7XG4gICAgICBpZiAodGFnID09IG1hcFRhZyB8fCB0YWcgPT0gc2V0VGFnKSB7XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uLnNpemU7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUtleXMoY29sbGVjdGlvbikubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgKiphbnkqKiBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBJdGVyYXRpb24gaXMgc3RvcHBlZCBvbmNlIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5LiBUaGUgcHJlZGljYXRlIGlzXG4gICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29tZShbbnVsbCwgMCwgJ3llcycsIGZhbHNlXSwgQm9vbGVhbik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ubWF0Y2hlc2AgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uc29tZSh1c2VycywgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLnNvbWUodXNlcnMsIFsnYWN0aXZlJywgZmFsc2VdKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLnNvbWUodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gc29tZShjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIGd1YXJkKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheVNvbWUgOiBiYXNlU29tZTtcbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIGd1YXJkKSkge1xuICAgICAgICBwcmVkaWNhdGUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBnZXRJdGVyYXRlZShwcmVkaWNhdGUsIDMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGVsZW1lbnRzLCBzb3J0ZWQgaW4gYXNjZW5kaW5nIG9yZGVyIGJ5IHRoZSByZXN1bHRzIG9mXG4gICAgICogcnVubmluZyBlYWNoIGVsZW1lbnQgaW4gYSBjb2xsZWN0aW9uIHRocnUgZWFjaCBpdGVyYXRlZS4gVGhpcyBtZXRob2RcbiAgICAgKiBwZXJmb3JtcyBhIHN0YWJsZSBzb3J0LCB0aGF0IGlzLCBpdCBwcmVzZXJ2ZXMgdGhlIG9yaWdpbmFsIHNvcnQgb3JkZXIgb2ZcbiAgICAgKiBlcXVhbCBlbGVtZW50cy4gVGhlIGl0ZXJhdGVlcyBhcmUgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDogKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7Li4uKEZ1bmN0aW9ufEZ1bmN0aW9uW10pfSBbaXRlcmF0ZWVzPVtfLmlkZW50aXR5XV1cbiAgICAgKiAgVGhlIGl0ZXJhdGVlcyB0byBzb3J0IGJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNvcnRlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDggfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiAzMCB9LFxuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzQgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLnNvcnRCeSh1c2VycywgW2Z1bmN0aW9uKG8pIHsgcmV0dXJuIG8udXNlcjsgfV0pO1xuICAgICAqIC8vID0+IG9iamVjdHMgZm9yIFtbJ2Jhcm5leScsIDM2XSwgWydiYXJuZXknLCAzNF0sIFsnZnJlZCcsIDQ4XSwgWydmcmVkJywgMzBdXVxuICAgICAqXG4gICAgICogXy5zb3J0QnkodXNlcnMsIFsndXNlcicsICdhZ2UnXSk7XG4gICAgICogLy8gPT4gb2JqZWN0cyBmb3IgW1snYmFybmV5JywgMzRdLCBbJ2Jhcm5leScsIDM2XSwgWydmcmVkJywgMzBdLCBbJ2ZyZWQnLCA0OF1dXG4gICAgICovXG4gICAgdmFyIHNvcnRCeSA9IGJhc2VSZXN0KGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlcykge1xuICAgICAgaWYgKGNvbGxlY3Rpb24gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB2YXIgbGVuZ3RoID0gaXRlcmF0ZWVzLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggPiAxICYmIGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24sIGl0ZXJhdGVlc1swXSwgaXRlcmF0ZWVzWzFdKSkge1xuICAgICAgICBpdGVyYXRlZXMgPSBbXTtcbiAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID4gMiAmJiBpc0l0ZXJhdGVlQ2FsbChpdGVyYXRlZXNbMF0sIGl0ZXJhdGVlc1sxXSwgaXRlcmF0ZWVzWzJdKSkge1xuICAgICAgICBpdGVyYXRlZXMgPSBbaXRlcmF0ZWVzWzBdXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlT3JkZXJCeShjb2xsZWN0aW9uLCBiYXNlRmxhdHRlbihpdGVyYXRlZXMsIDEpLCBbXSk7XG4gICAgfSk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAgICAgKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAyLjQuMFxuICAgICAqIEBjYXRlZ29yeSBEYXRlXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gICAgICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICAgICAqIH0sIF8ubm93KCkpO1xuICAgICAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gICAgICovXG4gICAgdmFyIG5vdyA9IGN0eE5vdyB8fCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiByb290LkRhdGUubm93KCk7XG4gICAgfTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5iZWZvcmVgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzXG4gICAgICogYGZ1bmNgIG9uY2UgaXQncyBjYWxsZWQgYG5gIG9yIG1vcmUgdGltZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGNhbGxzIGJlZm9yZSBgZnVuY2AgaXMgaW52b2tlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgc2F2ZXMgPSBbJ3Byb2ZpbGUnLCAnc2V0dGluZ3MnXTtcbiAgICAgKlxuICAgICAqIHZhciBkb25lID0gXy5hZnRlcihzYXZlcy5sZW5ndGgsIGZ1bmN0aW9uKCkge1xuICAgICAqICAgY29uc29sZS5sb2coJ2RvbmUgc2F2aW5nIScpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogXy5mb3JFYWNoKHNhdmVzLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICogICBhc3luY1NhdmUoeyAndHlwZSc6IHR5cGUsICdjb21wbGV0ZSc6IGRvbmUgfSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gTG9ncyAnZG9uZSBzYXZpbmchJyBhZnRlciB0aGUgdHdvIGFzeW5jIHNhdmVzIGhhdmUgY29tcGxldGVkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFmdGVyKG4sIGZ1bmMpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIG4gPSB0b0ludGVnZXIobik7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgtLW4gPCAxKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCwgd2l0aCB1cCB0byBgbmAgYXJndW1lbnRzLFxuICAgICAqIGlnbm9yaW5nIGFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhcCBhcmd1bWVudHMgZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbj1mdW5jLmxlbmd0aF0gVGhlIGFyaXR5IGNhcC5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNhcHBlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXAoWyc2JywgJzgnLCAnMTAnXSwgXy5hcnkocGFyc2VJbnQsIDEpKTtcbiAgICAgKiAvLyA9PiBbNiwgOCwgMTBdXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJ5KGZ1bmMsIG4sIGd1YXJkKSB7XG4gICAgICBuID0gZ3VhcmQgPyB1bmRlZmluZWQgOiBuO1xuICAgICAgbiA9IChmdW5jICYmIG4gPT0gbnVsbCkgPyBmdW5jLmxlbmd0aCA6IG47XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcChmdW5jLCBXUkFQX0FSWV9GTEFHLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgLCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBhbmQgYXJndW1lbnRzXG4gICAgICogb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24sIHdoaWxlIGl0J3MgY2FsbGVkIGxlc3MgdGhhbiBgbmAgdGltZXMuIFN1YnNlcXVlbnRcbiAgICAgKiBjYWxscyB0byB0aGUgY3JlYXRlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgY2FsbHMgYXQgd2hpY2ggYGZ1bmNgIGlzIG5vIGxvbmdlciBpbnZva2VkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmJlZm9yZSg1LCBhZGRDb250YWN0VG9MaXN0KSk7XG4gICAgICogLy8gPT4gQWxsb3dzIGFkZGluZyB1cCB0byA0IGNvbnRhY3RzIHRvIHRoZSBsaXN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJlZm9yZShuLCBmdW5jKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgbiA9IHRvSW50ZWdlcihuKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKC0tbiA+IDApIHtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4gPD0gMSkge1xuICAgICAgICAgIGZ1bmMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYHRoaXNBcmdgXG4gICAgICogYW5kIGBwYXJ0aWFsc2AgcHJlcGVuZGVkIHRvIHRoZSBhcmd1bWVudHMgaXQgcmVjZWl2ZXMuXG4gICAgICpcbiAgICAgKiBUaGUgYF8uYmluZC5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljIGJ1aWxkcyxcbiAgICAgKiBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIG5hdGl2ZSBgRnVuY3Rpb24jYmluZGAsIHRoaXMgbWV0aG9kIGRvZXNuJ3Qgc2V0IHRoZSBcImxlbmd0aFwiXG4gICAgICogcHJvcGVydHkgb2YgYm91bmQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cbiAgICAgKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0gey4uLip9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gZ3JlZXQoZ3JlZXRpbmcsIHB1bmN0dWF0aW9uKSB7XG4gICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyB0aGlzLnVzZXIgKyBwdW5jdHVhdGlvbjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICAgICAqXG4gICAgICogdmFyIGJvdW5kID0gXy5iaW5kKGdyZWV0LCBvYmplY3QsICdoaScpO1xuICAgICAqIGJvdW5kKCchJyk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQhJ1xuICAgICAqXG4gICAgICogLy8gQm91bmQgd2l0aCBwbGFjZWhvbGRlcnMuXG4gICAgICogdmFyIGJvdW5kID0gXy5iaW5kKGdyZWV0LCBvYmplY3QsIF8sICchJyk7XG4gICAgICogYm91bmQoJ2hpJyk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQhJ1xuICAgICAqL1xuICAgIHZhciBiaW5kID0gYmFzZVJlc3QoZnVuY3Rpb24oZnVuYywgdGhpc0FyZywgcGFydGlhbHMpIHtcbiAgICAgIHZhciBiaXRtYXNrID0gV1JBUF9CSU5EX0ZMQUc7XG4gICAgICBpZiAocGFydGlhbHMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBob2xkZXJzID0gcmVwbGFjZUhvbGRlcnMocGFydGlhbHMsIGdldEhvbGRlcihiaW5kKSk7XG4gICAgICAgIGJpdG1hc2sgfD0gV1JBUF9QQVJUSUFMX0ZMQUc7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcChmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBwYXJ0aWFscywgaG9sZGVycyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSBtZXRob2QgYXQgYG9iamVjdFtrZXldYCB3aXRoIGBwYXJ0aWFsc2BcbiAgICAgKiBwcmVwZW5kZWQgdG8gdGhlIGFyZ3VtZW50cyBpdCByZWNlaXZlcy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGRpZmZlcnMgZnJvbSBgXy5iaW5kYCBieSBhbGxvd2luZyBib3VuZCBmdW5jdGlvbnMgdG8gcmVmZXJlbmNlXG4gICAgICogbWV0aG9kcyB0aGF0IG1heSBiZSByZWRlZmluZWQgb3IgZG9uJ3QgeWV0IGV4aXN0LiBTZWVcbiAgICAgKiBbUGV0ZXIgTWljaGF1eCdzIGFydGljbGVdKGh0dHA6Ly9wZXRlci5taWNoYXV4LmNhL2FydGljbGVzL2xhenktZnVuY3Rpb24tZGVmaW5pdGlvbi1wYXR0ZXJuKVxuICAgICAqIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBUaGUgYF8uYmluZEtleS5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljXG4gICAgICogYnVpbGRzLCBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGludm9rZSB0aGUgbWV0aG9kIG9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3BhcnRpYWxzXSBUaGUgYXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0ge1xuICAgICAqICAgJ3VzZXInOiAnZnJlZCcsXG4gICAgICogICAnZ3JlZXQnOiBmdW5jdGlvbihncmVldGluZywgcHVuY3R1YXRpb24pIHtcbiAgICAgKiAgICAgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgdGhpcy51c2VyICsgcHVuY3R1YXRpb247XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBib3VuZCA9IF8uYmluZEtleShvYmplY3QsICdncmVldCcsICdoaScpO1xuICAgICAqIGJvdW5kKCchJyk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQhJ1xuICAgICAqXG4gICAgICogb2JqZWN0LmdyZWV0ID0gZnVuY3Rpb24oZ3JlZXRpbmcsIHB1bmN0dWF0aW9uKSB7XG4gICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAneWEgJyArIHRoaXMudXNlciArIHB1bmN0dWF0aW9uO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBib3VuZCgnIScpO1xuICAgICAqIC8vID0+ICdoaXlhIGZyZWQhJ1xuICAgICAqXG4gICAgICogLy8gQm91bmQgd2l0aCBwbGFjZWhvbGRlcnMuXG4gICAgICogdmFyIGJvdW5kID0gXy5iaW5kS2V5KG9iamVjdCwgJ2dyZWV0JywgXywgJyEnKTtcbiAgICAgKiBib3VuZCgnaGknKTtcbiAgICAgKiAvLyA9PiAnaGl5YSBmcmVkISdcbiAgICAgKi9cbiAgICB2YXIgYmluZEtleSA9IGJhc2VSZXN0KGZ1bmN0aW9uKG9iamVjdCwga2V5LCBwYXJ0aWFscykge1xuICAgICAgdmFyIGJpdG1hc2sgPSBXUkFQX0JJTkRfRkxBRyB8IFdSQVBfQklORF9LRVlfRkxBRztcbiAgICAgIGlmIChwYXJ0aWFscy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGhvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhwYXJ0aWFscywgZ2V0SG9sZGVyKGJpbmRLZXkpKTtcbiAgICAgICAgYml0bWFzayB8PSBXUkFQX1BBUlRJQUxfRkxBRztcbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVXcmFwKGtleSwgYml0bWFzaywgb2JqZWN0LCBwYXJ0aWFscywgaG9sZGVycyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGFyZ3VtZW50cyBvZiBgZnVuY2AgYW5kIGVpdGhlciBpbnZva2VzXG4gICAgICogYGZ1bmNgIHJldHVybmluZyBpdHMgcmVzdWx0LCBpZiBhdCBsZWFzdCBgYXJpdHlgIG51bWJlciBvZiBhcmd1bWVudHMgaGF2ZVxuICAgICAqIGJlZW4gcHJvdmlkZWQsIG9yIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdGhlIHJlbWFpbmluZyBgZnVuY2BcbiAgICAgKiBhcmd1bWVudHMsIGFuZCBzbyBvbi4gVGhlIGFyaXR5IG9mIGBmdW5jYCBtYXkgYmUgc3BlY2lmaWVkIGlmIGBmdW5jLmxlbmd0aGBcbiAgICAgKiBpcyBub3Qgc3VmZmljaWVudC5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5jdXJyeS5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljIGJ1aWxkcyxcbiAgICAgKiBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgZG9lc24ndCBzZXQgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgb2YgY3VycmllZCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMi4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5PWZ1bmMubGVuZ3RoXSBUaGUgYXJpdHkgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFiYyA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgKiAgIHJldHVybiBbYSwgYiwgY107XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBjdXJyaWVkID0gXy5jdXJyeShhYmMpO1xuICAgICAqXG4gICAgICogY3VycmllZCgxKSgyKSgzKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMSwgMikoMyk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDEsIDIsIDMpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogLy8gQ3VycmllZCB3aXRoIHBsYWNlaG9sZGVycy5cbiAgICAgKiBjdXJyaWVkKDEpKF8sIDMpKDIpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGN1cnJ5KGZ1bmMsIGFyaXR5LCBndWFyZCkge1xuICAgICAgYXJpdHkgPSBndWFyZCA/IHVuZGVmaW5lZCA6IGFyaXR5O1xuICAgICAgdmFyIHJlc3VsdCA9IGNyZWF0ZVdyYXAoZnVuYywgV1JBUF9DVVJSWV9GTEFHLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJpdHkpO1xuICAgICAgcmVzdWx0LnBsYWNlaG9sZGVyID0gY3VycnkucGxhY2Vob2xkZXI7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uY3VycnlgIGV4Y2VwdCB0aGF0IGFyZ3VtZW50cyBhcmUgYXBwbGllZCB0byBgZnVuY2BcbiAgICAgKiBpbiB0aGUgbWFubmVyIG9mIGBfLnBhcnRpYWxSaWdodGAgaW5zdGVhZCBvZiBgXy5wYXJ0aWFsYC5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5jdXJyeVJpZ2h0LnBsYWNlaG9sZGVyYCB2YWx1ZSwgd2hpY2ggZGVmYXVsdHMgdG8gYF9gIGluIG1vbm9saXRoaWNcbiAgICAgKiBidWlsZHMsIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBkb2Vzbid0IHNldCB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSBvZiBjdXJyaWVkIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGN1cnJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHk9ZnVuYy5sZW5ndGhdIFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGFuIGl0ZXJhdGVlIGZvciBtZXRob2RzIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYWJjID0gZnVuY3Rpb24oYSwgYiwgYykge1xuICAgICAqICAgcmV0dXJuIFthLCBiLCBjXTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGN1cnJpZWQgPSBfLmN1cnJ5UmlnaHQoYWJjKTtcbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMykoMikoMSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDIsIDMpKDEpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogY3VycmllZCgxLCAyLCAzKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIC8vIEN1cnJpZWQgd2l0aCBwbGFjZWhvbGRlcnMuXG4gICAgICogY3VycmllZCgzKSgxLCBfKSgyKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjdXJyeVJpZ2h0KGZ1bmMsIGFyaXR5LCBndWFyZCkge1xuICAgICAgYXJpdHkgPSBndWFyZCA/IHVuZGVmaW5lZCA6IGFyaXR5O1xuICAgICAgdmFyIHJlc3VsdCA9IGNyZWF0ZVdyYXAoZnVuYywgV1JBUF9DVVJSWV9SSUdIVF9GTEFHLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJpdHkpO1xuICAgICAgcmVzdWx0LnBsYWNlaG9sZGVyID0gY3VycnlSaWdodC5wbGFjZWhvbGRlcjtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gICAgICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gICAgICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICAgICAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICAgICAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICAgICAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAgICAgKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAgICAgKiBpbnZvY2F0aW9uLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICAgICAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gICAgICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICAgICAqXG4gICAgICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gICAgICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICAgICAqXG4gICAgICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gICAgICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG4gICAgICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAgICAgKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICAgICAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cbiAgICAgKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICAgICAqXG4gICAgICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG4gICAgICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICAgICAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICAgICAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAgICAgKiB9KSk7XG4gICAgICpcbiAgICAgKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuICAgICAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICAgICAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAgICAgKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG4gICAgICpcbiAgICAgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICAgICAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBsYXN0QXJncyxcbiAgICAgICAgICBsYXN0VGhpcyxcbiAgICAgICAgICBtYXhXYWl0LFxuICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICB0aW1lcklkLFxuICAgICAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG4gICAgICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gICAgICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgICAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICAgICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICAgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICAgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAgICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICAgICAgdGltZVdhaXRpbmcgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICAgICAgcmV0dXJuIG1heGluZ1xuICAgICAgICAgID8gbmF0aXZlTWluKHRpbWVXYWl0aW5nLCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSlcbiAgICAgICAgICA6IHRpbWVXYWl0aW5nO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgICAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblxuICAgICAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgICAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgICAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG4gICAgICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgICAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgICAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICAgICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuICAgICAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgICAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICAgICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICAgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgICAgIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICAgICAgcmV0dXJuIGRlYm91bmNlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWZlcnMgaW52b2tpbmcgdGhlIGBmdW5jYCB1bnRpbCB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcyBjbGVhcmVkLiBBbnlcbiAgICAgKiBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQncyBpbnZva2VkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVmZXIuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVmZXIoZnVuY3Rpb24odGV4dCkge1xuICAgICAqICAgY29uc29sZS5sb2codGV4dCk7XG4gICAgICogfSwgJ2RlZmVycmVkJyk7XG4gICAgICogLy8gPT4gTG9ncyAnZGVmZXJyZWQnIGFmdGVyIG9uZSBtaWxsaXNlY29uZC5cbiAgICAgKi9cbiAgICB2YXIgZGVmZXIgPSBiYXNlUmVzdChmdW5jdGlvbihmdW5jLCBhcmdzKSB7XG4gICAgICByZXR1cm4gYmFzZURlbGF5KGZ1bmMsIDEsIGFyZ3MpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSW52b2tlcyBgZnVuY2AgYWZ0ZXIgYHdhaXRgIG1pbGxpc2Vjb25kcy4gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZVxuICAgICAqIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0J3MgaW52b2tlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGludm9jYXRpb24uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVsYXkoZnVuY3Rpb24odGV4dCkge1xuICAgICAqICAgY29uc29sZS5sb2codGV4dCk7XG4gICAgICogfSwgMTAwMCwgJ2xhdGVyJyk7XG4gICAgICogLy8gPT4gTG9ncyAnbGF0ZXInIGFmdGVyIG9uZSBzZWNvbmQuXG4gICAgICovXG4gICAgdmFyIGRlbGF5ID0gYmFzZVJlc3QoZnVuY3Rpb24oZnVuYywgd2FpdCwgYXJncykge1xuICAgICAgcmV0dXJuIGJhc2VEZWxheShmdW5jLCB0b051bWJlcih3YWl0KSB8fCAwLCBhcmdzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggYXJndW1lbnRzIHJldmVyc2VkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZmxpcCBhcmd1bWVudHMgZm9yLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZsaXBwZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBmbGlwcGVkID0gXy5mbGlwKGZ1bmN0aW9uKCkge1xuICAgICAqICAgcmV0dXJuIF8udG9BcnJheShhcmd1bWVudHMpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogZmxpcHBlZCgnYScsICdiJywgJ2MnLCAnZCcpO1xuICAgICAqIC8vID0+IFsnZCcsICdjJywgJ2InLCAnYSddXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmxpcChmdW5jKSB7XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcChmdW5jLCBXUkFQX0ZMSVBfRkxBRyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbWVtb2l6ZXMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuIElmIGByZXNvbHZlcmAgaXNcbiAgICAgKiBwcm92aWRlZCwgaXQgZGV0ZXJtaW5lcyB0aGUgY2FjaGUga2V5IGZvciBzdG9yaW5nIHRoZSByZXN1bHQgYmFzZWQgb24gdGhlXG4gICAgICogYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbi4gQnkgZGVmYXVsdCwgdGhlIGZpcnN0IGFyZ3VtZW50XG4gICAgICogcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uIGlzIHVzZWQgYXMgdGhlIG1hcCBjYWNoZSBrZXkuIFRoZSBgZnVuY2BcbiAgICAgKiBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBtZW1vaXplZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGUgY2FjaGUgaXMgZXhwb3NlZCBhcyB0aGUgYGNhY2hlYCBwcm9wZXJ0eSBvbiB0aGUgbWVtb2l6ZWRcbiAgICAgKiBmdW5jdGlvbi4gSXRzIGNyZWF0aW9uIG1heSBiZSBjdXN0b21pemVkIGJ5IHJlcGxhY2luZyB0aGUgYF8ubWVtb2l6ZS5DYWNoZWBcbiAgICAgKiBjb25zdHJ1Y3RvciB3aXRoIG9uZSB3aG9zZSBpbnN0YW5jZXMgaW1wbGVtZW50IHRoZVxuICAgICAqIFtgTWFwYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcHJvcGVydGllcy1vZi10aGUtbWFwLXByb3RvdHlwZS1vYmplY3QpXG4gICAgICogbWV0aG9kIGludGVyZmFjZSBvZiBgY2xlYXJgLCBgZGVsZXRlYCwgYGdldGAsIGBoYXNgLCBhbmQgYHNldGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Jlc29sdmVyXSBUaGUgZnVuY3Rpb24gdG8gcmVzb2x2ZSB0aGUgY2FjaGUga2V5LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1lbW9pemVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEsICdiJzogMiB9O1xuICAgICAqIHZhciBvdGhlciA9IHsgJ2MnOiAzLCAnZCc6IDQgfTtcbiAgICAgKlxuICAgICAqIHZhciB2YWx1ZXMgPSBfLm1lbW9pemUoXy52YWx1ZXMpO1xuICAgICAqIHZhbHVlcyhvYmplY3QpO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogdmFsdWVzKG90aGVyKTtcbiAgICAgKiAvLyA9PiBbMywgNF1cbiAgICAgKlxuICAgICAqIG9iamVjdC5hID0gMjtcbiAgICAgKiB2YWx1ZXMob2JqZWN0KTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIC8vIE1vZGlmeSB0aGUgcmVzdWx0IGNhY2hlLlxuICAgICAqIHZhbHVlcy5jYWNoZS5zZXQob2JqZWN0LCBbJ2EnLCAnYiddKTtcbiAgICAgKiB2YWx1ZXMob2JqZWN0KTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYiddXG4gICAgICpcbiAgICAgKiAvLyBSZXBsYWNlIGBfLm1lbW9pemUuQ2FjaGVgLlxuICAgICAqIF8ubWVtb2l6ZS5DYWNoZSA9IFdlYWtNYXA7XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVtb2l6ZShmdW5jLCByZXNvbHZlcikge1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicgfHwgKHJlc29sdmVyICE9IG51bGwgJiYgdHlwZW9mIHJlc29sdmVyICE9ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHZhciBtZW1vaXplZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgIGtleSA9IHJlc29sdmVyID8gcmVzb2x2ZXIuYXBwbHkodGhpcywgYXJncykgOiBhcmdzWzBdLFxuICAgICAgICAgICAgY2FjaGUgPSBtZW1vaXplZC5jYWNoZTtcblxuICAgICAgICBpZiAoY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIG1lbW9pemVkLmNhY2hlID0gY2FjaGUuc2V0KGtleSwgcmVzdWx0KSB8fCBjYWNoZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgICBtZW1vaXplZC5jYWNoZSA9IG5ldyAobWVtb2l6ZS5DYWNoZSB8fCBNYXBDYWNoZSk7XG4gICAgICByZXR1cm4gbWVtb2l6ZWQ7XG4gICAgfVxuXG4gICAgLy8gRXhwb3NlIGBNYXBDYWNoZWAuXG4gICAgbWVtb2l6ZS5DYWNoZSA9IE1hcENhY2hlO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbmVnYXRlcyB0aGUgcmVzdWx0IG9mIHRoZSBwcmVkaWNhdGUgYGZ1bmNgLiBUaGVcbiAgICAgKiBgZnVuY2AgcHJlZGljYXRlIGlzIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgYW5kIGFyZ3VtZW50cyBvZiB0aGVcbiAgICAgKiBjcmVhdGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBwcmVkaWNhdGUgdG8gbmVnYXRlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG5lZ2F0ZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGlzRXZlbihuKSB7XG4gICAgICogICByZXR1cm4gbiAlIDIgPT0gMDtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLmZpbHRlcihbMSwgMiwgMywgNCwgNSwgNl0sIF8ubmVnYXRlKGlzRXZlbikpO1xuICAgICAqIC8vID0+IFsxLCAzLCA1XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5lZ2F0ZShwcmVkaWNhdGUpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDogcmV0dXJuICFwcmVkaWNhdGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICBjYXNlIDE6IHJldHVybiAhcHJlZGljYXRlLmNhbGwodGhpcywgYXJnc1swXSk7XG4gICAgICAgICAgY2FzZSAyOiByZXR1cm4gIXByZWRpY2F0ZS5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgIGNhc2UgMzogcmV0dXJuICFwcmVkaWNhdGUuY2FsbCh0aGlzLCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaXMgcmVzdHJpY3RlZCB0byBpbnZva2luZyBgZnVuY2Agb25jZS4gUmVwZWF0IGNhbGxzXG4gICAgICogdG8gdGhlIGZ1bmN0aW9uIHJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGludm9jYXRpb24uIFRoZSBgZnVuY2AgaXNcbiAgICAgKiBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIGFuZCBhcmd1bWVudHMgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgaW5pdGlhbGl6ZSA9IF8ub25jZShjcmVhdGVBcHBsaWNhdGlvbik7XG4gICAgICogaW5pdGlhbGl6ZSgpO1xuICAgICAqIGluaXRpYWxpemUoKTtcbiAgICAgKiAvLyA9PiBgY3JlYXRlQXBwbGljYXRpb25gIGlzIGludm9rZWQgb25jZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uY2UoZnVuYykge1xuICAgICAgcmV0dXJuIGJlZm9yZSgyLCBmdW5jKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudHMgdHJhbnNmb3JtZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7Li4uKEZ1bmN0aW9ufEZ1bmN0aW9uW10pfSBbdHJhbnNmb3Jtcz1bXy5pZGVudGl0eV1dXG4gICAgICogIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm1zLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBkb3VibGVkKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBzcXVhcmUobikge1xuICAgICAqICAgcmV0dXJuIG4gKiBuO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciBmdW5jID0gXy5vdmVyQXJncyhmdW5jdGlvbih4LCB5KSB7XG4gICAgICogICByZXR1cm4gW3gsIHldO1xuICAgICAqIH0sIFtzcXVhcmUsIGRvdWJsZWRdKTtcbiAgICAgKlxuICAgICAqIGZ1bmMoOSwgMyk7XG4gICAgICogLy8gPT4gWzgxLCA2XVxuICAgICAqXG4gICAgICogZnVuYygxMCwgNSk7XG4gICAgICogLy8gPT4gWzEwMCwgMTBdXG4gICAgICovXG4gICAgdmFyIG92ZXJBcmdzID0gY2FzdFJlc3QoZnVuY3Rpb24oZnVuYywgdHJhbnNmb3Jtcykge1xuICAgICAgdHJhbnNmb3JtcyA9ICh0cmFuc2Zvcm1zLmxlbmd0aCA9PSAxICYmIGlzQXJyYXkodHJhbnNmb3Jtc1swXSkpXG4gICAgICAgID8gYXJyYXlNYXAodHJhbnNmb3Jtc1swXSwgYmFzZVVuYXJ5KGdldEl0ZXJhdGVlKCkpKVxuICAgICAgICA6IGFycmF5TWFwKGJhc2VGbGF0dGVuKHRyYW5zZm9ybXMsIDEpLCBiYXNlVW5hcnkoZ2V0SXRlcmF0ZWUoKSkpO1xuXG4gICAgICB2YXIgZnVuY3NMZW5ndGggPSB0cmFuc2Zvcm1zLmxlbmd0aDtcbiAgICAgIHJldHVybiBiYXNlUmVzdChmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWluKGFyZ3MubGVuZ3RoLCBmdW5jc0xlbmd0aCk7XG5cbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBhcmdzW2luZGV4XSA9IHRyYW5zZm9ybXNbaW5kZXhdLmNhbGwodGhpcywgYXJnc1tpbmRleF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHBseShmdW5jLCB0aGlzLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBgcGFydGlhbHNgIHByZXBlbmRlZCB0byB0aGVcbiAgICAgKiBhcmd1bWVudHMgaXQgcmVjZWl2ZXMuIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uYmluZGAgZXhjZXB0IGl0IGRvZXMgKipub3QqKlxuICAgICAqIGFsdGVyIHRoZSBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5wYXJ0aWFsLnBsYWNlaG9sZGVyYCB2YWx1ZSwgd2hpY2ggZGVmYXVsdHMgdG8gYF9gIGluIG1vbm9saXRoaWNcbiAgICAgKiBidWlsZHMsIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBkb2Vzbid0IHNldCB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSBvZiBwYXJ0aWFsbHlcbiAgICAgKiBhcHBsaWVkIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjIuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHBhcnRpYWxseSBhcHBseSBhcmd1bWVudHMgdG8uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGdyZWV0KGdyZWV0aW5nLCBuYW1lKSB7XG4gICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyBuYW1lO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciBzYXlIZWxsb1RvID0gXy5wYXJ0aWFsKGdyZWV0LCAnaGVsbG8nKTtcbiAgICAgKiBzYXlIZWxsb1RvKCdmcmVkJyk7XG4gICAgICogLy8gPT4gJ2hlbGxvIGZyZWQnXG4gICAgICpcbiAgICAgKiAvLyBQYXJ0aWFsbHkgYXBwbGllZCB3aXRoIHBsYWNlaG9sZGVycy5cbiAgICAgKiB2YXIgZ3JlZXRGcmVkID0gXy5wYXJ0aWFsKGdyZWV0LCBfLCAnZnJlZCcpO1xuICAgICAqIGdyZWV0RnJlZCgnaGknKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCdcbiAgICAgKi9cbiAgICB2YXIgcGFydGlhbCA9IGJhc2VSZXN0KGZ1bmN0aW9uKGZ1bmMsIHBhcnRpYWxzKSB7XG4gICAgICB2YXIgaG9sZGVycyA9IHJlcGxhY2VIb2xkZXJzKHBhcnRpYWxzLCBnZXRIb2xkZXIocGFydGlhbCkpO1xuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXAoZnVuYywgV1JBUF9QQVJUSUFMX0ZMQUcsIHVuZGVmaW5lZCwgcGFydGlhbHMsIGhvbGRlcnMpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5wYXJ0aWFsYCBleGNlcHQgdGhhdCBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHNcbiAgICAgKiBhcmUgYXBwZW5kZWQgdG8gdGhlIGFyZ3VtZW50cyBpdCByZWNlaXZlcy5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5wYXJ0aWFsUmlnaHQucGxhY2Vob2xkZXJgIHZhbHVlLCB3aGljaCBkZWZhdWx0cyB0byBgX2AgaW4gbW9ub2xpdGhpY1xuICAgICAqIGJ1aWxkcywgbWF5IGJlIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBmb3IgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGRvZXNuJ3Qgc2V0IHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IG9mIHBhcnRpYWxseVxuICAgICAqIGFwcGxpZWQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cbiAgICAgKiBAcGFyYW0gey4uLip9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYXJ0aWFsbHkgYXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gZ3JlZXQoZ3JlZXRpbmcsIG5hbWUpIHtcbiAgICAgKiAgIHJldHVybiBncmVldGluZyArICcgJyArIG5hbWU7XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIGdyZWV0RnJlZCA9IF8ucGFydGlhbFJpZ2h0KGdyZWV0LCAnZnJlZCcpO1xuICAgICAqIGdyZWV0RnJlZCgnaGknKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCdcbiAgICAgKlxuICAgICAqIC8vIFBhcnRpYWxseSBhcHBsaWVkIHdpdGggcGxhY2Vob2xkZXJzLlxuICAgICAqIHZhciBzYXlIZWxsb1RvID0gXy5wYXJ0aWFsUmlnaHQoZ3JlZXQsICdoZWxsbycsIF8pO1xuICAgICAqIHNheUhlbGxvVG8oJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gZnJlZCdcbiAgICAgKi9cbiAgICB2YXIgcGFydGlhbFJpZ2h0ID0gYmFzZVJlc3QoZnVuY3Rpb24oZnVuYywgcGFydGlhbHMpIHtcbiAgICAgIHZhciBob2xkZXJzID0gcmVwbGFjZUhvbGRlcnMocGFydGlhbHMsIGdldEhvbGRlcihwYXJ0aWFsUmlnaHQpKTtcbiAgICAgIHJldHVybiBjcmVhdGVXcmFwKGZ1bmMsIFdSQVBfUEFSVElBTF9SSUdIVF9GTEFHLCB1bmRlZmluZWQsIHBhcnRpYWxzLCBob2xkZXJzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggYXJndW1lbnRzIGFycmFuZ2VkIGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBzcGVjaWZpZWQgYGluZGV4ZXNgIHdoZXJlIHRoZSBhcmd1bWVudCB2YWx1ZSBhdCB0aGUgZmlyc3QgaW5kZXggaXNcbiAgICAgKiBwcm92aWRlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIHRoZSBhcmd1bWVudCB2YWx1ZSBhdCB0aGUgc2Vjb25kIGluZGV4IGlzXG4gICAgICogcHJvdmlkZWQgYXMgdGhlIHNlY29uZCBhcmd1bWVudCwgYW5kIHNvIG9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcmVhcnJhbmdlIGFyZ3VtZW50cyBmb3IuXG4gICAgICogQHBhcmFtIHsuLi4obnVtYmVyfG51bWJlcltdKX0gaW5kZXhlcyBUaGUgYXJyYW5nZWQgYXJndW1lbnQgaW5kZXhlcy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHJlYXJnZWQgPSBfLnJlYXJnKGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgKiAgIHJldHVybiBbYSwgYiwgY107XG4gICAgICogfSwgWzIsIDAsIDFdKTtcbiAgICAgKlxuICAgICAqIHJlYXJnZWQoJ2InLCAnYycsICdhJylcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYicsICdjJ11cbiAgICAgKi9cbiAgICB2YXIgcmVhcmcgPSBmbGF0UmVzdChmdW5jdGlvbihmdW5jLCBpbmRleGVzKSB7XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcChmdW5jLCBXUkFQX1JFQVJHX0ZMQUcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGluZGV4ZXMpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlXG4gICAgICogY3JlYXRlZCBmdW5jdGlvbiBhbmQgYXJndW1lbnRzIGZyb20gYHN0YXJ0YCBhbmQgYmV5b25kIHByb3ZpZGVkIGFzXG4gICAgICogYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlXG4gICAgICogW3Jlc3QgcGFyYW1ldGVyXShodHRwczovL21kbi5pby9yZXN0X3BhcmFtZXRlcnMpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBzYXkgPSBfLnJlc3QoZnVuY3Rpb24od2hhdCwgbmFtZXMpIHtcbiAgICAgKiAgIHJldHVybiB3aGF0ICsgJyAnICsgXy5pbml0aWFsKG5hbWVzKS5qb2luKCcsICcpICtcbiAgICAgKiAgICAgKF8uc2l6ZShuYW1lcykgPiAxID8gJywgJiAnIDogJycpICsgXy5sYXN0KG5hbWVzKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHNheSgnaGVsbG8nLCAnZnJlZCcsICdiYXJuZXknLCAncGViYmxlcycpO1xuICAgICAqIC8vID0+ICdoZWxsbyBmcmVkLCBiYXJuZXksICYgcGViYmxlcydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXN0KGZ1bmMsIHN0YXJ0KSB7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICBzdGFydCA9IHN0YXJ0ID09PSB1bmRlZmluZWQgPyBzdGFydCA6IHRvSW50ZWdlcihzdGFydCk7XG4gICAgICByZXR1cm4gYmFzZVJlc3QoZnVuYywgc3RhcnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZVxuICAgICAqIGNyZWF0ZSBmdW5jdGlvbiBhbmQgYW4gYXJyYXkgb2YgYXJndW1lbnRzIG11Y2ggbGlrZVxuICAgICAqIFtgRnVuY3Rpb24jYXBwbHlgXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5KS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvbiB0aGVcbiAgICAgKiBbc3ByZWFkIG9wZXJhdG9yXShodHRwczovL21kbi5pby9zcHJlYWRfb3BlcmF0b3IpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMi4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gc3ByZWFkIGFyZ3VtZW50cyBvdmVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBzcHJlYWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBzYXkgPSBfLnNwcmVhZChmdW5jdGlvbih3aG8sIHdoYXQpIHtcbiAgICAgKiAgIHJldHVybiB3aG8gKyAnIHNheXMgJyArIHdoYXQ7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBzYXkoWydmcmVkJywgJ2hlbGxvJ10pO1xuICAgICAqIC8vID0+ICdmcmVkIHNheXMgaGVsbG8nXG4gICAgICpcbiAgICAgKiB2YXIgbnVtYmVycyA9IFByb21pc2UuYWxsKFtcbiAgICAgKiAgIFByb21pc2UucmVzb2x2ZSg0MCksXG4gICAgICogICBQcm9taXNlLnJlc29sdmUoMzYpXG4gICAgICogXSk7XG4gICAgICpcbiAgICAgKiBudW1iZXJzLnRoZW4oXy5zcHJlYWQoZnVuY3Rpb24oeCwgeSkge1xuICAgICAqICAgcmV0dXJuIHggKyB5O1xuICAgICAqIH0pKTtcbiAgICAgKiAvLyA9PiBhIFByb21pc2Ugb2YgNzZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzcHJlYWQoZnVuYywgc3RhcnQpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHN0YXJ0ID0gc3RhcnQgPT0gbnVsbCA/IDAgOiBuYXRpdmVNYXgodG9JbnRlZ2VyKHN0YXJ0KSwgMCk7XG4gICAgICByZXR1cm4gYmFzZVJlc3QoZnVuY3Rpb24oYXJncykge1xuICAgICAgICB2YXIgYXJyYXkgPSBhcmdzW3N0YXJ0XSxcbiAgICAgICAgICAgIG90aGVyQXJncyA9IGNhc3RTbGljZShhcmdzLCAwLCBzdGFydCk7XG5cbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgYXJyYXlQdXNoKG90aGVyQXJncywgYXJyYXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHBseShmdW5jLCB0aGlzLCBvdGhlckFyZ3MpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHRocm90dGxlZCBmdW5jdGlvbiB0aGF0IG9ubHkgaW52b2tlcyBgZnVuY2AgYXQgbW9zdCBvbmNlIHBlclxuICAgICAqIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuIFRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgXG4gICAgICogbWV0aG9kIHRvIGNhbmNlbCBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0b1xuICAgICAqIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYFxuICAgICAqIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGBcbiAgICAgKiB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWQgd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlXG4gICAgICogdGhyb3R0bGVkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gcmV0dXJuIHRoZVxuICAgICAqIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAgICAgKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRocm90dGxlZCBmdW5jdGlvblxuICAgICAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAgICAgKlxuICAgICAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICAgICAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAgICAgKlxuICAgICAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICAgICAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8udGhyb3R0bGVgIGFuZCBgXy5kZWJvdW5jZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB0aHJvdHRsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgaW52b2NhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPXRydWVdXG4gICAgICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gICAgICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAvLyBBdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nLlxuICAgICAqIGpRdWVyeSh3aW5kb3cpLm9uKCdzY3JvbGwnLCBfLnRocm90dGxlKHVwZGF0ZVBvc2l0aW9uLCAxMDApKTtcbiAgICAgKlxuICAgICAqIC8vIEludm9rZSBgcmVuZXdUb2tlbmAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGJ1dCBub3QgbW9yZSB0aGFuIG9uY2UgZXZlcnkgNSBtaW51dGVzLlxuICAgICAqIHZhciB0aHJvdHRsZWQgPSBfLnRocm90dGxlKHJlbmV3VG9rZW4sIDMwMDAwMCwgeyAndHJhaWxpbmcnOiBmYWxzZSB9KTtcbiAgICAgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgdGhyb3R0bGVkKTtcbiAgICAgKlxuICAgICAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgdGhyb3R0bGVkIGludm9jYXRpb24uXG4gICAgICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgdGhyb3R0bGVkLmNhbmNlbCk7XG4gICAgICovXG4gICAgZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgICAgdmFyIGxlYWRpbmcgPSB0cnVlLFxuICAgICAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIGxlYWRpbmcgPSAnbGVhZGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy5sZWFkaW5nIDogbGVhZGluZztcbiAgICAgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWJvdW5jZShmdW5jLCB3YWl0LCB7XG4gICAgICAgICdsZWFkaW5nJzogbGVhZGluZyxcbiAgICAgICAgJ21heFdhaXQnOiB3YWl0LFxuICAgICAgICAndHJhaWxpbmcnOiB0cmFpbGluZ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyB1cCB0byBvbmUgYXJndW1lbnQsIGlnbm9yaW5nIGFueVxuICAgICAqIGFkZGl0aW9uYWwgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2FwIGFyZ3VtZW50cyBmb3IuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY2FwcGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1hcChbJzYnLCAnOCcsICcxMCddLCBfLnVuYXJ5KHBhcnNlSW50KSk7XG4gICAgICogLy8gPT4gWzYsIDgsIDEwXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuYXJ5KGZ1bmMpIHtcbiAgICAgIHJldHVybiBhcnkoZnVuYywgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcHJvdmlkZXMgYHZhbHVlYCB0byBgd3JhcHBlcmAgYXMgaXRzIGZpcnN0XG4gICAgICogYXJndW1lbnQuIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZnVuY3Rpb24gYXJlIGFwcGVuZGVkXG4gICAgICogdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIGB3cmFwcGVyYC4gVGhlIHdyYXBwZXIgaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2BcbiAgICAgKiBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbd3JhcHBlcj1pZGVudGl0eV0gVGhlIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBwID0gXy53cmFwKF8uZXNjYXBlLCBmdW5jdGlvbihmdW5jLCB0ZXh0KSB7XG4gICAgICogICByZXR1cm4gJzxwPicgKyBmdW5jKHRleHQpICsgJzwvcD4nO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogcCgnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnPHA+ZnJlZCwgYmFybmV5LCAmYW1wOyBwZWJibGVzPC9wPidcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwKHZhbHVlLCB3cmFwcGVyKSB7XG4gICAgICByZXR1cm4gcGFydGlhbChjYXN0RnVuY3Rpb24od3JhcHBlciksIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDYXN0cyBgdmFsdWVgIGFzIGFuIGFycmF5IGlmIGl0J3Mgbm90IG9uZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjQuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNhc3QgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY2FzdEFycmF5KDEpO1xuICAgICAqIC8vID0+IFsxXVxuICAgICAqXG4gICAgICogXy5jYXN0QXJyYXkoeyAnYSc6IDEgfSk7XG4gICAgICogLy8gPT4gW3sgJ2EnOiAxIH1dXG4gICAgICpcbiAgICAgKiBfLmNhc3RBcnJheSgnYWJjJyk7XG4gICAgICogLy8gPT4gWydhYmMnXVxuICAgICAqXG4gICAgICogXy5jYXN0QXJyYXkobnVsbCk7XG4gICAgICogLy8gPT4gW251bGxdXG4gICAgICpcbiAgICAgKiBfLmNhc3RBcnJheSh1bmRlZmluZWQpO1xuICAgICAqIC8vID0+IFt1bmRlZmluZWRdXG4gICAgICpcbiAgICAgKiBfLmNhc3RBcnJheSgpO1xuICAgICAqIC8vID0+IFtdXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMiwgM107XG4gICAgICogY29uc29sZS5sb2coXy5jYXN0QXJyYXkoYXJyYXkpID09PSBhcnJheSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhc3RBcnJheSgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHNbMF07XG4gICAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNoYWxsb3cgY2xvbmUgb2YgYHZhbHVlYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uIHRoZVxuICAgICAqIFtzdHJ1Y3R1cmVkIGNsb25lIGFsZ29yaXRobV0oaHR0cHM6Ly9tZG4uaW8vU3RydWN0dXJlZF9jbG9uZV9hbGdvcml0aG0pXG4gICAgICogYW5kIHN1cHBvcnRzIGNsb25pbmcgYXJyYXlzLCBhcnJheSBidWZmZXJzLCBib29sZWFucywgZGF0ZSBvYmplY3RzLCBtYXBzLFxuICAgICAqIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIHNldHMsIHN0cmluZ3MsIHN5bWJvbHMsIGFuZCB0eXBlZFxuICAgICAqIGFycmF5cy4gVGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYGFyZ3VtZW50c2Agb2JqZWN0cyBhcmUgY2xvbmVkXG4gICAgICogYXMgcGxhaW4gb2JqZWN0cy4gQW4gZW1wdHkgb2JqZWN0IGlzIHJldHVybmVkIGZvciB1bmNsb25lYWJsZSB2YWx1ZXMgc3VjaFxuICAgICAqIGFzIGVycm9yIG9iamVjdHMsIGZ1bmN0aW9ucywgRE9NIG5vZGVzLCBhbmQgV2Vha01hcHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNsb25lLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBjbG9uZWQgdmFsdWUuXG4gICAgICogQHNlZSBfLmNsb25lRGVlcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFt7ICdhJzogMSB9LCB7ICdiJzogMiB9XTtcbiAgICAgKlxuICAgICAqIHZhciBzaGFsbG93ID0gXy5jbG9uZShvYmplY3RzKTtcbiAgICAgKiBjb25zb2xlLmxvZyhzaGFsbG93WzBdID09PSBvYmplY3RzWzBdKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xvbmUodmFsdWUpIHtcbiAgICAgIHJldHVybiBiYXNlQ2xvbmUodmFsdWUsIENMT05FX1NZTUJPTFNfRkxBRyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5jbG9uZWAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBgY3VzdG9taXplcmAgd2hpY2hcbiAgICAgKiBpcyBpbnZva2VkIHRvIHByb2R1Y2UgdGhlIGNsb25lZCB2YWx1ZS4gSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGAsXG4gICAgICogY2xvbmluZyBpcyBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBpbnZva2VkIHdpdGhcbiAgICAgKiB1cCB0byBmb3VyIGFyZ3VtZW50czsgKHZhbHVlIFssIGluZGV4fGtleSwgb2JqZWN0LCBzdGFja10pLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBjbG9uZWQgdmFsdWUuXG4gICAgICogQHNlZSBfLmNsb25lRGVlcFdpdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gY3VzdG9taXplcih2YWx1ZSkge1xuICAgICAqICAgaWYgKF8uaXNFbGVtZW50KHZhbHVlKSkge1xuICAgICAqICAgICByZXR1cm4gdmFsdWUuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgZWwgPSBfLmNsb25lV2l0aChkb2N1bWVudC5ib2R5LCBjdXN0b21pemVyKTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGVsID09PSBkb2N1bWVudC5ib2R5KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqIGNvbnNvbGUubG9nKGVsLm5vZGVOYW1lKTtcbiAgICAgKiAvLyA9PiAnQk9EWSdcbiAgICAgKiBjb25zb2xlLmxvZyhlbC5jaGlsZE5vZGVzLmxlbmd0aCk7XG4gICAgICogLy8gPT4gMFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lV2l0aCh2YWx1ZSwgY3VzdG9taXplcikge1xuICAgICAgY3VzdG9taXplciA9IHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbicgPyBjdXN0b21pemVyIDogdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIGJhc2VDbG9uZSh2YWx1ZSwgQ0xPTkVfU1lNQk9MU19GTEFHLCBjdXN0b21pemVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmNsb25lYCBleGNlcHQgdGhhdCBpdCByZWN1cnNpdmVseSBjbG9uZXMgYHZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcmVjdXJzaXZlbHkgY2xvbmUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGRlZXAgY2xvbmVkIHZhbHVlLlxuICAgICAqIEBzZWUgXy5jbG9uZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFt7ICdhJzogMSB9LCB7ICdiJzogMiB9XTtcbiAgICAgKlxuICAgICAqIHZhciBkZWVwID0gXy5jbG9uZURlZXAob2JqZWN0cyk7XG4gICAgICogY29uc29sZS5sb2coZGVlcFswXSA9PT0gb2JqZWN0c1swXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbG9uZURlZXAodmFsdWUpIHtcbiAgICAgIHJldHVybiBiYXNlQ2xvbmUodmFsdWUsIENMT05FX0RFRVBfRkxBRyB8IENMT05FX1NZTUJPTFNfRkxBRyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5jbG9uZVdpdGhgIGV4Y2VwdCB0aGF0IGl0IHJlY3Vyc2l2ZWx5IGNsb25lcyBgdmFsdWVgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byByZWN1cnNpdmVseSBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBkZWVwIGNsb25lZCB2YWx1ZS5cbiAgICAgKiBAc2VlIF8uY2xvbmVXaXRoXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGN1c3RvbWl6ZXIodmFsdWUpIHtcbiAgICAgKiAgIGlmIChfLmlzRWxlbWVudCh2YWx1ZSkpIHtcbiAgICAgKiAgICAgcmV0dXJuIHZhbHVlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgZWwgPSBfLmNsb25lRGVlcFdpdGgoZG9jdW1lbnQuYm9keSwgY3VzdG9taXplcik7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhlbCA9PT0gZG9jdW1lbnQuYm9keSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKiBjb25zb2xlLmxvZyhlbC5ub2RlTmFtZSk7XG4gICAgICogLy8gPT4gJ0JPRFknXG4gICAgICogY29uc29sZS5sb2coZWwuY2hpbGROb2Rlcy5sZW5ndGgpO1xuICAgICAqIC8vID0+IDIwXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xvbmVEZWVwV2l0aCh2YWx1ZSwgY3VzdG9taXplcikge1xuICAgICAgY3VzdG9taXplciA9IHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbicgPyBjdXN0b21pemVyIDogdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIGJhc2VDbG9uZSh2YWx1ZSwgQ0xPTkVfREVFUF9GTEFHIHwgQ0xPTkVfU1lNQk9MU19GTEFHLCBjdXN0b21pemVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYG9iamVjdGAgY29uZm9ybXMgdG8gYHNvdXJjZWAgYnkgaW52b2tpbmcgdGhlIHByZWRpY2F0ZVxuICAgICAqIHByb3BlcnRpZXMgb2YgYHNvdXJjZWAgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSB2YWx1ZXMgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgZXF1aXZhbGVudCB0byBgXy5jb25mb3Jtc2Agd2hlbiBgc291cmNlYCBpc1xuICAgICAqIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHByZWRpY2F0ZXMgdG8gY29uZm9ybSB0by5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgY29uZm9ybXMsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6IDIgfTtcbiAgICAgKlxuICAgICAqIF8uY29uZm9ybXNUbyhvYmplY3QsIHsgJ2InOiBmdW5jdGlvbihuKSB7IHJldHVybiBuID4gMTsgfSB9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmNvbmZvcm1zVG8ob2JqZWN0LCB7ICdiJzogZnVuY3Rpb24obikgeyByZXR1cm4gbiA+IDI7IH0gfSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb25mb3Jtc1RvKG9iamVjdCwgc291cmNlKSB7XG4gICAgICByZXR1cm4gc291cmNlID09IG51bGwgfHwgYmFzZUNvbmZvcm1zVG8ob2JqZWN0LCBzb3VyY2UsIGtleXMoc291cmNlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYVxuICAgICAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAgICAgKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICAgICAqXG4gICAgICogXy5lcShvYmplY3QsIG9iamVjdCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5lcShvYmplY3QsIG90aGVyKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5lcSgnYScsICdhJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5lcSgnYScsIE9iamVjdCgnYScpKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5lcShOYU4sIE5hTik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgZ3JlYXRlciB0aGFuIGBvdGhlcmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBncmVhdGVyIHRoYW4gYG90aGVyYCxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBzZWUgXy5sdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmd0KDMsIDEpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uZ3QoMywgMyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uZ3QoMSwgMyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgZ3QgPSBjcmVhdGVSZWxhdGlvbmFsT3BlcmF0aW9uKGJhc2VHdCk7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYG90aGVyYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjkuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0b1xuICAgICAqICBgb3RoZXJgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQHNlZSBfLmx0ZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmd0ZSgzLCAxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmd0ZSgzLCAzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmd0ZSgxLCAzKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBndGUgPSBjcmVhdGVSZWxhdGlvbmFsT3BlcmF0aW9uKGZ1bmN0aW9uKHZhbHVlLCBvdGhlcikge1xuICAgICAgcmV0dXJuIHZhbHVlID49IG90aGVyO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGlzQXJndW1lbnRzID0gYmFzZUlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID8gYmFzZUlzQXJndW1lbnRzIDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuICAgICAgICAhcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheSgnYWJjJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheShfLm5vb3ApO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlCdWZmZXJgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjMuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXkgYnVmZmVyLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheUJ1ZmZlcihuZXcgQXJyYXlCdWZmZXIoMikpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheUJ1ZmZlcihuZXcgQXJyYXkoMikpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGlzQXJyYXlCdWZmZXIgPSBub2RlSXNBcnJheUJ1ZmZlciA/IGJhc2VVbmFyeShub2RlSXNBcnJheUJ1ZmZlcikgOiBiYXNlSXNBcnJheUJ1ZmZlcjtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3NcbiAgICAgKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG4gICAgICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pc0FycmF5TGlrZWAgZXhjZXB0IHRoYXQgaXQgYWxzbyBjaGVja3MgaWYgYHZhbHVlYFxuICAgICAqIGlzIGFuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXktbGlrZSBvYmplY3QsXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0FycmF5TGlrZU9iamVjdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheUxpa2VPYmplY3QoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0FycmF5TGlrZU9iamVjdCgnYWJjJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheUxpa2VPYmplY3QoXy5ub29wKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGJvb2xlYW4gcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBib29sZWFuLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNCb29sZWFuKGZhbHNlKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzQm9vbGVhbihudWxsKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSBmYWxzZSB8fFxuICAgICAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBiYXNlR2V0VGFnKHZhbHVlKSA9PSBib29sVGFnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjMuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBidWZmZXIsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0J1ZmZlcihuZXcgQnVmZmVyKDIpKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzQnVmZmVyKG5ldyBVaW50OEFycmF5KDIpKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBpc0J1ZmZlciA9IG5hdGl2ZUlzQnVmZmVyIHx8IHN0dWJGYWxzZTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRGF0ZWAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGRhdGUgb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNEYXRlKG5ldyBEYXRlKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRGF0ZSgnTW9uIEFwcmlsIDIzIDIwMTInKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBpc0RhdGUgPSBub2RlSXNEYXRlID8gYmFzZVVuYXJ5KG5vZGVJc0RhdGUpIDogYmFzZUlzRGF0ZTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIERPTSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIERPTSBlbGVtZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNFbGVtZW50KGRvY3VtZW50LmJvZHkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNFbGVtZW50KCc8Ym9keT4nKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRWxlbWVudCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgdmFsdWUubm9kZVR5cGUgPT09IDEgJiYgIWlzUGxhaW5PYmplY3QodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGVtcHR5IG9iamVjdCwgY29sbGVjdGlvbiwgbWFwLCBvciBzZXQuXG4gICAgICpcbiAgICAgKiBPYmplY3RzIGFyZSBjb25zaWRlcmVkIGVtcHR5IGlmIHRoZXkgaGF2ZSBubyBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWRcbiAgICAgKiBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQXJyYXktbGlrZSB2YWx1ZXMgc3VjaCBhcyBgYXJndW1lbnRzYCBvYmplY3RzLCBhcnJheXMsIGJ1ZmZlcnMsIHN0cmluZ3MsIG9yXG4gICAgICogalF1ZXJ5LWxpa2UgY29sbGVjdGlvbnMgYXJlIGNvbnNpZGVyZWQgZW1wdHkgaWYgdGhleSBoYXZlIGEgYGxlbmd0aGAgb2YgYDBgLlxuICAgICAqIFNpbWlsYXJseSwgbWFwcyBhbmQgc2V0cyBhcmUgY29uc2lkZXJlZCBlbXB0eSBpZiB0aGV5IGhhdmUgYSBgc2l6ZWAgb2YgYDBgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBlbXB0eSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkobnVsbCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KHRydWUpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNFbXB0eSgxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KHsgJ2EnOiAxIH0pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmXG4gICAgICAgICAgKGlzQXJyYXkodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUuc3BsaWNlID09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgICAgIGlzQnVmZmVyKHZhbHVlKSB8fCBpc1R5cGVkQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZS5sZW5ndGg7XG4gICAgICB9XG4gICAgICB2YXIgdGFnID0gZ2V0VGFnKHZhbHVlKTtcbiAgICAgIGlmICh0YWcgPT0gbWFwVGFnIHx8IHRhZyA9PSBzZXRUYWcpIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZS5zaXplO1xuICAgICAgfVxuICAgICAgaWYgKGlzUHJvdG90eXBlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gIWJhc2VLZXlzKHZhbHVlKS5sZW5ndGg7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGtleSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmVcbiAgICAgKiBlcXVpdmFsZW50LlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIGNvbXBhcmluZyBhcnJheXMsIGFycmF5IGJ1ZmZlcnMsIGJvb2xlYW5zLFxuICAgICAqIGRhdGUgb2JqZWN0cywgZXJyb3Igb2JqZWN0cywgbWFwcywgbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcyxcbiAgICAgKiBzZXRzLCBzdHJpbmdzLCBzeW1ib2xzLCBhbmQgdHlwZWQgYXJyYXlzLiBgT2JqZWN0YCBvYmplY3RzIGFyZSBjb21wYXJlZFxuICAgICAqIGJ5IHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLiBGdW5jdGlvbnMgYW5kIERPTVxuICAgICAqIG5vZGVzIGFyZSBjb21wYXJlZCBieSBzdHJpY3QgZXF1YWxpdHksIGkuZS4gYD09PWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAgICAgKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICAgICAqXG4gICAgICogXy5pc0VxdWFsKG9iamVjdCwgb3RoZXIpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIG9iamVjdCA9PT0gb3RoZXI7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0VxdWFsKHZhbHVlLCBvdGhlcikge1xuICAgICAgcmV0dXJuIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pc0VxdWFsYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBjdXN0b21pemVyYCB3aGljaFxuICAgICAqIGlzIGludm9rZWQgdG8gY29tcGFyZSB2YWx1ZXMuIElmIGBjdXN0b21pemVyYCByZXR1cm5zIGB1bmRlZmluZWRgLCBjb21wYXJpc29uc1xuICAgICAqIGFyZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBpbnZva2VkIHdpdGggdXAgdG9cbiAgICAgKiBzaXggYXJndW1lbnRzOiAob2JqVmFsdWUsIG90aFZhbHVlIFssIGluZGV4fGtleSwgb2JqZWN0LCBvdGhlciwgc3RhY2tdKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGlzR3JlZXRpbmcodmFsdWUpIHtcbiAgICAgKiAgIHJldHVybiAvXmgoPzppfGVsbG8pJC8udGVzdCh2YWx1ZSk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gY3VzdG9taXplcihvYmpWYWx1ZSwgb3RoVmFsdWUpIHtcbiAgICAgKiAgIGlmIChpc0dyZWV0aW5nKG9ialZhbHVlKSAmJiBpc0dyZWV0aW5nKG90aFZhbHVlKSkge1xuICAgICAqICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbJ2hlbGxvJywgJ2dvb2RieWUnXTtcbiAgICAgKiB2YXIgb3RoZXIgPSBbJ2hpJywgJ2dvb2RieWUnXTtcbiAgICAgKlxuICAgICAqIF8uaXNFcXVhbFdpdGgoYXJyYXksIG90aGVyLCBjdXN0b21pemVyKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNFcXVhbFdpdGgodmFsdWUsIG90aGVyLCBjdXN0b21pemVyKSB7XG4gICAgICBjdXN0b21pemVyID0gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJyA/IGN1c3RvbWl6ZXIgOiB1bmRlZmluZWQ7XG4gICAgICB2YXIgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIodmFsdWUsIG90aGVyKSA6IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgdW5kZWZpbmVkLCBjdXN0b21pemVyKSA6ICEhcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGBFcnJvcmAsIGBFdmFsRXJyb3JgLCBgUmFuZ2VFcnJvcmAsIGBSZWZlcmVuY2VFcnJvcmAsXG4gICAgICogYFN5bnRheEVycm9yYCwgYFR5cGVFcnJvcmAsIG9yIGBVUklFcnJvcmAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBlcnJvciBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0Vycm9yKG5ldyBFcnJvcik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0Vycm9yKEVycm9yKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRXJyb3IodmFsdWUpIHtcbiAgICAgIGlmICghaXNPYmplY3RMaWtlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgdGFnID0gYmFzZUdldFRhZyh2YWx1ZSk7XG4gICAgICByZXR1cm4gdGFnID09IGVycm9yVGFnIHx8IHRhZyA9PSBkb21FeGNUYWcgfHxcbiAgICAgICAgKHR5cGVvZiB2YWx1ZS5tZXNzYWdlID09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZS5uYW1lID09ICdzdHJpbmcnICYmICFpc1BsYWluT2JqZWN0KHZhbHVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBmaW5pdGUgcHJpbWl0aXZlIG51bWJlci5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvblxuICAgICAqIFtgTnVtYmVyLmlzRmluaXRlYF0oaHR0cHM6Ly9tZG4uaW8vTnVtYmVyL2lzRmluaXRlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBmaW5pdGUgbnVtYmVyLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUoMyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKEluZmluaXR5KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZSgnMycpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNGaW5pdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgbmF0aXZlSXNGaW5pdGUodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRnVuY3Rpb24oXyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAgICAgLy8gaW4gU2FmYXJpIDkgd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXlzIGFuZCBvdGhlciBjb25zdHJ1Y3RvcnMuXG4gICAgICB2YXIgdGFnID0gYmFzZUdldFRhZyh2YWx1ZSk7XG4gICAgICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZyB8fCB0YWcgPT0gYXN5bmNUYWcgfHwgdGFnID09IHByb3h5VGFnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGludGVnZXIuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb25cbiAgICAgKiBbYE51bWJlci5pc0ludGVnZXJgXShodHRwczovL21kbi5pby9OdW1iZXIvaXNJbnRlZ2VyKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gaW50ZWdlciwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzSW50ZWdlcigzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0ludGVnZXIoSW5maW5pdHkpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzSW50ZWdlcignMycpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID09IHRvSW50ZWdlcih2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gICAgICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvbGVuZ3RoKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0xlbmd0aCgzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTGVuZ3RoKE51bWJlci5NSU5fVkFMVUUpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzTGVuZ3RoKEluZmluaXR5KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0xlbmd0aCgnMycpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcbiAgICAgICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICAgICAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAgICAgKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzT2JqZWN0KHt9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdChfLm5vb3ApO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNPYmplY3QobnVsbCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICAgICAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdExpa2Uoe30pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYE1hcGAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMy4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG1hcCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTWFwKG5ldyBNYXApO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNNYXAobmV3IFdlYWtNYXApO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGlzTWFwID0gbm9kZUlzTWFwID8gYmFzZVVuYXJ5KG5vZGVJc01hcCkgOiBiYXNlSXNNYXA7XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHBhcnRpYWwgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gYG9iamVjdGAgYW5kIGBzb3VyY2VgIHRvXG4gICAgICogZGV0ZXJtaW5lIGlmIGBvYmplY3RgIGNvbnRhaW5zIGVxdWl2YWxlbnQgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGVxdWl2YWxlbnQgdG8gYF8ubWF0Y2hlc2Agd2hlbiBgc291cmNlYCBpc1xuICAgICAqIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqXG4gICAgICogUGFydGlhbCBjb21wYXJpc29ucyB3aWxsIG1hdGNoIGVtcHR5IGFycmF5IGFuZCBlbXB0eSBvYmplY3QgYHNvdXJjZWBcbiAgICAgKiB2YWx1ZXMgYWdhaW5zdCBhbnkgYXJyYXkgb3Igb2JqZWN0IHZhbHVlLCByZXNwZWN0aXZlbHkuIFNlZSBgXy5pc0VxdWFsYFxuICAgICAqIGZvciBhIGxpc3Qgb2Ygc3VwcG9ydGVkIHZhbHVlIGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgb2JqZWN0YCBpcyBhIG1hdGNoLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyIH07XG4gICAgICpcbiAgICAgKiBfLmlzTWF0Y2gob2JqZWN0LCB7ICdiJzogMiB9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTWF0Y2gob2JqZWN0LCB7ICdiJzogMSB9KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTWF0Y2gob2JqZWN0LCBzb3VyY2UpIHtcbiAgICAgIHJldHVybiBvYmplY3QgPT09IHNvdXJjZSB8fCBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgZ2V0TWF0Y2hEYXRhKHNvdXJjZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uaXNNYXRjaGAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBgY3VzdG9taXplcmAgd2hpY2hcbiAgICAgKiBpcyBpbnZva2VkIHRvIGNvbXBhcmUgdmFsdWVzLiBJZiBgY3VzdG9taXplcmAgcmV0dXJucyBgdW5kZWZpbmVkYCwgY29tcGFyaXNvbnNcbiAgICAgKiBhcmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmAgaXMgaW52b2tlZCB3aXRoIGZpdmVcbiAgICAgKiBhcmd1bWVudHM6IChvYmpWYWx1ZSwgc3JjVmFsdWUsIGluZGV4fGtleSwgb2JqZWN0LCBzb3VyY2UpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgb2JqZWN0YCBpcyBhIG1hdGNoLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGlzR3JlZXRpbmcodmFsdWUpIHtcbiAgICAgKiAgIHJldHVybiAvXmgoPzppfGVsbG8pJC8udGVzdCh2YWx1ZSk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUpIHtcbiAgICAgKiAgIGlmIChpc0dyZWV0aW5nKG9ialZhbHVlKSAmJiBpc0dyZWV0aW5nKHNyY1ZhbHVlKSkge1xuICAgICAqICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnZ3JlZXRpbmcnOiAnaGVsbG8nIH07XG4gICAgICogdmFyIHNvdXJjZSA9IHsgJ2dyZWV0aW5nJzogJ2hpJyB9O1xuICAgICAqXG4gICAgICogXy5pc01hdGNoV2l0aChvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplcik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTWF0Y2hXaXRoKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKSB7XG4gICAgICBjdXN0b21pemVyID0gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJyA/IGN1c3RvbWl6ZXIgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gYmFzZUlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIGdldE1hdGNoRGF0YShzb3VyY2UpLCBjdXN0b21pemVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgTmFOYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvblxuICAgICAqIFtgTnVtYmVyLmlzTmFOYF0oaHR0cHM6Ly9tZG4uaW8vTnVtYmVyL2lzTmFOKSBhbmQgaXMgbm90IHRoZSBzYW1lIGFzXG4gICAgICogZ2xvYmFsIFtgaXNOYU5gXShodHRwczovL21kbi5pby9pc05hTikgd2hpY2ggcmV0dXJucyBgdHJ1ZWAgZm9yXG4gICAgICogYHVuZGVmaW5lZGAgYW5kIG90aGVyIG5vbi1udW1iZXIgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBgTmFOYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTmFOKE5hTik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc05hTihuZXcgTnVtYmVyKE5hTikpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIGlzTmFOKHVuZGVmaW5lZCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc05hTih1bmRlZmluZWQpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNOYU4odmFsdWUpIHtcbiAgICAgIC8vIEFuIGBOYU5gIHByaW1pdGl2ZSBpcyB0aGUgb25seSB2YWx1ZSB0aGF0IGlzIG5vdCBlcXVhbCB0byBpdHNlbGYuXG4gICAgICAvLyBQZXJmb3JtIHRoZSBgdG9TdHJpbmdUYWdgIGNoZWNrIGZpcnN0IHRvIGF2b2lkIGVycm9ycyB3aXRoIHNvbWVcbiAgICAgIC8vIEFjdGl2ZVggb2JqZWN0cyBpbiBJRS5cbiAgICAgIHJldHVybiBpc051bWJlcih2YWx1ZSkgJiYgdmFsdWUgIT0gK3ZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcHJpc3RpbmUgbmF0aXZlIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGNhbid0IHJlbGlhYmx5IGRldGVjdCBuYXRpdmUgZnVuY3Rpb25zIGluIHRoZSBwcmVzZW5jZVxuICAgICAqIG9mIHRoZSBjb3JlLWpzIHBhY2thZ2UgYmVjYXVzZSBjb3JlLWpzIGNpcmN1bXZlbnRzIHRoaXMga2luZCBvZiBkZXRlY3Rpb24uXG4gICAgICogRGVzcGl0ZSBtdWx0aXBsZSByZXF1ZXN0cywgdGhlIGNvcmUtanMgbWFpbnRhaW5lciBoYXMgbWFkZSBpdCBjbGVhcjogYW55XG4gICAgICogYXR0ZW1wdCB0byBmaXggdGhlIGRldGVjdGlvbiB3aWxsIGJlIG9ic3RydWN0ZWQuIEFzIGEgcmVzdWx0LCB3ZSdyZSBsZWZ0XG4gICAgICogd2l0aCBsaXR0bGUgY2hvaWNlIGJ1dCB0byB0aHJvdyBhbiBlcnJvci4gVW5mb3J0dW5hdGVseSwgdGhpcyBhbHNvIGFmZmVjdHNcbiAgICAgKiBwYWNrYWdlcywgbGlrZSBbYmFiZWwtcG9seWZpbGxdKGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2JhYmVsLXBvbHlmaWxsKSxcbiAgICAgKiB3aGljaCByZWx5IG9uIGNvcmUtanMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNOYXRpdmUoQXJyYXkucHJvdG90eXBlLnB1c2gpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOYXRpdmUoXyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc05hdGl2ZSh2YWx1ZSkge1xuICAgICAgaWYgKGlzTWFza2FibGUodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihDT1JFX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VJc05hdGl2ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYG51bGxgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBgbnVsbGAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc051bGwobnVsbCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc051bGwodm9pZCAwKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTnVsbCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgbnVsbGlzaCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTmlsKG51bGwpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOaWwodm9pZCAwKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTmlsKE5hTik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc05pbCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBOdW1iZXJgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVG8gZXhjbHVkZSBgSW5maW5pdHlgLCBgLUluZmluaXR5YCwgYW5kIGBOYU5gLCB3aGljaCBhcmVcbiAgICAgKiBjbGFzc2lmaWVkIGFzIG51bWJlcnMsIHVzZSB0aGUgYF8uaXNGaW5pdGVgIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBudW1iZXIsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc051bWJlcigzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOdW1iZXIoSW5maW5pdHkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOdW1iZXIoJzMnKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8XG4gICAgICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IG51bWJlclRhZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIHRoYXQgaXMsIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZVxuICAgICAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjguMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QobmV3IEZvbyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgICAgIGlmICghaXNPYmplY3RMaWtlKHZhbHVlKSB8fCBiYXNlR2V0VGFnKHZhbHVlKSAhPSBvYmplY3RUYWcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHByb3RvID0gZ2V0UHJvdG90eXBlKHZhbHVlKTtcbiAgICAgIGlmIChwcm90byA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHZhciBDdG9yID0gaGFzT3duUHJvcGVydHkuY2FsbChwcm90bywgJ2NvbnN0cnVjdG9yJykgJiYgcHJvdG8uY29uc3RydWN0b3I7XG4gICAgICByZXR1cm4gdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yIGluc3RhbmNlb2YgQ3RvciAmJlxuICAgICAgICBmdW5jVG9TdHJpbmcuY2FsbChDdG9yKSA9PSBvYmplY3RDdG9yU3RyaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgUmVnRXhwYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcmVnZXhwLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNSZWdFeHAoL2FiYy8pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNSZWdFeHAoJy9hYmMvJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgaXNSZWdFeHAgPSBub2RlSXNSZWdFeHAgPyBiYXNlVW5hcnkobm9kZUlzUmVnRXhwKSA6IGJhc2VJc1JlZ0V4cDtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgc2FmZSBpbnRlZ2VyLiBBbiBpbnRlZ2VyIGlzIHNhZmUgaWYgaXQncyBhbiBJRUVFLTc1NFxuICAgICAqIGRvdWJsZSBwcmVjaXNpb24gbnVtYmVyIHdoaWNoIGlzbid0IHRoZSByZXN1bHQgb2YgYSByb3VuZGVkIHVuc2FmZSBpbnRlZ2VyLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uXG4gICAgICogW2BOdW1iZXIuaXNTYWZlSW50ZWdlcmBdKGh0dHBzOi8vbWRuLmlvL051bWJlci9pc1NhZmVJbnRlZ2VyKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzYWZlIGludGVnZXIsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1NhZmVJbnRlZ2VyKDMpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNTYWZlSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc1NhZmVJbnRlZ2VyKEluZmluaXR5KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc1NhZmVJbnRlZ2VyKCczJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1NhZmVJbnRlZ2VyKHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNJbnRlZ2VyKHZhbHVlKSAmJiB2YWx1ZSA+PSAtTUFYX1NBRkVfSU5URUdFUiAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU2V0YCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc2V0LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNTZXQobmV3IFNldCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc1NldChuZXcgV2Vha1NldCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgaXNTZXQgPSBub2RlSXNTZXQgPyBiYXNlVW5hcnkobm9kZUlzU2V0KSA6IGJhc2VJc1NldDtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3RyaW5nYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN0cmluZywgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzU3RyaW5nKCdhYmMnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzU3RyaW5nKDEpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHxcbiAgICAgICAgKCFpc0FycmF5KHZhbHVlKSAmJiBpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IHN0cmluZ1RhZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IHN5bWJvbFRhZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzVHlwZWRBcnJheShbXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgaXNUeXBlZEFycmF5ID0gbm9kZUlzVHlwZWRBcnJheSA/IGJhc2VVbmFyeShub2RlSXNUeXBlZEFycmF5KSA6IGJhc2VJc1R5cGVkQXJyYXk7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYHVuZGVmaW5lZGAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1VuZGVmaW5lZCh2b2lkIDApO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNVbmRlZmluZWQobnVsbCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBXZWFrTWFwYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgd2VhayBtYXAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1dlYWtNYXAobmV3IFdlYWtNYXApO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNXZWFrTWFwKG5ldyBNYXApO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNXZWFrTWFwKHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBnZXRUYWcodmFsdWUpID09IHdlYWtNYXBUYWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBXZWFrU2V0YCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgd2VhayBzZXQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1dlYWtTZXQobmV3IFdlYWtTZXQpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNXZWFrU2V0KG5ldyBTZXQpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNXZWFrU2V0KHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBiYXNlR2V0VGFnKHZhbHVlKSA9PSB3ZWFrU2V0VGFnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxlc3MgdGhhbiBgb3RoZXJgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuOS4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgbGVzcyB0aGFuIGBvdGhlcmAsXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAc2VlIF8uZ3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5sdCgxLCAzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmx0KDMsIDMpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmx0KDMsIDEpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGx0ID0gY3JlYXRlUmVsYXRpb25hbE9wZXJhdGlvbihiYXNlTHQpO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBvdGhlcmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG9cbiAgICAgKiAgYG90aGVyYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBzZWUgXy5ndGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5sdGUoMSwgMyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5sdGUoMywgMyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5sdGUoMywgMSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgbHRlID0gY3JlYXRlUmVsYXRpb25hbE9wZXJhdGlvbihmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA8PSBvdGhlcjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udG9BcnJheSh7ICdhJzogMSwgJ2InOiAyIH0pO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogXy50b0FycmF5KCdhYmMnKTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYicsICdjJ11cbiAgICAgKlxuICAgICAqIF8udG9BcnJheSgxKTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqXG4gICAgICogXy50b0FycmF5KG51bGwpO1xuICAgICAqIC8vID0+IFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9BcnJheSh2YWx1ZSkge1xuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBpc1N0cmluZyh2YWx1ZSkgPyBzdHJpbmdUb0FycmF5KHZhbHVlKSA6IGNvcHlBcnJheSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoc3ltSXRlcmF0b3IgJiYgdmFsdWVbc3ltSXRlcmF0b3JdKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvclRvQXJyYXkodmFsdWVbc3ltSXRlcmF0b3JdKCkpO1xuICAgICAgfVxuICAgICAgdmFyIHRhZyA9IGdldFRhZyh2YWx1ZSksXG4gICAgICAgICAgZnVuYyA9IHRhZyA9PSBtYXBUYWcgPyBtYXBUb0FycmF5IDogKHRhZyA9PSBzZXRUYWcgPyBzZXRUb0FycmF5IDogdmFsdWVzKTtcblxuICAgICAgcmV0dXJuIGZ1bmModmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBmaW5pdGUgbnVtYmVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMTIuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgbnVtYmVyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRvRmluaXRlKDMuMik7XG4gICAgICogLy8gPT4gMy4yXG4gICAgICpcbiAgICAgKiBfLnRvRmluaXRlKE51bWJlci5NSU5fVkFMVUUpO1xuICAgICAqIC8vID0+IDVlLTMyNFxuICAgICAqXG4gICAgICogXy50b0Zpbml0ZShJbmZpbml0eSk7XG4gICAgICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAgICAgKlxuICAgICAqIF8udG9GaW5pdGUoJzMuMicpO1xuICAgICAqIC8vID0+IDMuMlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvRmluaXRlKHZhbHVlKSB7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogMDtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICAgICAgaWYgKHZhbHVlID09PSBJTkZJTklUWSB8fCB2YWx1ZSA9PT0gLUlORklOSVRZKSB7XG4gICAgICAgIHZhciBzaWduID0gKHZhbHVlIDwgMCA/IC0xIDogMSk7XG4gICAgICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gdmFsdWUgOiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gaW50ZWdlci5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gICAgICogW2BUb0ludGVnZXJgXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9pbnRlZ2VyKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50b0ludGVnZXIoMy4yKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLnRvSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICpcbiAgICAgKiBfLnRvSW50ZWdlcihJbmZpbml0eSk7XG4gICAgICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAgICAgKlxuICAgICAqIF8udG9JbnRlZ2VyKCczLjInKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdG9GaW5pdGUodmFsdWUpLFxuICAgICAgICAgIHJlbWFpbmRlciA9IHJlc3VsdCAlIDE7XG5cbiAgICAgIHJldHVybiByZXN1bHQgPT09IHJlc3VsdCA/IChyZW1haW5kZXIgPyByZXN1bHQgLSByZW1haW5kZXIgOiByZXN1bHQpIDogMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGludGVnZXIgc3VpdGFibGUgZm9yIHVzZSBhcyB0aGUgbGVuZ3RoIG9mIGFuXG4gICAgICogYXJyYXktbGlrZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb25cbiAgICAgKiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9sZW5ndGgpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBpbnRlZ2VyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRvTGVuZ3RoKDMuMik7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogXy50b0xlbmd0aChOdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICpcbiAgICAgKiBfLnRvTGVuZ3RoKEluZmluaXR5KTtcbiAgICAgKiAvLyA9PiA0Mjk0OTY3Mjk1XG4gICAgICpcbiAgICAgKiBfLnRvTGVuZ3RoKCczLjInKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9MZW5ndGgodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA/IGJhc2VDbGFtcCh0b0ludGVnZXIodmFsdWUpLCAwLCBNQVhfQVJSQVlfTEVOR1RIKSA6IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udG9OdW1iZXIoMy4yKTtcbiAgICAgKiAvLyA9PiAzLjJcbiAgICAgKlxuICAgICAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gICAgICogLy8gPT4gNWUtMzI0XG4gICAgICpcbiAgICAgKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAgICAgKiAvLyA9PiBJbmZpbml0eVxuICAgICAqXG4gICAgICogXy50b051bWJlcignMy4yJyk7XG4gICAgICogLy8gPT4gMy4yXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gTkFOO1xuICAgICAgfVxuICAgICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSBiYXNlVHJpbSh2YWx1ZSk7XG4gICAgICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICAgICAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgICAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgcGxhaW4gb2JqZWN0IGZsYXR0ZW5pbmcgaW5oZXJpdGVkIGVudW1lcmFibGUgc3RyaW5nXG4gICAgICoga2V5ZWQgcHJvcGVydGllcyBvZiBgdmFsdWVgIHRvIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBwbGFpbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29udmVydGVkIHBsYWluIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy5hc3NpZ24oeyAnYSc6IDEgfSwgbmV3IEZvbyk7XG4gICAgICogLy8gPT4geyAnYSc6IDEsICdiJzogMiB9XG4gICAgICpcbiAgICAgKiBfLmFzc2lnbih7ICdhJzogMSB9LCBfLnRvUGxhaW5PYmplY3QobmV3IEZvbykpO1xuICAgICAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9QbGFpbk9iamVjdCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGNvcHlPYmplY3QodmFsdWUsIGtleXNJbih2YWx1ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzYWZlIGludGVnZXIuIEEgc2FmZSBpbnRlZ2VyIGNhbiBiZSBjb21wYXJlZCBhbmRcbiAgICAgKiByZXByZXNlbnRlZCBjb3JyZWN0bHkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIGludGVnZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udG9TYWZlSW50ZWdlcigzLjIpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIF8udG9TYWZlSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICpcbiAgICAgKiBfLnRvU2FmZUludGVnZXIoSW5maW5pdHkpO1xuICAgICAqIC8vID0+IDkwMDcxOTkyNTQ3NDA5OTFcbiAgICAgKlxuICAgICAqIF8udG9TYWZlSW50ZWdlcignMy4yJyk7XG4gICAgICogLy8gPT4gM1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvU2FmZUludGVnZXIodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgICAgICA/IGJhc2VDbGFtcCh0b0ludGVnZXIodmFsdWUpLCAtTUFYX1NBRkVfSU5URUdFUiwgTUFYX1NBRkVfSU5URUdFUilcbiAgICAgICAgOiAodmFsdWUgPT09IDAgPyB2YWx1ZSA6IDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG4gICAgICogYW5kIGB1bmRlZmluZWRgIHZhbHVlcy4gVGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY29udmVydGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50b1N0cmluZyhudWxsKTtcbiAgICAgKiAvLyA9PiAnJ1xuICAgICAqXG4gICAgICogXy50b1N0cmluZygtMCk7XG4gICAgICogLy8gPT4gJy0wJ1xuICAgICAqXG4gICAgICogXy50b1N0cmluZyhbMSwgMiwgM10pO1xuICAgICAqIC8vID0+ICcxLDIsMydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQXNzaWducyBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWQgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0cyB0byB0aGVcbiAgICAgKiBkZXN0aW5hdGlvbiBvYmplY3QuIFNvdXJjZSBvYmplY3RzIGFyZSBhcHBsaWVkIGZyb20gbGVmdCB0byByaWdodC5cbiAgICAgKiBTdWJzZXF1ZW50IHNvdXJjZXMgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHNvdXJjZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YCBhbmQgaXMgbG9vc2VseSBiYXNlZCBvblxuICAgICAqIFtgT2JqZWN0LmFzc2lnbmBdKGh0dHBzOi8vbWRuLmlvL09iamVjdC9hc3NpZ24pLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VzXSBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAc2VlIF8uYXNzaWduSW5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBCYXIoKSB7XG4gICAgICogICB0aGlzLmMgPSAzO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYiA9IDI7XG4gICAgICogQmFyLnByb3RvdHlwZS5kID0gNDtcbiAgICAgKlxuICAgICAqIF8uYXNzaWduKHsgJ2EnOiAwIH0sIG5ldyBGb28sIG5ldyBCYXIpO1xuICAgICAqIC8vID0+IHsgJ2EnOiAxLCAnYyc6IDMgfVxuICAgICAqL1xuICAgIHZhciBhc3NpZ24gPSBjcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3QsIHNvdXJjZSkge1xuICAgICAgaWYgKGlzUHJvdG90eXBlKHNvdXJjZSkgfHwgaXNBcnJheUxpa2Uoc291cmNlKSkge1xuICAgICAgICBjb3B5T2JqZWN0KHNvdXJjZSwga2V5cyhzb3VyY2UpLCBvYmplY3QpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIGFzc2lnblZhbHVlKG9iamVjdCwga2V5LCBzb3VyY2Vba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uYXNzaWduYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIG93biBhbmRcbiAgICAgKiBpbmhlcml0ZWQgc291cmNlIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBhbGlhcyBleHRlbmRcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQHNlZSBfLmFzc2lnblxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEJhcigpIHtcbiAgICAgKiAgIHRoaXMuYyA9IDM7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5iID0gMjtcbiAgICAgKiBCYXIucHJvdG90eXBlLmQgPSA0O1xuICAgICAqXG4gICAgICogXy5hc3NpZ25Jbih7ICdhJzogMCB9LCBuZXcgRm9vLCBuZXcgQmFyKTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMsICdkJzogNCB9XG4gICAgICovXG4gICAgdmFyIGFzc2lnbkluID0gY3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2UpIHtcbiAgICAgIGNvcHlPYmplY3Qoc291cmNlLCBrZXlzSW4oc291cmNlKSwgb2JqZWN0KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uYXNzaWduSW5gIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYGN1c3RvbWl6ZXJgXG4gICAgICogd2hpY2ggaXMgaW52b2tlZCB0byBwcm9kdWNlIHRoZSBhc3NpZ25lZCB2YWx1ZXMuIElmIGBjdXN0b21pemVyYCByZXR1cm5zXG4gICAgICogYHVuZGVmaW5lZGAsIGFzc2lnbm1lbnQgaXMgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmBcbiAgICAgKiBpcyBpbnZva2VkIHdpdGggZml2ZSBhcmd1bWVudHM6IChvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAYWxpYXMgZXh0ZW5kV2l0aFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IHNvdXJjZXMgVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBzZWUgXy5hc3NpZ25XaXRoXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlKSB7XG4gICAgICogICByZXR1cm4gXy5pc1VuZGVmaW5lZChvYmpWYWx1ZSkgPyBzcmNWYWx1ZSA6IG9ialZhbHVlO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciBkZWZhdWx0cyA9IF8ucGFydGlhbFJpZ2h0KF8uYXNzaWduSW5XaXRoLCBjdXN0b21pemVyKTtcbiAgICAgKlxuICAgICAqIGRlZmF1bHRzKHsgJ2EnOiAxIH0sIHsgJ2InOiAyIH0sIHsgJ2EnOiAzIH0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIgfVxuICAgICAqL1xuICAgIHZhciBhc3NpZ25JbldpdGggPSBjcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3QsIHNvdXJjZSwgc3JjSW5kZXgsIGN1c3RvbWl6ZXIpIHtcbiAgICAgIGNvcHlPYmplY3Qoc291cmNlLCBrZXlzSW4oc291cmNlKSwgb2JqZWN0LCBjdXN0b21pemVyKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uYXNzaWduYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBjdXN0b21pemVyYFxuICAgICAqIHdoaWNoIGlzIGludm9rZWQgdG8gcHJvZHVjZSB0aGUgYXNzaWduZWQgdmFsdWVzLiBJZiBgY3VzdG9taXplcmAgcmV0dXJuc1xuICAgICAqIGB1bmRlZmluZWRgLCBhc3NpZ25tZW50IGlzIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgYGN1c3RvbWl6ZXJgXG4gICAgICogaXMgaW52b2tlZCB3aXRoIGZpdmUgYXJndW1lbnRzOiAob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gc291cmNlcyBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQHNlZSBfLmFzc2lnbkluV2l0aFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBjdXN0b21pemVyKG9ialZhbHVlLCBzcmNWYWx1ZSkge1xuICAgICAqICAgcmV0dXJuIF8uaXNVbmRlZmluZWQob2JqVmFsdWUpID8gc3JjVmFsdWUgOiBvYmpWYWx1ZTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgZGVmYXVsdHMgPSBfLnBhcnRpYWxSaWdodChfLmFzc2lnbldpdGgsIGN1c3RvbWl6ZXIpO1xuICAgICAqXG4gICAgICogZGVmYXVsdHMoeyAnYSc6IDEgfSwgeyAnYic6IDIgfSwgeyAnYSc6IDMgfSk7XG4gICAgICogLy8gPT4geyAnYSc6IDEsICdiJzogMiB9XG4gICAgICovXG4gICAgdmFyIGFzc2lnbldpdGggPSBjcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3QsIHNvdXJjZSwgc3JjSW5kZXgsIGN1c3RvbWl6ZXIpIHtcbiAgICAgIGNvcHlPYmplY3Qoc291cmNlLCBrZXlzKHNvdXJjZSksIG9iamVjdCwgY3VzdG9taXplcik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvIGBwYXRoc2Agb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0gey4uLihzdHJpbmd8c3RyaW5nW10pfSBbcGF0aHNdIFRoZSBwcm9wZXJ0eSBwYXRocyB0byBwaWNrLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcGlja2VkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfSwgNF0gfTtcbiAgICAgKlxuICAgICAqIF8uYXQob2JqZWN0LCBbJ2FbMF0uYi5jJywgJ2FbMV0nXSk7XG4gICAgICogLy8gPT4gWzMsIDRdXG4gICAgICovXG4gICAgdmFyIGF0ID0gZmxhdFJlc3QoYmFzZUF0KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgYHByb3RvdHlwZWAgb2JqZWN0LiBJZiBhXG4gICAgICogYHByb3BlcnRpZXNgIG9iamVjdCBpcyBnaXZlbiwgaXRzIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzXG4gICAgICogYXJlIGFzc2lnbmVkIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAyLjMuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc10gVGhlIHByb3BlcnRpZXMgdG8gYXNzaWduIHRvIHRoZSBvYmplY3QuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gU2hhcGUoKSB7XG4gICAgICogICB0aGlzLnggPSAwO1xuICAgICAqICAgdGhpcy55ID0gMDtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBDaXJjbGUoKSB7XG4gICAgICogICBTaGFwZS5jYWxsKHRoaXMpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIENpcmNsZS5wcm90b3R5cGUgPSBfLmNyZWF0ZShTaGFwZS5wcm90b3R5cGUsIHtcbiAgICAgKiAgICdjb25zdHJ1Y3Rvcic6IENpcmNsZVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogdmFyIGNpcmNsZSA9IG5ldyBDaXJjbGU7XG4gICAgICogY2lyY2xlIGluc3RhbmNlb2YgQ2lyY2xlO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIGNpcmNsZSBpbnN0YW5jZW9mIFNoYXBlO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUocHJvdG90eXBlLCBwcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgICAgcmV0dXJuIHByb3BlcnRpZXMgPT0gbnVsbCA/IHJlc3VsdCA6IGJhc2VBc3NpZ24ocmVzdWx0LCBwcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgc3RyaW5nIGtleWVkIHByb3BlcnRpZXMgb2Ygc291cmNlXG4gICAgICogb2JqZWN0cyB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0IGZvciBhbGwgZGVzdGluYXRpb24gcHJvcGVydGllcyB0aGF0XG4gICAgICogcmVzb2x2ZSB0byBgdW5kZWZpbmVkYC4gU291cmNlIG9iamVjdHMgYXJlIGFwcGxpZWQgZnJvbSBsZWZ0IHRvIHJpZ2h0LlxuICAgICAqIE9uY2UgYSBwcm9wZXJ0eSBpcyBzZXQsIGFkZGl0aW9uYWwgdmFsdWVzIG9mIHRoZSBzYW1lIHByb3BlcnR5IGFyZSBpZ25vcmVkLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQHNlZSBfLmRlZmF1bHRzRGVlcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlZmF1bHRzKHsgJ2EnOiAxIH0sIHsgJ2InOiAyIH0sIHsgJ2EnOiAzIH0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIgfVxuICAgICAqL1xuICAgIHZhciBkZWZhdWx0cyA9IGJhc2VSZXN0KGZ1bmN0aW9uKG9iamVjdCwgc291cmNlcykge1xuICAgICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgdmFyIGxlbmd0aCA9IHNvdXJjZXMubGVuZ3RoO1xuICAgICAgdmFyIGd1YXJkID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbMl0gOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChzb3VyY2VzWzBdLCBzb3VyY2VzWzFdLCBndWFyZCkpIHtcbiAgICAgICAgbGVuZ3RoID0gMTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaW5kZXhdO1xuICAgICAgICB2YXIgcHJvcHMgPSBrZXlzSW4oc291cmNlKTtcbiAgICAgICAgdmFyIHByb3BzSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIHByb3BzTGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgICAgIHdoaWxlICgrK3Byb3BzSW5kZXggPCBwcm9wc0xlbmd0aCkge1xuICAgICAgICAgIHZhciBrZXkgPSBwcm9wc1twcm9wc0luZGV4XTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XTtcblxuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgIChlcSh2YWx1ZSwgb2JqZWN0UHJvdG9ba2V5XSkgJiYgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSkge1xuICAgICAgICAgICAgb2JqZWN0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZGVmYXVsdHNgIGV4Y2VwdCB0aGF0IGl0IHJlY3Vyc2l2ZWx5IGFzc2lnbnNcbiAgICAgKiBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQHNlZSBfLmRlZmF1bHRzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVmYXVsdHNEZWVwKHsgJ2EnOiB7ICdiJzogMiB9IH0sIHsgJ2EnOiB7ICdiJzogMSwgJ2MnOiAzIH0gfSk7XG4gICAgICogLy8gPT4geyAnYSc6IHsgJ2InOiAyLCAnYyc6IDMgfSB9XG4gICAgICovXG4gICAgdmFyIGRlZmF1bHRzRGVlcCA9IGJhc2VSZXN0KGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgIGFyZ3MucHVzaCh1bmRlZmluZWQsIGN1c3RvbURlZmF1bHRzTWVyZ2UpO1xuICAgICAgcmV0dXJuIGFwcGx5KG1lcmdlV2l0aCwgdW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUga2V5IG9mIHRoZSBmaXJzdFxuICAgICAqIGVsZW1lbnQgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDEuMS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUga2V5IG9mIHRoZSBtYXRjaGVkIGVsZW1lbnQsXG4gICAgICogIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IHtcbiAgICAgKiAgICdiYXJuZXknOiAgeyAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICAnZnJlZCc6ICAgIHsgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgICdwZWJibGVzJzogeyAnYWdlJzogMSwgICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5maW5kS2V5KHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiBvLmFnZSA8IDQwOyB9KTtcbiAgICAgKiAvLyA9PiAnYmFybmV5JyAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbmRLZXkodXNlcnMsIHsgJ2FnZSc6IDEsICdhY3RpdmUnOiB0cnVlIH0pO1xuICAgICAqIC8vID0+ICdwZWJibGVzJ1xuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZmluZEtleSh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICAgICAqIC8vID0+ICdmcmVkJ1xuICAgICAqXG4gICAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5maW5kS2V5KHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gJ2Jhcm5leSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kS2V5KG9iamVjdCwgcHJlZGljYXRlKSB7XG4gICAgICByZXR1cm4gYmFzZUZpbmRLZXkob2JqZWN0LCBnZXRJdGVyYXRlZShwcmVkaWNhdGUsIDMpLCBiYXNlRm9yT3duKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRLZXlgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2ZcbiAgICAgKiBhIGNvbGxlY3Rpb24gaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDIuMC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUga2V5IG9mIHRoZSBtYXRjaGVkIGVsZW1lbnQsXG4gICAgICogIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IHtcbiAgICAgKiAgICdiYXJuZXknOiAgeyAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICAnZnJlZCc6ICAgIHsgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgICdwZWJibGVzJzogeyAnYWdlJzogMSwgICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5maW5kTGFzdEtleSh1c2VycywgZnVuY3Rpb24obykgeyByZXR1cm4gby5hZ2UgPCA0MDsgfSk7XG4gICAgICogLy8gPT4gcmV0dXJucyAncGViYmxlcycgYXNzdW1pbmcgYF8uZmluZEtleWAgcmV0dXJucyAnYmFybmV5J1xuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbmRMYXN0S2V5KHVzZXJzLCB7ICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSk7XG4gICAgICogLy8gPT4gJ2Jhcm5leSdcbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbmRMYXN0S2V5KHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG4gICAgICogLy8gPT4gJ2ZyZWQnXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLmZpbmRMYXN0S2V5KHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gJ3BlYmJsZXMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluZExhc3RLZXkob2JqZWN0LCBwcmVkaWNhdGUpIHtcbiAgICAgIHJldHVybiBiYXNlRmluZEtleShvYmplY3QsIGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwgMyksIGJhc2VGb3JPd25SaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzIG9mIGFuXG4gICAgICogb2JqZWN0IGFuZCBpbnZva2VzIGBpdGVyYXRlZWAgZm9yIGVhY2ggcHJvcGVydHkuIFRoZSBpdGVyYXRlZSBpcyBpbnZva2VkXG4gICAgICogd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwga2V5LCBvYmplY3QpLiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXRcbiAgICAgKiBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQHNlZSBfLmZvckluUmlnaHRcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8uZm9ySW4obmV3IEZvbywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBMb2dzICdhJywgJ2InLCB0aGVuICdjJyAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JJbihvYmplY3QsIGl0ZXJhdGVlKSB7XG4gICAgICByZXR1cm4gb2JqZWN0ID09IG51bGxcbiAgICAgICAgPyBvYmplY3RcbiAgICAgICAgOiBiYXNlRm9yKG9iamVjdCwgZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsIDMpLCBrZXlzSW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZm9ySW5gIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgcHJvcGVydGllcyBvZlxuICAgICAqIGBvYmplY3RgIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAyLjAuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQHNlZSBfLmZvckluXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmZvckluUmlnaHQobmV3IEZvbywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBMb2dzICdjJywgJ2InLCB0aGVuICdhJyBhc3N1bWluZyBgXy5mb3JJbmAgbG9ncyAnYScsICdiJywgdGhlbiAnYycuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9ySW5SaWdodChvYmplY3QsIGl0ZXJhdGVlKSB7XG4gICAgICByZXR1cm4gb2JqZWN0ID09IG51bGxcbiAgICAgICAgPyBvYmplY3RcbiAgICAgICAgOiBiYXNlRm9yUmlnaHQob2JqZWN0LCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgMyksIGtleXNJbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWQgcHJvcGVydGllcyBvZiBhbiBvYmplY3QgYW5kXG4gICAgICogaW52b2tlcyBgaXRlcmF0ZWVgIGZvciBlYWNoIHByb3BlcnR5LiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOiAodmFsdWUsIGtleSwgb2JqZWN0KS4gSXRlcmF0ZWUgZnVuY3Rpb25zIG1heSBleGl0IGl0ZXJhdGlvblxuICAgICAqIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBzZWUgXy5mb3JPd25SaWdodFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy5mb3JPd24obmV3IEZvbywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBMb2dzICdhJyB0aGVuICdiJyAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JPd24ob2JqZWN0LCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIG9iamVjdCAmJiBiYXNlRm9yT3duKG9iamVjdCwgZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsIDMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZvck93bmAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBwcm9wZXJ0aWVzIG9mXG4gICAgICogYG9iamVjdGAgaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDIuMC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAc2VlIF8uZm9yT3duXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmZvck93blJpZ2h0KG5ldyBGb28sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gTG9ncyAnYicgdGhlbiAnYScgYXNzdW1pbmcgYF8uZm9yT3duYCBsb2dzICdhJyB0aGVuICdiJy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JPd25SaWdodChvYmplY3QsIGl0ZXJhdGVlKSB7XG4gICAgICByZXR1cm4gb2JqZWN0ICYmIGJhc2VGb3JPd25SaWdodChvYmplY3QsIGdldEl0ZXJhdGVlKGl0ZXJhdGVlLCAzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBmdW5jdGlvbiBwcm9wZXJ0eSBuYW1lcyBmcm9tIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXNcbiAgICAgKiBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGZ1bmN0aW9uIG5hbWVzLlxuICAgICAqIEBzZWUgXy5mdW5jdGlvbnNJblxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSBfLmNvbnN0YW50KCdhJyk7XG4gICAgICogICB0aGlzLmIgPSBfLmNvbnN0YW50KCdiJyk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gXy5jb25zdGFudCgnYycpO1xuICAgICAqXG4gICAgICogXy5mdW5jdGlvbnMobmV3IEZvbyk7XG4gICAgICogLy8gPT4gWydhJywgJ2InXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZ1bmN0aW9ucyhvYmplY3QpIHtcbiAgICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IFtdIDogYmFzZUZ1bmN0aW9ucyhvYmplY3QsIGtleXMob2JqZWN0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBmdW5jdGlvbiBwcm9wZXJ0eSBuYW1lcyBmcm9tIG93biBhbmQgaW5oZXJpdGVkXG4gICAgICogZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgZnVuY3Rpb24gbmFtZXMuXG4gICAgICogQHNlZSBfLmZ1bmN0aW9uc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSBfLmNvbnN0YW50KCdhJyk7XG4gICAgICogICB0aGlzLmIgPSBfLmNvbnN0YW50KCdiJyk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gXy5jb25zdGFudCgnYycpO1xuICAgICAqXG4gICAgICogXy5mdW5jdGlvbnNJbihuZXcgRm9vKTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYicsICdjJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmdW5jdGlvbnNJbihvYmplY3QpIHtcbiAgICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IFtdIDogYmFzZUZ1bmN0aW9ucyhvYmplY3QsIGtleXNJbihvYmplY3QpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB2YWx1ZSBhdCBgcGF0aGAgb2YgYG9iamVjdGAuIElmIHRoZSByZXNvbHZlZCB2YWx1ZSBpc1xuICAgICAqIGB1bmRlZmluZWRgLCB0aGUgYGRlZmF1bHRWYWx1ZWAgaXMgcmV0dXJuZWQgaW4gaXRzIHBsYWNlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuNy4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGZvciBgdW5kZWZpbmVkYCByZXNvbHZlZCB2YWx1ZXMuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuICAgICAqXG4gICAgICogXy5nZXQob2JqZWN0LCAnYVswXS5iLmMnKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLmdldChvYmplY3QsIFsnYScsICcwJywgJ2InLCAnYyddKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLmdldChvYmplY3QsICdhLmIuYycsICdkZWZhdWx0Jyk7XG4gICAgICogLy8gPT4gJ2RlZmF1bHQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0KG9iamVjdCwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG4gICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBwYXRoYCBpcyBhIGRpcmVjdCBwcm9wZXJ0eSBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiB7ICdiJzogMiB9IH07XG4gICAgICogdmFyIG90aGVyID0gXy5jcmVhdGUoeyAnYSc6IF8uY3JlYXRlKHsgJ2InOiAyIH0pIH0pO1xuICAgICAqXG4gICAgICogXy5oYXMob2JqZWN0LCAnYScpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaGFzKG9iamVjdCwgJ2EuYicpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaGFzKG9iamVjdCwgWydhJywgJ2InXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5oYXMob3RoZXIsICdhJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYXMob2JqZWN0LCBwYXRoKSB7XG4gICAgICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYgaGFzUGF0aChvYmplY3QsIHBhdGgsIGJhc2VIYXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgcGF0aGAgaXMgYSBkaXJlY3Qgb3IgaW5oZXJpdGVkIHByb3BlcnR5IG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHBhdGhgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0gXy5jcmVhdGUoeyAnYSc6IF8uY3JlYXRlKHsgJ2InOiAyIH0pIH0pO1xuICAgICAqXG4gICAgICogXy5oYXNJbihvYmplY3QsICdhJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5oYXNJbihvYmplY3QsICdhLmInKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmhhc0luKG9iamVjdCwgWydhJywgJ2InXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5oYXNJbihvYmplY3QsICdiJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYXNJbihvYmplY3QsIHBhdGgpIHtcbiAgICAgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBoYXNQYXRoKG9iamVjdCwgcGF0aCwgYmFzZUhhc0luKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgaW52ZXJ0ZWQga2V5cyBhbmQgdmFsdWVzIG9mIGBvYmplY3RgLlxuICAgICAqIElmIGBvYmplY3RgIGNvbnRhaW5zIGR1cGxpY2F0ZSB2YWx1ZXMsIHN1YnNlcXVlbnQgdmFsdWVzIG92ZXJ3cml0ZVxuICAgICAqIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjcuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW52ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBpbnZlcnRlZCBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDEgfTtcbiAgICAgKlxuICAgICAqIF8uaW52ZXJ0KG9iamVjdCk7XG4gICAgICogLy8gPT4geyAnMSc6ICdjJywgJzInOiAnYicgfVxuICAgICAqL1xuICAgIHZhciBpbnZlcnQgPSBjcmVhdGVJbnZlcnRlcihmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsdWUgPSBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0W3ZhbHVlXSA9IGtleTtcbiAgICB9LCBjb25zdGFudChpZGVudGl0eSkpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pbnZlcnRgIGV4Y2VwdCB0aGF0IHRoZSBpbnZlcnRlZCBvYmplY3QgaXMgZ2VuZXJhdGVkXG4gICAgICogZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nIGVhY2ggZWxlbWVudCBvZiBgb2JqZWN0YCB0aHJ1IGBpdGVyYXRlZWAuIFRoZVxuICAgICAqIGNvcnJlc3BvbmRpbmcgaW52ZXJ0ZWQgdmFsdWUgb2YgZWFjaCBpbnZlcnRlZCBrZXkgaXMgYW4gYXJyYXkgb2Yga2V5c1xuICAgICAqIHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIHRoZSBpbnZlcnRlZCB2YWx1ZS4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWRcbiAgICAgKiB3aXRoIG9uZSBhcmd1bWVudDogKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW52ZXJ0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgaW52ZXJ0ZWQgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEsICdiJzogMiwgJ2MnOiAxIH07XG4gICAgICpcbiAgICAgKiBfLmludmVydEJ5KG9iamVjdCk7XG4gICAgICogLy8gPT4geyAnMSc6IFsnYScsICdjJ10sICcyJzogWydiJ10gfVxuICAgICAqXG4gICAgICogXy5pbnZlcnRCeShvYmplY3QsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICByZXR1cm4gJ2dyb3VwJyArIHZhbHVlO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ2dyb3VwMSc6IFsnYScsICdjJ10sICdncm91cDInOiBbJ2InXSB9XG4gICAgICovXG4gICAgdmFyIGludmVydEJ5ID0gY3JlYXRlSW52ZXJ0ZXIoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiB2YWx1ZS50b1N0cmluZyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhbHVlID0gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwgdmFsdWUpKSB7XG4gICAgICAgIHJlc3VsdFt2YWx1ZV0ucHVzaChrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W3ZhbHVlXSA9IFtrZXldO1xuICAgICAgfVxuICAgIH0sIGdldEl0ZXJhdGVlKTtcblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIG1ldGhvZCBhdCBgcGF0aGAgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBtZXRob2QgdG8gaW52b2tlLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIHRoZSBtZXRob2Qgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiBbMSwgMiwgMywgNF0gfSB9XSB9O1xuICAgICAqXG4gICAgICogXy5pbnZva2Uob2JqZWN0LCAnYVswXS5iLmMuc2xpY2UnLCAxLCAzKTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKi9cbiAgICB2YXIgaW52b2tlID0gYmFzZVJlc3QoYmFzZUludm9rZSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gICAgICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5rZXlzKVxuICAgICAqIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmtleXMobmV3IEZvbyk7XG4gICAgICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqXG4gICAgICogXy5rZXlzKCdoaScpO1xuICAgICAqIC8vID0+IFsnMCcsICcxJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuICAgICAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iamVjdCkgPyBhcnJheUxpa2VLZXlzKG9iamVjdCkgOiBiYXNlS2V5cyhvYmplY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8ua2V5c0luKG5ldyBGb28pO1xuICAgICAqIC8vID0+IFsnYScsICdiJywgJ2MnXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGtleXNJbihvYmplY3QpIHtcbiAgICAgIHJldHVybiBpc0FycmF5TGlrZShvYmplY3QpID8gYXJyYXlMaWtlS2V5cyhvYmplY3QsIHRydWUpIDogYmFzZUtleXNJbihvYmplY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5tYXBWYWx1ZXNgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGFuIG9iamVjdCB3aXRoIHRoZVxuICAgICAqIHNhbWUgdmFsdWVzIGFzIGBvYmplY3RgIGFuZCBrZXlzIGdlbmVyYXRlZCBieSBydW5uaW5nIGVhY2ggb3duIGVudW1lcmFibGVcbiAgICAgKiBzdHJpbmcga2V5ZWQgcHJvcGVydHkgb2YgYG9iamVjdGAgdGhydSBgaXRlcmF0ZWVgLiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZFxuICAgICAqIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGtleSwgb2JqZWN0KS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjguMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgb2JqZWN0LlxuICAgICAqIEBzZWUgXy5tYXBWYWx1ZXNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXBLZXlzKHsgJ2EnOiAxLCAnYic6IDIgfSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgcmV0dXJuIGtleSArIHZhbHVlO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ2ExJzogMSwgJ2IyJzogMiB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwS2V5cyhvYmplY3QsIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICBpdGVyYXRlZSA9IGdldEl0ZXJhdGVlKGl0ZXJhdGVlLCAzKTtcblxuICAgICAgYmFzZUZvck93bihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgICBiYXNlQXNzaWduVmFsdWUocmVzdWx0LCBpdGVyYXRlZSh2YWx1ZSwga2V5LCBvYmplY3QpLCB2YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBrZXlzIGFzIGBvYmplY3RgIGFuZCB2YWx1ZXMgZ2VuZXJhdGVkXG4gICAgICogYnkgcnVubmluZyBlYWNoIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0eSBvZiBgb2JqZWN0YCB0aHJ1XG4gICAgICogYGl0ZXJhdGVlYC4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gICAgICogKHZhbHVlLCBrZXksIG9iamVjdCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMi40LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIG9iamVjdC5cbiAgICAgKiBAc2VlIF8ubWFwS2V5c1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSB7XG4gICAgICogICAnZnJlZCc6ICAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhZ2UnOiA0MCB9LFxuICAgICAqICAgJ3BlYmJsZXMnOiB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8ubWFwVmFsdWVzKHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiBvLmFnZTsgfSk7XG4gICAgICogLy8gPT4geyAnZnJlZCc6IDQwLCAncGViYmxlcyc6IDEgfSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5tYXBWYWx1ZXModXNlcnMsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB7ICdmcmVkJzogNDAsICdwZWJibGVzJzogMSB9IChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwVmFsdWVzKG9iamVjdCwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIGl0ZXJhdGVlID0gZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsIDMpO1xuXG4gICAgICBiYXNlRm9yT3duKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgIGJhc2VBc3NpZ25WYWx1ZShyZXN1bHQsIGtleSwgaXRlcmF0ZWUodmFsdWUsIGtleSwgb2JqZWN0KSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5hc3NpZ25gIGV4Y2VwdCB0aGF0IGl0IHJlY3Vyc2l2ZWx5IG1lcmdlcyBvd24gYW5kXG4gICAgICogaW5oZXJpdGVkIGVudW1lcmFibGUgc3RyaW5nIGtleWVkIHByb3BlcnRpZXMgb2Ygc291cmNlIG9iamVjdHMgaW50byB0aGVcbiAgICAgKiBkZXN0aW5hdGlvbiBvYmplY3QuIFNvdXJjZSBwcm9wZXJ0aWVzIHRoYXQgcmVzb2x2ZSB0byBgdW5kZWZpbmVkYCBhcmVcbiAgICAgKiBza2lwcGVkIGlmIGEgZGVzdGluYXRpb24gdmFsdWUgZXhpc3RzLiBBcnJheSBhbmQgcGxhaW4gb2JqZWN0IHByb3BlcnRpZXNcbiAgICAgKiBhcmUgbWVyZ2VkIHJlY3Vyc2l2ZWx5LiBPdGhlciBvYmplY3RzIGFuZCB2YWx1ZSB0eXBlcyBhcmUgb3ZlcnJpZGRlbiBieVxuICAgICAqIGFzc2lnbm1lbnQuIFNvdXJjZSBvYmplY3RzIGFyZSBhcHBsaWVkIGZyb20gbGVmdCB0byByaWdodC4gU3Vic2VxdWVudFxuICAgICAqIHNvdXJjZXMgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHNvdXJjZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjUuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VzXSBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHtcbiAgICAgKiAgICdhJzogW3sgJ2InOiAyIH0sIHsgJ2QnOiA0IH1dXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBvdGhlciA9IHtcbiAgICAgKiAgICdhJzogW3sgJ2MnOiAzIH0sIHsgJ2UnOiA1IH1dXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8ubWVyZ2Uob2JqZWN0LCBvdGhlcik7XG4gICAgICogLy8gPT4geyAnYSc6IFt7ICdiJzogMiwgJ2MnOiAzIH0sIHsgJ2QnOiA0LCAnZSc6IDUgfV0gfVxuICAgICAqL1xuICAgIHZhciBtZXJnZSA9IGNyZWF0ZUFzc2lnbmVyKGZ1bmN0aW9uKG9iamVjdCwgc291cmNlLCBzcmNJbmRleCkge1xuICAgICAgYmFzZU1lcmdlKG9iamVjdCwgc291cmNlLCBzcmNJbmRleCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLm1lcmdlYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBjdXN0b21pemVyYCB3aGljaFxuICAgICAqIGlzIGludm9rZWQgdG8gcHJvZHVjZSB0aGUgbWVyZ2VkIHZhbHVlcyBvZiB0aGUgZGVzdGluYXRpb24gYW5kIHNvdXJjZVxuICAgICAqIHByb3BlcnRpZXMuIElmIGBjdXN0b21pemVyYCByZXR1cm5zIGB1bmRlZmluZWRgLCBtZXJnaW5nIGlzIGhhbmRsZWQgYnkgdGhlXG4gICAgICogbWV0aG9kIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmAgaXMgaW52b2tlZCB3aXRoIHNpeCBhcmd1bWVudHM6XG4gICAgICogKG9ialZhbHVlLCBzcmNWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSwgc3RhY2spLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBzb3VyY2VzIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlKSB7XG4gICAgICogICBpZiAoXy5pc0FycmF5KG9ialZhbHVlKSkge1xuICAgICAqICAgICByZXR1cm4gb2JqVmFsdWUuY29uY2F0KHNyY1ZhbHVlKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IFsxXSwgJ2InOiBbMl0gfTtcbiAgICAgKiB2YXIgb3RoZXIgPSB7ICdhJzogWzNdLCAnYic6IFs0XSB9O1xuICAgICAqXG4gICAgICogXy5tZXJnZVdpdGgob2JqZWN0LCBvdGhlciwgY3VzdG9taXplcik7XG4gICAgICogLy8gPT4geyAnYSc6IFsxLCAzXSwgJ2InOiBbMiwgNF0gfVxuICAgICAqL1xuICAgIHZhciBtZXJnZVdpdGggPSBjcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3QsIHNvdXJjZSwgc3JjSW5kZXgsIGN1c3RvbWl6ZXIpIHtcbiAgICAgIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZSwgc3JjSW5kZXgsIGN1c3RvbWl6ZXIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLnBpY2tgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGVcbiAgICAgKiBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnR5IHBhdGhzIG9mIGBvYmplY3RgIHRoYXQgYXJlIG5vdCBvbWl0dGVkLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGNvbnNpZGVyYWJseSBzbG93ZXIgdGhhbiBgXy5waWNrYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uKHN0cmluZ3xzdHJpbmdbXSl9IFtwYXRoc10gVGhlIHByb3BlcnR5IHBhdGhzIHRvIG9taXQuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6ICcyJywgJ2MnOiAzIH07XG4gICAgICpcbiAgICAgKiBfLm9taXQob2JqZWN0LCBbJ2EnLCAnYyddKTtcbiAgICAgKiAvLyA9PiB7ICdiJzogJzInIH1cbiAgICAgKi9cbiAgICB2YXIgb21pdCA9IGZsYXRSZXN0KGZ1bmN0aW9uKG9iamVjdCwgcGF0aHMpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgdmFyIGlzRGVlcCA9IGZhbHNlO1xuICAgICAgcGF0aHMgPSBhcnJheU1hcChwYXRocywgZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICBwYXRoID0gY2FzdFBhdGgocGF0aCwgb2JqZWN0KTtcbiAgICAgICAgaXNEZWVwIHx8IChpc0RlZXAgPSBwYXRoLmxlbmd0aCA+IDEpO1xuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgIH0pO1xuICAgICAgY29weU9iamVjdChvYmplY3QsIGdldEFsbEtleXNJbihvYmplY3QpLCByZXN1bHQpO1xuICAgICAgaWYgKGlzRGVlcCkge1xuICAgICAgICByZXN1bHQgPSBiYXNlQ2xvbmUocmVzdWx0LCBDTE9ORV9ERUVQX0ZMQUcgfCBDTE9ORV9GTEFUX0ZMQUcgfCBDTE9ORV9TWU1CT0xTX0ZMQUcsIGN1c3RvbU9taXRDbG9uZSk7XG4gICAgICB9XG4gICAgICB2YXIgbGVuZ3RoID0gcGF0aHMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGJhc2VVbnNldChyZXN1bHQsIHBhdGhzW2xlbmd0aF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5waWNrQnlgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZlxuICAgICAqIHRoZSBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzIG9mIGBvYmplY3RgIHRoYXRcbiAgICAgKiBgcHJlZGljYXRlYCBkb2Vzbid0IHJldHVybiB0cnV0aHkgZm9yLiBUaGUgcHJlZGljYXRlIGlzIGludm9rZWQgd2l0aCB0d29cbiAgICAgKiBhcmd1bWVudHM6ICh2YWx1ZSwga2V5KS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIHByb3BlcnR5LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAnMicsICdjJzogMyB9O1xuICAgICAqXG4gICAgICogXy5vbWl0Qnkob2JqZWN0LCBfLmlzTnVtYmVyKTtcbiAgICAgKiAvLyA9PiB7ICdiJzogJzInIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbWl0Qnkob2JqZWN0LCBwcmVkaWNhdGUpIHtcbiAgICAgIHJldHVybiBwaWNrQnkob2JqZWN0LCBuZWdhdGUoZ2V0SXRlcmF0ZWUocHJlZGljYXRlKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBwaWNrZWQgYG9iamVjdGAgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uKHN0cmluZ3xzdHJpbmdbXSl9IFtwYXRoc10gVGhlIHByb3BlcnR5IHBhdGhzIHRvIHBpY2suXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6ICcyJywgJ2MnOiAzIH07XG4gICAgICpcbiAgICAgKiBfLnBpY2sob2JqZWN0LCBbJ2EnLCAnYyddKTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMSwgJ2MnOiAzIH1cbiAgICAgKi9cbiAgICB2YXIgcGljayA9IGZsYXRSZXN0KGZ1bmN0aW9uKG9iamVjdCwgcGF0aHMpIHtcbiAgICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHt9IDogYmFzZVBpY2sob2JqZWN0LCBwYXRocyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgYG9iamVjdGAgcHJvcGVydGllcyBgcHJlZGljYXRlYCByZXR1cm5zXG4gICAgICogdHJ1dGh5IGZvci4gVGhlIHByZWRpY2F0ZSBpcyBpbnZva2VkIHdpdGggdHdvIGFyZ3VtZW50czogKHZhbHVlLCBrZXkpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgcHJvcGVydHkuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6ICcyJywgJ2MnOiAzIH07XG4gICAgICpcbiAgICAgKiBfLnBpY2tCeShvYmplY3QsIF8uaXNOdW1iZXIpO1xuICAgICAqIC8vID0+IHsgJ2EnOiAxLCAnYyc6IDMgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBpY2tCeShvYmplY3QsIHByZWRpY2F0ZSkge1xuICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cbiAgICAgIHZhciBwcm9wcyA9IGFycmF5TWFwKGdldEFsbEtleXNJbihvYmplY3QpLCBmdW5jdGlvbihwcm9wKSB7XG4gICAgICAgIHJldHVybiBbcHJvcF07XG4gICAgICB9KTtcbiAgICAgIHByZWRpY2F0ZSA9IGdldEl0ZXJhdGVlKHByZWRpY2F0ZSk7XG4gICAgICByZXR1cm4gYmFzZVBpY2tCeShvYmplY3QsIHByb3BzLCBmdW5jdGlvbih2YWx1ZSwgcGF0aCkge1xuICAgICAgICByZXR1cm4gcHJlZGljYXRlKHZhbHVlLCBwYXRoWzBdKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZ2V0YCBleGNlcHQgdGhhdCBpZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXMgYVxuICAgICAqIGZ1bmN0aW9uIGl0J3MgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBpdHMgcGFyZW50IG9iamVjdCBhbmRcbiAgICAgKiBpdHMgcmVzdWx0IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gcmVzb2x2ZS5cbiAgICAgKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSByZXR1cm5lZCBmb3IgYHVuZGVmaW5lZGAgcmVzb2x2ZWQgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MxJzogMywgJ2MyJzogXy5jb25zdGFudCg0KSB9IH1dIH07XG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChvYmplY3QsICdhWzBdLmIuYzEnKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChvYmplY3QsICdhWzBdLmIuYzInKTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChvYmplY3QsICdhWzBdLmIuYzMnLCAnZGVmYXVsdCcpO1xuICAgICAqIC8vID0+ICdkZWZhdWx0J1xuICAgICAqXG4gICAgICogXy5yZXN1bHQob2JqZWN0LCAnYVswXS5iLmMzJywgXy5jb25zdGFudCgnZGVmYXVsdCcpKTtcbiAgICAgKiAvLyA9PiAnZGVmYXVsdCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXN1bHQob2JqZWN0LCBwYXRoLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHBhdGggPSBjYXN0UGF0aChwYXRoLCBvYmplY3QpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICAgICAgLy8gRW5zdXJlIHRoZSBsb29wIGlzIGVudGVyZWQgd2hlbiBwYXRoIGlzIGVtcHR5LlxuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgbGVuZ3RoID0gMTtcbiAgICAgICAgb2JqZWN0ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3RbdG9LZXkocGF0aFtpbmRleF0pXTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpbmRleCA9IGxlbmd0aDtcbiAgICAgICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBvYmplY3QgPSBpc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlLmNhbGwob2JqZWN0KSA6IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB2YWx1ZSBhdCBgcGF0aGAgb2YgYG9iamVjdGAuIElmIGEgcG9ydGlvbiBvZiBgcGF0aGAgZG9lc24ndCBleGlzdCxcbiAgICAgKiBpdCdzIGNyZWF0ZWQuIEFycmF5cyBhcmUgY3JlYXRlZCBmb3IgbWlzc2luZyBpbmRleCBwcm9wZXJ0aWVzIHdoaWxlIG9iamVjdHNcbiAgICAgKiBhcmUgY3JlYXRlZCBmb3IgYWxsIG90aGVyIG1pc3NpbmcgcHJvcGVydGllcy4gVXNlIGBfLnNldFdpdGhgIHRvIGN1c3RvbWl6ZVxuICAgICAqIGBwYXRoYCBjcmVhdGlvbi5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuNy4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHNldC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcbiAgICAgKlxuICAgICAqIF8uc2V0KG9iamVjdCwgJ2FbMF0uYi5jJywgNCk7XG4gICAgICogY29uc29sZS5sb2cob2JqZWN0LmFbMF0uYi5jKTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICpcbiAgICAgKiBfLnNldChvYmplY3QsIFsneCcsICcwJywgJ3knLCAneiddLCA1KTtcbiAgICAgKiBjb25zb2xlLmxvZyhvYmplY3QueFswXS55LnopO1xuICAgICAqIC8vID0+IDVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXQob2JqZWN0LCBwYXRoLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gb2JqZWN0IDogYmFzZVNldChvYmplY3QsIHBhdGgsIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnNldGAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBgY3VzdG9taXplcmAgd2hpY2ggaXNcbiAgICAgKiBpbnZva2VkIHRvIHByb2R1Y2UgdGhlIG9iamVjdHMgb2YgYHBhdGhgLiAgSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGBcbiAgICAgKiBwYXRoIGNyZWF0aW9uIGlzIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgYGN1c3RvbWl6ZXJgIGlzIGludm9rZWRcbiAgICAgKiB3aXRoIHRocmVlIGFyZ3VtZW50czogKG5zVmFsdWUsIGtleSwgbnNPYmplY3QpLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gc2V0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25lZCB2YWx1ZXMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHt9O1xuICAgICAqXG4gICAgICogXy5zZXRXaXRoKG9iamVjdCwgJ1swXVsxXScsICdhJywgT2JqZWN0KTtcbiAgICAgKiAvLyA9PiB7ICcwJzogeyAnMSc6ICdhJyB9IH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXRXaXRoKG9iamVjdCwgcGF0aCwgdmFsdWUsIGN1c3RvbWl6ZXIpIHtcbiAgICAgIGN1c3RvbWl6ZXIgPSB0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nID8gY3VzdG9taXplciA6IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IG9iamVjdCA6IGJhc2VTZXQob2JqZWN0LCBwYXRoLCB2YWx1ZSwgY3VzdG9taXplcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWQtdmFsdWUgcGFpcnMgZm9yIGBvYmplY3RgXG4gICAgICogd2hpY2ggY2FuIGJlIGNvbnN1bWVkIGJ5IGBfLmZyb21QYWlyc2AuIElmIGBvYmplY3RgIGlzIGEgbWFwIG9yIHNldCwgaXRzXG4gICAgICogZW50cmllcyBhcmUgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAYWxpYXMgZW50cmllc1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLnRvUGFpcnMobmV3IEZvbyk7XG4gICAgICogLy8gPT4gW1snYScsIDFdLCBbJ2InLCAyXV0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICB2YXIgdG9QYWlycyA9IGNyZWF0ZVRvUGFpcnMoa2V5cyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgc3RyaW5nIGtleWVkLXZhbHVlIHBhaXJzXG4gICAgICogZm9yIGBvYmplY3RgIHdoaWNoIGNhbiBiZSBjb25zdW1lZCBieSBgXy5mcm9tUGFpcnNgLiBJZiBgb2JqZWN0YCBpcyBhIG1hcFxuICAgICAqIG9yIHNldCwgaXRzIGVudHJpZXMgYXJlIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGFsaWFzIGVudHJpZXNJblxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLnRvUGFpcnNJbihuZXcgRm9vKTtcbiAgICAgKiAvLyA9PiBbWydhJywgMV0sIFsnYicsIDJdLCBbJ2MnLCAzXV0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICB2YXIgdG9QYWlyc0luID0gY3JlYXRlVG9QYWlycyhrZXlzSW4pO1xuXG4gICAgLyoqXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgdG8gYF8ucmVkdWNlYDsgdGhpcyBtZXRob2QgdHJhbnNmb3JtcyBgb2JqZWN0YCB0byBhIG5ld1xuICAgICAqIGBhY2N1bXVsYXRvcmAgb2JqZWN0IHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgcnVubmluZyBlYWNoIG9mIGl0cyBvd25cbiAgICAgKiBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzIHRocnUgYGl0ZXJhdGVlYCwgd2l0aCBlYWNoIGludm9jYXRpb25cbiAgICAgKiBwb3RlbnRpYWxseSBtdXRhdGluZyB0aGUgYGFjY3VtdWxhdG9yYCBvYmplY3QuIElmIGBhY2N1bXVsYXRvcmAgaXMgbm90XG4gICAgICogcHJvdmlkZWQsIGEgbmV3IG9iamVjdCB3aXRoIHRoZSBzYW1lIGBbW1Byb3RvdHlwZV1dYCB3aWxsIGJlIHVzZWQuIFRoZVxuICAgICAqIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czogKGFjY3VtdWxhdG9yLCB2YWx1ZSwga2V5LCBvYmplY3QpLlxuICAgICAqIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAxLjMuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgY3VzdG9tIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50cmFuc2Zvcm0oWzIsIDMsIDRdLCBmdW5jdGlvbihyZXN1bHQsIG4pIHtcbiAgICAgKiAgIHJlc3VsdC5wdXNoKG4gKj0gbik7XG4gICAgICogICByZXR1cm4gbiAlIDIgPT0gMDtcbiAgICAgKiB9LCBbXSk7XG4gICAgICogLy8gPT4gWzQsIDldXG4gICAgICpcbiAgICAgKiBfLnRyYW5zZm9ybSh7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDEgfSwgZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICogICAocmVzdWx0W3ZhbHVlXSB8fCAocmVzdWx0W3ZhbHVlXSA9IFtdKSkucHVzaChrZXkpO1xuICAgICAqIH0sIHt9KTtcbiAgICAgKiAvLyA9PiB7ICcxJzogWydhJywgJ2MnXSwgJzInOiBbJ2InXSB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJhbnNmb3JtKG9iamVjdCwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yKSB7XG4gICAgICB2YXIgaXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICAgICAgaXNBcnJMaWtlID0gaXNBcnIgfHwgaXNCdWZmZXIob2JqZWN0KSB8fCBpc1R5cGVkQXJyYXkob2JqZWN0KTtcblxuICAgICAgaXRlcmF0ZWUgPSBnZXRJdGVyYXRlZShpdGVyYXRlZSwgNCk7XG4gICAgICBpZiAoYWNjdW11bGF0b3IgPT0gbnVsbCkge1xuICAgICAgICB2YXIgQ3RvciA9IG9iamVjdCAmJiBvYmplY3QuY29uc3RydWN0b3I7XG4gICAgICAgIGlmIChpc0Fyckxpa2UpIHtcbiAgICAgICAgICBhY2N1bXVsYXRvciA9IGlzQXJyID8gbmV3IEN0b3IgOiBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc09iamVjdChvYmplY3QpKSB7XG4gICAgICAgICAgYWNjdW11bGF0b3IgPSBpc0Z1bmN0aW9uKEN0b3IpID8gYmFzZUNyZWF0ZShnZXRQcm90b3R5cGUob2JqZWN0KSkgOiB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBhY2N1bXVsYXRvciA9IHt9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAoaXNBcnJMaWtlID8gYXJyYXlFYWNoIDogYmFzZUZvck93bikob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIG9iamVjdCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0ZWUoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgb2JqZWN0KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3BlcnR5IGF0IGBwYXRoYCBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHVuc2V0LlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcHJvcGVydHkgaXMgZGVsZXRlZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDcgfSB9XSB9O1xuICAgICAqIF8udW5zZXQob2JqZWN0LCAnYVswXS5iLmMnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhvYmplY3QpO1xuICAgICAqIC8vID0+IHsgJ2EnOiBbeyAnYic6IHt9IH1dIH07XG4gICAgICpcbiAgICAgKiBfLnVuc2V0KG9iamVjdCwgWydhJywgJzAnLCAnYicsICdjJ10pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdCk7XG4gICAgICogLy8gPT4geyAnYSc6IFt7ICdiJzoge30gfV0gfTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bnNldChvYmplY3QsIHBhdGgpIHtcbiAgICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHRydWUgOiBiYXNlVW5zZXQob2JqZWN0LCBwYXRoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnNldGAgZXhjZXB0IHRoYXQgYWNjZXB0cyBgdXBkYXRlcmAgdG8gcHJvZHVjZSB0aGVcbiAgICAgKiB2YWx1ZSB0byBzZXQuIFVzZSBgXy51cGRhdGVXaXRoYCB0byBjdXN0b21pemUgYHBhdGhgIGNyZWF0aW9uLiBUaGUgYHVwZGF0ZXJgXG4gICAgICogaXMgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDogKHZhbHVlKS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuNi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHNldC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB1cGRhdGVyIFRoZSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB1cGRhdGVkIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICdhJzogW3sgJ2InOiB7ICdjJzogMyB9IH1dIH07XG4gICAgICpcbiAgICAgKiBfLnVwZGF0ZShvYmplY3QsICdhWzBdLmIuYycsIGZ1bmN0aW9uKG4pIHsgcmV0dXJuIG4gKiBuOyB9KTtcbiAgICAgKiBjb25zb2xlLmxvZyhvYmplY3QuYVswXS5iLmMpO1xuICAgICAqIC8vID0+IDlcbiAgICAgKlxuICAgICAqIF8udXBkYXRlKG9iamVjdCwgJ3hbMF0ueS56JywgZnVuY3Rpb24obikgeyByZXR1cm4gbiA/IG4gKyAxIDogMDsgfSk7XG4gICAgICogY29uc29sZS5sb2cob2JqZWN0LnhbMF0ueS56KTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICovXG4gICAgZnVuY3Rpb24gdXBkYXRlKG9iamVjdCwgcGF0aCwgdXBkYXRlcikge1xuICAgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gb2JqZWN0IDogYmFzZVVwZGF0ZShvYmplY3QsIHBhdGgsIGNhc3RGdW5jdGlvbih1cGRhdGVyKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy51cGRhdGVgIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYGN1c3RvbWl6ZXJgIHdoaWNoIGlzXG4gICAgICogaW52b2tlZCB0byBwcm9kdWNlIHRoZSBvYmplY3RzIG9mIGBwYXRoYC4gIElmIGBjdXN0b21pemVyYCByZXR1cm5zIGB1bmRlZmluZWRgXG4gICAgICogcGF0aCBjcmVhdGlvbiBpcyBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBpbnZva2VkXG4gICAgICogd2l0aCB0aHJlZSBhcmd1bWVudHM6IChuc1ZhbHVlLCBrZXksIG5zT2JqZWN0KS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuNi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHNldC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB1cGRhdGVyIFRoZSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB1cGRhdGVkIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0ge307XG4gICAgICpcbiAgICAgKiBfLnVwZGF0ZVdpdGgob2JqZWN0LCAnWzBdWzFdJywgXy5jb25zdGFudCgnYScpLCBPYmplY3QpO1xuICAgICAqIC8vID0+IHsgJzAnOiB7ICcxJzogJ2EnIH0gfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVdpdGgob2JqZWN0LCBwYXRoLCB1cGRhdGVyLCBjdXN0b21pemVyKSB7XG4gICAgICBjdXN0b21pemVyID0gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJyA/IGN1c3RvbWl6ZXIgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyBvYmplY3QgOiBiYXNlVXBkYXRlKG9iamVjdCwgcGF0aCwgY2FzdEZ1bmN0aW9uKHVwZGF0ZXIpLCBjdXN0b21pemVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWQgcHJvcGVydHkgdmFsdWVzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy52YWx1ZXMobmV3IEZvbyk7XG4gICAgICogLy8gPT4gWzEsIDJdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICpcbiAgICAgKiBfLnZhbHVlcygnaGknKTtcbiAgICAgKiAvLyA9PiBbJ2gnLCAnaSddXG4gICAgICovXG4gICAgZnVuY3Rpb24gdmFsdWVzKG9iamVjdCkge1xuICAgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gW10gOiBiYXNlVmFsdWVzKG9iamVjdCwga2V5cyhvYmplY3QpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0eVxuICAgICAqIHZhbHVlcyBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8udmFsdWVzSW4obmV3IEZvbyk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgZnVuY3Rpb24gdmFsdWVzSW4ob2JqZWN0KSB7XG4gICAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyBbXSA6IGJhc2VWYWx1ZXMob2JqZWN0LCBrZXlzSW4ob2JqZWN0KSk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ2xhbXBzIGBudW1iZXJgIHdpdGhpbiB0aGUgaW5jbHVzaXZlIGBsb3dlcmAgYW5kIGB1cHBlcmAgYm91bmRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IE51bWJlclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgVGhlIG51bWJlciB0byBjbGFtcC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xvd2VyXSBUaGUgbG93ZXIgYm91bmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHVwcGVyIFRoZSB1cHBlciBib3VuZC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjbGFtcGVkIG51bWJlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jbGFtcCgtMTAsIC01LCA1KTtcbiAgICAgKiAvLyA9PiAtNVxuICAgICAqXG4gICAgICogXy5jbGFtcCgxMCwgLTUsIDUpO1xuICAgICAqIC8vID0+IDVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbGFtcChudW1iZXIsIGxvd2VyLCB1cHBlcikge1xuICAgICAgaWYgKHVwcGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdXBwZXIgPSBsb3dlcjtcbiAgICAgICAgbG93ZXIgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAodXBwZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB1cHBlciA9IHRvTnVtYmVyKHVwcGVyKTtcbiAgICAgICAgdXBwZXIgPSB1cHBlciA9PT0gdXBwZXIgPyB1cHBlciA6IDA7XG4gICAgICB9XG4gICAgICBpZiAobG93ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsb3dlciA9IHRvTnVtYmVyKGxvd2VyKTtcbiAgICAgICAgbG93ZXIgPSBsb3dlciA9PT0gbG93ZXIgPyBsb3dlciA6IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUNsYW1wKHRvTnVtYmVyKG51bWJlciksIGxvd2VyLCB1cHBlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBuYCBpcyBiZXR3ZWVuIGBzdGFydGAgYW5kIHVwIHRvLCBidXQgbm90IGluY2x1ZGluZywgYGVuZGAuIElmXG4gICAgICogYGVuZGAgaXMgbm90IHNwZWNpZmllZCwgaXQncyBzZXQgdG8gYHN0YXJ0YCB3aXRoIGBzdGFydGAgdGhlbiBzZXQgdG8gYDBgLlxuICAgICAqIElmIGBzdGFydGAgaXMgZ3JlYXRlciB0aGFuIGBlbmRgIHRoZSBwYXJhbXMgYXJlIHN3YXBwZWQgdG8gc3VwcG9ydFxuICAgICAqIG5lZ2F0aXZlIHJhbmdlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjMuMFxuICAgICAqIEBjYXRlZ29yeSBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyIFRoZSBudW1iZXIgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgb2YgdGhlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGVuZCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBudW1iZXJgIGlzIGluIHRoZSByYW5nZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBzZWUgXy5yYW5nZSwgXy5yYW5nZVJpZ2h0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW5SYW5nZSgzLCAyLCA0KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmluUmFuZ2UoNCwgOCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pblJhbmdlKDQsIDIpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmluUmFuZ2UoMiwgMik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaW5SYW5nZSgxLjIsIDIpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaW5SYW5nZSg1LjIsIDQpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmluUmFuZ2UoLTMsIC0yLCAtNik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluUmFuZ2UobnVtYmVyLCBzdGFydCwgZW5kKSB7XG4gICAgICBzdGFydCA9IHRvRmluaXRlKHN0YXJ0KTtcbiAgICAgIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbmQgPSBzdGFydDtcbiAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW5kID0gdG9GaW5pdGUoZW5kKTtcbiAgICAgIH1cbiAgICAgIG51bWJlciA9IHRvTnVtYmVyKG51bWJlcik7XG4gICAgICByZXR1cm4gYmFzZUluUmFuZ2UobnVtYmVyLCBzdGFydCwgZW5kKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9kdWNlcyBhIHJhbmRvbSBudW1iZXIgYmV0d2VlbiB0aGUgaW5jbHVzaXZlIGBsb3dlcmAgYW5kIGB1cHBlcmAgYm91bmRzLlxuICAgICAqIElmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHByb3ZpZGVkIGEgbnVtYmVyIGJldHdlZW4gYDBgIGFuZCB0aGUgZ2l2ZW4gbnVtYmVyXG4gICAgICogaXMgcmV0dXJuZWQuIElmIGBmbG9hdGluZ2AgaXMgYHRydWVgLCBvciBlaXRoZXIgYGxvd2VyYCBvciBgdXBwZXJgIGFyZVxuICAgICAqIGZsb2F0cywgYSBmbG9hdGluZy1wb2ludCBudW1iZXIgaXMgcmV0dXJuZWQgaW5zdGVhZCBvZiBhbiBpbnRlZ2VyLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIEphdmFTY3JpcHQgZm9sbG93cyB0aGUgSUVFRS03NTQgc3RhbmRhcmQgZm9yIHJlc29sdmluZ1xuICAgICAqIGZsb2F0aW5nLXBvaW50IHZhbHVlcyB3aGljaCBjYW4gcHJvZHVjZSB1bmV4cGVjdGVkIHJlc3VsdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgTnVtYmVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsb3dlcj0wXSBUaGUgbG93ZXIgYm91bmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt1cHBlcj0xXSBUaGUgdXBwZXIgYm91bmQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZmxvYXRpbmddIFNwZWNpZnkgcmV0dXJuaW5nIGEgZmxvYXRpbmctcG9pbnQgbnVtYmVyLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHJhbmRvbSBudW1iZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDAsIDUpO1xuICAgICAqIC8vID0+IGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1XG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSg1KTtcbiAgICAgKiAvLyA9PiBhbHNvIGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1XG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSg1LCB0cnVlKTtcbiAgICAgKiAvLyA9PiBhIGZsb2F0aW5nLXBvaW50IG51bWJlciBiZXR3ZWVuIDAgYW5kIDVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDEuMiwgNS4yKTtcbiAgICAgKiAvLyA9PiBhIGZsb2F0aW5nLXBvaW50IG51bWJlciBiZXR3ZWVuIDEuMiBhbmQgNS4yXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmFuZG9tKGxvd2VyLCB1cHBlciwgZmxvYXRpbmcpIHtcbiAgICAgIGlmIChmbG9hdGluZyAmJiB0eXBlb2YgZmxvYXRpbmcgIT0gJ2Jvb2xlYW4nICYmIGlzSXRlcmF0ZWVDYWxsKGxvd2VyLCB1cHBlciwgZmxvYXRpbmcpKSB7XG4gICAgICAgIHVwcGVyID0gZmxvYXRpbmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAoZmxvYXRpbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodHlwZW9mIHVwcGVyID09ICdib29sZWFuJykge1xuICAgICAgICAgIGZsb2F0aW5nID0gdXBwZXI7XG4gICAgICAgICAgdXBwZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGxvd2VyID09ICdib29sZWFuJykge1xuICAgICAgICAgIGZsb2F0aW5nID0gbG93ZXI7XG4gICAgICAgICAgbG93ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChsb3dlciA9PT0gdW5kZWZpbmVkICYmIHVwcGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbG93ZXIgPSAwO1xuICAgICAgICB1cHBlciA9IDE7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbG93ZXIgPSB0b0Zpbml0ZShsb3dlcik7XG4gICAgICAgIGlmICh1cHBlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdXBwZXIgPSBsb3dlcjtcbiAgICAgICAgICBsb3dlciA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBwZXIgPSB0b0Zpbml0ZSh1cHBlcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChsb3dlciA+IHVwcGVyKSB7XG4gICAgICAgIHZhciB0ZW1wID0gbG93ZXI7XG4gICAgICAgIGxvd2VyID0gdXBwZXI7XG4gICAgICAgIHVwcGVyID0gdGVtcDtcbiAgICAgIH1cbiAgICAgIGlmIChmbG9hdGluZyB8fCBsb3dlciAlIDEgfHwgdXBwZXIgJSAxKSB7XG4gICAgICAgIHZhciByYW5kID0gbmF0aXZlUmFuZG9tKCk7XG4gICAgICAgIHJldHVybiBuYXRpdmVNaW4obG93ZXIgKyAocmFuZCAqICh1cHBlciAtIGxvd2VyICsgZnJlZVBhcnNlRmxvYXQoJzFlLScgKyAoKHJhbmQgKyAnJykubGVuZ3RoIC0gMSkpKSksIHVwcGVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlUmFuZG9tKGxvd2VyLCB1cHBlcik7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AgdG8gW2NhbWVsIGNhc2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NhbWVsQ2FzZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjYW1lbCBjYXNlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY2FtZWxDYXNlKCdGb28gQmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvb0JhcidcbiAgICAgKlxuICAgICAqIF8uY2FtZWxDYXNlKCctLWZvby1iYXItLScpO1xuICAgICAqIC8vID0+ICdmb29CYXInXG4gICAgICpcbiAgICAgKiBfLmNhbWVsQ2FzZSgnX19GT09fQkFSX18nKTtcbiAgICAgKiAvLyA9PiAnZm9vQmFyJ1xuICAgICAqL1xuICAgIHZhciBjYW1lbENhc2UgPSBjcmVhdGVDb21wb3VuZGVyKGZ1bmN0aW9uKHJlc3VsdCwgd29yZCwgaW5kZXgpIHtcbiAgICAgIHdvcmQgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKGluZGV4ID8gY2FwaXRhbGl6ZSh3b3JkKSA6IHdvcmQpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGZpcnN0IGNoYXJhY3RlciBvZiBgc3RyaW5nYCB0byB1cHBlciBjYXNlIGFuZCB0aGUgcmVtYWluaW5nXG4gICAgICogdG8gbG93ZXIgY2FzZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjAuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjYXBpdGFsaXplLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNhcGl0YWxpemVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jYXBpdGFsaXplKCdGUkVEJyk7XG4gICAgICogLy8gPT4gJ0ZyZWQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHJpbmcpIHtcbiAgICAgIHJldHVybiB1cHBlckZpcnN0KHRvU3RyaW5nKHN0cmluZykudG9Mb3dlckNhc2UoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVidXJycyBgc3RyaW5nYCBieSBjb252ZXJ0aW5nXG4gICAgICogW0xhdGluLTEgU3VwcGxlbWVudF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGF0aW4tMV9TdXBwbGVtZW50XyhVbmljb2RlX2Jsb2NrKSNDaGFyYWN0ZXJfdGFibGUpXG4gICAgICogYW5kIFtMYXRpbiBFeHRlbmRlZC1BXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MYXRpbl9FeHRlbmRlZC1BKVxuICAgICAqIGxldHRlcnMgdG8gYmFzaWMgTGF0aW4gbGV0dGVycyBhbmQgcmVtb3ZpbmdcbiAgICAgKiBbY29tYmluaW5nIGRpYWNyaXRpY2FsIG1hcmtzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db21iaW5pbmdfRGlhY3JpdGljYWxfTWFya3MpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGRlYnVyci5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBkZWJ1cnJlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVidXJyKCdkw6lqw6AgdnUnKTtcbiAgICAgKiAvLyA9PiAnZGVqYSB2dSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkZWJ1cnIoc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuICAgICAgcmV0dXJuIHN0cmluZyAmJiBzdHJpbmcucmVwbGFjZShyZUxhdGluLCBkZWJ1cnJMZXR0ZXIpLnJlcGxhY2UocmVDb21ib01hcmssICcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHN0cmluZ2AgZW5kcyB3aXRoIHRoZSBnaXZlbiB0YXJnZXQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt0YXJnZXRdIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Bvc2l0aW9uPXN0cmluZy5sZW5ndGhdIFRoZSBwb3NpdGlvbiB0byBzZWFyY2ggdXAgdG8uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBzdHJpbmdgIGVuZHMgd2l0aCBgdGFyZ2V0YCxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmVuZHNXaXRoKCdhYmMnLCAnYycpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uZW5kc1dpdGgoJ2FiYycsICdiJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uZW5kc1dpdGgoJ2FiYycsICdiJywgMik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVuZHNXaXRoKHN0cmluZywgdGFyZ2V0LCBwb3NpdGlvbikge1xuICAgICAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHRhcmdldCA9IGJhc2VUb1N0cmluZyh0YXJnZXQpO1xuXG4gICAgICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcbiAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gPT09IHVuZGVmaW5lZFxuICAgICAgICA/IGxlbmd0aFxuICAgICAgICA6IGJhc2VDbGFtcCh0b0ludGVnZXIocG9zaXRpb24pLCAwLCBsZW5ndGgpO1xuXG4gICAgICB2YXIgZW5kID0gcG9zaXRpb247XG4gICAgICBwb3NpdGlvbiAtPSB0YXJnZXQubGVuZ3RoO1xuICAgICAgcmV0dXJuIHBvc2l0aW9uID49IDAgJiYgc3RyaW5nLnNsaWNlKHBvc2l0aW9uLCBlbmQpID09IHRhcmdldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY2hhcmFjdGVycyBcIiZcIiwgXCI8XCIsIFwiPlwiLCAnXCInLCBhbmQgXCInXCIgaW4gYHN0cmluZ2AgdG8gdGhlaXJcbiAgICAgKiBjb3JyZXNwb25kaW5nIEhUTUwgZW50aXRpZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTm8gb3RoZXIgY2hhcmFjdGVycyBhcmUgZXNjYXBlZC4gVG8gZXNjYXBlIGFkZGl0aW9uYWxcbiAgICAgKiBjaGFyYWN0ZXJzIHVzZSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkgbGlrZSBbX2hlX10oaHR0cHM6Ly9tdGhzLmJlL2hlKS5cbiAgICAgKlxuICAgICAqIFRob3VnaCB0aGUgXCI+XCIgY2hhcmFjdGVyIGlzIGVzY2FwZWQgZm9yIHN5bW1ldHJ5LCBjaGFyYWN0ZXJzIGxpa2VcbiAgICAgKiBcIj5cIiBhbmQgXCIvXCIgZG9uJ3QgbmVlZCBlc2NhcGluZyBpbiBIVE1MIGFuZCBoYXZlIG5vIHNwZWNpYWwgbWVhbmluZ1xuICAgICAqIHVubGVzcyB0aGV5J3JlIHBhcnQgb2YgYSB0YWcgb3IgdW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlLiBTZWVcbiAgICAgKiBbTWF0aGlhcyBCeW5lbnMncyBhcnRpY2xlXShodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvYW1iaWd1b3VzLWFtcGVyc2FuZHMpXG4gICAgICogKHVuZGVyIFwic2VtaS1yZWxhdGVkIGZ1biBmYWN0XCIpIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBXaGVuIHdvcmtpbmcgd2l0aCBIVE1MIHlvdSBzaG91bGQgYWx3YXlzXG4gICAgICogW3F1b3RlIGF0dHJpYnV0ZSB2YWx1ZXNdKGh0dHA6Ly93b25rby5jb20vcG9zdC9odG1sLWVzY2FwaW5nKSB0byByZWR1Y2VcbiAgICAgKiBYU1MgdmVjdG9ycy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZXNjYXBlKCdmcmVkLCBiYXJuZXksICYgcGViYmxlcycpO1xuICAgICAqIC8vID0+ICdmcmVkLCBiYXJuZXksICZhbXA7IHBlYmJsZXMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXNjYXBlKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHJldHVybiAoc3RyaW5nICYmIHJlSGFzVW5lc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgICAgID8gc3RyaW5nLnJlcGxhY2UocmVVbmVzY2FwZWRIdG1sLCBlc2NhcGVIdG1sQ2hhcilcbiAgICAgICAgOiBzdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXlwiLCBcIiRcIiwgXCJcXFwiLCBcIi5cIiwgXCIqXCIsIFwiK1wiLFxuICAgICAqIFwiP1wiLCBcIihcIiwgXCIpXCIsIFwiW1wiLCBcIl1cIiwgXCJ7XCIsIFwifVwiLCBhbmQgXCJ8XCIgaW4gYHN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmVzY2FwZVJlZ0V4cCgnW2xvZGFzaF0oaHR0cHM6Ly9sb2Rhc2guY29tLyknKTtcbiAgICAgKiAvLyA9PiAnXFxbbG9kYXNoXFxdXFwoaHR0cHM6Ly9sb2Rhc2hcXC5jb20vXFwpJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHJpbmcpIHtcbiAgICAgIHN0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7XG4gICAgICByZXR1cm4gKHN0cmluZyAmJiByZUhhc1JlZ0V4cENoYXIudGVzdChzdHJpbmcpKVxuICAgICAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcXFwkJicpXG4gICAgICAgIDogc3RyaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBzdHJpbmdgIHRvXG4gICAgICogW2tlYmFiIGNhc2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xldHRlcl9jYXNlI1NwZWNpYWxfY2FzZV9zdHlsZXMpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUga2ViYWIgY2FzZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmtlYmFiQ2FzZSgnRm9vIEJhcicpO1xuICAgICAqIC8vID0+ICdmb28tYmFyJ1xuICAgICAqXG4gICAgICogXy5rZWJhYkNhc2UoJ2Zvb0JhcicpO1xuICAgICAqIC8vID0+ICdmb28tYmFyJ1xuICAgICAqXG4gICAgICogXy5rZWJhYkNhc2UoJ19fRk9PX0JBUl9fJyk7XG4gICAgICogLy8gPT4gJ2Zvby1iYXInXG4gICAgICovXG4gICAgdmFyIGtlYmFiQ2FzZSA9IGNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LCB3b3JkLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIChpbmRleCA/ICctJyA6ICcnKSArIHdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBzdHJpbmdgLCBhcyBzcGFjZSBzZXBhcmF0ZWQgd29yZHMsIHRvIGxvd2VyIGNhc2UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBsb3dlciBjYXNlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubG93ZXJDYXNlKCctLUZvby1CYXItLScpO1xuICAgICAqIC8vID0+ICdmb28gYmFyJ1xuICAgICAqXG4gICAgICogXy5sb3dlckNhc2UoJ2Zvb0JhcicpO1xuICAgICAqIC8vID0+ICdmb28gYmFyJ1xuICAgICAqXG4gICAgICogXy5sb3dlckNhc2UoJ19fRk9PX0JBUl9fJyk7XG4gICAgICogLy8gPT4gJ2ZvbyBiYXInXG4gICAgICovXG4gICAgdmFyIGxvd2VyQ2FzZSA9IGNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LCB3b3JkLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIChpbmRleCA/ICcgJyA6ICcnKSArIHdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYHN0cmluZ2AgdG8gbG93ZXIgY2FzZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubG93ZXJGaXJzdCgnRnJlZCcpO1xuICAgICAqIC8vID0+ICdmcmVkJ1xuICAgICAqXG4gICAgICogXy5sb3dlckZpcnN0KCdGUkVEJyk7XG4gICAgICogLy8gPT4gJ2ZSRUQnXG4gICAgICovXG4gICAgdmFyIGxvd2VyRmlyc3QgPSBjcmVhdGVDYXNlRmlyc3QoJ3RvTG93ZXJDYXNlJyk7XG5cbiAgICAvKipcbiAgICAgKiBQYWRzIGBzdHJpbmdgIG9uIHRoZSBsZWZ0IGFuZCByaWdodCBzaWRlcyBpZiBpdCdzIHNob3J0ZXIgdGhhbiBgbGVuZ3RoYC5cbiAgICAgKiBQYWRkaW5nIGNoYXJhY3RlcnMgYXJlIHRydW5jYXRlZCBpZiB0aGV5IGNhbid0IGJlIGV2ZW5seSBkaXZpZGVkIGJ5IGBsZW5ndGhgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHBhZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD0wXSBUaGUgcGFkZGluZyBsZW5ndGguXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz0nICddIFRoZSBzdHJpbmcgdXNlZCBhcyBwYWRkaW5nLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHBhZGRlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFkKCdhYmMnLCA4KTtcbiAgICAgKiAvLyA9PiAnICBhYmMgICAnXG4gICAgICpcbiAgICAgKiBfLnBhZCgnYWJjJywgOCwgJ18tJyk7XG4gICAgICogLy8gPT4gJ18tYWJjXy1fJ1xuICAgICAqXG4gICAgICogXy5wYWQoJ2FiYycsIDMpO1xuICAgICAqIC8vID0+ICdhYmMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFkKHN0cmluZywgbGVuZ3RoLCBjaGFycykge1xuICAgICAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIGxlbmd0aCA9IHRvSW50ZWdlcihsZW5ndGgpO1xuXG4gICAgICB2YXIgc3RyTGVuZ3RoID0gbGVuZ3RoID8gc3RyaW5nU2l6ZShzdHJpbmcpIDogMDtcbiAgICAgIGlmICghbGVuZ3RoIHx8IHN0ckxlbmd0aCA+PSBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIH1cbiAgICAgIHZhciBtaWQgPSAobGVuZ3RoIC0gc3RyTGVuZ3RoKSAvIDI7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBjcmVhdGVQYWRkaW5nKG5hdGl2ZUZsb29yKG1pZCksIGNoYXJzKSArXG4gICAgICAgIHN0cmluZyArXG4gICAgICAgIGNyZWF0ZVBhZGRpbmcobmF0aXZlQ2VpbChtaWQpLCBjaGFycylcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFkcyBgc3RyaW5nYCBvbiB0aGUgcmlnaHQgc2lkZSBpZiBpdCdzIHNob3J0ZXIgdGhhbiBgbGVuZ3RoYC4gUGFkZGluZ1xuICAgICAqIGNoYXJhY3RlcnMgYXJlIHRydW5jYXRlZCBpZiB0aGV5IGV4Y2VlZCBgbGVuZ3RoYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBwYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9MF0gVGhlIHBhZGRpbmcgbGVuZ3RoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9JyAnXSBUaGUgc3RyaW5nIHVzZWQgYXMgcGFkZGluZy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBwYWRkZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBhZEVuZCgnYWJjJywgNik7XG4gICAgICogLy8gPT4gJ2FiYyAgICdcbiAgICAgKlxuICAgICAqIF8ucGFkRW5kKCdhYmMnLCA2LCAnXy0nKTtcbiAgICAgKiAvLyA9PiAnYWJjXy1fJ1xuICAgICAqXG4gICAgICogXy5wYWRFbmQoJ2FiYycsIDMpO1xuICAgICAqIC8vID0+ICdhYmMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFkRW5kKHN0cmluZywgbGVuZ3RoLCBjaGFycykge1xuICAgICAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIGxlbmd0aCA9IHRvSW50ZWdlcihsZW5ndGgpO1xuXG4gICAgICB2YXIgc3RyTGVuZ3RoID0gbGVuZ3RoID8gc3RyaW5nU2l6ZShzdHJpbmcpIDogMDtcbiAgICAgIHJldHVybiAobGVuZ3RoICYmIHN0ckxlbmd0aCA8IGxlbmd0aClcbiAgICAgICAgPyAoc3RyaW5nICsgY3JlYXRlUGFkZGluZyhsZW5ndGggLSBzdHJMZW5ndGgsIGNoYXJzKSlcbiAgICAgICAgOiBzdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFkcyBgc3RyaW5nYCBvbiB0aGUgbGVmdCBzaWRlIGlmIGl0J3Mgc2hvcnRlciB0aGFuIGBsZW5ndGhgLiBQYWRkaW5nXG4gICAgICogY2hhcmFjdGVycyBhcmUgdHJ1bmNhdGVkIGlmIHRoZXkgZXhjZWVkIGBsZW5ndGhgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHBhZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD0wXSBUaGUgcGFkZGluZyBsZW5ndGguXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz0nICddIFRoZSBzdHJpbmcgdXNlZCBhcyBwYWRkaW5nLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHBhZGRlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFkU3RhcnQoJ2FiYycsIDYpO1xuICAgICAqIC8vID0+ICcgICBhYmMnXG4gICAgICpcbiAgICAgKiBfLnBhZFN0YXJ0KCdhYmMnLCA2LCAnXy0nKTtcbiAgICAgKiAvLyA9PiAnXy1fYWJjJ1xuICAgICAqXG4gICAgICogXy5wYWRTdGFydCgnYWJjJywgMyk7XG4gICAgICogLy8gPT4gJ2FiYydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYWRTdGFydChzdHJpbmcsIGxlbmd0aCwgY2hhcnMpIHtcbiAgICAgIHN0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBsZW5ndGggPSB0b0ludGVnZXIobGVuZ3RoKTtcblxuICAgICAgdmFyIHN0ckxlbmd0aCA9IGxlbmd0aCA/IHN0cmluZ1NpemUoc3RyaW5nKSA6IDA7XG4gICAgICByZXR1cm4gKGxlbmd0aCAmJiBzdHJMZW5ndGggPCBsZW5ndGgpXG4gICAgICAgID8gKGNyZWF0ZVBhZGRpbmcobGVuZ3RoIC0gc3RyTGVuZ3RoLCBjaGFycykgKyBzdHJpbmcpXG4gICAgICAgIDogc3RyaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGFuIGludGVnZXIgb2YgdGhlIHNwZWNpZmllZCByYWRpeC4gSWYgYHJhZGl4YCBpc1xuICAgICAqIGB1bmRlZmluZWRgIG9yIGAwYCwgYSBgcmFkaXhgIG9mIGAxMGAgaXMgdXNlZCB1bmxlc3MgYHZhbHVlYCBpcyBhXG4gICAgICogaGV4YWRlY2ltYWwsIGluIHdoaWNoIGNhc2UgYSBgcmFkaXhgIG9mIGAxNmAgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBhbGlnbnMgd2l0aCB0aGVcbiAgICAgKiBbRVM1IGltcGxlbWVudGF0aW9uXShodHRwczovL2VzNS5naXRodWIuaW8vI3gxNS4xLjIuMikgb2YgYHBhcnNlSW50YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAxLjEuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JhZGl4PTEwXSBUaGUgcmFkaXggdG8gaW50ZXJwcmV0IGB2YWx1ZWAgYnkuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGFuIGl0ZXJhdGVlIGZvciBtZXRob2RzIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5wYXJzZUludCgnMDgnKTtcbiAgICAgKiAvLyA9PiA4XG4gICAgICpcbiAgICAgKiBfLm1hcChbJzYnLCAnMDgnLCAnMTAnXSwgXy5wYXJzZUludCk7XG4gICAgICogLy8gPT4gWzYsIDgsIDEwXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhcnNlSW50KHN0cmluZywgcmFkaXgsIGd1YXJkKSB7XG4gICAgICBpZiAoZ3VhcmQgfHwgcmFkaXggPT0gbnVsbCkge1xuICAgICAgICByYWRpeCA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHJhZGl4KSB7XG4gICAgICAgIHJhZGl4ID0gK3JhZGl4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZVBhcnNlSW50KHRvU3RyaW5nKHN0cmluZykucmVwbGFjZShyZVRyaW1TdGFydCwgJycpLCByYWRpeCB8fCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBlYXRzIHRoZSBnaXZlbiBzdHJpbmcgYG5gIHRpbWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHJlcGVhdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MV0gVGhlIG51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIHN0cmluZy5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHJlcGVhdGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yZXBlYXQoJyonLCAzKTtcbiAgICAgKiAvLyA9PiAnKioqJ1xuICAgICAqXG4gICAgICogXy5yZXBlYXQoJ2FiYycsIDIpO1xuICAgICAqIC8vID0+ICdhYmNhYmMnXG4gICAgICpcbiAgICAgKiBfLnJlcGVhdCgnYWJjJywgMCk7XG4gICAgICogLy8gPT4gJydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXBlYXQoc3RyaW5nLCBuLCBndWFyZCkge1xuICAgICAgaWYgKChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKHN0cmluZywgbiwgZ3VhcmQpIDogbiA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICBuID0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG4gPSB0b0ludGVnZXIobik7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVJlcGVhdCh0b1N0cmluZyhzdHJpbmcpLCBuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyBtYXRjaGVzIGZvciBgcGF0dGVybmAgaW4gYHN0cmluZ2Agd2l0aCBgcmVwbGFjZW1lbnRgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uXG4gICAgICogW2BTdHJpbmcjcmVwbGFjZWBdKGh0dHBzOi8vbWRuLmlvL1N0cmluZy9yZXBsYWNlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtSZWdFeHB8c3RyaW5nfSBwYXR0ZXJuIFRoZSBwYXR0ZXJuIHRvIHJlcGxhY2UuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IHJlcGxhY2VtZW50IFRoZSBtYXRjaCByZXBsYWNlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBtb2RpZmllZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmVwbGFjZSgnSGkgRnJlZCcsICdGcmVkJywgJ0Jhcm5leScpO1xuICAgICAqIC8vID0+ICdIaSBCYXJuZXknXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVwbGFjZSgpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgIHN0cmluZyA9IHRvU3RyaW5nKGFyZ3NbMF0pO1xuXG4gICAgICByZXR1cm4gYXJncy5sZW5ndGggPCAzID8gc3RyaW5nIDogc3RyaW5nLnJlcGxhY2UoYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AgdG9cbiAgICAgKiBbc25ha2UgY2FzZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU25ha2VfY2FzZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzbmFrZSBjYXNlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc25ha2VDYXNlKCdGb28gQmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvb19iYXInXG4gICAgICpcbiAgICAgKiBfLnNuYWtlQ2FzZSgnZm9vQmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvb19iYXInXG4gICAgICpcbiAgICAgKiBfLnNuYWtlQ2FzZSgnLS1GT08tQkFSLS0nKTtcbiAgICAgKiAvLyA9PiAnZm9vX2JhcidcbiAgICAgKi9cbiAgICB2YXIgc25ha2VDYXNlID0gY3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsIHdvcmQsIGluZGV4KSB7XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKGluZGV4ID8gJ18nIDogJycpICsgd29yZC50b0xvd2VyQ2FzZSgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGBzdHJpbmdgIGJ5IGBzZXBhcmF0b3JgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uXG4gICAgICogW2BTdHJpbmcjc3BsaXRgXShodHRwczovL21kbi5pby9TdHJpbmcvc3BsaXQpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHNwbGl0LlxuICAgICAqIEBwYXJhbSB7UmVnRXhwfHN0cmluZ30gc2VwYXJhdG9yIFRoZSBzZXBhcmF0b3IgcGF0dGVybiB0byBzcGxpdCBieS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xpbWl0XSBUaGUgbGVuZ3RoIHRvIHRydW5jYXRlIHJlc3VsdHMgdG8uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzdHJpbmcgc2VnbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc3BsaXQoJ2EtYi1jJywgJy0nLCAyKTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYiddXG4gICAgICovXG4gICAgZnVuY3Rpb24gc3BsaXQoc3RyaW5nLCBzZXBhcmF0b3IsIGxpbWl0KSB7XG4gICAgICBpZiAobGltaXQgJiYgdHlwZW9mIGxpbWl0ICE9ICdudW1iZXInICYmIGlzSXRlcmF0ZWVDYWxsKHN0cmluZywgc2VwYXJhdG9yLCBsaW1pdCkpIHtcbiAgICAgICAgc2VwYXJhdG9yID0gbGltaXQgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBsaW1pdCA9IGxpbWl0ID09PSB1bmRlZmluZWQgPyBNQVhfQVJSQVlfTEVOR1RIIDogbGltaXQgPj4+IDA7XG4gICAgICBpZiAoIWxpbWl0KSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHN0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBpZiAoc3RyaW5nICYmIChcbiAgICAgICAgICAgIHR5cGVvZiBzZXBhcmF0b3IgPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgIChzZXBhcmF0b3IgIT0gbnVsbCAmJiAhaXNSZWdFeHAoc2VwYXJhdG9yKSlcbiAgICAgICAgICApKSB7XG4gICAgICAgIHNlcGFyYXRvciA9IGJhc2VUb1N0cmluZyhzZXBhcmF0b3IpO1xuICAgICAgICBpZiAoIXNlcGFyYXRvciAmJiBoYXNVbmljb2RlKHN0cmluZykpIHtcbiAgICAgICAgICByZXR1cm4gY2FzdFNsaWNlKHN0cmluZ1RvQXJyYXkoc3RyaW5nKSwgMCwgbGltaXQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyaW5nLnNwbGl0KHNlcGFyYXRvciwgbGltaXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBzdHJpbmdgIHRvXG4gICAgICogW3N0YXJ0IGNhc2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xldHRlcl9jYXNlI1N0eWxpc3RpY19vcl9zcGVjaWFsaXNlZF91c2FnZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdGFydCBjYXNlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc3RhcnRDYXNlKCctLWZvby1iYXItLScpO1xuICAgICAqIC8vID0+ICdGb28gQmFyJ1xuICAgICAqXG4gICAgICogXy5zdGFydENhc2UoJ2Zvb0JhcicpO1xuICAgICAqIC8vID0+ICdGb28gQmFyJ1xuICAgICAqXG4gICAgICogXy5zdGFydENhc2UoJ19fRk9PX0JBUl9fJyk7XG4gICAgICogLy8gPT4gJ0ZPTyBCQVInXG4gICAgICovXG4gICAgdmFyIHN0YXJ0Q2FzZSA9IGNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LCB3b3JkLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIChpbmRleCA/ICcgJyA6ICcnKSArIHVwcGVyRmlyc3Qod29yZCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHN0cmluZ2Agc3RhcnRzIHdpdGggdGhlIGdpdmVuIHRhcmdldCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3RhcmdldF0gVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcG9zaXRpb249MF0gVGhlIHBvc2l0aW9uIHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgc3RyaW5nYCBzdGFydHMgd2l0aCBgdGFyZ2V0YCxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnN0YXJ0c1dpdGgoJ2FiYycsICdhJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5zdGFydHNXaXRoKCdhYmMnLCAnYicpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLnN0YXJ0c1dpdGgoJ2FiYycsICdiJywgMSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyaW5nLCB0YXJnZXQsIHBvc2l0aW9uKSB7XG4gICAgICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbiA9PSBudWxsXG4gICAgICAgID8gMFxuICAgICAgICA6IGJhc2VDbGFtcCh0b0ludGVnZXIocG9zaXRpb24pLCAwLCBzdHJpbmcubGVuZ3RoKTtcblxuICAgICAgdGFyZ2V0ID0gYmFzZVRvU3RyaW5nKHRhcmdldCk7XG4gICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKHBvc2l0aW9uLCBwb3NpdGlvbiArIHRhcmdldC5sZW5ndGgpID09IHRhcmdldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY29tcGlsZWQgdGVtcGxhdGUgZnVuY3Rpb24gdGhhdCBjYW4gaW50ZXJwb2xhdGUgZGF0YSBwcm9wZXJ0aWVzXG4gICAgICogaW4gXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlcnMsIEhUTUwtZXNjYXBlIGludGVycG9sYXRlZCBkYXRhIHByb3BlcnRpZXMgaW5cbiAgICAgKiBcImVzY2FwZVwiIGRlbGltaXRlcnMsIGFuZCBleGVjdXRlIEphdmFTY3JpcHQgaW4gXCJldmFsdWF0ZVwiIGRlbGltaXRlcnMuIERhdGFcbiAgICAgKiBwcm9wZXJ0aWVzIG1heSBiZSBhY2Nlc3NlZCBhcyBmcmVlIHZhcmlhYmxlcyBpbiB0aGUgdGVtcGxhdGUuIElmIGEgc2V0dGluZ1xuICAgICAqIG9iamVjdCBpcyBnaXZlbiwgaXQgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGBfLnRlbXBsYXRlU2V0dGluZ3NgIHZhbHVlcy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBJbiB0aGUgZGV2ZWxvcG1lbnQgYnVpbGQgYF8udGVtcGxhdGVgIHV0aWxpemVzXG4gICAgICogW3NvdXJjZVVSTHNdKGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL2RldmVsb3BlcnRvb2xzL3NvdXJjZW1hcHMvI3RvYy1zb3VyY2V1cmwpXG4gICAgICogZm9yIGVhc2llciBkZWJ1Z2dpbmcuXG4gICAgICpcbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBwcmVjb21waWxpbmcgdGVtcGxhdGVzIHNlZVxuICAgICAqIFtsb2Rhc2gncyBjdXN0b20gYnVpbGRzIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vbG9kYXNoLmNvbS9jdXN0b20tYnVpbGRzKS5cbiAgICAgKlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIENocm9tZSBleHRlbnNpb24gc2FuZGJveGVzIHNlZVxuICAgICAqIFtDaHJvbWUncyBleHRlbnNpb25zIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZXh0ZW5zaW9ucy9zYW5kYm94aW5nRXZhbCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSB0ZW1wbGF0ZSBzdHJpbmcuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IFtvcHRpb25zLmVzY2FwZT1fLnRlbXBsYXRlU2V0dGluZ3MuZXNjYXBlXVxuICAgICAqICBUaGUgSFRNTCBcImVzY2FwZVwiIGRlbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuZXZhbHVhdGU9Xy50ZW1wbGF0ZVNldHRpbmdzLmV2YWx1YXRlXVxuICAgICAqICBUaGUgXCJldmFsdWF0ZVwiIGRlbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaW1wb3J0cz1fLnRlbXBsYXRlU2V0dGluZ3MuaW1wb3J0c11cbiAgICAgKiAgQW4gb2JqZWN0IHRvIGltcG9ydCBpbnRvIHRoZSB0ZW1wbGF0ZSBhcyBmcmVlIHZhcmlhYmxlcy5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuaW50ZXJwb2xhdGU9Xy50ZW1wbGF0ZVNldHRpbmdzLmludGVycG9sYXRlXVxuICAgICAqICBUaGUgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc291cmNlVVJMPSdsb2Rhc2gudGVtcGxhdGVTb3VyY2VzW25dJ11cbiAgICAgKiAgVGhlIHNvdXJjZVVSTCBvZiB0aGUgY29tcGlsZWQgdGVtcGxhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnZhcmlhYmxlPSdvYmonXVxuICAgICAqICBUaGUgZGF0YSBvYmplY3QgdmFyaWFibGUgbmFtZS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY29tcGlsZWQgdGVtcGxhdGUgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIC8vIFVzZSB0aGUgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlciB0byBjcmVhdGUgYSBjb21waWxlZCB0ZW1wbGF0ZS5cbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyA8JT0gdXNlciAlPiEnKTtcbiAgICAgKiBjb21waWxlZCh7ICd1c2VyJzogJ2ZyZWQnIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBmcmVkISdcbiAgICAgKlxuICAgICAqIC8vIFVzZSB0aGUgSFRNTCBcImVzY2FwZVwiIGRlbGltaXRlciB0byBlc2NhcGUgZGF0YSBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnPGI+PCUtIHZhbHVlICU+PC9iPicpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3ZhbHVlJzogJzxzY3JpcHQ+JyB9KTtcbiAgICAgKiAvLyA9PiAnPGI+Jmx0O3NjcmlwdCZndDs8L2I+J1xuICAgICAqXG4gICAgICogLy8gVXNlIHRoZSBcImV2YWx1YXRlXCIgZGVsaW1pdGVyIHRvIGV4ZWN1dGUgSmF2YVNjcmlwdCBhbmQgZ2VuZXJhdGUgSFRNTC5cbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8JSBfLmZvckVhY2godXNlcnMsIGZ1bmN0aW9uKHVzZXIpIHsgJT48bGk+PCUtIHVzZXIgJT48L2xpPjwlIH0pOyAlPicpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3VzZXJzJzogWydmcmVkJywgJ2Jhcm5leSddIH0pO1xuICAgICAqIC8vID0+ICc8bGk+ZnJlZDwvbGk+PGxpPmJhcm5leTwvbGk+J1xuICAgICAqXG4gICAgICogLy8gVXNlIHRoZSBpbnRlcm5hbCBgcHJpbnRgIGZ1bmN0aW9uIGluIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXJzLlxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJzwlIHByaW50KFwiaGVsbG8gXCIgKyB1c2VyKTsgJT4hJyk7XG4gICAgICogY29tcGlsZWQoeyAndXNlcic6ICdiYXJuZXknIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBiYXJuZXkhJ1xuICAgICAqXG4gICAgICogLy8gVXNlIHRoZSBFUyB0ZW1wbGF0ZSBsaXRlcmFsIGRlbGltaXRlciBhcyBhbiBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyLlxuICAgICAqIC8vIERpc2FibGUgc3VwcG9ydCBieSByZXBsYWNpbmcgdGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIuXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gJHsgdXNlciB9IScpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3VzZXInOiAncGViYmxlcycgfSk7XG4gICAgICogLy8gPT4gJ2hlbGxvIHBlYmJsZXMhJ1xuICAgICAqXG4gICAgICogLy8gVXNlIGJhY2tzbGFzaGVzIHRvIHRyZWF0IGRlbGltaXRlcnMgYXMgcGxhaW4gdGV4dC5cbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8JT0gXCJcXFxcPCUtIHZhbHVlICVcXFxcPlwiICU+Jyk7XG4gICAgICogY29tcGlsZWQoeyAndmFsdWUnOiAnaWdub3JlZCcgfSk7XG4gICAgICogLy8gPT4gJzwlLSB2YWx1ZSAlPidcbiAgICAgKlxuICAgICAqIC8vIFVzZSB0aGUgYGltcG9ydHNgIG9wdGlvbiB0byBpbXBvcnQgYGpRdWVyeWAgYXMgYGpxYC5cbiAgICAgKiB2YXIgdGV4dCA9ICc8JSBqcS5lYWNoKHVzZXJzLCBmdW5jdGlvbih1c2VyKSB7ICU+PGxpPjwlLSB1c2VyICU+PC9saT48JSB9KTsgJT4nO1xuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUodGV4dCwgeyAnaW1wb3J0cyc6IHsgJ2pxJzogalF1ZXJ5IH0gfSk7XG4gICAgICogY29tcGlsZWQoeyAndXNlcnMnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSk7XG4gICAgICogLy8gPT4gJzxsaT5mcmVkPC9saT48bGk+YmFybmV5PC9saT4nXG4gICAgICpcbiAgICAgKiAvLyBVc2UgdGhlIGBzb3VyY2VVUkxgIG9wdGlvbiB0byBzcGVjaWZ5IGEgY3VzdG9tIHNvdXJjZVVSTCBmb3IgdGhlIHRlbXBsYXRlLlxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSB1c2VyICU+IScsIHsgJ3NvdXJjZVVSTCc6ICcvYmFzaWMvZ3JlZXRpbmcuanN0JyB9KTtcbiAgICAgKiBjb21waWxlZChkYXRhKTtcbiAgICAgKiAvLyA9PiBGaW5kIHRoZSBzb3VyY2Ugb2YgXCJncmVldGluZy5qc3RcIiB1bmRlciB0aGUgU291cmNlcyB0YWIgb3IgUmVzb3VyY2VzIHBhbmVsIG9mIHRoZSB3ZWIgaW5zcGVjdG9yLlxuICAgICAqXG4gICAgICogLy8gVXNlIHRoZSBgdmFyaWFibGVgIG9wdGlvbiB0byBlbnN1cmUgYSB3aXRoLXN0YXRlbWVudCBpc24ndCB1c2VkIGluIHRoZSBjb21waWxlZCB0ZW1wbGF0ZS5cbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoaSA8JT0gZGF0YS51c2VyICU+IScsIHsgJ3ZhcmlhYmxlJzogJ2RhdGEnIH0pO1xuICAgICAqIGNvbXBpbGVkLnNvdXJjZTtcbiAgICAgKiAvLyA9PiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICogLy8gICB2YXIgX190LCBfX3AgPSAnJztcbiAgICAgKiAvLyAgIF9fcCArPSAnaGkgJyArICgoX190ID0gKCBkYXRhLnVzZXIgKSkgPT0gbnVsbCA/ICcnIDogX190KSArICchJztcbiAgICAgKiAvLyAgIHJldHVybiBfX3A7XG4gICAgICogLy8gfVxuICAgICAqXG4gICAgICogLy8gVXNlIGN1c3RvbSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLlxuICAgICAqIF8udGVtcGxhdGVTZXR0aW5ncy5pbnRlcnBvbGF0ZSA9IC97eyhbXFxzXFxTXSs/KX19L2c7XG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8ge3sgdXNlciB9fSEnKTtcbiAgICAgKiBjb21waWxlZCh7ICd1c2VyJzogJ211c3RhY2hlJyB9KTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gbXVzdGFjaGUhJ1xuICAgICAqXG4gICAgICogLy8gVXNlIHRoZSBgc291cmNlYCBwcm9wZXJ0eSB0byBpbmxpbmUgY29tcGlsZWQgdGVtcGxhdGVzIGZvciBtZWFuaW5nZnVsXG4gICAgICogLy8gbGluZSBudW1iZXJzIGluIGVycm9yIG1lc3NhZ2VzIGFuZCBzdGFjayB0cmFjZXMuXG4gICAgICogZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2pzdC5qcycpLCAnXFxcbiAgICAgKiAgIHZhciBKU1QgPSB7XFxcbiAgICAgKiAgICAgXCJtYWluXCI6ICcgKyBfLnRlbXBsYXRlKG1haW5UZXh0KS5zb3VyY2UgKyAnXFxcbiAgICAgKiAgIH07XFxcbiAgICAgKiAnKTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0ZW1wbGF0ZShzdHJpbmcsIG9wdGlvbnMsIGd1YXJkKSB7XG4gICAgICAvLyBCYXNlZCBvbiBKb2huIFJlc2lnJ3MgYHRtcGxgIGltcGxlbWVudGF0aW9uXG4gICAgICAvLyAoaHR0cDovL2Vqb2huLm9yZy9ibG9nL2phdmFzY3JpcHQtbWljcm8tdGVtcGxhdGluZy8pXG4gICAgICAvLyBhbmQgTGF1cmEgRG9rdG9yb3ZhJ3MgZG9ULmpzIChodHRwczovL2dpdGh1Yi5jb20vb2xhZG8vZG9UKS5cbiAgICAgIHZhciBzZXR0aW5ncyA9IGxvZGFzaC50ZW1wbGF0ZVNldHRpbmdzO1xuXG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc3RyaW5nLCBvcHRpb25zLCBndWFyZCkpIHtcbiAgICAgICAgb3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHN0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBvcHRpb25zID0gYXNzaWduSW5XaXRoKHt9LCBvcHRpb25zLCBzZXR0aW5ncywgY3VzdG9tRGVmYXVsdHNBc3NpZ25Jbik7XG5cbiAgICAgIHZhciBpbXBvcnRzID0gYXNzaWduSW5XaXRoKHt9LCBvcHRpb25zLmltcG9ydHMsIHNldHRpbmdzLmltcG9ydHMsIGN1c3RvbURlZmF1bHRzQXNzaWduSW4pLFxuICAgICAgICAgIGltcG9ydHNLZXlzID0ga2V5cyhpbXBvcnRzKSxcbiAgICAgICAgICBpbXBvcnRzVmFsdWVzID0gYmFzZVZhbHVlcyhpbXBvcnRzLCBpbXBvcnRzS2V5cyk7XG5cbiAgICAgIHZhciBpc0VzY2FwaW5nLFxuICAgICAgICAgIGlzRXZhbHVhdGluZyxcbiAgICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICAgaW50ZXJwb2xhdGUgPSBvcHRpb25zLmludGVycG9sYXRlIHx8IHJlTm9NYXRjaCxcbiAgICAgICAgICBzb3VyY2UgPSBcIl9fcCArPSAnXCI7XG5cbiAgICAgIC8vIENvbXBpbGUgdGhlIHJlZ2V4cCB0byBtYXRjaCBlYWNoIGRlbGltaXRlci5cbiAgICAgIHZhciByZURlbGltaXRlcnMgPSBSZWdFeHAoXG4gICAgICAgIChvcHRpb25zLmVzY2FwZSB8fCByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXG4gICAgICAgIGludGVycG9sYXRlLnNvdXJjZSArICd8JyArXG4gICAgICAgIChpbnRlcnBvbGF0ZSA9PT0gcmVJbnRlcnBvbGF0ZSA/IHJlRXNUZW1wbGF0ZSA6IHJlTm9NYXRjaCkuc291cmNlICsgJ3wnICtcbiAgICAgICAgKG9wdGlvbnMuZXZhbHVhdGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyAnfCQnXG4gICAgICAsICdnJyk7XG5cbiAgICAgIC8vIFVzZSBhIHNvdXJjZVVSTCBmb3IgZWFzaWVyIGRlYnVnZ2luZy5cbiAgICAgIC8vIFRoZSBzb3VyY2VVUkwgZ2V0cyBpbmplY3RlZCBpbnRvIHRoZSBzb3VyY2UgdGhhdCdzIGV2YWwtZWQsIHNvIGJlIGNhcmVmdWxcbiAgICAgIC8vIHRvIG5vcm1hbGl6ZSBhbGwga2luZHMgb2Ygd2hpdGVzcGFjZSwgc28gZS5nLiBuZXdsaW5lcyAoYW5kIHVuaWNvZGUgdmVyc2lvbnMgb2YgaXQpIGNhbid0IHNuZWFrIGluXG4gICAgICAvLyBhbmQgZXNjYXBlIHRoZSBjb21tZW50LCB0aHVzIGluamVjdGluZyBjb2RlIHRoYXQgZ2V0cyBldmFsZWQuXG4gICAgICB2YXIgc291cmNlVVJMID0gJy8vIyBzb3VyY2VVUkw9JyArXG4gICAgICAgIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsICdzb3VyY2VVUkwnKVxuICAgICAgICAgID8gKG9wdGlvbnMuc291cmNlVVJMICsgJycpLnJlcGxhY2UoL1xccy9nLCAnICcpXG4gICAgICAgICAgOiAoJ2xvZGFzaC50ZW1wbGF0ZVNvdXJjZXNbJyArICgrK3RlbXBsYXRlQ291bnRlcikgKyAnXScpXG4gICAgICAgICkgKyAnXFxuJztcblxuICAgICAgc3RyaW5nLnJlcGxhY2UocmVEZWxpbWl0ZXJzLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlVmFsdWUsIGludGVycG9sYXRlVmFsdWUsIGVzVGVtcGxhdGVWYWx1ZSwgZXZhbHVhdGVWYWx1ZSwgb2Zmc2V0KSB7XG4gICAgICAgIGludGVycG9sYXRlVmFsdWUgfHwgKGludGVycG9sYXRlVmFsdWUgPSBlc1RlbXBsYXRlVmFsdWUpO1xuXG4gICAgICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgY2FuJ3QgYmUgaW5jbHVkZWQgaW4gc3RyaW5nIGxpdGVyYWxzLlxuICAgICAgICBzb3VyY2UgKz0gc3RyaW5nLnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UocmVVbmVzY2FwZWRTdHJpbmcsIGVzY2FwZVN0cmluZ0NoYXIpO1xuXG4gICAgICAgIC8vIFJlcGxhY2UgZGVsaW1pdGVycyB3aXRoIHNuaXBwZXRzLlxuICAgICAgICBpZiAoZXNjYXBlVmFsdWUpIHtcbiAgICAgICAgICBpc0VzY2FwaW5nID0gdHJ1ZTtcbiAgICAgICAgICBzb3VyY2UgKz0gXCInICtcXG5fX2UoXCIgKyBlc2NhcGVWYWx1ZSArIFwiKSArXFxuJ1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmFsdWF0ZVZhbHVlKSB7XG4gICAgICAgICAgaXNFdmFsdWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGVWYWx1ZSArIFwiO1xcbl9fcCArPSAnXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVycG9sYXRlVmFsdWUpIHtcbiAgICAgICAgICBzb3VyY2UgKz0gXCInICtcXG4oKF9fdCA9IChcIiArIGludGVycG9sYXRlVmFsdWUgKyBcIikpID09IG51bGwgPyAnJyA6IF9fdCkgK1xcbidcIjtcbiAgICAgICAgfVxuICAgICAgICBpbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDtcblxuICAgICAgICAvLyBUaGUgSlMgZW5naW5lIGVtYmVkZGVkIGluIEFkb2JlIHByb2R1Y3RzIG5lZWRzIGBtYXRjaGAgcmV0dXJuZWQgaW5cbiAgICAgICAgLy8gb3JkZXIgdG8gcHJvZHVjZSB0aGUgY29ycmVjdCBgb2Zmc2V0YCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfSk7XG5cbiAgICAgIHNvdXJjZSArPSBcIic7XFxuXCI7XG5cbiAgICAgIC8vIElmIGB2YXJpYWJsZWAgaXMgbm90IHNwZWNpZmllZCB3cmFwIGEgd2l0aC1zdGF0ZW1lbnQgYXJvdW5kIHRoZSBnZW5lcmF0ZWRcbiAgICAgIC8vIGNvZGUgdG8gYWRkIHRoZSBkYXRhIG9iamVjdCB0byB0aGUgdG9wIG9mIHRoZSBzY29wZSBjaGFpbi5cbiAgICAgIHZhciB2YXJpYWJsZSA9IGhhc093blByb3BlcnR5LmNhbGwob3B0aW9ucywgJ3ZhcmlhYmxlJykgJiYgb3B0aW9ucy52YXJpYWJsZTtcbiAgICAgIGlmICghdmFyaWFibGUpIHtcbiAgICAgICAgc291cmNlID0gJ3dpdGggKG9iaikge1xcbicgKyBzb3VyY2UgKyAnXFxufVxcbic7XG4gICAgICB9XG4gICAgICAvLyBUaHJvdyBhbiBlcnJvciBpZiBhIGZvcmJpZGRlbiBjaGFyYWN0ZXIgd2FzIGZvdW5kIGluIGB2YXJpYWJsZWAsIHRvIHByZXZlbnRcbiAgICAgIC8vIHBvdGVudGlhbCBjb21tYW5kIGluamVjdGlvbiBhdHRhY2tzLlxuICAgICAgZWxzZSBpZiAocmVGb3JiaWRkZW5JZGVudGlmaWVyQ2hhcnMudGVzdCh2YXJpYWJsZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfVEVNUExfVkFSX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbnVwIGNvZGUgYnkgc3RyaXBwaW5nIGVtcHR5IHN0cmluZ3MuXG4gICAgICBzb3VyY2UgPSAoaXNFdmFsdWF0aW5nID8gc291cmNlLnJlcGxhY2UocmVFbXB0eVN0cmluZ0xlYWRpbmcsICcnKSA6IHNvdXJjZSlcbiAgICAgICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ01pZGRsZSwgJyQxJylcbiAgICAgICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ1RyYWlsaW5nLCAnJDE7Jyk7XG5cbiAgICAgIC8vIEZyYW1lIGNvZGUgYXMgdGhlIGZ1bmN0aW9uIGJvZHkuXG4gICAgICBzb3VyY2UgPSAnZnVuY3Rpb24oJyArICh2YXJpYWJsZSB8fCAnb2JqJykgKyAnKSB7XFxuJyArXG4gICAgICAgICh2YXJpYWJsZVxuICAgICAgICAgID8gJydcbiAgICAgICAgICA6ICdvYmogfHwgKG9iaiA9IHt9KTtcXG4nXG4gICAgICAgICkgK1xuICAgICAgICBcInZhciBfX3QsIF9fcCA9ICcnXCIgK1xuICAgICAgICAoaXNFc2NhcGluZ1xuICAgICAgICAgICA/ICcsIF9fZSA9IF8uZXNjYXBlJ1xuICAgICAgICAgICA6ICcnXG4gICAgICAgICkgK1xuICAgICAgICAoaXNFdmFsdWF0aW5nXG4gICAgICAgICAgPyAnLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcXG4nICtcbiAgICAgICAgICAgIFwiZnVuY3Rpb24gcHJpbnQoKSB7IF9fcCArPSBfX2ouY2FsbChhcmd1bWVudHMsICcnKSB9XFxuXCJcbiAgICAgICAgICA6ICc7XFxuJ1xuICAgICAgICApICtcbiAgICAgICAgc291cmNlICtcbiAgICAgICAgJ3JldHVybiBfX3BcXG59JztcblxuICAgICAgdmFyIHJlc3VsdCA9IGF0dGVtcHQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBGdW5jdGlvbihpbXBvcnRzS2V5cywgc291cmNlVVJMICsgJ3JldHVybiAnICsgc291cmNlKVxuICAgICAgICAgIC5hcHBseSh1bmRlZmluZWQsIGltcG9ydHNWYWx1ZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFByb3ZpZGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uJ3Mgc291cmNlIGJ5IGl0cyBgdG9TdHJpbmdgIG1ldGhvZCBvclxuICAgICAgLy8gdGhlIGBzb3VyY2VgIHByb3BlcnR5IGFzIGEgY29udmVuaWVuY2UgZm9yIGlubGluaW5nIGNvbXBpbGVkIHRlbXBsYXRlcy5cbiAgICAgIHJlc3VsdC5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBpZiAoaXNFcnJvcihyZXN1bHQpKSB7XG4gICAgICAgIHRocm93IHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AsIGFzIGEgd2hvbGUsIHRvIGxvd2VyIGNhc2UganVzdCBsaWtlXG4gICAgICogW1N0cmluZyN0b0xvd2VyQ2FzZV0oaHR0cHM6Ly9tZG4uaW8vdG9Mb3dlckNhc2UpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgbG93ZXIgY2FzZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRvTG93ZXIoJy0tRm9vLUJhci0tJyk7XG4gICAgICogLy8gPT4gJy0tZm9vLWJhci0tJ1xuICAgICAqXG4gICAgICogXy50b0xvd2VyKCdmb29CYXInKTtcbiAgICAgKiAvLyA9PiAnZm9vYmFyJ1xuICAgICAqXG4gICAgICogXy50b0xvd2VyKCdfX0ZPT19CQVJfXycpO1xuICAgICAqIC8vID0+ICdfX2Zvb19iYXJfXydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b0xvd2VyKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcodmFsdWUpLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AsIGFzIGEgd2hvbGUsIHRvIHVwcGVyIGNhc2UganVzdCBsaWtlXG4gICAgICogW1N0cmluZyN0b1VwcGVyQ2FzZV0oaHR0cHM6Ly9tZG4uaW8vdG9VcHBlckNhc2UpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdXBwZXIgY2FzZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRvVXBwZXIoJy0tZm9vLWJhci0tJyk7XG4gICAgICogLy8gPT4gJy0tRk9PLUJBUi0tJ1xuICAgICAqXG4gICAgICogXy50b1VwcGVyKCdmb29CYXInKTtcbiAgICAgKiAvLyA9PiAnRk9PQkFSJ1xuICAgICAqXG4gICAgICogXy50b1VwcGVyKCdfX2Zvb19iYXJfXycpO1xuICAgICAqIC8vID0+ICdfX0ZPT19CQVJfXydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b1VwcGVyKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcodmFsdWUpLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlIG9yIHNwZWNpZmllZCBjaGFyYWN0ZXJzIGZyb20gYHN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gdHJpbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NoYXJzPXdoaXRlc3BhY2VdIFRoZSBjaGFyYWN0ZXJzIHRvIHRyaW0uXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGFuIGl0ZXJhdGVlIGZvciBtZXRob2RzIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB0cmltbWVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50cmltKCcgIGFiYyAgJyk7XG4gICAgICogLy8gPT4gJ2FiYydcbiAgICAgKlxuICAgICAqIF8udHJpbSgnLV8tYWJjLV8tJywgJ18tJyk7XG4gICAgICogLy8gPT4gJ2FiYydcbiAgICAgKlxuICAgICAqIF8ubWFwKFsnICBmb28gICcsICcgIGJhciAgJ10sIF8udHJpbSk7XG4gICAgICogLy8gPT4gWydmb28nLCAnYmFyJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0cmltKHN0cmluZywgY2hhcnMsIGd1YXJkKSB7XG4gICAgICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuICAgICAgaWYgKHN0cmluZyAmJiAoZ3VhcmQgfHwgY2hhcnMgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VUcmltKHN0cmluZyk7XG4gICAgICB9XG4gICAgICBpZiAoIXN0cmluZyB8fCAhKGNoYXJzID0gYmFzZVRvU3RyaW5nKGNoYXJzKSkpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIH1cbiAgICAgIHZhciBzdHJTeW1ib2xzID0gc3RyaW5nVG9BcnJheShzdHJpbmcpLFxuICAgICAgICAgIGNoclN5bWJvbHMgPSBzdHJpbmdUb0FycmF5KGNoYXJzKSxcbiAgICAgICAgICBzdGFydCA9IGNoYXJzU3RhcnRJbmRleChzdHJTeW1ib2xzLCBjaHJTeW1ib2xzKSxcbiAgICAgICAgICBlbmQgPSBjaGFyc0VuZEluZGV4KHN0clN5bWJvbHMsIGNoclN5bWJvbHMpICsgMTtcblxuICAgICAgcmV0dXJuIGNhc3RTbGljZShzdHJTeW1ib2xzLCBzdGFydCwgZW5kKS5qb2luKCcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRyYWlsaW5nIHdoaXRlc3BhY2Ugb3Igc3BlY2lmaWVkIGNoYXJhY3RlcnMgZnJvbSBgc3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB0cmltLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9d2hpdGVzcGFjZV0gVGhlIGNoYXJhY3RlcnMgdG8gdHJpbS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHRyaW1tZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRyaW1FbmQoJyAgYWJjICAnKTtcbiAgICAgKiAvLyA9PiAnICBhYmMnXG4gICAgICpcbiAgICAgKiBfLnRyaW1FbmQoJy1fLWFiYy1fLScsICdfLScpO1xuICAgICAqIC8vID0+ICctXy1hYmMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJpbUVuZChzdHJpbmcsIGNoYXJzLCBndWFyZCkge1xuICAgICAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIGlmIChzdHJpbmcgJiYgKGd1YXJkIHx8IGNoYXJzID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmcuc2xpY2UoMCwgdHJpbW1lZEVuZEluZGV4KHN0cmluZykgKyAxKTtcbiAgICAgIH1cbiAgICAgIGlmICghc3RyaW5nIHx8ICEoY2hhcnMgPSBiYXNlVG9TdHJpbmcoY2hhcnMpKSkge1xuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgfVxuICAgICAgdmFyIHN0clN5bWJvbHMgPSBzdHJpbmdUb0FycmF5KHN0cmluZyksXG4gICAgICAgICAgZW5kID0gY2hhcnNFbmRJbmRleChzdHJTeW1ib2xzLCBzdHJpbmdUb0FycmF5KGNoYXJzKSkgKyAxO1xuXG4gICAgICByZXR1cm4gY2FzdFNsaWNlKHN0clN5bWJvbHMsIDAsIGVuZCkuam9pbignJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBsZWFkaW5nIHdoaXRlc3BhY2Ugb3Igc3BlY2lmaWVkIGNoYXJhY3RlcnMgZnJvbSBgc3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB0cmltLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9d2hpdGVzcGFjZV0gVGhlIGNoYXJhY3RlcnMgdG8gdHJpbS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHRyaW1tZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRyaW1TdGFydCgnICBhYmMgICcpO1xuICAgICAqIC8vID0+ICdhYmMgICdcbiAgICAgKlxuICAgICAqIF8udHJpbVN0YXJ0KCctXy1hYmMtXy0nLCAnXy0nKTtcbiAgICAgKiAvLyA9PiAnYWJjLV8tJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRyaW1TdGFydChzdHJpbmcsIGNoYXJzLCBndWFyZCkge1xuICAgICAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIGlmIChzdHJpbmcgJiYgKGd1YXJkIHx8IGNoYXJzID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZShyZVRyaW1TdGFydCwgJycpO1xuICAgICAgfVxuICAgICAgaWYgKCFzdHJpbmcgfHwgIShjaGFycyA9IGJhc2VUb1N0cmluZyhjaGFycykpKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICB9XG4gICAgICB2YXIgc3RyU3ltYm9scyA9IHN0cmluZ1RvQXJyYXkoc3RyaW5nKSxcbiAgICAgICAgICBzdGFydCA9IGNoYXJzU3RhcnRJbmRleChzdHJTeW1ib2xzLCBzdHJpbmdUb0FycmF5KGNoYXJzKSk7XG5cbiAgICAgIHJldHVybiBjYXN0U2xpY2Uoc3RyU3ltYm9scywgc3RhcnQpLmpvaW4oJycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRydW5jYXRlcyBgc3RyaW5nYCBpZiBpdCdzIGxvbmdlciB0aGFuIHRoZSBnaXZlbiBtYXhpbXVtIHN0cmluZyBsZW5ndGguXG4gICAgICogVGhlIGxhc3QgY2hhcmFjdGVycyBvZiB0aGUgdHJ1bmNhdGVkIHN0cmluZyBhcmUgcmVwbGFjZWQgd2l0aCB0aGUgb21pc3Npb25cbiAgICAgKiBzdHJpbmcgd2hpY2ggZGVmYXVsdHMgdG8gXCIuLi5cIi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB0cnVuY2F0ZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubGVuZ3RoPTMwXSBUaGUgbWF4aW11bSBzdHJpbmcgbGVuZ3RoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5vbWlzc2lvbj0nLi4uJ10gVGhlIHN0cmluZyB0byBpbmRpY2F0ZSB0ZXh0IGlzIG9taXR0ZWQuXG4gICAgICogQHBhcmFtIHtSZWdFeHB8c3RyaW5nfSBbb3B0aW9ucy5zZXBhcmF0b3JdIFRoZSBzZXBhcmF0b3IgcGF0dGVybiB0byB0cnVuY2F0ZSB0by5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB0cnVuY2F0ZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRydW5jYXRlKCdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWdoYm9yaW5vJyk7XG4gICAgICogLy8gPT4gJ2hpLWRpZGRseS1obyB0aGVyZSwgbmVpZ2hiby4uLidcbiAgICAgKlxuICAgICAqIF8udHJ1bmNhdGUoJ2hpLWRpZGRseS1obyB0aGVyZSwgbmVpZ2hib3Jpbm8nLCB7XG4gICAgICogICAnbGVuZ3RoJzogMjQsXG4gICAgICogICAnc2VwYXJhdG9yJzogJyAnXG4gICAgICogfSk7XG4gICAgICogLy8gPT4gJ2hpLWRpZGRseS1obyB0aGVyZSwuLi4nXG4gICAgICpcbiAgICAgKiBfLnRydW5jYXRlKCdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWdoYm9yaW5vJywge1xuICAgICAqICAgJ2xlbmd0aCc6IDI0LFxuICAgICAqICAgJ3NlcGFyYXRvcic6IC8sPyArL1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+ICdoaS1kaWRkbHktaG8gdGhlcmUuLi4nXG4gICAgICpcbiAgICAgKiBfLnRydW5jYXRlKCdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWdoYm9yaW5vJywge1xuICAgICAqICAgJ29taXNzaW9uJzogJyBbLi4uXSdcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAnaGktZGlkZGx5LWhvIHRoZXJlLCBuZWlnIFsuLi5dJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRydW5jYXRlKHN0cmluZywgb3B0aW9ucykge1xuICAgICAgdmFyIGxlbmd0aCA9IERFRkFVTFRfVFJVTkNfTEVOR1RILFxuICAgICAgICAgIG9taXNzaW9uID0gREVGQVVMVF9UUlVOQ19PTUlTU0lPTjtcblxuICAgICAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIHZhciBzZXBhcmF0b3IgPSAnc2VwYXJhdG9yJyBpbiBvcHRpb25zID8gb3B0aW9ucy5zZXBhcmF0b3IgOiBzZXBhcmF0b3I7XG4gICAgICAgIGxlbmd0aCA9ICdsZW5ndGgnIGluIG9wdGlvbnMgPyB0b0ludGVnZXIob3B0aW9ucy5sZW5ndGgpIDogbGVuZ3RoO1xuICAgICAgICBvbWlzc2lvbiA9ICdvbWlzc2lvbicgaW4gb3B0aW9ucyA/IGJhc2VUb1N0cmluZyhvcHRpb25zLm9taXNzaW9uKSA6IG9taXNzaW9uO1xuICAgICAgfVxuICAgICAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcblxuICAgICAgdmFyIHN0ckxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4gICAgICBpZiAoaGFzVW5pY29kZShzdHJpbmcpKSB7XG4gICAgICAgIHZhciBzdHJTeW1ib2xzID0gc3RyaW5nVG9BcnJheShzdHJpbmcpO1xuICAgICAgICBzdHJMZW5ndGggPSBzdHJTeW1ib2xzLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChsZW5ndGggPj0gc3RyTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICB9XG4gICAgICB2YXIgZW5kID0gbGVuZ3RoIC0gc3RyaW5nU2l6ZShvbWlzc2lvbik7XG4gICAgICBpZiAoZW5kIDwgMSkge1xuICAgICAgICByZXR1cm4gb21pc3Npb247XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gc3RyU3ltYm9sc1xuICAgICAgICA/IGNhc3RTbGljZShzdHJTeW1ib2xzLCAwLCBlbmQpLmpvaW4oJycpXG4gICAgICAgIDogc3RyaW5nLnNsaWNlKDAsIGVuZCk7XG5cbiAgICAgIGlmIChzZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgb21pc3Npb247XG4gICAgICB9XG4gICAgICBpZiAoc3RyU3ltYm9scykge1xuICAgICAgICBlbmQgKz0gKHJlc3VsdC5sZW5ndGggLSBlbmQpO1xuICAgICAgfVxuICAgICAgaWYgKGlzUmVnRXhwKHNlcGFyYXRvcikpIHtcbiAgICAgICAgaWYgKHN0cmluZy5zbGljZShlbmQpLnNlYXJjaChzZXBhcmF0b3IpKSB7XG4gICAgICAgICAgdmFyIG1hdGNoLFxuICAgICAgICAgICAgICBzdWJzdHJpbmcgPSByZXN1bHQ7XG5cbiAgICAgICAgICBpZiAoIXNlcGFyYXRvci5nbG9iYWwpIHtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IFJlZ0V4cChzZXBhcmF0b3Iuc291cmNlLCB0b1N0cmluZyhyZUZsYWdzLmV4ZWMoc2VwYXJhdG9yKSkgKyAnZycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXBhcmF0b3IubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICB3aGlsZSAoKG1hdGNoID0gc2VwYXJhdG9yLmV4ZWMoc3Vic3RyaW5nKSkpIHtcbiAgICAgICAgICAgIHZhciBuZXdFbmQgPSBtYXRjaC5pbmRleDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDAsIG5ld0VuZCA9PT0gdW5kZWZpbmVkID8gZW5kIDogbmV3RW5kKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdHJpbmcuaW5kZXhPZihiYXNlVG9TdHJpbmcoc2VwYXJhdG9yKSwgZW5kKSAhPSBlbmQpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gcmVzdWx0Lmxhc3RJbmRleE9mKHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDAsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdCArIG9taXNzaW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBpbnZlcnNlIG9mIGBfLmVzY2FwZWA7IHRoaXMgbWV0aG9kIGNvbnZlcnRzIHRoZSBIVE1MIGVudGl0aWVzXG4gICAgICogYCZhbXA7YCwgYCZsdDtgLCBgJmd0O2AsIGAmcXVvdDtgLCBhbmQgYCYjMzk7YCBpbiBgc3RyaW5nYCB0b1xuICAgICAqIHRoZWlyIGNvcnJlc3BvbmRpbmcgY2hhcmFjdGVycy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBObyBvdGhlciBIVE1MIGVudGl0aWVzIGFyZSB1bmVzY2FwZWQuIFRvIHVuZXNjYXBlIGFkZGl0aW9uYWxcbiAgICAgKiBIVE1MIGVudGl0aWVzIHVzZSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkgbGlrZSBbX2hlX10oaHR0cHM6Ly9tdGhzLmJlL2hlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAwLjYuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB1bmVzY2FwZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnVuZXNjYXBlKCdmcmVkLCBiYXJuZXksICZhbXA7IHBlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW5lc2NhcGUoc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuICAgICAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNFc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgICAgID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVkSHRtbCwgdW5lc2NhcGVIdG1sQ2hhcilcbiAgICAgICAgOiBzdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AsIGFzIHNwYWNlIHNlcGFyYXRlZCB3b3JkcywgdG8gdXBwZXIgY2FzZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVwcGVyIGNhc2VkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51cHBlckNhc2UoJy0tZm9vLWJhcicpO1xuICAgICAqIC8vID0+ICdGT08gQkFSJ1xuICAgICAqXG4gICAgICogXy51cHBlckNhc2UoJ2Zvb0JhcicpO1xuICAgICAqIC8vID0+ICdGT08gQkFSJ1xuICAgICAqXG4gICAgICogXy51cHBlckNhc2UoJ19fZm9vX2Jhcl9fJyk7XG4gICAgICogLy8gPT4gJ0ZPTyBCQVInXG4gICAgICovXG4gICAgdmFyIHVwcGVyQ2FzZSA9IGNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LCB3b3JkLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIChpbmRleCA/ICcgJyA6ICcnKSArIHdvcmQudG9VcHBlckNhc2UoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYHN0cmluZ2AgdG8gdXBwZXIgY2FzZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udXBwZXJGaXJzdCgnZnJlZCcpO1xuICAgICAqIC8vID0+ICdGcmVkJ1xuICAgICAqXG4gICAgICogXy51cHBlckZpcnN0KCdGUkVEJyk7XG4gICAgICogLy8gPT4gJ0ZSRUQnXG4gICAgICovXG4gICAgdmFyIHVwcGVyRmlyc3QgPSBjcmVhdGVDYXNlRmlyc3QoJ3RvVXBwZXJDYXNlJyk7XG5cbiAgICAvKipcbiAgICAgKiBTcGxpdHMgYHN0cmluZ2AgaW50byBhbiBhcnJheSBvZiBpdHMgd29yZHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cHxzdHJpbmd9IFtwYXR0ZXJuXSBUaGUgcGF0dGVybiB0byBtYXRjaCB3b3Jkcy5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgd29yZHMgb2YgYHN0cmluZ2AuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ud29yZHMoJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJyk7XG4gICAgICogLy8gPT4gWydmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIF8ud29yZHMoJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJywgL1teLCBdKy9nKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnLCAnYmFybmV5JywgJyYnLCAncGViYmxlcyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gd29yZHMoc3RyaW5nLCBwYXR0ZXJuLCBndWFyZCkge1xuICAgICAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHBhdHRlcm4gPSBndWFyZCA/IHVuZGVmaW5lZCA6IHBhdHRlcm47XG5cbiAgICAgIGlmIChwYXR0ZXJuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGhhc1VuaWNvZGVXb3JkKHN0cmluZykgPyB1bmljb2RlV29yZHMoc3RyaW5nKSA6IGFzY2lpV29yZHMoc3RyaW5nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHJpbmcubWF0Y2gocGF0dGVybikgfHwgW107XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQXR0ZW1wdHMgdG8gaW52b2tlIGBmdW5jYCwgcmV0dXJuaW5nIGVpdGhlciB0aGUgcmVzdWx0IG9yIHRoZSBjYXVnaHQgZXJyb3JcbiAgICAgKiBvYmplY3QuIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQncyBpbnZva2VkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhdHRlbXB0LlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBgZnVuY2AgcmVzdWx0IG9yIGVycm9yIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogLy8gQXZvaWQgdGhyb3dpbmcgZXJyb3JzIGZvciBpbnZhbGlkIHNlbGVjdG9ycy5cbiAgICAgKiB2YXIgZWxlbWVudHMgPSBfLmF0dGVtcHQoZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICAgKiAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgKiB9LCAnPl8+Jyk7XG4gICAgICpcbiAgICAgKiBpZiAoXy5pc0Vycm9yKGVsZW1lbnRzKSkge1xuICAgICAqICAgZWxlbWVudHMgPSBbXTtcbiAgICAgKiB9XG4gICAgICovXG4gICAgdmFyIGF0dGVtcHQgPSBiYXNlUmVzdChmdW5jdGlvbihmdW5jLCBhcmdzKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXBwbHkoZnVuYywgdW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGlzRXJyb3IoZSkgPyBlIDogbmV3IEVycm9yKGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQmluZHMgbWV0aG9kcyBvZiBhbiBvYmplY3QgdG8gdGhlIG9iamVjdCBpdHNlbGYsIG92ZXJ3cml0aW5nIHRoZSBleGlzdGluZ1xuICAgICAqIG1ldGhvZC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBkb2Vzbid0IHNldCB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSBvZiBib3VuZCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBiaW5kIGFuZCBhc3NpZ24gdGhlIGJvdW5kIG1ldGhvZHMgdG8uXG4gICAgICogQHBhcmFtIHsuLi4oc3RyaW5nfHN0cmluZ1tdKX0gbWV0aG9kTmFtZXMgVGhlIG9iamVjdCBtZXRob2QgbmFtZXMgdG8gYmluZC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdmlldyA9IHtcbiAgICAgKiAgICdsYWJlbCc6ICdkb2NzJyxcbiAgICAgKiAgICdjbGljayc6IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnY2xpY2tlZCAnICsgdGhpcy5sYWJlbCk7XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uYmluZEFsbCh2aWV3LCBbJ2NsaWNrJ10pO1xuICAgICAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCB2aWV3LmNsaWNrKTtcbiAgICAgKiAvLyA9PiBMb2dzICdjbGlja2VkIGRvY3MnIHdoZW4gY2xpY2tlZC5cbiAgICAgKi9cbiAgICB2YXIgYmluZEFsbCA9IGZsYXRSZXN0KGZ1bmN0aW9uKG9iamVjdCwgbWV0aG9kTmFtZXMpIHtcbiAgICAgIGFycmF5RWFjaChtZXRob2ROYW1lcywgZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGtleSA9IHRvS2V5KGtleSk7XG4gICAgICAgIGJhc2VBc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgYmluZChvYmplY3Rba2V5XSwgb2JqZWN0KSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpdGVyYXRlcyBvdmVyIGBwYWlyc2AgYW5kIGludm9rZXMgdGhlIGNvcnJlc3BvbmRpbmdcbiAgICAgKiBmdW5jdGlvbiBvZiB0aGUgZmlyc3QgcHJlZGljYXRlIHRvIHJldHVybiB0cnV0aHkuIFRoZSBwcmVkaWNhdGUtZnVuY3Rpb25cbiAgICAgKiBwYWlycyBhcmUgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBhbmQgYXJndW1lbnRzIG9mIHRoZSBjcmVhdGVkXG4gICAgICogZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhaXJzIFRoZSBwcmVkaWNhdGUtZnVuY3Rpb24gcGFpcnMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY29tcG9zaXRlIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZnVuYyA9IF8uY29uZChbXG4gICAgICogICBbXy5tYXRjaGVzKHsgJ2EnOiAxIH0pLCAgICAgICAgICAgXy5jb25zdGFudCgnbWF0Y2hlcyBBJyldLFxuICAgICAqICAgW18uY29uZm9ybXMoeyAnYic6IF8uaXNOdW1iZXIgfSksIF8uY29uc3RhbnQoJ21hdGNoZXMgQicpXSxcbiAgICAgKiAgIFtfLnN0dWJUcnVlLCAgICAgICAgICAgICAgICAgICAgICBfLmNvbnN0YW50KCdubyBtYXRjaCcpXVxuICAgICAqIF0pO1xuICAgICAqXG4gICAgICogZnVuYyh7ICdhJzogMSwgJ2InOiAyIH0pO1xuICAgICAqIC8vID0+ICdtYXRjaGVzIEEnXG4gICAgICpcbiAgICAgKiBmdW5jKHsgJ2EnOiAwLCAnYic6IDEgfSk7XG4gICAgICogLy8gPT4gJ21hdGNoZXMgQidcbiAgICAgKlxuICAgICAqIGZ1bmMoeyAnYSc6ICcxJywgJ2InOiAnMicgfSk7XG4gICAgICogLy8gPT4gJ25vIG1hdGNoJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbmQocGFpcnMpIHtcbiAgICAgIHZhciBsZW5ndGggPSBwYWlycyA9PSBudWxsID8gMCA6IHBhaXJzLmxlbmd0aCxcbiAgICAgICAgICB0b0l0ZXJhdGVlID0gZ2V0SXRlcmF0ZWUoKTtcblxuICAgICAgcGFpcnMgPSAhbGVuZ3RoID8gW10gOiBhcnJheU1hcChwYWlycywgZnVuY3Rpb24ocGFpcikge1xuICAgICAgICBpZiAodHlwZW9mIHBhaXJbMV0gIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3RvSXRlcmF0ZWUocGFpclswXSksIHBhaXJbMV1dO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBiYXNlUmVzdChmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciBwYWlyID0gcGFpcnNbaW5kZXhdO1xuICAgICAgICAgIGlmIChhcHBseShwYWlyWzBdLCB0aGlzLCBhcmdzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGFwcGx5KHBhaXJbMV0sIHRoaXMsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgcHJlZGljYXRlIHByb3BlcnRpZXMgb2YgYHNvdXJjZWAgd2l0aFxuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHZhbHVlcyBvZiBhIGdpdmVuIG9iamVjdCwgcmV0dXJuaW5nIGB0cnVlYCBpZlxuICAgICAqIGFsbCBwcmVkaWNhdGVzIHJldHVybiB0cnV0aHksIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGUgY3JlYXRlZCBmdW5jdGlvbiBpcyBlcXVpdmFsZW50IHRvIGBfLmNvbmZvcm1zVG9gIHdpdGhcbiAgICAgKiBgc291cmNlYCBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBVdGlsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHByZWRpY2F0ZXMgdG8gY29uZm9ybSB0by5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFtcbiAgICAgKiAgIHsgJ2EnOiAyLCAnYic6IDEgfSxcbiAgICAgKiAgIHsgJ2EnOiAxLCAnYic6IDIgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmZpbHRlcihvYmplY3RzLCBfLmNvbmZvcm1zKHsgJ2InOiBmdW5jdGlvbihuKSB7IHJldHVybiBuID4gMTsgfSB9KSk7XG4gICAgICogLy8gPT4gW3sgJ2EnOiAxLCAnYic6IDIgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb25mb3Jtcyhzb3VyY2UpIHtcbiAgICAgIHJldHVybiBiYXNlQ29uZm9ybXMoYmFzZUNsb25lKHNvdXJjZSwgQ0xPTkVfREVFUF9GTEFHKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBgdmFsdWVgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDIuNC4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byByZXR1cm4gZnJvbSB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNvbnN0YW50IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IF8udGltZXMoMiwgXy5jb25zdGFudCh7ICdhJzogMSB9KSk7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhvYmplY3RzKTtcbiAgICAgKiAvLyA9PiBbeyAnYSc6IDEgfSwgeyAnYSc6IDEgfV1cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdHNbMF0gPT09IG9iamVjdHNbMV0pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb25zdGFudCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBgdmFsdWVgIHRvIGRldGVybWluZSB3aGV0aGVyIGEgZGVmYXVsdCB2YWx1ZSBzaG91bGQgYmUgcmV0dXJuZWQgaW5cbiAgICAgKiBpdHMgcGxhY2UuIFRoZSBgZGVmYXVsdFZhbHVlYCBpcyByZXR1cm5lZCBpZiBgdmFsdWVgIGlzIGBOYU5gLCBgbnVsbGAsXG4gICAgICogb3IgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4xNC4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcGFyYW0geyp9IGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVmYXVsdFRvKDEsIDEwKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiBfLmRlZmF1bHRUbyh1bmRlZmluZWQsIDEwKTtcbiAgICAgKiAvLyA9PiAxMFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRlZmF1bHRUbyh2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICByZXR1cm4gKHZhbHVlID09IG51bGwgfHwgdmFsdWUgIT09IHZhbHVlKSA/IGRlZmF1bHRWYWx1ZSA6IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgZ2l2ZW4gZnVuY3Rpb25zXG4gICAgICogd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24sIHdoZXJlIGVhY2ggc3VjY2Vzc2l2ZVxuICAgICAqIGludm9jYXRpb24gaXMgc3VwcGxpZWQgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcHJldmlvdXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEBwYXJhbSB7Li4uKEZ1bmN0aW9ufEZ1bmN0aW9uW10pfSBbZnVuY3NdIFRoZSBmdW5jdGlvbnMgdG8gaW52b2tlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNvbXBvc2l0ZSBmdW5jdGlvbi5cbiAgICAgKiBAc2VlIF8uZmxvd1JpZ2h0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIHNxdWFyZShuKSB7XG4gICAgICogICByZXR1cm4gbiAqIG47XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIGFkZFNxdWFyZSA9IF8uZmxvdyhbXy5hZGQsIHNxdWFyZV0pO1xuICAgICAqIGFkZFNxdWFyZSgxLCAyKTtcbiAgICAgKiAvLyA9PiA5XG4gICAgICovXG4gICAgdmFyIGZsb3cgPSBjcmVhdGVGbG93KCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZsb3dgIGV4Y2VwdCB0aGF0IGl0IGNyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0XG4gICAgICogaW52b2tlcyB0aGUgZ2l2ZW4gZnVuY3Rpb25zIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsXG4gICAgICogQHBhcmFtIHsuLi4oRnVuY3Rpb258RnVuY3Rpb25bXSl9IFtmdW5jc10gVGhlIGZ1bmN0aW9ucyB0byBpbnZva2UuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY29tcG9zaXRlIGZ1bmN0aW9uLlxuICAgICAqIEBzZWUgXy5mbG93XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIHNxdWFyZShuKSB7XG4gICAgICogICByZXR1cm4gbiAqIG47XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIGFkZFNxdWFyZSA9IF8uZmxvd1JpZ2h0KFtzcXVhcmUsIF8uYWRkXSk7XG4gICAgICogYWRkU3F1YXJlKDEsIDIpO1xuICAgICAqIC8vID0+IDlcbiAgICAgKi9cbiAgICB2YXIgZmxvd1JpZ2h0ID0gY3JlYXRlRmxvdyh0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IGl0IHJlY2VpdmVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBhcmd1bWVudHMgb2YgdGhlIGNyZWF0ZWRcbiAgICAgKiBmdW5jdGlvbi4gSWYgYGZ1bmNgIGlzIGEgcHJvcGVydHkgbmFtZSwgdGhlIGNyZWF0ZWQgZnVuY3Rpb24gcmV0dXJucyB0aGVcbiAgICAgKiBwcm9wZXJ0eSB2YWx1ZSBmb3IgYSBnaXZlbiBlbGVtZW50LiBJZiBgZnVuY2AgaXMgYW4gYXJyYXkgb3Igb2JqZWN0LCB0aGVcbiAgICAgKiBjcmVhdGVkIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGNvbnRhaW4gdGhlIGVxdWl2YWxlbnRcbiAgICAgKiBzb3VyY2UgcHJvcGVydGllcywgb3RoZXJ3aXNlIGl0IHJldHVybnMgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsXG4gICAgICogQHBhcmFtIHsqfSBbZnVuYz1fLmlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY2FsbGJhY2suXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5tYXRjaGVzYCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAgICogXy5maWx0ZXIodXNlcnMsIF8uaXRlcmF0ZWUoeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogdHJ1ZSB9KSk7XG4gICAgICogLy8gPT4gW3sgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9XVxuICAgICAqXG4gICAgICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8uZmlsdGVyKHVzZXJzLCBfLml0ZXJhdGVlKFsndXNlcicsICdmcmVkJ10pKTtcbiAgICAgKiAvLyA9PiBbeyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1dXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLm1hcCh1c2VycywgXy5pdGVyYXRlZSgndXNlcicpKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKlxuICAgICAqIC8vIENyZWF0ZSBjdXN0b20gaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICAgKiBfLml0ZXJhdGVlID0gXy53cmFwKF8uaXRlcmF0ZWUsIGZ1bmN0aW9uKGl0ZXJhdGVlLCBmdW5jKSB7XG4gICAgICogICByZXR1cm4gIV8uaXNSZWdFeHAoZnVuYykgPyBpdGVyYXRlZShmdW5jKSA6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAqICAgICByZXR1cm4gZnVuYy50ZXN0KHN0cmluZyk7XG4gICAgICogICB9O1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogXy5maWx0ZXIoWydhYmMnLCAnZGVmJ10sIC9lZi8pO1xuICAgICAqIC8vID0+IFsnZGVmJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpdGVyYXRlZShmdW5jKSB7XG4gICAgICByZXR1cm4gYmFzZUl0ZXJhdGVlKHR5cGVvZiBmdW5jID09ICdmdW5jdGlvbicgPyBmdW5jIDogYmFzZUNsb25lKGZ1bmMsIENMT05FX0RFRVBfRkxBRykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIGEgcGFydGlhbCBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiBhIGdpdmVuXG4gICAgICogb2JqZWN0IGFuZCBgc291cmNlYCwgcmV0dXJuaW5nIGB0cnVlYCBpZiB0aGUgZ2l2ZW4gb2JqZWN0IGhhcyBlcXVpdmFsZW50XG4gICAgICogcHJvcGVydHkgdmFsdWVzLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhlIGNyZWF0ZWQgZnVuY3Rpb24gaXMgZXF1aXZhbGVudCB0byBgXy5pc01hdGNoYCB3aXRoIGBzb3VyY2VgXG4gICAgICogcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICpcbiAgICAgKiBQYXJ0aWFsIGNvbXBhcmlzb25zIHdpbGwgbWF0Y2ggZW1wdHkgYXJyYXkgYW5kIGVtcHR5IG9iamVjdCBgc291cmNlYFxuICAgICAqIHZhbHVlcyBhZ2FpbnN0IGFueSBhcnJheSBvciBvYmplY3QgdmFsdWUsIHJlc3BlY3RpdmVseS4gU2VlIGBfLmlzRXF1YWxgXG4gICAgICogZm9yIGEgbGlzdCBvZiBzdXBwb3J0ZWQgdmFsdWUgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTXVsdGlwbGUgdmFsdWVzIGNhbiBiZSBjaGVja2VkIGJ5IGNvbWJpbmluZyBzZXZlcmFsIG1hdGNoZXJzXG4gICAgICogdXNpbmcgYF8ub3ZlclNvbWVgXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbXG4gICAgICogICB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfSxcbiAgICAgKiAgIHsgJ2EnOiA0LCAnYic6IDUsICdjJzogNiB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmlsdGVyKG9iamVjdHMsIF8ubWF0Y2hlcyh7ICdhJzogNCwgJ2MnOiA2IH0pKTtcbiAgICAgKiAvLyA9PiBbeyAnYSc6IDQsICdiJzogNSwgJ2MnOiA2IH1dXG4gICAgICpcbiAgICAgKiAvLyBDaGVja2luZyBmb3Igc2V2ZXJhbCBwb3NzaWJsZSB2YWx1ZXNcbiAgICAgKiBfLmZpbHRlcihvYmplY3RzLCBfLm92ZXJTb21lKFtfLm1hdGNoZXMoeyAnYSc6IDEgfSksIF8ubWF0Y2hlcyh7ICdhJzogNCB9KV0pKTtcbiAgICAgKiAvLyA9PiBbeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzIH0sIHsgJ2EnOiA0LCAnYic6IDUsICdjJzogNiB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hdGNoZXMoc291cmNlKSB7XG4gICAgICByZXR1cm4gYmFzZU1hdGNoZXMoYmFzZUNsb25lKHNvdXJjZSwgQ0xPTkVfREVFUF9GTEFHKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgYSBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHRoZVxuICAgICAqIHZhbHVlIGF0IGBwYXRoYCBvZiBhIGdpdmVuIG9iamVjdCB0byBgc3JjVmFsdWVgLCByZXR1cm5pbmcgYHRydWVgIGlmIHRoZVxuICAgICAqIG9iamVjdCB2YWx1ZSBpcyBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogUGFydGlhbCBjb21wYXJpc29ucyB3aWxsIG1hdGNoIGVtcHR5IGFycmF5IGFuZCBlbXB0eSBvYmplY3RcbiAgICAgKiBgc3JjVmFsdWVgIHZhbHVlcyBhZ2FpbnN0IGFueSBhcnJheSBvciBvYmplY3QgdmFsdWUsIHJlc3BlY3RpdmVseS4gU2VlXG4gICAgICogYF8uaXNFcXVhbGAgZm9yIGEgbGlzdCBvZiBzdXBwb3J0ZWQgdmFsdWUgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTXVsdGlwbGUgdmFsdWVzIGNhbiBiZSBjaGVja2VkIGJ5IGNvbWJpbmluZyBzZXZlcmFsIG1hdGNoZXJzXG4gICAgICogdXNpbmcgYF8ub3ZlclNvbWVgXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4yLjBcbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbXG4gICAgICogICB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfSxcbiAgICAgKiAgIHsgJ2EnOiA0LCAnYic6IDUsICdjJzogNiB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmluZChvYmplY3RzLCBfLm1hdGNoZXNQcm9wZXJ0eSgnYScsIDQpKTtcbiAgICAgKiAvLyA9PiB7ICdhJzogNCwgJ2InOiA1LCAnYyc6IDYgfVxuICAgICAqXG4gICAgICogLy8gQ2hlY2tpbmcgZm9yIHNldmVyYWwgcG9zc2libGUgdmFsdWVzXG4gICAgICogXy5maWx0ZXIob2JqZWN0cywgXy5vdmVyU29tZShbXy5tYXRjaGVzUHJvcGVydHkoJ2EnLCAxKSwgXy5tYXRjaGVzUHJvcGVydHkoJ2EnLCA0KV0pKTtcbiAgICAgKiAvLyA9PiBbeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzIH0sIHsgJ2EnOiA0LCAnYic6IDUsICdjJzogNiB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuICAgICAgcmV0dXJuIGJhc2VNYXRjaGVzUHJvcGVydHkocGF0aCwgYmFzZUNsb25lKHNyY1ZhbHVlLCBDTE9ORV9ERUVQX0ZMQUcpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSBtZXRob2QgYXQgYHBhdGhgIG9mIGEgZ2l2ZW4gb2JqZWN0LlxuICAgICAqIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gdGhlIGludm9rZWQgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuNy4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgbWV0aG9kIHRvIGludm9rZS5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSB0aGUgbWV0aG9kIHdpdGguXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgaW52b2tlciBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbXG4gICAgICogICB7ICdhJzogeyAnYic6IF8uY29uc3RhbnQoMikgfSB9LFxuICAgICAqICAgeyAnYSc6IHsgJ2InOiBfLmNvbnN0YW50KDEpIH0gfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLm1hcChvYmplY3RzLCBfLm1ldGhvZCgnYS5iJykpO1xuICAgICAqIC8vID0+IFsyLCAxXVxuICAgICAqXG4gICAgICogXy5tYXAob2JqZWN0cywgXy5tZXRob2QoWydhJywgJ2InXSkpO1xuICAgICAqIC8vID0+IFsyLCAxXVxuICAgICAqL1xuICAgIHZhciBtZXRob2QgPSBiYXNlUmVzdChmdW5jdGlvbihwYXRoLCBhcmdzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBiYXNlSW52b2tlKG9iamVjdCwgcGF0aCwgYXJncyk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLm1ldGhvZGA7IHRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXNcbiAgICAgKiB0aGUgbWV0aG9kIGF0IGEgZ2l2ZW4gcGF0aCBvZiBgb2JqZWN0YC4gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZVxuICAgICAqIHByb3ZpZGVkIHRvIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjcuMFxuICAgICAqIEBjYXRlZ29yeSBVdGlsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIHRoZSBtZXRob2Qgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBpbnZva2VyIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBfLnRpbWVzKDMsIF8uY29uc3RhbnQpLFxuICAgICAqICAgICBvYmplY3QgPSB7ICdhJzogYXJyYXksICdiJzogYXJyYXksICdjJzogYXJyYXkgfTtcbiAgICAgKlxuICAgICAqIF8ubWFwKFsnYVsyXScsICdjWzBdJ10sIF8ubWV0aG9kT2Yob2JqZWN0KSk7XG4gICAgICogLy8gPT4gWzIsIDBdXG4gICAgICpcbiAgICAgKiBfLm1hcChbWydhJywgJzInXSwgWydjJywgJzAnXV0sIF8ubWV0aG9kT2Yob2JqZWN0KSk7XG4gICAgICogLy8gPT4gWzIsIDBdXG4gICAgICovXG4gICAgdmFyIG1ldGhvZE9mID0gYmFzZVJlc3QoZnVuY3Rpb24ob2JqZWN0LCBhcmdzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICByZXR1cm4gYmFzZUludm9rZShvYmplY3QsIHBhdGgsIGFyZ3MpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYWxsIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBmdW5jdGlvbiBwcm9wZXJ0aWVzIG9mIGEgc291cmNlXG4gICAgICogb2JqZWN0IHRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuIElmIGBvYmplY3RgIGlzIGEgZnVuY3Rpb24sIHRoZW4gbWV0aG9kc1xuICAgICAqIGFyZSBhZGRlZCB0byBpdHMgcHJvdG90eXBlIGFzIHdlbGwuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVXNlIGBfLnJ1bkluQ29udGV4dGAgdG8gY3JlYXRlIGEgcHJpc3RpbmUgYGxvZGFzaGAgZnVuY3Rpb24gdG9cbiAgICAgKiBhdm9pZCBjb25mbGljdHMgY2F1c2VkIGJ5IG1vZGlmeWluZyB0aGUgb3JpZ2luYWwuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fSBbb2JqZWN0PWxvZGFzaF0gVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgZnVuY3Rpb25zIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNoYWluPXRydWVdIFNwZWNpZnkgd2hldGhlciBtaXhpbnMgYXJlIGNoYWluYWJsZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb258T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiB2b3dlbHMoc3RyaW5nKSB7XG4gICAgICogICByZXR1cm4gXy5maWx0ZXIoc3RyaW5nLCBmdW5jdGlvbih2KSB7XG4gICAgICogICAgIHJldHVybiAvW2FlaW91XS9pLnRlc3Qodik7XG4gICAgICogICB9KTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLm1peGluKHsgJ3Zvd2Vscyc6IHZvd2VscyB9KTtcbiAgICAgKiBfLnZvd2VscygnZnJlZCcpO1xuICAgICAqIC8vID0+IFsnZSddXG4gICAgICpcbiAgICAgKiBfKCdmcmVkJykudm93ZWxzKCkudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbJ2UnXVxuICAgICAqXG4gICAgICogXy5taXhpbih7ICd2b3dlbHMnOiB2b3dlbHMgfSwgeyAnY2hhaW4nOiBmYWxzZSB9KTtcbiAgICAgKiBfKCdmcmVkJykudm93ZWxzKCk7XG4gICAgICogLy8gPT4gWydlJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtaXhpbihvYmplY3QsIHNvdXJjZSwgb3B0aW9ucykge1xuICAgICAgdmFyIHByb3BzID0ga2V5cyhzb3VyY2UpLFxuICAgICAgICAgIG1ldGhvZE5hbWVzID0gYmFzZUZ1bmN0aW9ucyhzb3VyY2UsIHByb3BzKTtcblxuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCAmJlxuICAgICAgICAgICEoaXNPYmplY3Qoc291cmNlKSAmJiAobWV0aG9kTmFtZXMubGVuZ3RoIHx8ICFwcm9wcy5sZW5ndGgpKSkge1xuICAgICAgICBvcHRpb25zID0gc291cmNlO1xuICAgICAgICBzb3VyY2UgPSBvYmplY3Q7XG4gICAgICAgIG9iamVjdCA9IHRoaXM7XG4gICAgICAgIG1ldGhvZE5hbWVzID0gYmFzZUZ1bmN0aW9ucyhzb3VyY2UsIGtleXMoc291cmNlKSk7XG4gICAgICB9XG4gICAgICB2YXIgY2hhaW4gPSAhKGlzT2JqZWN0KG9wdGlvbnMpICYmICdjaGFpbicgaW4gb3B0aW9ucykgfHwgISFvcHRpb25zLmNoYWluLFxuICAgICAgICAgIGlzRnVuYyA9IGlzRnVuY3Rpb24ob2JqZWN0KTtcblxuICAgICAgYXJyYXlFYWNoKG1ldGhvZE5hbWVzLCBmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgICAgIHZhciBmdW5jID0gc291cmNlW21ldGhvZE5hbWVdO1xuICAgICAgICBvYmplY3RbbWV0aG9kTmFtZV0gPSBmdW5jO1xuICAgICAgICBpZiAoaXNGdW5jKSB7XG4gICAgICAgICAgb2JqZWN0LnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX187XG4gICAgICAgICAgICBpZiAoY2hhaW4gfHwgY2hhaW5BbGwpIHtcbiAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG9iamVjdCh0aGlzLl9fd3JhcHBlZF9fKSxcbiAgICAgICAgICAgICAgICAgIGFjdGlvbnMgPSByZXN1bHQuX19hY3Rpb25zX18gPSBjb3B5QXJyYXkodGhpcy5fX2FjdGlvbnNfXyk7XG5cbiAgICAgICAgICAgICAgYWN0aW9ucy5wdXNoKHsgJ2Z1bmMnOiBmdW5jLCAnYXJncyc6IGFyZ3VtZW50cywgJ3RoaXNBcmcnOiBvYmplY3QgfSk7XG4gICAgICAgICAgICAgIHJlc3VsdC5fX2NoYWluX18gPSBjaGFpbkFsbDtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KG9iamVjdCwgYXJyYXlQdXNoKFt0aGlzLnZhbHVlKCldLCBhcmd1bWVudHMpKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXZlcnRzIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzIHByZXZpb3VzIHZhbHVlIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvXG4gICAgICogdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBzaW5jZSAwLjEuMFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgbG9kYXNoID0gXy5ub0NvbmZsaWN0KCk7XG4gICAgICovXG4gICAgZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAgIGlmIChyb290Ll8gPT09IHRoaXMpIHtcbiAgICAgICAgcm9vdC5fID0gb2xkRGFzaDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMi4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRpbWVzKDIsIF8ubm9vcCk7XG4gICAgICogLy8gPT4gW3VuZGVmaW5lZCwgdW5kZWZpbmVkXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5vb3AoKSB7XG4gICAgICAvLyBObyBvcGVyYXRpb24gcGVyZm9ybWVkLlxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGdldHMgdGhlIGFyZ3VtZW50IGF0IGluZGV4IGBuYC4gSWYgYG5gIGlzIG5lZ2F0aXZlLFxuICAgICAqIHRoZSBudGggYXJndW1lbnQgZnJvbSB0aGUgZW5kIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MF0gVGhlIGluZGV4IG9mIHRoZSBhcmd1bWVudCB0byByZXR1cm4uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFzcy10aHJ1IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZnVuYyA9IF8ubnRoQXJnKDEpO1xuICAgICAqIGZ1bmMoJ2EnLCAnYicsICdjJywgJ2QnKTtcbiAgICAgKiAvLyA9PiAnYidcbiAgICAgKlxuICAgICAqIHZhciBmdW5jID0gXy5udGhBcmcoLTIpO1xuICAgICAqIGZ1bmMoJ2EnLCAnYicsICdjJywgJ2QnKTtcbiAgICAgKiAvLyA9PiAnYydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBudGhBcmcobikge1xuICAgICAgbiA9IHRvSW50ZWdlcihuKTtcbiAgICAgIHJldHVybiBiYXNlUmVzdChmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgIHJldHVybiBiYXNlTnRoKGFyZ3MsIG4pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgaXRlcmF0ZWVzYCB3aXRoIHRoZSBhcmd1bWVudHMgaXQgcmVjZWl2ZXNcbiAgICAgKiBhbmQgcmV0dXJucyB0aGVpciByZXN1bHRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0gey4uLihGdW5jdGlvbnxGdW5jdGlvbltdKX0gW2l0ZXJhdGVlcz1bXy5pZGVudGl0eV1dXG4gICAgICogIFRoZSBpdGVyYXRlZXMgdG8gaW52b2tlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZnVuYyA9IF8ub3ZlcihbTWF0aC5tYXgsIE1hdGgubWluXSk7XG4gICAgICpcbiAgICAgKiBmdW5jKDEsIDIsIDMsIDQpO1xuICAgICAqIC8vID0+IFs0LCAxXVxuICAgICAqL1xuICAgIHZhciBvdmVyID0gY3JlYXRlT3ZlcihhcnJheU1hcCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBjaGVja3MgaWYgKiphbGwqKiBvZiB0aGUgYHByZWRpY2F0ZXNgIHJldHVyblxuICAgICAqIHRydXRoeSB3aGVuIGludm9rZWQgd2l0aCB0aGUgYXJndW1lbnRzIGl0IHJlY2VpdmVzLlxuICAgICAqXG4gICAgICogRm9sbG93aW5nIHNob3J0aGFuZHMgYXJlIHBvc3NpYmxlIGZvciBwcm92aWRpbmcgcHJlZGljYXRlcy5cbiAgICAgKiBQYXNzIGFuIGBPYmplY3RgIGFuZCBpdCB3aWxsIGJlIHVzZWQgYXMgYW4gcGFyYW1ldGVyIGZvciBgXy5tYXRjaGVzYCB0byBjcmVhdGUgdGhlIHByZWRpY2F0ZS5cbiAgICAgKiBQYXNzIGFuIGBBcnJheWAgb2YgcGFyYW1ldGVycyBmb3IgYF8ubWF0Y2hlc1Byb3BlcnR5YCBhbmQgdGhlIHByZWRpY2F0ZSB3aWxsIGJlIGNyZWF0ZWQgdXNpbmcgdGhlbS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBVdGlsXG4gICAgICogQHBhcmFtIHsuLi4oRnVuY3Rpb258RnVuY3Rpb25bXSl9IFtwcmVkaWNhdGVzPVtfLmlkZW50aXR5XV1cbiAgICAgKiAgVGhlIHByZWRpY2F0ZXMgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBmdW5jID0gXy5vdmVyRXZlcnkoW0Jvb2xlYW4sIGlzRmluaXRlXSk7XG4gICAgICpcbiAgICAgKiBmdW5jKCcxJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogZnVuYyhudWxsKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogZnVuYyhOYU4pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIG92ZXJFdmVyeSA9IGNyZWF0ZU92ZXIoYXJyYXlFdmVyeSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBjaGVja3MgaWYgKiphbnkqKiBvZiB0aGUgYHByZWRpY2F0ZXNgIHJldHVyblxuICAgICAqIHRydXRoeSB3aGVuIGludm9rZWQgd2l0aCB0aGUgYXJndW1lbnRzIGl0IHJlY2VpdmVzLlxuICAgICAqXG4gICAgICogRm9sbG93aW5nIHNob3J0aGFuZHMgYXJlIHBvc3NpYmxlIGZvciBwcm92aWRpbmcgcHJlZGljYXRlcy5cbiAgICAgKiBQYXNzIGFuIGBPYmplY3RgIGFuZCBpdCB3aWxsIGJlIHVzZWQgYXMgYW4gcGFyYW1ldGVyIGZvciBgXy5tYXRjaGVzYCB0byBjcmVhdGUgdGhlIHByZWRpY2F0ZS5cbiAgICAgKiBQYXNzIGFuIGBBcnJheWAgb2YgcGFyYW1ldGVycyBmb3IgYF8ubWF0Y2hlc1Byb3BlcnR5YCBhbmQgdGhlIHByZWRpY2F0ZSB3aWxsIGJlIGNyZWF0ZWQgdXNpbmcgdGhlbS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjAuMFxuICAgICAqIEBjYXRlZ29yeSBVdGlsXG4gICAgICogQHBhcmFtIHsuLi4oRnVuY3Rpb258RnVuY3Rpb25bXSl9IFtwcmVkaWNhdGVzPVtfLmlkZW50aXR5XV1cbiAgICAgKiAgVGhlIHByZWRpY2F0ZXMgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBmdW5jID0gXy5vdmVyU29tZShbQm9vbGVhbiwgaXNGaW5pdGVdKTtcbiAgICAgKlxuICAgICAqIGZ1bmMoJzEnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBmdW5jKG51bGwpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIGZ1bmMoTmFOKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogdmFyIG1hdGNoZXNGdW5jID0gXy5vdmVyU29tZShbeyAnYSc6IDEgfSwgeyAnYSc6IDIgfV0pXG4gICAgICogdmFyIG1hdGNoZXNQcm9wZXJ0eUZ1bmMgPSBfLm92ZXJTb21lKFtbJ2EnLCAxXSwgWydhJywgMl1dKVxuICAgICAqL1xuICAgIHZhciBvdmVyU29tZSA9IGNyZWF0ZU92ZXIoYXJyYXlTb21lKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHZhbHVlIGF0IGBwYXRoYCBvZiBhIGdpdmVuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAyLjQuMFxuICAgICAqIEBjYXRlZ29yeSBVdGlsXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbXG4gICAgICogICB7ICdhJzogeyAnYic6IDIgfSB9LFxuICAgICAqICAgeyAnYSc6IHsgJ2InOiAxIH0gfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLm1hcChvYmplY3RzLCBfLnByb3BlcnR5KCdhLmInKSk7XG4gICAgICogLy8gPT4gWzIsIDFdXG4gICAgICpcbiAgICAgKiBfLm1hcChfLnNvcnRCeShvYmplY3RzLCBfLnByb3BlcnR5KFsnYScsICdiJ10pKSwgJ2EuYicpO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHtcbiAgICAgIHJldHVybiBpc0tleShwYXRoKSA/IGJhc2VQcm9wZXJ0eSh0b0tleShwYXRoKSkgOiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5wcm9wZXJ0eWA7IHRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnNcbiAgICAgKiB0aGUgdmFsdWUgYXQgYSBnaXZlbiBwYXRoIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFswLCAxLCAyXSxcbiAgICAgKiAgICAgb2JqZWN0ID0geyAnYSc6IGFycmF5LCAnYic6IGFycmF5LCAnYyc6IGFycmF5IH07XG4gICAgICpcbiAgICAgKiBfLm1hcChbJ2FbMl0nLCAnY1swXSddLCBfLnByb3BlcnR5T2Yob2JqZWN0KSk7XG4gICAgICogLy8gPT4gWzIsIDBdXG4gICAgICpcbiAgICAgKiBfLm1hcChbWydhJywgJzInXSwgWydjJywgJzAnXV0sIF8ucHJvcGVydHlPZihvYmplY3QpKTtcbiAgICAgKiAvLyA9PiBbMiwgMF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcm9wZXJ0eU9mKG9iamVjdCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogYmFzZUdldChvYmplY3QsIHBhdGgpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIG51bWJlcnMgKHBvc2l0aXZlIGFuZC9vciBuZWdhdGl2ZSkgcHJvZ3Jlc3NpbmcgZnJvbVxuICAgICAqIGBzdGFydGAgdXAgdG8sIGJ1dCBub3QgaW5jbHVkaW5nLCBgZW5kYC4gQSBzdGVwIG9mIGAtMWAgaXMgdXNlZCBpZiBhIG5lZ2F0aXZlXG4gICAgICogYHN0YXJ0YCBpcyBzcGVjaWZpZWQgd2l0aG91dCBhbiBgZW5kYCBvciBgc3RlcGAuIElmIGBlbmRgIGlzIG5vdCBzcGVjaWZpZWQsXG4gICAgICogaXQncyBzZXQgdG8gYHN0YXJ0YCB3aXRoIGBzdGFydGAgdGhlbiBzZXQgdG8gYDBgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIEphdmFTY3JpcHQgZm9sbG93cyB0aGUgSUVFRS03NTQgc3RhbmRhcmQgZm9yIHJlc29sdmluZ1xuICAgICAqIGZsb2F0aW5nLXBvaW50IHZhbHVlcyB3aGljaCBjYW4gcHJvZHVjZSB1bmV4cGVjdGVkIHJlc3VsdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IG9mIHRoZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBlbmQgb2YgdGhlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RlcD0xXSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IG9yIGRlY3JlbWVudCBieS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHJhbmdlIG9mIG51bWJlcnMuXG4gICAgICogQHNlZSBfLmluUmFuZ2UsIF8ucmFuZ2VSaWdodFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDQpO1xuICAgICAqIC8vID0+IFswLCAxLCAyLCAzXVxuICAgICAqXG4gICAgICogXy5yYW5nZSgtNCk7XG4gICAgICogLy8gPT4gWzAsIC0xLCAtMiwgLTNdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDEsIDUpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCA0XVxuICAgICAqXG4gICAgICogXy5yYW5nZSgwLCAyMCwgNSk7XG4gICAgICogLy8gPT4gWzAsIDUsIDEwLCAxNV1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMCwgLTQsIC0xKTtcbiAgICAgKiAvLyA9PiBbMCwgLTEsIC0yLCAtM11cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMSwgNCwgMCk7XG4gICAgICogLy8gPT4gWzEsIDEsIDFdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDApO1xuICAgICAqIC8vID0+IFtdXG4gICAgICovXG4gICAgdmFyIHJhbmdlID0gY3JlYXRlUmFuZ2UoKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ucmFuZ2VgIGV4Y2VwdCB0aGF0IGl0IHBvcHVsYXRlcyB2YWx1ZXMgaW5cbiAgICAgKiBkZXNjZW5kaW5nIG9yZGVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIG9mIHRoZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0ZXA9MV0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBvciBkZWNyZW1lbnQgYnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSByYW5nZSBvZiBudW1iZXJzLlxuICAgICAqIEBzZWUgXy5pblJhbmdlLCBfLnJhbmdlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmFuZ2VSaWdodCg0KTtcbiAgICAgKiAvLyA9PiBbMywgMiwgMSwgMF1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2VSaWdodCgtNCk7XG4gICAgICogLy8gPT4gWy0zLCAtMiwgLTEsIDBdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlUmlnaHQoMSwgNSk7XG4gICAgICogLy8gPT4gWzQsIDMsIDIsIDFdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlUmlnaHQoMCwgMjAsIDUpO1xuICAgICAqIC8vID0+IFsxNSwgMTAsIDUsIDBdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlUmlnaHQoMCwgLTQsIC0xKTtcbiAgICAgKiAvLyA9PiBbLTMsIC0yLCAtMSwgMF1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2VSaWdodCgxLCA0LCAwKTtcbiAgICAgKiAvLyA9PiBbMSwgMSwgMV1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2VSaWdodCgwKTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqL1xuICAgIHZhciByYW5nZVJpZ2h0ID0gY3JlYXRlUmFuZ2UodHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgbmV3IGVtcHR5IGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMTMuMFxuICAgICAqIEBjYXRlZ29yeSBVdGlsXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZW1wdHkgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheXMgPSBfLnRpbWVzKDIsIF8uc3R1YkFycmF5KTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5cyk7XG4gICAgICogLy8gPT4gW1tdLCBbXV1cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5c1swXSA9PT0gYXJyYXlzWzFdKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN0dWJBcnJheSgpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4xMy4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRpbWVzKDIsIF8uc3R1YkZhbHNlKTtcbiAgICAgKiAvLyA9PiBbZmFsc2UsIGZhbHNlXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN0dWJGYWxzZSgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgbmV3IGVtcHR5IG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjEzLjBcbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBlbXB0eSBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3RzID0gXy50aW1lcygyLCBfLnN0dWJPYmplY3QpO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2cob2JqZWN0cyk7XG4gICAgICogLy8gPT4gW3t9LCB7fV1cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdHNbMF0gPT09IG9iamVjdHNbMV0pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gc3R1Yk9iamVjdCgpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjEzLjBcbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVtcHR5IHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50aW1lcygyLCBfLnN0dWJTdHJpbmcpO1xuICAgICAqIC8vID0+IFsnJywgJyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gc3R1YlN0cmluZygpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjEzLjBcbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50aW1lcygyLCBfLnN0dWJUcnVlKTtcbiAgICAgKiAvLyA9PiBbdHJ1ZSwgdHJ1ZV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzdHViVHJ1ZSgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIGl0ZXJhdGVlIGBuYCB0aW1lcywgcmV0dXJuaW5nIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzIG9mXG4gICAgICogZWFjaCBpbnZvY2F0aW9uLiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKGluZGV4KS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBpbnZva2UgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udGltZXMoMywgU3RyaW5nKTtcbiAgICAgKiAvLyA9PiBbJzAnLCAnMScsICcyJ11cbiAgICAgKlxuICAgICAqICBfLnRpbWVzKDQsIF8uY29uc3RhbnQoMCkpO1xuICAgICAqIC8vID0+IFswLCAwLCAwLCAwXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRpbWVzKG4sIGl0ZXJhdGVlKSB7XG4gICAgICBuID0gdG9JbnRlZ2VyKG4pO1xuICAgICAgaWYgKG4gPCAxIHx8IG4gPiBNQVhfU0FGRV9JTlRFR0VSKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IE1BWF9BUlJBWV9MRU5HVEgsXG4gICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWluKG4sIE1BWF9BUlJBWV9MRU5HVEgpO1xuXG4gICAgICBpdGVyYXRlZSA9IGdldEl0ZXJhdGVlKGl0ZXJhdGVlKTtcbiAgICAgIG4gLT0gTUFYX0FSUkFZX0xFTkdUSDtcblxuICAgICAgdmFyIHJlc3VsdCA9IGJhc2VUaW1lcyhsZW5ndGgsIGl0ZXJhdGVlKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbikge1xuICAgICAgICBpdGVyYXRlZShpbmRleCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IFV0aWxcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHByb3BlcnR5IHBhdGggYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udG9QYXRoKCdhLmIuYycpO1xuICAgICAqIC8vID0+IFsnYScsICdiJywgJ2MnXVxuICAgICAqXG4gICAgICogXy50b1BhdGgoJ2FbMF0uYi5jJyk7XG4gICAgICogLy8gPT4gWydhJywgJzAnLCAnYicsICdjJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b1BhdGgodmFsdWUpIHtcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gYXJyYXlNYXAodmFsdWUsIHRvS2V5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc1N5bWJvbCh2YWx1ZSkgPyBbdmFsdWVdIDogY29weUFycmF5KHN0cmluZ1RvUGF0aCh0b1N0cmluZyh2YWx1ZSkpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSB1bmlxdWUgSUQuIElmIGBwcmVmaXhgIGlzIGdpdmVuLCB0aGUgSUQgaXMgYXBwZW5kZWQgdG8gaXQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHNpbmNlIDAuMS4wXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJlZml4PScnXSBUaGUgdmFsdWUgdG8gcHJlZml4IHRoZSBJRCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuaXF1ZSBJRC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51bmlxdWVJZCgnY29udGFjdF8nKTtcbiAgICAgKiAvLyA9PiAnY29udGFjdF8xMDQnXG4gICAgICpcbiAgICAgKiBfLnVuaXF1ZUlkKCk7XG4gICAgICogLy8gPT4gJzEwNSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bmlxdWVJZChwcmVmaXgpIHtcbiAgICAgIHZhciBpZCA9ICsraWRDb3VudGVyO1xuICAgICAgcmV0dXJuIHRvU3RyaW5nKHByZWZpeCkgKyBpZDtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBBZGRzIHR3byBudW1iZXJzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDMuNC4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXVnZW5kIFRoZSBmaXJzdCBudW1iZXIgaW4gYW4gYWRkaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFkZGVuZCBUaGUgc2Vjb25kIG51bWJlciBpbiBhbiBhZGRpdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0b3RhbC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5hZGQoNiwgNCk7XG4gICAgICogLy8gPT4gMTBcbiAgICAgKi9cbiAgICB2YXIgYWRkID0gY3JlYXRlTWF0aE9wZXJhdGlvbihmdW5jdGlvbihhdWdlbmQsIGFkZGVuZCkge1xuICAgICAgcmV0dXJuIGF1Z2VuZCArIGFkZGVuZDtcbiAgICB9LCAwKTtcblxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIGBudW1iZXJgIHJvdW5kZWQgdXAgdG8gYHByZWNpc2lvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4xMC4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyIFRoZSBudW1iZXIgdG8gcm91bmQgdXAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmVjaXNpb249MF0gVGhlIHByZWNpc2lvbiB0byByb3VuZCB1cCB0by5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSByb3VuZGVkIHVwIG51bWJlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jZWlsKDQuMDA2KTtcbiAgICAgKiAvLyA9PiA1XG4gICAgICpcbiAgICAgKiBfLmNlaWwoNi4wMDQsIDIpO1xuICAgICAqIC8vID0+IDYuMDFcbiAgICAgKlxuICAgICAqIF8uY2VpbCg2MDQwLCAtMik7XG4gICAgICogLy8gPT4gNjEwMFxuICAgICAqL1xuICAgIHZhciBjZWlsID0gY3JlYXRlUm91bmQoJ2NlaWwnKTtcblxuICAgIC8qKlxuICAgICAqIERpdmlkZSB0d28gbnVtYmVycy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjcuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpdmlkZW5kIFRoZSBmaXJzdCBudW1iZXIgaW4gYSBkaXZpc2lvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGl2aXNvciBUaGUgc2Vjb25kIG51bWJlciBpbiBhIGRpdmlzaW9uLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHF1b3RpZW50LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRpdmlkZSg2LCA0KTtcbiAgICAgKiAvLyA9PiAxLjVcbiAgICAgKi9cbiAgICB2YXIgZGl2aWRlID0gY3JlYXRlTWF0aE9wZXJhdGlvbihmdW5jdGlvbihkaXZpZGVuZCwgZGl2aXNvcikge1xuICAgICAgcmV0dXJuIGRpdmlkZW5kIC8gZGl2aXNvcjtcbiAgICB9LCAxKTtcblxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIGBudW1iZXJgIHJvdW5kZWQgZG93biB0byBgcHJlY2lzaW9uYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSAzLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgVGhlIG51bWJlciB0byByb3VuZCBkb3duLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcHJlY2lzaW9uPTBdIFRoZSBwcmVjaXNpb24gdG8gcm91bmQgZG93biB0by5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSByb3VuZGVkIGRvd24gbnVtYmVyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZsb29yKDQuMDA2KTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICpcbiAgICAgKiBfLmZsb29yKDAuMDQ2LCAyKTtcbiAgICAgKiAvLyA9PiAwLjA0XG4gICAgICpcbiAgICAgKiBfLmZsb29yKDQwNjAsIC0yKTtcbiAgICAgKiAvLyA9PiA0MDAwXG4gICAgICovXG4gICAgdmFyIGZsb29yID0gY3JlYXRlUm91bmQoJ2Zsb29yJyk7XG5cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbWF4aW11bSB2YWx1ZSBvZiBgYXJyYXlgLiBJZiBgYXJyYXlgIGlzIGVtcHR5IG9yIGZhbHNleSxcbiAgICAgKiBgdW5kZWZpbmVkYCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF4aW11bSB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXgoWzQsIDIsIDgsIDZdKTtcbiAgICAgKiAvLyA9PiA4XG4gICAgICpcbiAgICAgKiBfLm1heChbXSk7XG4gICAgICogLy8gPT4gdW5kZWZpbmVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWF4KGFycmF5KSB7XG4gICAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aClcbiAgICAgICAgPyBiYXNlRXh0cmVtdW0oYXJyYXksIGlkZW50aXR5LCBiYXNlR3QpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ubWF4YCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBpdGVyYXRlZWAgd2hpY2ggaXNcbiAgICAgKiBpbnZva2VkIGZvciBlYWNoIGVsZW1lbnQgaW4gYGFycmF5YCB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uIGJ5IHdoaWNoXG4gICAgICogdGhlIHZhbHVlIGlzIHJhbmtlZC4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ6ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBpdGVyYXRlZSBpbnZva2VkIHBlciBlbGVtZW50LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXhpbXVtIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFt7ICduJzogMSB9LCB7ICduJzogMiB9XTtcbiAgICAgKlxuICAgICAqIF8ubWF4Qnkob2JqZWN0cywgZnVuY3Rpb24obykgeyByZXR1cm4gby5uOyB9KTtcbiAgICAgKiAvLyA9PiB7ICduJzogMiB9XG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLm1heEJ5KG9iamVjdHMsICduJyk7XG4gICAgICogLy8gPT4geyAnbic6IDIgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1heEJ5KGFycmF5LCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpXG4gICAgICAgID8gYmFzZUV4dHJlbXVtKGFycmF5LCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgMiksIGJhc2VHdClcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIG1lYW4gb2YgdGhlIHZhbHVlcyBpbiBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG1lYW4uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWVhbihbNCwgMiwgOCwgNl0pO1xuICAgICAqIC8vID0+IDVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtZWFuKGFycmF5KSB7XG4gICAgICByZXR1cm4gYmFzZU1lYW4oYXJyYXksIGlkZW50aXR5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLm1lYW5gIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYGl0ZXJhdGVlYCB3aGljaCBpc1xuICAgICAqIGludm9rZWQgZm9yIGVhY2ggZWxlbWVudCBpbiBgYXJyYXlgIHRvIGdlbmVyYXRlIHRoZSB2YWx1ZSB0byBiZSBhdmVyYWdlZC5cbiAgICAgKiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDogKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBzaW5jZSA0LjcuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGl0ZXJhdGVlIGludm9rZWQgcGVyIGVsZW1lbnQuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbWVhbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbeyAnbic6IDQgfSwgeyAnbic6IDIgfSwgeyAnbic6IDggfSwgeyAnbic6IDYgfV07XG4gICAgICpcbiAgICAgKiBfLm1lYW5CeShvYmplY3RzLCBmdW5jdGlvbihvKSB7IHJldHVybiBvLm47IH0pO1xuICAgICAqIC8vID0+IDVcbiAgICAgKlxuICAgICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgICAqIF8ubWVhbkJ5KG9iamVjdHMsICduJyk7XG4gICAgICogLy8gPT4gNVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lYW5CeShhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICAgIHJldHVybiBiYXNlTWVhbihhcnJheSwgZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsIDIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbWluaW11bSB2YWx1ZSBvZiBgYXJyYXlgLiBJZiBgYXJyYXlgIGlzIGVtcHR5IG9yIGZhbHNleSxcbiAgICAgKiBgdW5kZWZpbmVkYCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAc2luY2UgMC4xLjBcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5taW4oWzQsIDIsIDgsIDZdKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiBfLm1pbihbXSk7XG4gICAgICogLy8gPT4gdW5kZWZpbmVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWluKGFycmF5KSB7XG4gICAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aClcbiAgICAgICAgPyBiYXNlRXh0cmVtdW0oYXJyYXksIGlkZW50aXR5LCBiYXNlTHQpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ubWluYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBpdGVyYXRlZWAgd2hpY2ggaXNcbiAgICAgKiBpbnZva2VkIGZvciBlYWNoIGVsZW1lbnQgaW4gYGFycmF5YCB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uIGJ5IHdoaWNoXG4gICAgICogdGhlIHZhbHVlIGlzIHJhbmtlZC4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ6ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBpdGVyYXRlZSBpbnZva2VkIHBlciBlbGVtZW50LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtaW5pbXVtIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFt7ICduJzogMSB9LCB7ICduJzogMiB9XTtcbiAgICAgKlxuICAgICAqIF8ubWluQnkob2JqZWN0cywgZnVuY3Rpb24obykgeyByZXR1cm4gby5uOyB9KTtcbiAgICAgKiAvLyA9PiB7ICduJzogMSB9XG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLm1pbkJ5KG9iamVjdHMsICduJyk7XG4gICAgICogLy8gPT4geyAnbic6IDEgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1pbkJ5KGFycmF5LCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpXG4gICAgICAgID8gYmFzZUV4dHJlbXVtKGFycmF5LCBnZXRJdGVyYXRlZShpdGVyYXRlZSwgMiksIGJhc2VMdClcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdHdvIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtdWx0aXBsaWVyIFRoZSBmaXJzdCBudW1iZXIgaW4gYSBtdWx0aXBsaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbXVsdGlwbGljYW5kIFRoZSBzZWNvbmQgbnVtYmVyIGluIGEgbXVsdGlwbGljYXRpb24uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgcHJvZHVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tdWx0aXBseSg2LCA0KTtcbiAgICAgKiAvLyA9PiAyNFxuICAgICAqL1xuICAgIHZhciBtdWx0aXBseSA9IGNyZWF0ZU1hdGhPcGVyYXRpb24oZnVuY3Rpb24obXVsdGlwbGllciwgbXVsdGlwbGljYW5kKSB7XG4gICAgICByZXR1cm4gbXVsdGlwbGllciAqIG11bHRpcGxpY2FuZDtcbiAgICB9LCAxKTtcblxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIGBudW1iZXJgIHJvdW5kZWQgdG8gYHByZWNpc2lvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy4xMC4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyIFRoZSBudW1iZXIgdG8gcm91bmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmVjaXNpb249MF0gVGhlIHByZWNpc2lvbiB0byByb3VuZCB0by5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSByb3VuZGVkIG51bWJlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yb3VuZCg0LjAwNik7XG4gICAgICogLy8gPT4gNFxuICAgICAqXG4gICAgICogXy5yb3VuZCg0LjAwNiwgMik7XG4gICAgICogLy8gPT4gNC4wMVxuICAgICAqXG4gICAgICogXy5yb3VuZCg0MDYwLCAtMik7XG4gICAgICogLy8gPT4gNDEwMFxuICAgICAqL1xuICAgIHZhciByb3VuZCA9IGNyZWF0ZVJvdW5kKCdyb3VuZCcpO1xuXG4gICAgLyoqXG4gICAgICogU3VidHJhY3QgdHdvIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgNC4wLjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW51ZW5kIFRoZSBmaXJzdCBudW1iZXIgaW4gYSBzdWJ0cmFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3VidHJhaGVuZCBUaGUgc2Vjb25kIG51bWJlciBpbiBhIHN1YnRyYWN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGRpZmZlcmVuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc3VidHJhY3QoNiwgNCk7XG4gICAgICogLy8gPT4gMlxuICAgICAqL1xuICAgIHZhciBzdWJ0cmFjdCA9IGNyZWF0ZU1hdGhPcGVyYXRpb24oZnVuY3Rpb24obWludWVuZCwgc3VidHJhaGVuZCkge1xuICAgICAgcmV0dXJuIG1pbnVlbmQgLSBzdWJ0cmFoZW5kO1xuICAgIH0sIDApO1xuXG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIHN1bSBvZiB0aGUgdmFsdWVzIGluIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAc2luY2UgMy40LjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc3VtLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnN1bShbNCwgMiwgOCwgNl0pO1xuICAgICAqIC8vID0+IDIwXG4gICAgICovXG4gICAgZnVuY3Rpb24gc3VtKGFycmF5KSB7XG4gICAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aClcbiAgICAgICAgPyBiYXNlU3VtKGFycmF5LCBpZGVudGl0eSlcbiAgICAgICAgOiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uc3VtYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGBpdGVyYXRlZWAgd2hpY2ggaXNcbiAgICAgKiBpbnZva2VkIGZvciBlYWNoIGVsZW1lbnQgaW4gYGFycmF5YCB0byBnZW5lcmF0ZSB0aGUgdmFsdWUgdG8gYmUgc3VtbWVkLlxuICAgICAqIFRoZSBpdGVyYXRlZSBpcyBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OiAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHNpbmNlIDQuMC4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzdW0uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3RzID0gW3sgJ24nOiA0IH0sIHsgJ24nOiAyIH0sIHsgJ24nOiA4IH0sIHsgJ24nOiA2IH1dO1xuICAgICAqXG4gICAgICogXy5zdW1CeShvYmplY3RzLCBmdW5jdGlvbihvKSB7IHJldHVybiBvLm47IH0pO1xuICAgICAqIC8vID0+IDIwXG4gICAgICpcbiAgICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICAgKiBfLnN1bUJ5KG9iamVjdHMsICduJyk7XG4gICAgICogLy8gPT4gMjBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzdW1CeShhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VTdW0oYXJyYXksIGdldEl0ZXJhdGVlKGl0ZXJhdGVlLCAyKSlcbiAgICAgICAgOiAwO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8vIEFkZCBtZXRob2RzIHRoYXQgcmV0dXJuIHdyYXBwZWQgdmFsdWVzIGluIGNoYWluIHNlcXVlbmNlcy5cbiAgICBsb2Rhc2guYWZ0ZXIgPSBhZnRlcjtcbiAgICBsb2Rhc2guYXJ5ID0gYXJ5O1xuICAgIGxvZGFzaC5hc3NpZ24gPSBhc3NpZ247XG4gICAgbG9kYXNoLmFzc2lnbkluID0gYXNzaWduSW47XG4gICAgbG9kYXNoLmFzc2lnbkluV2l0aCA9IGFzc2lnbkluV2l0aDtcbiAgICBsb2Rhc2guYXNzaWduV2l0aCA9IGFzc2lnbldpdGg7XG4gICAgbG9kYXNoLmF0ID0gYXQ7XG4gICAgbG9kYXNoLmJlZm9yZSA9IGJlZm9yZTtcbiAgICBsb2Rhc2guYmluZCA9IGJpbmQ7XG4gICAgbG9kYXNoLmJpbmRBbGwgPSBiaW5kQWxsO1xuICAgIGxvZGFzaC5iaW5kS2V5ID0gYmluZEtleTtcbiAgICBsb2Rhc2guY2FzdEFycmF5ID0gY2FzdEFycmF5O1xuICAgIGxvZGFzaC5jaGFpbiA9IGNoYWluO1xuICAgIGxvZGFzaC5jaHVuayA9IGNodW5rO1xuICAgIGxvZGFzaC5jb21wYWN0ID0gY29tcGFjdDtcbiAgICBsb2Rhc2guY29uY2F0ID0gY29uY2F0O1xuICAgIGxvZGFzaC5jb25kID0gY29uZDtcbiAgICBsb2Rhc2guY29uZm9ybXMgPSBjb25mb3JtcztcbiAgICBsb2Rhc2guY29uc3RhbnQgPSBjb25zdGFudDtcbiAgICBsb2Rhc2guY291bnRCeSA9IGNvdW50Qnk7XG4gICAgbG9kYXNoLmNyZWF0ZSA9IGNyZWF0ZTtcbiAgICBsb2Rhc2guY3VycnkgPSBjdXJyeTtcbiAgICBsb2Rhc2guY3VycnlSaWdodCA9IGN1cnJ5UmlnaHQ7XG4gICAgbG9kYXNoLmRlYm91bmNlID0gZGVib3VuY2U7XG4gICAgbG9kYXNoLmRlZmF1bHRzID0gZGVmYXVsdHM7XG4gICAgbG9kYXNoLmRlZmF1bHRzRGVlcCA9IGRlZmF1bHRzRGVlcDtcbiAgICBsb2Rhc2guZGVmZXIgPSBkZWZlcjtcbiAgICBsb2Rhc2guZGVsYXkgPSBkZWxheTtcbiAgICBsb2Rhc2guZGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7XG4gICAgbG9kYXNoLmRpZmZlcmVuY2VCeSA9IGRpZmZlcmVuY2VCeTtcbiAgICBsb2Rhc2guZGlmZmVyZW5jZVdpdGggPSBkaWZmZXJlbmNlV2l0aDtcbiAgICBsb2Rhc2guZHJvcCA9IGRyb3A7XG4gICAgbG9kYXNoLmRyb3BSaWdodCA9IGRyb3BSaWdodDtcbiAgICBsb2Rhc2guZHJvcFJpZ2h0V2hpbGUgPSBkcm9wUmlnaHRXaGlsZTtcbiAgICBsb2Rhc2guZHJvcFdoaWxlID0gZHJvcFdoaWxlO1xuICAgIGxvZGFzaC5maWxsID0gZmlsbDtcbiAgICBsb2Rhc2guZmlsdGVyID0gZmlsdGVyO1xuICAgIGxvZGFzaC5mbGF0TWFwID0gZmxhdE1hcDtcbiAgICBsb2Rhc2guZmxhdE1hcERlZXAgPSBmbGF0TWFwRGVlcDtcbiAgICBsb2Rhc2guZmxhdE1hcERlcHRoID0gZmxhdE1hcERlcHRoO1xuICAgIGxvZGFzaC5mbGF0dGVuID0gZmxhdHRlbjtcbiAgICBsb2Rhc2guZmxhdHRlbkRlZXAgPSBmbGF0dGVuRGVlcDtcbiAgICBsb2Rhc2guZmxhdHRlbkRlcHRoID0gZmxhdHRlbkRlcHRoO1xuICAgIGxvZGFzaC5mbGlwID0gZmxpcDtcbiAgICBsb2Rhc2guZmxvdyA9IGZsb3c7XG4gICAgbG9kYXNoLmZsb3dSaWdodCA9IGZsb3dSaWdodDtcbiAgICBsb2Rhc2guZnJvbVBhaXJzID0gZnJvbVBhaXJzO1xuICAgIGxvZGFzaC5mdW5jdGlvbnMgPSBmdW5jdGlvbnM7XG4gICAgbG9kYXNoLmZ1bmN0aW9uc0luID0gZnVuY3Rpb25zSW47XG4gICAgbG9kYXNoLmdyb3VwQnkgPSBncm91cEJ5O1xuICAgIGxvZGFzaC5pbml0aWFsID0gaW5pdGlhbDtcbiAgICBsb2Rhc2guaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0aW9uO1xuICAgIGxvZGFzaC5pbnRlcnNlY3Rpb25CeSA9IGludGVyc2VjdGlvbkJ5O1xuICAgIGxvZGFzaC5pbnRlcnNlY3Rpb25XaXRoID0gaW50ZXJzZWN0aW9uV2l0aDtcbiAgICBsb2Rhc2guaW52ZXJ0ID0gaW52ZXJ0O1xuICAgIGxvZGFzaC5pbnZlcnRCeSA9IGludmVydEJ5O1xuICAgIGxvZGFzaC5pbnZva2VNYXAgPSBpbnZva2VNYXA7XG4gICAgbG9kYXNoLml0ZXJhdGVlID0gaXRlcmF0ZWU7XG4gICAgbG9kYXNoLmtleUJ5ID0ga2V5Qnk7XG4gICAgbG9kYXNoLmtleXMgPSBrZXlzO1xuICAgIGxvZGFzaC5rZXlzSW4gPSBrZXlzSW47XG4gICAgbG9kYXNoLm1hcCA9IG1hcDtcbiAgICBsb2Rhc2gubWFwS2V5cyA9IG1hcEtleXM7XG4gICAgbG9kYXNoLm1hcFZhbHVlcyA9IG1hcFZhbHVlcztcbiAgICBsb2Rhc2gubWF0Y2hlcyA9IG1hdGNoZXM7XG4gICAgbG9kYXNoLm1hdGNoZXNQcm9wZXJ0eSA9IG1hdGNoZXNQcm9wZXJ0eTtcbiAgICBsb2Rhc2gubWVtb2l6ZSA9IG1lbW9pemU7XG4gICAgbG9kYXNoLm1lcmdlID0gbWVyZ2U7XG4gICAgbG9kYXNoLm1lcmdlV2l0aCA9IG1lcmdlV2l0aDtcbiAgICBsb2Rhc2gubWV0aG9kID0gbWV0aG9kO1xuICAgIGxvZGFzaC5tZXRob2RPZiA9IG1ldGhvZE9mO1xuICAgIGxvZGFzaC5taXhpbiA9IG1peGluO1xuICAgIGxvZGFzaC5uZWdhdGUgPSBuZWdhdGU7XG4gICAgbG9kYXNoLm50aEFyZyA9IG50aEFyZztcbiAgICBsb2Rhc2gub21pdCA9IG9taXQ7XG4gICAgbG9kYXNoLm9taXRCeSA9IG9taXRCeTtcbiAgICBsb2Rhc2gub25jZSA9IG9uY2U7XG4gICAgbG9kYXNoLm9yZGVyQnkgPSBvcmRlckJ5O1xuICAgIGxvZGFzaC5vdmVyID0gb3ZlcjtcbiAgICBsb2Rhc2gub3ZlckFyZ3MgPSBvdmVyQXJncztcbiAgICBsb2Rhc2gub3ZlckV2ZXJ5ID0gb3ZlckV2ZXJ5O1xuICAgIGxvZGFzaC5vdmVyU29tZSA9IG92ZXJTb21lO1xuICAgIGxvZGFzaC5wYXJ0aWFsID0gcGFydGlhbDtcbiAgICBsb2Rhc2gucGFydGlhbFJpZ2h0ID0gcGFydGlhbFJpZ2h0O1xuICAgIGxvZGFzaC5wYXJ0aXRpb24gPSBwYXJ0aXRpb247XG4gICAgbG9kYXNoLnBpY2sgPSBwaWNrO1xuICAgIGxvZGFzaC5waWNrQnkgPSBwaWNrQnk7XG4gICAgbG9kYXNoLnByb3BlcnR5ID0gcHJvcGVydHk7XG4gICAgbG9kYXNoLnByb3BlcnR5T2YgPSBwcm9wZXJ0eU9mO1xuICAgIGxvZGFzaC5wdWxsID0gcHVsbDtcbiAgICBsb2Rhc2gucHVsbEFsbCA9IHB1bGxBbGw7XG4gICAgbG9kYXNoLnB1bGxBbGxCeSA9IHB1bGxBbGxCeTtcbiAgICBsb2Rhc2gucHVsbEFsbFdpdGggPSBwdWxsQWxsV2l0aDtcbiAgICBsb2Rhc2gucHVsbEF0ID0gcHVsbEF0O1xuICAgIGxvZGFzaC5yYW5nZSA9IHJhbmdlO1xuICAgIGxvZGFzaC5yYW5nZVJpZ2h0ID0gcmFuZ2VSaWdodDtcbiAgICBsb2Rhc2gucmVhcmcgPSByZWFyZztcbiAgICBsb2Rhc2gucmVqZWN0ID0gcmVqZWN0O1xuICAgIGxvZGFzaC5yZW1vdmUgPSByZW1vdmU7XG4gICAgbG9kYXNoLnJlc3QgPSByZXN0O1xuICAgIGxvZGFzaC5yZXZlcnNlID0gcmV2ZXJzZTtcbiAgICBsb2Rhc2guc2FtcGxlU2l6ZSA9IHNhbXBsZVNpemU7XG4gICAgbG9kYXNoLnNldCA9IHNldDtcbiAgICBsb2Rhc2guc2V0V2l0aCA9IHNldFdpdGg7XG4gICAgbG9kYXNoLnNodWZmbGUgPSBzaHVmZmxlO1xuICAgIGxvZGFzaC5zbGljZSA9IHNsaWNlO1xuICAgIGxvZGFzaC5zb3J0QnkgPSBzb3J0Qnk7XG4gICAgbG9kYXNoLnNvcnRlZFVuaXEgPSBzb3J0ZWRVbmlxO1xuICAgIGxvZGFzaC5zb3J0ZWRVbmlxQnkgPSBzb3J0ZWRVbmlxQnk7XG4gICAgbG9kYXNoLnNwbGl0ID0gc3BsaXQ7XG4gICAgbG9kYXNoLnNwcmVhZCA9IHNwcmVhZDtcbiAgICBsb2Rhc2gudGFpbCA9IHRhaWw7XG4gICAgbG9kYXNoLnRha2UgPSB0YWtlO1xuICAgIGxvZGFzaC50YWtlUmlnaHQgPSB0YWtlUmlnaHQ7XG4gICAgbG9kYXNoLnRha2VSaWdodFdoaWxlID0gdGFrZVJpZ2h0V2hpbGU7XG4gICAgbG9kYXNoLnRha2VXaGlsZSA9IHRha2VXaGlsZTtcbiAgICBsb2Rhc2gudGFwID0gdGFwO1xuICAgIGxvZGFzaC50aHJvdHRsZSA9IHRocm90dGxlO1xuICAgIGxvZGFzaC50aHJ1ID0gdGhydTtcbiAgICBsb2Rhc2gudG9BcnJheSA9IHRvQXJyYXk7XG4gICAgbG9kYXNoLnRvUGFpcnMgPSB0b1BhaXJzO1xuICAgIGxvZGFzaC50b1BhaXJzSW4gPSB0b1BhaXJzSW47XG4gICAgbG9kYXNoLnRvUGF0aCA9IHRvUGF0aDtcbiAgICBsb2Rhc2gudG9QbGFpbk9iamVjdCA9IHRvUGxhaW5PYmplY3Q7XG4gICAgbG9kYXNoLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICBsb2Rhc2gudW5hcnkgPSB1bmFyeTtcbiAgICBsb2Rhc2gudW5pb24gPSB1bmlvbjtcbiAgICBsb2Rhc2gudW5pb25CeSA9IHVuaW9uQnk7XG4gICAgbG9kYXNoLnVuaW9uV2l0aCA9IHVuaW9uV2l0aDtcbiAgICBsb2Rhc2gudW5pcSA9IHVuaXE7XG4gICAgbG9kYXNoLnVuaXFCeSA9IHVuaXFCeTtcbiAgICBsb2Rhc2gudW5pcVdpdGggPSB1bmlxV2l0aDtcbiAgICBsb2Rhc2gudW5zZXQgPSB1bnNldDtcbiAgICBsb2Rhc2gudW56aXAgPSB1bnppcDtcbiAgICBsb2Rhc2gudW56aXBXaXRoID0gdW56aXBXaXRoO1xuICAgIGxvZGFzaC51cGRhdGUgPSB1cGRhdGU7XG4gICAgbG9kYXNoLnVwZGF0ZVdpdGggPSB1cGRhdGVXaXRoO1xuICAgIGxvZGFzaC52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgbG9kYXNoLnZhbHVlc0luID0gdmFsdWVzSW47XG4gICAgbG9kYXNoLndpdGhvdXQgPSB3aXRob3V0O1xuICAgIGxvZGFzaC53b3JkcyA9IHdvcmRzO1xuICAgIGxvZGFzaC53cmFwID0gd3JhcDtcbiAgICBsb2Rhc2gueG9yID0geG9yO1xuICAgIGxvZGFzaC54b3JCeSA9IHhvckJ5O1xuICAgIGxvZGFzaC54b3JXaXRoID0geG9yV2l0aDtcbiAgICBsb2Rhc2guemlwID0gemlwO1xuICAgIGxvZGFzaC56aXBPYmplY3QgPSB6aXBPYmplY3Q7XG4gICAgbG9kYXNoLnppcE9iamVjdERlZXAgPSB6aXBPYmplY3REZWVwO1xuICAgIGxvZGFzaC56aXBXaXRoID0gemlwV2l0aDtcblxuICAgIC8vIEFkZCBhbGlhc2VzLlxuICAgIGxvZGFzaC5lbnRyaWVzID0gdG9QYWlycztcbiAgICBsb2Rhc2guZW50cmllc0luID0gdG9QYWlyc0luO1xuICAgIGxvZGFzaC5leHRlbmQgPSBhc3NpZ25JbjtcbiAgICBsb2Rhc2guZXh0ZW5kV2l0aCA9IGFzc2lnbkluV2l0aDtcblxuICAgIC8vIEFkZCBtZXRob2RzIHRvIGBsb2Rhc2gucHJvdG90eXBlYC5cbiAgICBtaXhpbihsb2Rhc2gsIGxvZGFzaCk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvLyBBZGQgbWV0aG9kcyB0aGF0IHJldHVybiB1bndyYXBwZWQgdmFsdWVzIGluIGNoYWluIHNlcXVlbmNlcy5cbiAgICBsb2Rhc2guYWRkID0gYWRkO1xuICAgIGxvZGFzaC5hdHRlbXB0ID0gYXR0ZW1wdDtcbiAgICBsb2Rhc2guY2FtZWxDYXNlID0gY2FtZWxDYXNlO1xuICAgIGxvZGFzaC5jYXBpdGFsaXplID0gY2FwaXRhbGl6ZTtcbiAgICBsb2Rhc2guY2VpbCA9IGNlaWw7XG4gICAgbG9kYXNoLmNsYW1wID0gY2xhbXA7XG4gICAgbG9kYXNoLmNsb25lID0gY2xvbmU7XG4gICAgbG9kYXNoLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcbiAgICBsb2Rhc2guY2xvbmVEZWVwV2l0aCA9IGNsb25lRGVlcFdpdGg7XG4gICAgbG9kYXNoLmNsb25lV2l0aCA9IGNsb25lV2l0aDtcbiAgICBsb2Rhc2guY29uZm9ybXNUbyA9IGNvbmZvcm1zVG87XG4gICAgbG9kYXNoLmRlYnVyciA9IGRlYnVycjtcbiAgICBsb2Rhc2guZGVmYXVsdFRvID0gZGVmYXVsdFRvO1xuICAgIGxvZGFzaC5kaXZpZGUgPSBkaXZpZGU7XG4gICAgbG9kYXNoLmVuZHNXaXRoID0gZW5kc1dpdGg7XG4gICAgbG9kYXNoLmVxID0gZXE7XG4gICAgbG9kYXNoLmVzY2FwZSA9IGVzY2FwZTtcbiAgICBsb2Rhc2guZXNjYXBlUmVnRXhwID0gZXNjYXBlUmVnRXhwO1xuICAgIGxvZGFzaC5ldmVyeSA9IGV2ZXJ5O1xuICAgIGxvZGFzaC5maW5kID0gZmluZDtcbiAgICBsb2Rhc2guZmluZEluZGV4ID0gZmluZEluZGV4O1xuICAgIGxvZGFzaC5maW5kS2V5ID0gZmluZEtleTtcbiAgICBsb2Rhc2guZmluZExhc3QgPSBmaW5kTGFzdDtcbiAgICBsb2Rhc2guZmluZExhc3RJbmRleCA9IGZpbmRMYXN0SW5kZXg7XG4gICAgbG9kYXNoLmZpbmRMYXN0S2V5ID0gZmluZExhc3RLZXk7XG4gICAgbG9kYXNoLmZsb29yID0gZmxvb3I7XG4gICAgbG9kYXNoLmZvckVhY2ggPSBmb3JFYWNoO1xuICAgIGxvZGFzaC5mb3JFYWNoUmlnaHQgPSBmb3JFYWNoUmlnaHQ7XG4gICAgbG9kYXNoLmZvckluID0gZm9ySW47XG4gICAgbG9kYXNoLmZvckluUmlnaHQgPSBmb3JJblJpZ2h0O1xuICAgIGxvZGFzaC5mb3JPd24gPSBmb3JPd247XG4gICAgbG9kYXNoLmZvck93blJpZ2h0ID0gZm9yT3duUmlnaHQ7XG4gICAgbG9kYXNoLmdldCA9IGdldDtcbiAgICBsb2Rhc2guZ3QgPSBndDtcbiAgICBsb2Rhc2guZ3RlID0gZ3RlO1xuICAgIGxvZGFzaC5oYXMgPSBoYXM7XG4gICAgbG9kYXNoLmhhc0luID0gaGFzSW47XG4gICAgbG9kYXNoLmhlYWQgPSBoZWFkO1xuICAgIGxvZGFzaC5pZGVudGl0eSA9IGlkZW50aXR5O1xuICAgIGxvZGFzaC5pbmNsdWRlcyA9IGluY2x1ZGVzO1xuICAgIGxvZGFzaC5pbmRleE9mID0gaW5kZXhPZjtcbiAgICBsb2Rhc2guaW5SYW5nZSA9IGluUmFuZ2U7XG4gICAgbG9kYXNoLmludm9rZSA9IGludm9rZTtcbiAgICBsb2Rhc2guaXNBcmd1bWVudHMgPSBpc0FyZ3VtZW50cztcbiAgICBsb2Rhc2guaXNBcnJheSA9IGlzQXJyYXk7XG4gICAgbG9kYXNoLmlzQXJyYXlCdWZmZXIgPSBpc0FycmF5QnVmZmVyO1xuICAgIGxvZGFzaC5pc0FycmF5TGlrZSA9IGlzQXJyYXlMaWtlO1xuICAgIGxvZGFzaC5pc0FycmF5TGlrZU9iamVjdCA9IGlzQXJyYXlMaWtlT2JqZWN0O1xuICAgIGxvZGFzaC5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG4gICAgbG9kYXNoLmlzQnVmZmVyID0gaXNCdWZmZXI7XG4gICAgbG9kYXNoLmlzRGF0ZSA9IGlzRGF0ZTtcbiAgICBsb2Rhc2guaXNFbGVtZW50ID0gaXNFbGVtZW50O1xuICAgIGxvZGFzaC5pc0VtcHR5ID0gaXNFbXB0eTtcbiAgICBsb2Rhc2guaXNFcXVhbCA9IGlzRXF1YWw7XG4gICAgbG9kYXNoLmlzRXF1YWxXaXRoID0gaXNFcXVhbFdpdGg7XG4gICAgbG9kYXNoLmlzRXJyb3IgPSBpc0Vycm9yO1xuICAgIGxvZGFzaC5pc0Zpbml0ZSA9IGlzRmluaXRlO1xuICAgIGxvZGFzaC5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbiAgICBsb2Rhc2guaXNJbnRlZ2VyID0gaXNJbnRlZ2VyO1xuICAgIGxvZGFzaC5pc0xlbmd0aCA9IGlzTGVuZ3RoO1xuICAgIGxvZGFzaC5pc01hcCA9IGlzTWFwO1xuICAgIGxvZGFzaC5pc01hdGNoID0gaXNNYXRjaDtcbiAgICBsb2Rhc2guaXNNYXRjaFdpdGggPSBpc01hdGNoV2l0aDtcbiAgICBsb2Rhc2guaXNOYU4gPSBpc05hTjtcbiAgICBsb2Rhc2guaXNOYXRpdmUgPSBpc05hdGl2ZTtcbiAgICBsb2Rhc2guaXNOaWwgPSBpc05pbDtcbiAgICBsb2Rhc2guaXNOdWxsID0gaXNOdWxsO1xuICAgIGxvZGFzaC5pc051bWJlciA9IGlzTnVtYmVyO1xuICAgIGxvZGFzaC5pc09iamVjdCA9IGlzT2JqZWN0O1xuICAgIGxvZGFzaC5pc09iamVjdExpa2UgPSBpc09iamVjdExpa2U7XG4gICAgbG9kYXNoLmlzUGxhaW5PYmplY3QgPSBpc1BsYWluT2JqZWN0O1xuICAgIGxvZGFzaC5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuICAgIGxvZGFzaC5pc1NhZmVJbnRlZ2VyID0gaXNTYWZlSW50ZWdlcjtcbiAgICBsb2Rhc2guaXNTZXQgPSBpc1NldDtcbiAgICBsb2Rhc2guaXNTdHJpbmcgPSBpc1N0cmluZztcbiAgICBsb2Rhc2guaXNTeW1ib2wgPSBpc1N5bWJvbDtcbiAgICBsb2Rhc2guaXNUeXBlZEFycmF5ID0gaXNUeXBlZEFycmF5O1xuICAgIGxvZGFzaC5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuICAgIGxvZGFzaC5pc1dlYWtNYXAgPSBpc1dlYWtNYXA7XG4gICAgbG9kYXNoLmlzV2Vha1NldCA9IGlzV2Vha1NldDtcbiAgICBsb2Rhc2guam9pbiA9IGpvaW47XG4gICAgbG9kYXNoLmtlYmFiQ2FzZSA9IGtlYmFiQ2FzZTtcbiAgICBsb2Rhc2gubGFzdCA9IGxhc3Q7XG4gICAgbG9kYXNoLmxhc3RJbmRleE9mID0gbGFzdEluZGV4T2Y7XG4gICAgbG9kYXNoLmxvd2VyQ2FzZSA9IGxvd2VyQ2FzZTtcbiAgICBsb2Rhc2gubG93ZXJGaXJzdCA9IGxvd2VyRmlyc3Q7XG4gICAgbG9kYXNoLmx0ID0gbHQ7XG4gICAgbG9kYXNoLmx0ZSA9IGx0ZTtcbiAgICBsb2Rhc2gubWF4ID0gbWF4O1xuICAgIGxvZGFzaC5tYXhCeSA9IG1heEJ5O1xuICAgIGxvZGFzaC5tZWFuID0gbWVhbjtcbiAgICBsb2Rhc2gubWVhbkJ5ID0gbWVhbkJ5O1xuICAgIGxvZGFzaC5taW4gPSBtaW47XG4gICAgbG9kYXNoLm1pbkJ5ID0gbWluQnk7XG4gICAgbG9kYXNoLnN0dWJBcnJheSA9IHN0dWJBcnJheTtcbiAgICBsb2Rhc2guc3R1YkZhbHNlID0gc3R1YkZhbHNlO1xuICAgIGxvZGFzaC5zdHViT2JqZWN0ID0gc3R1Yk9iamVjdDtcbiAgICBsb2Rhc2guc3R1YlN0cmluZyA9IHN0dWJTdHJpbmc7XG4gICAgbG9kYXNoLnN0dWJUcnVlID0gc3R1YlRydWU7XG4gICAgbG9kYXNoLm11bHRpcGx5ID0gbXVsdGlwbHk7XG4gICAgbG9kYXNoLm50aCA9IG50aDtcbiAgICBsb2Rhc2gubm9Db25mbGljdCA9IG5vQ29uZmxpY3Q7XG4gICAgbG9kYXNoLm5vb3AgPSBub29wO1xuICAgIGxvZGFzaC5ub3cgPSBub3c7XG4gICAgbG9kYXNoLnBhZCA9IHBhZDtcbiAgICBsb2Rhc2gucGFkRW5kID0gcGFkRW5kO1xuICAgIGxvZGFzaC5wYWRTdGFydCA9IHBhZFN0YXJ0O1xuICAgIGxvZGFzaC5wYXJzZUludCA9IHBhcnNlSW50O1xuICAgIGxvZGFzaC5yYW5kb20gPSByYW5kb207XG4gICAgbG9kYXNoLnJlZHVjZSA9IHJlZHVjZTtcbiAgICBsb2Rhc2gucmVkdWNlUmlnaHQgPSByZWR1Y2VSaWdodDtcbiAgICBsb2Rhc2gucmVwZWF0ID0gcmVwZWF0O1xuICAgIGxvZGFzaC5yZXBsYWNlID0gcmVwbGFjZTtcbiAgICBsb2Rhc2gucmVzdWx0ID0gcmVzdWx0O1xuICAgIGxvZGFzaC5yb3VuZCA9IHJvdW5kO1xuICAgIGxvZGFzaC5ydW5JbkNvbnRleHQgPSBydW5JbkNvbnRleHQ7XG4gICAgbG9kYXNoLnNhbXBsZSA9IHNhbXBsZTtcbiAgICBsb2Rhc2guc2l6ZSA9IHNpemU7XG4gICAgbG9kYXNoLnNuYWtlQ2FzZSA9IHNuYWtlQ2FzZTtcbiAgICBsb2Rhc2guc29tZSA9IHNvbWU7XG4gICAgbG9kYXNoLnNvcnRlZEluZGV4ID0gc29ydGVkSW5kZXg7XG4gICAgbG9kYXNoLnNvcnRlZEluZGV4QnkgPSBzb3J0ZWRJbmRleEJ5O1xuICAgIGxvZGFzaC5zb3J0ZWRJbmRleE9mID0gc29ydGVkSW5kZXhPZjtcbiAgICBsb2Rhc2guc29ydGVkTGFzdEluZGV4ID0gc29ydGVkTGFzdEluZGV4O1xuICAgIGxvZGFzaC5zb3J0ZWRMYXN0SW5kZXhCeSA9IHNvcnRlZExhc3RJbmRleEJ5O1xuICAgIGxvZGFzaC5zb3J0ZWRMYXN0SW5kZXhPZiA9IHNvcnRlZExhc3RJbmRleE9mO1xuICAgIGxvZGFzaC5zdGFydENhc2UgPSBzdGFydENhc2U7XG4gICAgbG9kYXNoLnN0YXJ0c1dpdGggPSBzdGFydHNXaXRoO1xuICAgIGxvZGFzaC5zdWJ0cmFjdCA9IHN1YnRyYWN0O1xuICAgIGxvZGFzaC5zdW0gPSBzdW07XG4gICAgbG9kYXNoLnN1bUJ5ID0gc3VtQnk7XG4gICAgbG9kYXNoLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgbG9kYXNoLnRpbWVzID0gdGltZXM7XG4gICAgbG9kYXNoLnRvRmluaXRlID0gdG9GaW5pdGU7XG4gICAgbG9kYXNoLnRvSW50ZWdlciA9IHRvSW50ZWdlcjtcbiAgICBsb2Rhc2gudG9MZW5ndGggPSB0b0xlbmd0aDtcbiAgICBsb2Rhc2gudG9Mb3dlciA9IHRvTG93ZXI7XG4gICAgbG9kYXNoLnRvTnVtYmVyID0gdG9OdW1iZXI7XG4gICAgbG9kYXNoLnRvU2FmZUludGVnZXIgPSB0b1NhZmVJbnRlZ2VyO1xuICAgIGxvZGFzaC50b1N0cmluZyA9IHRvU3RyaW5nO1xuICAgIGxvZGFzaC50b1VwcGVyID0gdG9VcHBlcjtcbiAgICBsb2Rhc2gudHJpbSA9IHRyaW07XG4gICAgbG9kYXNoLnRyaW1FbmQgPSB0cmltRW5kO1xuICAgIGxvZGFzaC50cmltU3RhcnQgPSB0cmltU3RhcnQ7XG4gICAgbG9kYXNoLnRydW5jYXRlID0gdHJ1bmNhdGU7XG4gICAgbG9kYXNoLnVuZXNjYXBlID0gdW5lc2NhcGU7XG4gICAgbG9kYXNoLnVuaXF1ZUlkID0gdW5pcXVlSWQ7XG4gICAgbG9kYXNoLnVwcGVyQ2FzZSA9IHVwcGVyQ2FzZTtcbiAgICBsb2Rhc2gudXBwZXJGaXJzdCA9IHVwcGVyRmlyc3Q7XG5cbiAgICAvLyBBZGQgYWxpYXNlcy5cbiAgICBsb2Rhc2guZWFjaCA9IGZvckVhY2g7XG4gICAgbG9kYXNoLmVhY2hSaWdodCA9IGZvckVhY2hSaWdodDtcbiAgICBsb2Rhc2guZmlyc3QgPSBoZWFkO1xuXG4gICAgbWl4aW4obG9kYXNoLCAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc291cmNlID0ge307XG4gICAgICBiYXNlRm9yT3duKGxvZGFzaCwgZnVuY3Rpb24oZnVuYywgbWV0aG9kTmFtZSkge1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwobG9kYXNoLnByb3RvdHlwZSwgbWV0aG9kTmFtZSkpIHtcbiAgICAgICAgICBzb3VyY2VbbWV0aG9kTmFtZV0gPSBmdW5jO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfSgpKSwgeyAnY2hhaW4nOiBmYWxzZSB9KTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIFRoZSBzZW1hbnRpYyB2ZXJzaW9uIG51bWJlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgbG9kYXNoLlZFUlNJT04gPSBWRVJTSU9OO1xuXG4gICAgLy8gQXNzaWduIGRlZmF1bHQgcGxhY2Vob2xkZXJzLlxuICAgIGFycmF5RWFjaChbJ2JpbmQnLCAnYmluZEtleScsICdjdXJyeScsICdjdXJyeVJpZ2h0JywgJ3BhcnRpYWwnLCAncGFydGlhbFJpZ2h0J10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICAgIGxvZGFzaFttZXRob2ROYW1lXS5wbGFjZWhvbGRlciA9IGxvZGFzaDtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBgTGF6eVdyYXBwZXJgIG1ldGhvZHMgZm9yIGBfLmRyb3BgIGFuZCBgXy50YWtlYCB2YXJpYW50cy5cbiAgICBhcnJheUVhY2goWydkcm9wJywgJ3Rha2UnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSwgaW5kZXgpIHtcbiAgICAgIExhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgbiA9IG4gPT09IHVuZGVmaW5lZCA/IDEgOiBuYXRpdmVNYXgodG9JbnRlZ2VyKG4pLCAwKTtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gKHRoaXMuX19maWx0ZXJlZF9fICYmICFpbmRleClcbiAgICAgICAgICA/IG5ldyBMYXp5V3JhcHBlcih0aGlzKVxuICAgICAgICAgIDogdGhpcy5jbG9uZSgpO1xuXG4gICAgICAgIGlmIChyZXN1bHQuX19maWx0ZXJlZF9fKSB7XG4gICAgICAgICAgcmVzdWx0Ll9fdGFrZUNvdW50X18gPSBuYXRpdmVNaW4obiwgcmVzdWx0Ll9fdGFrZUNvdW50X18pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5fX3ZpZXdzX18ucHVzaCh7XG4gICAgICAgICAgICAnc2l6ZSc6IG5hdGl2ZU1pbihuLCBNQVhfQVJSQVlfTEVOR1RIKSxcbiAgICAgICAgICAgICd0eXBlJzogbWV0aG9kTmFtZSArIChyZXN1bHQuX19kaXJfXyA8IDAgPyAnUmlnaHQnIDogJycpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG5cbiAgICAgIExhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lICsgJ1JpZ2h0J10gPSBmdW5jdGlvbihuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKVttZXRob2ROYW1lXShuKS5yZXZlcnNlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGBMYXp5V3JhcHBlcmAgbWV0aG9kcyB0aGF0IGFjY2VwdCBhbiBgaXRlcmF0ZWVgIHZhbHVlLlxuICAgIGFycmF5RWFjaChbJ2ZpbHRlcicsICdtYXAnLCAndGFrZVdoaWxlJ10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgdHlwZSA9IGluZGV4ICsgMSxcbiAgICAgICAgICBpc0ZpbHRlciA9IHR5cGUgPT0gTEFaWV9GSUxURVJfRkxBRyB8fCB0eXBlID09IExBWllfV0hJTEVfRkxBRztcblxuICAgICAgTGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oaXRlcmF0ZWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgcmVzdWx0Ll9faXRlcmF0ZWVzX18ucHVzaCh7XG4gICAgICAgICAgJ2l0ZXJhdGVlJzogZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsIDMpLFxuICAgICAgICAgICd0eXBlJzogdHlwZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzdWx0Ll9fZmlsdGVyZWRfXyA9IHJlc3VsdC5fX2ZpbHRlcmVkX18gfHwgaXNGaWx0ZXI7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGBMYXp5V3JhcHBlcmAgbWV0aG9kcyBmb3IgYF8uaGVhZGAgYW5kIGBfLmxhc3RgLlxuICAgIGFycmF5RWFjaChbJ2hlYWQnLCAnbGFzdCddLCBmdW5jdGlvbihtZXRob2ROYW1lLCBpbmRleCkge1xuICAgICAgdmFyIHRha2VOYW1lID0gJ3Rha2UnICsgKGluZGV4ID8gJ1JpZ2h0JyA6ICcnKTtcblxuICAgICAgTGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW3Rha2VOYW1lXSgxKS52YWx1ZSgpWzBdO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBgTGF6eVdyYXBwZXJgIG1ldGhvZHMgZm9yIGBfLmluaXRpYWxgIGFuZCBgXy50YWlsYC5cbiAgICBhcnJheUVhY2goWydpbml0aWFsJywgJ3RhaWwnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciBkcm9wTmFtZSA9ICdkcm9wJyArIChpbmRleCA/ICcnIDogJ1JpZ2h0Jyk7XG5cbiAgICAgIExhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fX2ZpbHRlcmVkX18gPyBuZXcgTGF6eVdyYXBwZXIodGhpcykgOiB0aGlzW2Ryb3BOYW1lXSgxKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUuY29tcGFjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGlkZW50aXR5KTtcbiAgICB9O1xuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbihwcmVkaWNhdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlcihwcmVkaWNhdGUpLmhlYWQoKTtcbiAgICB9O1xuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLmZpbmRMYXN0ID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkuZmluZChwcmVkaWNhdGUpO1xuICAgIH07XG5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUuaW52b2tlTWFwID0gYmFzZVJlc3QoZnVuY3Rpb24ocGF0aCwgYXJncykge1xuICAgICAgaWYgKHR5cGVvZiBwYXRoID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMYXp5V3JhcHBlcih0aGlzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gYmFzZUludm9rZSh2YWx1ZSwgcGF0aCwgYXJncyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS5yZWplY3QgPSBmdW5jdGlvbihwcmVkaWNhdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlcihuZWdhdGUoZ2V0SXRlcmF0ZWUocHJlZGljYXRlKSkpO1xuICAgIH07XG5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihzdGFydCwgZW5kKSB7XG4gICAgICBzdGFydCA9IHRvSW50ZWdlcihzdGFydCk7XG5cbiAgICAgIHZhciByZXN1bHQgPSB0aGlzO1xuICAgICAgaWYgKHJlc3VsdC5fX2ZpbHRlcmVkX18gJiYgKHN0YXJ0ID4gMCB8fCBlbmQgPCAwKSkge1xuICAgICAgICByZXR1cm4gbmV3IExhenlXcmFwcGVyKHJlc3VsdCk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC50YWtlUmlnaHQoLXN0YXJ0KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhcnQpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmRyb3Aoc3RhcnQpO1xuICAgICAgfVxuICAgICAgaWYgKGVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGVuZCA9IHRvSW50ZWdlcihlbmQpO1xuICAgICAgICByZXN1bHQgPSBlbmQgPCAwID8gcmVzdWx0LmRyb3BSaWdodCgtZW5kKSA6IHJlc3VsdC50YWtlKGVuZCAtIHN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS50YWtlUmlnaHRXaGlsZSA9IGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZSgpLnRha2VXaGlsZShwcmVkaWNhdGUpLnJldmVyc2UoKTtcbiAgICB9O1xuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRha2UoTUFYX0FSUkFZX0xFTkdUSCk7XG4gICAgfTtcblxuICAgIC8vIEFkZCBgTGF6eVdyYXBwZXJgIG1ldGhvZHMgdG8gYGxvZGFzaC5wcm90b3R5cGVgLlxuICAgIGJhc2VGb3JPd24oTGF6eVdyYXBwZXIucHJvdG90eXBlLCBmdW5jdGlvbihmdW5jLCBtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgY2hlY2tJdGVyYXRlZSA9IC9eKD86ZmlsdGVyfGZpbmR8bWFwfHJlamVjdCl8V2hpbGUkLy50ZXN0KG1ldGhvZE5hbWUpLFxuICAgICAgICAgIGlzVGFrZXIgPSAvXig/OmhlYWR8bGFzdCkkLy50ZXN0KG1ldGhvZE5hbWUpLFxuICAgICAgICAgIGxvZGFzaEZ1bmMgPSBsb2Rhc2hbaXNUYWtlciA/ICgndGFrZScgKyAobWV0aG9kTmFtZSA9PSAnbGFzdCcgPyAnUmlnaHQnIDogJycpKSA6IG1ldGhvZE5hbWVdLFxuICAgICAgICAgIHJldFVud3JhcHBlZCA9IGlzVGFrZXIgfHwgL15maW5kLy50ZXN0KG1ldGhvZE5hbWUpO1xuXG4gICAgICBpZiAoIWxvZGFzaEZ1bmMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9fd3JhcHBlZF9fLFxuICAgICAgICAgICAgYXJncyA9IGlzVGFrZXIgPyBbMV0gOiBhcmd1bWVudHMsXG4gICAgICAgICAgICBpc0xhenkgPSB2YWx1ZSBpbnN0YW5jZW9mIExhenlXcmFwcGVyLFxuICAgICAgICAgICAgaXRlcmF0ZWUgPSBhcmdzWzBdLFxuICAgICAgICAgICAgdXNlTGF6eSA9IGlzTGF6eSB8fCBpc0FycmF5KHZhbHVlKTtcblxuICAgICAgICB2YXIgaW50ZXJjZXB0b3IgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBsb2Rhc2hGdW5jLmFwcGx5KGxvZGFzaCwgYXJyYXlQdXNoKFt2YWx1ZV0sIGFyZ3MpKTtcbiAgICAgICAgICByZXR1cm4gKGlzVGFrZXIgJiYgY2hhaW5BbGwpID8gcmVzdWx0WzBdIDogcmVzdWx0O1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh1c2VMYXp5ICYmIGNoZWNrSXRlcmF0ZWUgJiYgdHlwZW9mIGl0ZXJhdGVlID09ICdmdW5jdGlvbicgJiYgaXRlcmF0ZWUubGVuZ3RoICE9IDEpIHtcbiAgICAgICAgICAvLyBBdm9pZCBsYXp5IHVzZSBpZiB0aGUgaXRlcmF0ZWUgaGFzIGEgXCJsZW5ndGhcIiB2YWx1ZSBvdGhlciB0aGFuIGAxYC5cbiAgICAgICAgICBpc0xhenkgPSB1c2VMYXp5ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX18sXG4gICAgICAgICAgICBpc0h5YnJpZCA9ICEhdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgsXG4gICAgICAgICAgICBpc1Vud3JhcHBlZCA9IHJldFVud3JhcHBlZCAmJiAhY2hhaW5BbGwsXG4gICAgICAgICAgICBvbmx5TGF6eSA9IGlzTGF6eSAmJiAhaXNIeWJyaWQ7XG5cbiAgICAgICAgaWYgKCFyZXRVbndyYXBwZWQgJiYgdXNlTGF6eSkge1xuICAgICAgICAgIHZhbHVlID0gb25seUxhenkgPyB2YWx1ZSA6IG5ldyBMYXp5V3JhcHBlcih0aGlzKTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgICAgICAgcmVzdWx0Ll9fYWN0aW9uc19fLnB1c2goeyAnZnVuYyc6IHRocnUsICdhcmdzJzogW2ludGVyY2VwdG9yXSwgJ3RoaXNBcmcnOiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBMb2Rhc2hXcmFwcGVyKHJlc3VsdCwgY2hhaW5BbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Vud3JhcHBlZCAmJiBvbmx5TGF6eSkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IHRoaXMudGhydShpbnRlcmNlcHRvcik7XG4gICAgICAgIHJldHVybiBpc1Vud3JhcHBlZCA/IChpc1Rha2VyID8gcmVzdWx0LnZhbHVlKClbMF0gOiByZXN1bHQudmFsdWUoKSkgOiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGBBcnJheWAgbWV0aG9kcyB0byBgbG9kYXNoLnByb3RvdHlwZWAuXG4gICAgYXJyYXlFYWNoKFsncG9wJywgJ3B1c2gnLCAnc2hpZnQnLCAnc29ydCcsICdzcGxpY2UnLCAndW5zaGlmdCddLCBmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9IGFycmF5UHJvdG9bbWV0aG9kTmFtZV0sXG4gICAgICAgICAgY2hhaW5OYW1lID0gL14oPzpwdXNofHNvcnR8dW5zaGlmdCkkLy50ZXN0KG1ldGhvZE5hbWUpID8gJ3RhcCcgOiAndGhydScsXG4gICAgICAgICAgcmV0VW53cmFwcGVkID0gL14oPzpwb3B8c2hpZnQpJC8udGVzdChtZXRob2ROYW1lKTtcblxuICAgICAgbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgaWYgKHJldFVud3JhcHBlZCAmJiAhdGhpcy5fX2NoYWluX18pIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpc1tjaGFpbk5hbWVdKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdLCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gTWFwIG1pbmlmaWVkIG1ldGhvZCBuYW1lcyB0byB0aGVpciByZWFsIG5hbWVzLlxuICAgIGJhc2VGb3JPd24oTGF6eVdyYXBwZXIucHJvdG90eXBlLCBmdW5jdGlvbihmdW5jLCBtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgbG9kYXNoRnVuYyA9IGxvZGFzaFttZXRob2ROYW1lXTtcbiAgICAgIGlmIChsb2Rhc2hGdW5jKSB7XG4gICAgICAgIHZhciBrZXkgPSBsb2Rhc2hGdW5jLm5hbWUgKyAnJztcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlYWxOYW1lcywga2V5KSkge1xuICAgICAgICAgIHJlYWxOYW1lc1trZXldID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmVhbE5hbWVzW2tleV0ucHVzaCh7ICduYW1lJzogbWV0aG9kTmFtZSwgJ2Z1bmMnOiBsb2Rhc2hGdW5jIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVhbE5hbWVzW2NyZWF0ZUh5YnJpZCh1bmRlZmluZWQsIFdSQVBfQklORF9LRVlfRkxBRykubmFtZV0gPSBbe1xuICAgICAgJ25hbWUnOiAnd3JhcHBlcicsXG4gICAgICAnZnVuYyc6IHVuZGVmaW5lZFxuICAgIH1dO1xuXG4gICAgLy8gQWRkIG1ldGhvZHMgdG8gYExhenlXcmFwcGVyYC5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUuY2xvbmUgPSBsYXp5Q2xvbmU7XG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLnJldmVyc2UgPSBsYXp5UmV2ZXJzZTtcbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUudmFsdWUgPSBsYXp5VmFsdWU7XG5cbiAgICAvLyBBZGQgY2hhaW4gc2VxdWVuY2UgbWV0aG9kcyB0byB0aGUgYGxvZGFzaGAgd3JhcHBlci5cbiAgICBsb2Rhc2gucHJvdG90eXBlLmF0ID0gd3JhcHBlckF0O1xuICAgIGxvZGFzaC5wcm90b3R5cGUuY2hhaW4gPSB3cmFwcGVyQ2hhaW47XG4gICAgbG9kYXNoLnByb3RvdHlwZS5jb21taXQgPSB3cmFwcGVyQ29tbWl0O1xuICAgIGxvZGFzaC5wcm90b3R5cGUubmV4dCA9IHdyYXBwZXJOZXh0O1xuICAgIGxvZGFzaC5wcm90b3R5cGUucGxhbnQgPSB3cmFwcGVyUGxhbnQ7XG4gICAgbG9kYXNoLnByb3RvdHlwZS5yZXZlcnNlID0gd3JhcHBlclJldmVyc2U7XG4gICAgbG9kYXNoLnByb3RvdHlwZS50b0pTT04gPSBsb2Rhc2gucHJvdG90eXBlLnZhbHVlT2YgPSBsb2Rhc2gucHJvdG90eXBlLnZhbHVlID0gd3JhcHBlclZhbHVlO1xuXG4gICAgLy8gQWRkIGxhenkgYWxpYXNlcy5cbiAgICBsb2Rhc2gucHJvdG90eXBlLmZpcnN0ID0gbG9kYXNoLnByb3RvdHlwZS5oZWFkO1xuXG4gICAgaWYgKHN5bUl0ZXJhdG9yKSB7XG4gICAgICBsb2Rhc2gucHJvdG90eXBlW3N5bUl0ZXJhdG9yXSA9IHdyYXBwZXJUb0l0ZXJhdG9yO1xuICAgIH1cbiAgICByZXR1cm4gbG9kYXNoO1xuICB9KTtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvLyBFeHBvcnQgbG9kYXNoLlxuICB2YXIgXyA9IHJ1bkluQ29udGV4dCgpO1xuXG4gIC8vIFNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMsIGxpa2Ugci5qcywgY2hlY2sgZm9yIGNvbmRpdGlvbiBwYXR0ZXJucyBsaWtlOlxuICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBFeHBvc2UgTG9kYXNoIG9uIHRoZSBnbG9iYWwgb2JqZWN0IHRvIHByZXZlbnQgZXJyb3JzIHdoZW4gTG9kYXNoIGlzXG4gICAgLy8gbG9hZGVkIGJ5IGEgc2NyaXB0IHRhZyBpbiB0aGUgcHJlc2VuY2Ugb2YgYW4gQU1EIGxvYWRlci5cbiAgICAvLyBTZWUgaHR0cDovL3JlcXVpcmVqcy5vcmcvZG9jcy9lcnJvcnMuaHRtbCNtaXNtYXRjaCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIC8vIFVzZSBgXy5ub0NvbmZsaWN0YCB0byByZW1vdmUgTG9kYXNoIGZyb20gdGhlIGdsb2JhbCBvYmplY3QuXG4gICAgcm9vdC5fID0gXztcblxuICAgIC8vIERlZmluZSBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlIHNvLCB0aHJvdWdoIHBhdGggbWFwcGluZywgaXQgY2FuIGJlXG4gICAgLy8gcmVmZXJlbmNlZCBhcyB0aGUgXCJ1bmRlcnNjb3JlXCIgbW9kdWxlLlxuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfO1xuICAgIH0pO1xuICB9XG4gIC8vIENoZWNrIGZvciBgZXhwb3J0c2AgYWZ0ZXIgYGRlZmluZWAgaW4gY2FzZSBhIGJ1aWxkIG9wdGltaXplciBhZGRzIGl0LlxuICBlbHNlIGlmIChmcmVlTW9kdWxlKSB7XG4gICAgLy8gRXhwb3J0IGZvciBOb2RlLmpzLlxuICAgIChmcmVlTW9kdWxlLmV4cG9ydHMgPSBfKS5fID0gXztcbiAgICAvLyBFeHBvcnQgZm9yIENvbW1vbkpTIHN1cHBvcnQuXG4gICAgZnJlZUV4cG9ydHMuXyA9IF87XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gRXhwb3J0IHRvIHRoZSBnbG9iYWwgb2JqZWN0LlxuICAgIHJvb3QuXyA9IF87XG4gIH1cbn0uY2FsbCh0aGlzKSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHRsb2FkZWQ6IGZhbHNlLFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIl9fd2VicGFja19yZXF1aXJlX18ubm1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUucGF0aHMgPSBbXTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gUGhhc2VyOyIsImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuXHJcbmNvbnN0IFNGWF9WT0xVTUVfS0VZID0gJ3NmeFZvbHVtZSc7XHJcbmNvbnN0IE1VU0lDX1ZPTFVNRV9LRVkgPSAnbXVzaWNWb2x1bWUnO1xyXG5jb25zdCBHTE9CQUxfVk9MVU1FX0tFWSA9ICdnbG9iYWxWb2x1bWUnO1xyXG5jb25zdCBMRUdBQ1lfVk9MVU1FX0tFWSA9ICd2b2x1bWUnO1xyXG5cclxuZnVuY3Rpb24gcGFyc2VTdG9yZWRWb2x1bWUocmF3LCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIGNvbnN0IHYgPSBOdW1iZXIucGFyc2VGbG9hdChyYXcgPz8gU3RyaW5nKGRlZmF1bHRWYWx1ZSkpO1xyXG5cclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHYpKSByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG5cclxuICAgIHJldHVybiBQaGFzZXIuTWF0aC5DbGFtcCh2LCAwLCAxKTtcclxufVxyXG5cclxuLy8vLyBHZXR0ZXJzJlNldHRlcnMgLy8vL1xyXG4vLyBPYnRpZW5lIGVsIHZvbHVtZW4gYWxtYWNlbmFkbyBjb24gdW5hIGNsYXZlXHJcbmZ1bmN0aW9uIGdldFN0b3JlZFZvbHVtZUJ5S2V5KGtleSwgZmFsbGJhY2tLZXksIGRlZmF1bHRWYWx1ZSA9IDEpIHtcclxuICAgIGNvbnN0IHJhdyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICBpZiAocmF3ICE9PSBudWxsKSByZXR1cm4gcGFyc2VTdG9yZWRWb2x1bWUocmF3LCBkZWZhdWx0VmFsdWUpO1xyXG5cclxuICAgIGNvbnN0IGZhbGxiYWNrUmF3ID0gZmFsbGJhY2tLZXkgPyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShmYWxsYmFja0tleSkgOiBudWxsO1xyXG4gICAgaWYgKGZhbGxiYWNrUmF3ICE9PSBudWxsKSByZXR1cm4gcGFyc2VTdG9yZWRWb2x1bWUoZmFsbGJhY2tSYXcsIGRlZmF1bHRWYWx1ZSk7XHJcblxyXG4gICAgcmV0dXJuIFBoYXNlci5NYXRoLkNsYW1wKGRlZmF1bHRWYWx1ZSwgMCwgMSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldExlZ2FjeVZvbHVtZShkZWZhdWx0VmFsdWUgPSAxKSB7XHJcbiAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMRUdBQ1lfVk9MVU1FX0tFWSk7XHJcbiAgICBpZiAocmF3ID09PSBudWxsKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICByZXR1cm4gcGFyc2VTdG9yZWRWb2x1bWUocmF3LCBkZWZhdWx0VmFsdWUpO1xyXG59XHJcblxyXG4vLyBBc2VndXJhIHF1ZSBleGlzdGFuIGxvcyB2YWxvcmVzIGRlIHZvbHVtZW4gYWxtYWNlbmFkb3NcclxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZVN0b3JlZEF1ZGlvU2V0dGluZ3MoZGVmYXVsdFZhbHVlID0gMSkge1xyXG4gICAgY29uc3QgaGFzU2Z4ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oU0ZYX1ZPTFVNRV9LRVkpICE9PSBudWxsO1xyXG4gICAgY29uc3QgaGFzTXVzaWMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShNVVNJQ19WT0xVTUVfS0VZKSAhPT0gbnVsbDtcclxuXHJcbiAgICBpZiAoaGFzU2Z4ICYmIGhhc011c2ljKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgbGVnYWN5Vm9sdW1lID0gZ2V0TGVnYWN5Vm9sdW1lKGRlZmF1bHRWYWx1ZSk7XHJcbiAgICBjb25zdCBpbml0aWFsVm9sdW1lID0gbGVnYWN5Vm9sdW1lICYmIGxlZ2FjeVZvbHVtZSA+IDAgPyBsZWdhY3lWb2x1bWUgOiBkZWZhdWx0VmFsdWU7XHJcblxyXG4gICAgaWYgKCFoYXNTZngpIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNGWF9WT0xVTUVfS0VZLCBTdHJpbmcoaW5pdGlhbFZvbHVtZSkpO1xyXG4gICAgaWYgKCFoYXNNdXNpYykgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTVVTSUNfVk9MVU1FX0tFWSwgU3RyaW5nKGluaXRpYWxWb2x1bWUpKTtcclxufVxyXG5cclxuLy8gT2J0aWVuZSBlbCB2b2x1bWVuIGFsbWFjZW5hZG8gcGFyYSBsb3MgZWZlY3RvcyBkZSBzb25pZG9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JlZFNmeFZvbHVtZShkZWZhdWx0VmFsdWUgPSAxKSB7XHJcbiAgICByZXR1cm4gZ2V0U3RvcmVkVm9sdW1lQnlLZXkoU0ZYX1ZPTFVNRV9LRVksIExFR0FDWV9WT0xVTUVfS0VZLCBkZWZhdWx0VmFsdWUpO1xyXG59XHJcblxyXG4vLyBPYnRpZW5lIGVsIHZvbHVtZW4gYWxtYWNlbmFkbyBwYXJhIGxhIG3DunNpY2FcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JlZE11c2ljVm9sdW1lKGRlZmF1bHRWYWx1ZSA9IDEpIHtcclxuICAgIHJldHVybiBnZXRTdG9yZWRWb2x1bWVCeUtleShNVVNJQ19WT0xVTUVfS0VZLCBMRUdBQ1lfVk9MVU1FX0tFWSwgZGVmYXVsdFZhbHVlKTtcclxufVxyXG5cclxuLy8gT2J0aWVuZSBlbCB2b2x1bWVuIGdsb2JhbFxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmVkR2xvYmFsVm9sdW1lKGRlZmF1bHRWYWx1ZSA9IDEpIHtcclxuICAgIHJldHVybiBnZXRTdG9yZWRWb2x1bWVCeUtleShHTE9CQUxfVk9MVU1FX0tFWSwgbnVsbCwgZGVmYXVsdFZhbHVlKTtcclxufVxyXG5cclxuLy8gQWxtYWNlbmEgZWwgdm9sdW1lbiBnbG9iYWxcclxuZXhwb3J0IGZ1bmN0aW9uIHNldFN0b3JlZEdsb2JhbFZvbHVtZSh2b2x1bWUpIHtcclxuICAgIGNvbnN0IHYgPSBQaGFzZXIuTWF0aC5DbGFtcChOdW1iZXIodm9sdW1lKSwgMCwgMSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShHTE9CQUxfVk9MVU1FX0tFWSwgU3RyaW5nKHYpKTtcclxuICAgIHJldHVybiB2O1xyXG59XHJcblxyXG4vLyBBbG1hY2VuYSBlbCB2b2x1bWVuIHBhcmEgbG9zIGVmZWN0b3MgZGUgc29uaWRvXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTdG9yZWRTZnhWb2x1bWUodm9sdW1lKSB7XHJcbiAgICBjb25zdCB2ID0gUGhhc2VyLk1hdGguQ2xhbXAoTnVtYmVyKHZvbHVtZSksIDAsIDEpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU0ZYX1ZPTFVNRV9LRVksIFN0cmluZyh2KSk7XHJcblxyXG4gICAgcmV0dXJuIHY7XHJcbn1cclxuXHJcbi8vIEFsbWFjZW5hIGVsIHZvbHVtZW4gcGFyYSBsYSBtw7pzaWNhXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTdG9yZWRNdXNpY1ZvbHVtZSh2b2x1bWUpIHtcclxuICAgIGNvbnN0IHYgPSBQaGFzZXIuTWF0aC5DbGFtcChOdW1iZXIodm9sdW1lKSwgMCwgMSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShNVVNJQ19WT0xVTUVfS0VZLCBTdHJpbmcodikpO1xyXG5cclxuICAgIHJldHVybiB2O1xyXG59XHJcbi8vLy8vLy8vL1xyXG5cclxuLy8gQXBsaWNhIGVsIHZvbHVtZW4gYWwgU291bmRNYW5hZ2VyIHkgYSBsYSBtw7pzaWNhIGdsb2JhbFxyXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlTdG9yZWRWb2x1bWUoc2NlbmUsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgbGV0IGdsb2JhbFZvbCA9IGdldFN0b3JlZEdsb2JhbFZvbHVtZSgpO1xyXG4gICAgbGV0IHNmeFZvbHVtZSA9IGdldFN0b3JlZFNmeFZvbHVtZSgpO1xyXG4gICAgbGV0IG11c2ljVm9sdW1lID0gZ2V0U3RvcmVkTXVzaWNWb2x1bWUoKTtcclxuXHJcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgc2Z4Vm9sdW1lID0gUGhhc2VyLk1hdGguQ2xhbXAoTnVtYmVyKG9wdGlvbnMpLCAwLCAxKTtcclxuICAgICAgICBtdXNpY1ZvbHVtZSA9IHNmeFZvbHVtZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2Z4Vm9sdW1lID0gb3B0aW9ucy5zZnhWb2x1bWUgPz8gc2Z4Vm9sdW1lO1xyXG4gICAgICAgIG11c2ljVm9sdW1lID0gb3B0aW9ucy5tdXNpY1ZvbHVtZSA/PyBtdXNpY1ZvbHVtZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZSB1c2EgZWwgdm9sdW1lbiBnbG9iYWwgY29tbyBtYXN0ZXJcclxuICAgIHNjZW5lLnNvdW5kLnZvbHVtZSA9IGdsb2JhbFZvbDtcclxuXHJcbiAgICBjb25zdCBtdXNpYyA9IHNjZW5lLmdhbWUuZ2xvYmFscy5tdXNpYztcclxuICAgIGlmIChtdXNpYyAmJiAnc2V0Vm9sdW1lJyBpbiBtdXNpYykge1xyXG4gICAgICAgIG11c2ljLnNldFZvbHVtZShtdXNpY1ZvbHVtZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFJlcHJvZHVjZSB1biBzb25pZG8gZGUgY2xpY2tcclxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlDbGljayhzY2VuZSwga2V5ID0gJ3Nvbmlkb0NsaWNrJykge1xyXG4gICAgc2NlbmUuc291bmQucGxheShrZXksIHsgdm9sdW1lOiBnZXRTdG9yZWRTZnhWb2x1bWUoKSB9KTtcclxufVxyXG5cclxuLy8gUmVwcm9kdWNlIGxhIG3DunNpY2EgZGUgZm9uZG8gZW4gYnVjbGVcclxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUxvb3BpbmdNdXNpYyhzY2VuZSwgc291bmRLZXksIHsgbG9vcCA9IHRydWUgfSA9IHt9KSB7XHJcbiAgICBjb25zdCB2b2x1bWUgPSBnZXRTdG9yZWRNdXNpY1ZvbHVtZSgpO1xyXG4gICAgbGV0IG11c2ljID0gc2NlbmUuZ2FtZS5nbG9iYWxzLm11c2ljO1xyXG4gICAgaWYgKCFtdXNpYykge1xyXG4gICAgICAgIG11c2ljID0gc2NlbmUuc291bmQuYWRkKHNvdW5kS2V5LCB7IGxvb3AsIHZvbHVtZSB9KTtcclxuICAgICAgICBzY2VuZS5nYW1lLmdsb2JhbHMubXVzaWMgPSBtdXNpYztcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZSBhY3R1YWxpemEgdm9sdW1lbiBzaSBlbCB0aXBvIGxvIHNvcG9ydGFcclxuICAgIGlmIChtdXNpYyAmJiAnc2V0Vm9sdW1lJyBpbiBtdXNpYykgbXVzaWMuc2V0Vm9sdW1lKHZvbHVtZSk7XHJcblxyXG4gICAgY29uc3QgdHJ5UGxheSA9ICgpID0+IHtcclxuICAgICAgICBpZiAoIW11c2ljIHx8ICEoJ3BsYXknIGluIG11c2ljKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBubyBzZSByZWluaWNpYSBzaSB5YSBlc3Q/IHNvbmFuZG9cclxuICAgICAgICBpZiAoJ2lzUGxheWluZycgaW4gbXVzaWMgJiYgbXVzaWMuaXNQbGF5aW5nKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG11c2ljLnBsYXkoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQXVkaW8uanNdIE5vIHNlIGhhIHBvZGlkbyByZXByb2R1Y2lyIHRvZGF2P2EgbGEgbT9zaWNhLicsIGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBwcmltZXJvIHNlIGludGVudGEgcmVwcm9kdWNpciBuYWRhIG3DoXMgY2FyZ2FyXHJcbiAgICB0cnlQbGF5KCk7XHJcblxyXG4gICAgLy8gc2lubywgc2UgcmVpbnRlbnRhIHRyYXMgbGEgcHJpbWVyYSBpbnRlcmFjY2nDs24vY2xpY2tcclxuICAgIHNjZW5lLmlucHV0Lm9uY2UoJ3BvaW50ZXJkb3duJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGN0eCA9IHNjZW5lLnNvdW5kLmNvbnRleHQ7XHJcbiAgICAgICAgaWYgKGN0eCAmJiBjdHguc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBjdHgucmVzdW1lKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggeyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeVBsYXkoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBtdXNpYztcclxufVxyXG4iLCJpbXBvcnQgeyBwbGF5Q2xpY2sgfSBmcm9tICcuL0F1ZGlvLmpzJztcclxuXHJcbi8vIENyZWEgdW4gYm90w7NuIGJhc2UgcGFyYSBsYSBVSVxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVUlCdXR0b24oc2NlbmUsIHtcclxuICAgIHgsIHksXHJcbiAgICBsYWJlbCxcclxuICAgIG9uQ2xpY2ssXHJcbiAgICB0ZXh0dXJlTm9ybWFsID0gJ2JvdG9uU2luU2VsZWNjaW9uYXInLFxyXG4gICAgdGV4dHVyZUhvdmVyID0gJ2JvdG9uU2VsZWNjaW9uYWRvJyxcclxuICAgIHNjYWxlID0gMixcclxuICAgIHRleHRTdHlsZSA9IHt9LFxyXG4gICAgY2xpY2tTb3VuZEtleSA9ICdzb25pZG9DbGljaycsXHJcbn0pIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHNjZW5lLmFkZC5zcHJpdGUoeCwgeSwgdGV4dHVyZU5vcm1hbClcclxuICAgICAgICAuc2V0U2NhbGUoc2NhbGUpXHJcbiAgICAgICAgLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KTtcclxuXHJcbiAgICBjb25zdCB0ZXh0ID0gc2NlbmUuYWRkLnRleHQoeCwgeSwgbGFiZWwsIHRleHRTdHlsZSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgLy8gZXZlbnRvcyBkZWwgYm90w7NuXHJcbiAgICBjb25zdCBzZXROb3JtYWwgPSAoKSA9PiBidXR0b24uc2V0VGV4dHVyZSh0ZXh0dXJlTm9ybWFsKTtcclxuICAgIGNvbnN0IHNldEhvdmVyID0gKCkgPT4gYnV0dG9uLnNldFRleHR1cmUodGV4dHVyZUhvdmVyKTtcclxuXHJcbiAgICBidXR0b24ub24oJ3BvaW50ZXJvdmVyJywgc2V0SG92ZXIpO1xyXG4gICAgYnV0dG9uLm9uKCdwb2ludGVyb3V0Jywgc2V0Tm9ybWFsKTtcclxuICAgIGJ1dHRvbi5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAgICAgc2V0SG92ZXIoKTtcclxuICAgICAgICBwbGF5Q2xpY2soc2NlbmUsIGNsaWNrU291bmRLZXkpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBzb2xvIHNlIGxhbnphIHNpIHNlIHN1ZWx0YSBlbmNpbWFcclxuICAgIGJ1dHRvbi5vbigncG9pbnRlcnVwJywgKHBvaW50ZXIpID0+IHtcclxuICAgICAgICBjb25zdCBpbnNpZGUgPSBidXR0b24uZ2V0Qm91bmRzKCkuY29udGFpbnMocG9pbnRlci54LCBwb2ludGVyLnkpO1xyXG4gICAgICAgIGlmICghaW5zaWRlKSB7IFxyXG4gICAgICAgICAgICBzZXROb3JtYWwoKTsgXHJcbiAgICAgICAgICAgIHJldHVybjsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRIb3ZlcigpO1xyXG4gICAgICAgIG9uQ2xpY2s/LigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHsgYnV0dG9uLCB0ZXh0IH07XHJcbn1cclxuXHJcbi8vIENyZWEgdW4gYm90w7NuIGJhc2UgY29uIHVuIGljb25vIChjb21vIGVsIGRlIHZvbHZlciBhdHLDoXMpXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJY29uQnV0dG9uKHNjZW5lLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgICAgeCwgeSxcclxuICAgICAgICB0ZXh0dXJlLFxyXG4gICAgICAgIG9uQ2xpY2ssXHJcbiAgICAgICAgc2NhbGUgPSAxLFxyXG4gICAgICAgIGhvdmVyU2NhbGUgPSAxLjEsXHJcbiAgICAgICAgY2xpY2tTb3VuZEtleSA9ICdzb25pZG9DbGljaycsXHJcbiAgICB9ID0gb3B0aW9ucztcclxuXHJcbiAgICBjb25zdCBidXR0b24gPSBzY2VuZS5hZGRcclxuICAgICAgICAuc3ByaXRlKHgsIHksIHRleHR1cmUpXHJcbiAgICAgICAgLnNldFNjYWxlKHNjYWxlKVxyXG4gICAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSk7XHJcblxyXG4gICAgLy8gZXZlbnRvcyBkZWwgYm90w7NuXHJcbiAgICBidXR0b24ub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4gYnV0dG9uLnNldFNjYWxlKHNjYWxlICogaG92ZXJTY2FsZSkpO1xyXG4gICAgYnV0dG9uLm9uKCdwb2ludGVyb3V0JywgKCkgPT4gYnV0dG9uLnNldFNjYWxlKHNjYWxlKSk7XHJcbiAgICBidXR0b24ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgIHBsYXlDbGljayhzY2VuZSwgY2xpY2tTb3VuZEtleSk7XHJcbiAgICB9KTtcclxuICAgIC8vIHNvbG8gc2UgbGFuemEgc2kgc2Ugc3VlbHRhIGVuY2ltYVxyXG4gICAgYnV0dG9uLm9uKCdwb2ludGVydXAnLCAocG9pbnRlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IGluc2lkZSA9IGJ1dHRvbi5nZXRCb3VuZHMoKS5jb250YWlucyhwb2ludGVyLngsIHBvaW50ZXIueSk7XHJcbiAgICAgICAgaWYgKCFpbnNpZGUpIHJldHVybjtcclxuICAgICAgICBvbkNsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gYnV0dG9uO1xyXG59XHJcbiIsIi8vIFBhbnRhbGxhIGRlbCBNZW7DuiBQcmluY2lwYWxcbmltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IGNyZWF0ZVVJQnV0dG9uIH0gZnJvbSAnLi4vVUkvQnV0dG9ucy5qcyc7XG5pbXBvcnQgeyBlbnN1cmVMb29waW5nTXVzaWMsIGFwcGx5U3RvcmVkVm9sdW1lIH0gZnJvbSAnLi4vVUkvQXVkaW8uanMnO1xuXG5leHBvcnQgY2xhc3MgTWVudV9TY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdNZW51X1NjZW5lJyk7XG4gICAgfVxuXG4gICAgcHJlbG9hZCgpIHtcbiAgICAgICAgLy8gZm9uZG9cbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdmb25kb01lbnVQcmluY2lwYWwnLCAnQVNTRVRTL0ZPTkRPUy9NRU5VX1BSSU5DSVBBTC5wbmcnKTtcblxuICAgICAgICAvLyBib3RvbmVzXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYm90b25TZWxlY2Npb25hZG8nLCAnQVNTRVRTL1VJL0JPVE9ORVMvQk9UT05fQkFTRV9HX1NFTEVDQ0lPTkFETy5wbmcnKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblNpblNlbGVjY2lvbmFyJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0JPVE9OX0JBU0VfRy5wbmcnKTtcblxuICAgICAgICAvLyBsb2dvXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnbG9nb0VtcHJlc2EnLCAnQVNTRVRTL0xPR08vbG9nb19lbXByZXNhLnBuZycpO1xuXG4gICAgICAgIC8vIGF1ZGlvXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc29uaWRvR2VuZXJhbCcsICdBU1NFVFMvU09OSURPL1NPTklETzEubXAzJyk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc29uaWRvQ2xpY2snLCAnQVNTRVRTL1NPTklETy9Tb25pZG9Cb3Rvbi5tcDMnKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIC8vIG3DunNpY2EgZGUgZm9uZG9cbiAgICAgICAgYXBwbHlTdG9yZWRWb2x1bWUodGhpcyk7XG4gICAgICAgIGVuc3VyZUxvb3BpbmdNdXNpYyh0aGlzLCAnc29uaWRvR2VuZXJhbCcsIHsgbG9vcDogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBlc3RpbG8gYmFzZSBkZWwgdGV4dG9cbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLmdhbWUuZ2xvYmFscz8uZGVmYXVsdFRleHRTdHlsZSA/PyB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyMHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIGxheW91dFxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IGNlbnRlclggPSB3aWR0aCAvIDI7XG4gICAgICAgIGNvbnN0IHJpZ2h0SGFsZlggPSBjZW50ZXJYICsgKGNlbnRlclggLyAyKTtcblxuICAgICAgICAvLyBmb25kbyBhanVzdGFkbyBhbCBjYW52YXNcbiAgICAgICAgY29uc3QgYmFja2dyb3VuZCA9IHRoaXMuYWRkLmltYWdlKDAsIDAsICdmb25kb01lbnVQcmluY2lwYWwnKVxuICAgICAgICAgICAgLnNldE9yaWdpbigwKVxuICAgICAgICAgICAgLnNldERlcHRoKC0xKTtcbiAgICAgICAgYmFja2dyb3VuZC5zZXREaXNwbGF5U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIHTDrXR1bG8gZGVsIGp1ZWdvXG4gICAgICAgIHRoaXMuYWRkLnRleHQocmlnaHRIYWxmWCwgMTE1LCAnVm9sbGV5IENsYXNoJywge1xuICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICBmb250U2l6ZTogJzY4cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICAvLy8vIEJPVE9ORVMgLy8vL1xuICAgICAgICBjb25zdCBmaXJzdEJ1dHRvblkgPSBoZWlnaHQgLyAyIC0gNjM7XG4gICAgICAgIGNvbnN0IGJ1dHRvblNwYWNpbmcgPSA3MDtcbiAgICAgICAgY29uc3QgYnV0dG9uVGV4dFN0eWxlID0geyAuLi5zdHlsZSwgZm9udFNpemU6ICcyOHB4JywgY29sb3I6ICcjMDAwMDAwJyB9O1xuXG4gICAgICAgIC8vIGJvdMOzbiBKdWdhclxuICAgICAgICBjcmVhdGVVSUJ1dHRvbih0aGlzLCB7XG4gICAgICAgICAgICB4OiByaWdodEhhbGZYLFxuICAgICAgICAgICAgeTogZmlyc3RCdXR0b25ZLFxuICAgICAgICAgICAgbGFiZWw6ICdKdWdhcicsXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLnNjZW5lLnN0YXJ0KCdNb2RlR2FtZV9TY2VuZScpLFxuICAgICAgICAgICAgdGV4dFN0eWxlOiBidXR0b25UZXh0U3R5bGUsXG4gICAgICAgICAgICBjbGlja1NvdW5kS2V5OiAnc29uaWRvQ2xpY2snLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBib3TDs24gVHV0b3JpYWxcbiAgICAgICAgY3JlYXRlVUlCdXR0b24odGhpcywge1xuICAgICAgICAgICAgeDogcmlnaHRIYWxmWCxcbiAgICAgICAgICAgIHk6IGZpcnN0QnV0dG9uWSArIGJ1dHRvblNwYWNpbmcsXG4gICAgICAgICAgICBsYWJlbDogJ1R1dG9yaWFsJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuc2NlbmUuc3RhcnQoJ1R1dG9yaWFsX1NjZW5lJywgeyByZXR1cm5TY2VuZTogJ01lbnVfU2NlbmUnIH0pLFxuICAgICAgICAgICAgdGV4dFN0eWxlOiBidXR0b25UZXh0U3R5bGUsXG4gICAgICAgICAgICBjbGlja1NvdW5kS2V5OiAnc29uaWRvQ2xpY2snLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBib3TDs24gQ29uZmlndXJhY2nDs25cbiAgICAgICAgY3JlYXRlVUlCdXR0b24odGhpcywge1xuICAgICAgICAgICAgeDogcmlnaHRIYWxmWCxcbiAgICAgICAgICAgIHk6IGZpcnN0QnV0dG9uWSArIGJ1dHRvblNwYWNpbmcgKiAyLFxuICAgICAgICAgICAgbGFiZWw6ICdDb25maWd1cmFjacOzbicsXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLnNjZW5lLnN0YXJ0KCdDb25maWd1cmF0aW9uX1NjZW5lJyksXG4gICAgICAgICAgICB0ZXh0U3R5bGU6IGJ1dHRvblRleHRTdHlsZSxcbiAgICAgICAgICAgIGNsaWNrU291bmRLZXk6ICdzb25pZG9DbGljaycsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGJvdMOzbiBDcsOpZGl0b3NcbiAgICAgICAgY3JlYXRlVUlCdXR0b24odGhpcywge1xuICAgICAgICAgICAgeDogcmlnaHRIYWxmWCxcbiAgICAgICAgICAgIHk6IGZpcnN0QnV0dG9uWSArIGJ1dHRvblNwYWNpbmcgKiAzLFxuICAgICAgICAgICAgbGFiZWw6ICdDcsOpZGl0b3MnLFxuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5zY2VuZS5zdGFydCgnQ3JlZGl0c19TY2VuZScpLFxuICAgICAgICAgICAgdGV4dFN0eWxlOiBidXR0b25UZXh0U3R5bGUsXG4gICAgICAgICAgICBjbGlja1NvdW5kS2V5OiAnc29uaWRvQ2xpY2snLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBib3TDs24gZGUgY2VycmFyIHNlc2nDs25cbiAgICAgICAgY3JlYXRlVUlCdXR0b24odGhpcywge1xuICAgICAgICAgICAgeDogd2lkdGggLSAxMTUsXG4gICAgICAgICAgICB5OiA0MCxcbiAgICAgICAgICAgIGxhYmVsOiAnQ2VycmFyIFNlc2nDs24nLFxuICAgICAgICAgICAgb25DbGljazogKCkgPT4geyB0aGlzLmhhbmRsZUxvZ291dCgpIH0sXG4gICAgICAgICAgICB0ZXh0U3R5bGU6IGJ1dHRvblRleHRTdHlsZSxcbiAgICAgICAgICAgIGNsaWNrU291bmRLZXk6ICdzb25pZG9DbGljaycsXG4gICAgICAgIH0pO1xuICAgICAgICAvLy8vLy8vLy9cblxuICAgICAgICAvLyBsb2dvIGRlIGxhIGVtcHJlc2FcbiAgICAgICAgdGhpcy5hZGQuaW1hZ2UodGhpcy5zY2FsZS53aWR0aCAtIDIwLCB0aGlzLnNjYWxlLmhlaWdodCAtIDIwLCAnbG9nb0VtcHJlc2EnKVxuICAgICAgICAgICAgLnNldFNjYWxlKDAuNDIpXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDEsIDEpO1xuXG4gICAgICAgIC8vLy8vLy8vL1xuICAgICAgICAvLyBFc3RhZG8gZGVsIHNlcnZpZG9yXG4gICAgICAgIHRoaXMuY29ubmVjdGlvblRleHQgPSB0aGlzLmFkZC50ZXh0KDIwLCAyMCwgJ1NlcnZpZG9yOiBPTkxJTkUnLCB7IGZvbnRTaXplOiAnMTZweCcsIGNvbG9yOiAnIzAwZmYwMCcgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBvblVwZGF0ZUNvdW50ID0gKGNvdW50KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uVGV4dC5hY3RpdmUgJiYgdGhpcy5jb25uZWN0aW9uVGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblRleHQuc2V0VGV4dChgU2Vydmlkb3I6IE9OTElORSB8IFVzdWFyaW9zOiAke2NvdW50fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2FtZS5ldmVudHMub24oJ3VwZGF0ZV9vbmxpbmVfY291bnQnLCBvblVwZGF0ZUNvdW50KTtcblxuICAgICAgICB0aGlzLmV2ZW50cy5vbmNlKCdzaHV0ZG93bicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5ldmVudHMub2ZmKCd1cGRhdGVfb25saW5lX2NvdW50Jywgb25VcGRhdGVDb3VudCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZUxvZ291dCgpIHtcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSB0aGlzLnJlZ2lzdHJ5LmdldCgndXNlcm5hbWUnKTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBBdmlzYXIgYWwgc2Vydmlkb3IgcGFyYSBxdWUgZGVqZSBsaWJyZSBlbCBwdWVzdG8gZGUgSG9zdFxuICAgICAgICAgICAgYXdhaXQgZmV0Y2goJy9hcGkvbG9nb3V0Jywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBsb2dvdXRcIik7IH1cblxuICAgICAgICAvLyBMaW1waWFyIGxvY2FsXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3ZvbGV5X3VzZXJuYW1lJyk7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3ZvbGV5X3Nlc3Npb25fdG9rZW4nKTtcblxuICAgICAgICAvLyBMaW1waWFyIHJlZ2lzdHJ5XG4gICAgICAgIHRoaXMucmVnaXN0cnkuZGVzdHJveSgpO1xuXG4gICAgICAgIC8vIFZvbHZlciBhIGxhIHBhbnRhbGxhIGRlIGxvZ2luXG4gICAgICAgIHRoaXMuc2NlbmUuc3RvcCgnQ29ubmVjdGlvbl9TY2VuZScpO1xuICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdMb2dnaW5nX1NjZW5lJyk7XG4gICAgfVxufSIsIi8vIENsYXNlIGRlIGxhIGVudGlkYWQgXCJwZXJzb25hamVcIiwgc2UgdGllbmUgZW4gY3VlbnRhIHF1ZSBzb24gMyBwZXJzb25hamVzIGRpc3RpbnRvc1xyXG5cclxuY29uc3QgUE9XRVJVUF9EVVJBVElPTl9NUyA9IHtcclxuICB2ZWxvY2lkYWQ6IDQwMDAsXHJcbiAgcmFsZW50aXphcjogNDAwMCxcclxuICBwYXJhbGl6YXI6IDI1MDAsXHJcbiAgcG9yMjogNDAwMCxcclxuICBwb3IzOiA0MDAwLFxyXG59O1xyXG5cclxuY29uc3QgU1BFRURfTVVMVCA9IHtcclxuICB2ZWxvY2lkYWQ6IDEuNSxcclxuICByYWxlbnRpemFyOiAwLjUsXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheWVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgaWQsIHgsIHksIGNoYXJhY3RlclR5cGUpIHtcclxuICAgICAgICAvLyBJTklDSUFMSVpBQ0nDk05cclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkOyAgICAgICAgICAgICAgICAgICAgICAgLy8gaWRlbnRpZmljYWRvciBkZWwganVnYWRvciAoUDEsIFAyKVxyXG4gICAgICAgIHRoaXMuY2hhcmFjdGVyVHlwZSA9IGNoYXJhY3RlclR5cGU7IC8vIGluZGljYSBxdcOpIHBlcnNvbmFqZSBzZSBoYSBlbGVnaWRvXHJcblxyXG4gICAgICAgIC8vIHZlbG9jaWRhZCBkZSBtb3ZpbWllbnRvXHJcbiAgICAgICAgdGhpcy5iYXNlTW92ZVNwZWVkID0gMjUwO1xyXG4gICAgICAgIHRoaXMubW92ZVNwZWVkID0gdGhpcy5iYXNlTW92ZVNwZWVkO1xyXG5cclxuICAgICAgICB0aGlzLmp1bXBTcGVlZCA9IDI3NTsgICAvLyBmdWVyemEgZGUgc2FsdG9cclxuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVQb3dlclVwcyA9IHt9OyAgIC8vIHBvd2VydXBzIGFjdGl2b3NcclxuXHJcbiAgICAgICAgLy8gZXN0YWRvcyBkZSBwb3dlci11cHNcclxuICAgICAgICB0aGlzLmlzUGFyYWx5emVkID0gZmFsc2U7ICAgICAgIC8vIHBhcmEgZWwgcG93ZXIgdXAgXCJwYXJhbGl6YXJcIlxyXG4gICAgICAgIHRoaXMucGFyYWx5c2lzVHdlZW4gPSBudWxsOyAgICAgLy8gYWwgcXVlZGFyc2UgcGFyYWxpemFkbyAtPiByb2pvXHJcbiAgICAgICAgdGhpcy5zcGVlZEVmZmVjdEFjdGl2ZSA9IGZhbHNlOyAvLyB2ZWxvY2lkYWQgLT4gY2lhbi92ZXJkZVxyXG4gICAgICAgIHRoaXMuc2xvd0VmZmVjdEFjdGl2ZSA9IGZhbHNlOyAgLy8gcmFsZW50aXphZG8gLT4gYXp1bFxyXG5cclxuICAgICAgICB0aGlzLnNjb3JlTXVsdGlwbGllciA9IDE7ICAgICAgIC8vIHBhcmEgcG9yMiAvIHBvcjNcclxuICAgICAgICAvLyB0ZXh0byBmbG90YW50ZSBwYXJhIG1vc3RyYXIgeDIgLyB4M1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGllclRleHQgPSB0aGlzLnNjZW5lLmFkZC50ZXh0KHgsIHkgLSA1MCwgJycsIHtcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyMHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcclxuICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXHJcbiAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogNFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41LCAxKVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoMjApXHJcbiAgICAgICAgICAgIC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnBvd2VyVXBJbnZlbnRvcnkgPSBbXTsgLy8gbcOheGltbyAyXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5pc1JlY2VpdmluZyA9IGZhbHNlOyAgIC8vIGVzdGFkbyBkZSByZWNlcGNpw7NuXHJcblxyXG4gICAgICAgIC8vIGzDrW1pdGVzIGRlIG1vdmltaWVudG8gcGVyc29uYWxpemFkb3NcclxuICAgICAgICB0aGlzLmJvdW5kc0xlZnQgPSAwO1xyXG4gICAgICAgIHRoaXMuYm91bmRzUmlnaHQgPSA5NjA7XHJcbiAgICAgICAgdGhpcy5ib3VuZHNUb3AgPSAwO1xyXG4gICAgICAgIHRoaXMuYm91bmRzQm90dG9tID0gNTQwO1xyXG5cclxuICAgICAgICAvLyBjb25maWd1cmFjacOzbiBkZSBsb3Mgc3ByaXRlcyB5IGxhcyBhbmltYWNpb25lcyBzZWfDum4gZWwgcGVyc29uYWplIGVsZWdpZG9cclxuICAgICAgICBjb25zdCBDSEFSQUNURVJfQ09ORklHID0ge1xyXG4gICAgICAgICAgICAvLyBlcXVpbGlicmFkbyB5IHNpbXDDoXRpY29cclxuICAgICAgICAgICAgY2hhcmFjdGVyQToge1xyXG4gICAgICAgICAgICAgICAgdGV4dHVyZUtleTogJ2NoYXJBX21vdmUnLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRGcmFtZTogMCxcclxuICAgICAgICAgICAgICAgIGlkbGVMZWZ0QW5pbTogJ2NoYXJBX2lkbGVMZWZ0JyxcclxuICAgICAgICAgICAgICAgIGlkbGVSaWdodEFuaW06ICdjaGFyQV9pZGxlUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgcnVuTGVmdEFuaW06ICdjaGFyQV9ydW5MZWZ0JyxcclxuICAgICAgICAgICAgICAgIHJ1blJpZ2h0QW5pbTogJ2NoYXJBX3J1blJpZ2h0JyxcclxuICAgICAgICAgICAgICAgIGp1bXBMZWZ0QW5pbTogJ2NoYXJBX2p1bXBMZWZ0JyxcclxuICAgICAgICAgICAgICAgIGp1bXBSaWdodEFuaW06ICdjaGFyQV9qdW1wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZUxlZnRBbmltOiAnY2hhckFfcmVjZWl2ZUxlZnQnLFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZVJpZ2h0QW5pbTogJ2NoYXJBX3JlY2VpdmVSaWdodCcsXHJcbiAgICAgICAgICAgICAgICB2aWN0b3J5OlwiY2hhckFfdmljdG9yeVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHLDoXBpZG8geSBjb21wZXRpdGl2b1xyXG4gICAgICAgICAgICBjaGFyYWN0ZXJCOiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlS2V5OiAnY2hhckJfbW92ZScsXHJcbiAgICAgICAgICAgICAgICBzdGFydEZyYW1lOiAwLFxyXG4gICAgICAgICAgICAgICAgaWRsZUxlZnRBbmltOiAnY2hhckJfaWRsZUxlZnQnLFxyXG4gICAgICAgICAgICAgICAgaWRsZVJpZ2h0QW5pbTogJ2NoYXJCX2lkbGVSaWdodCcsXHJcbiAgICAgICAgICAgICAgICBydW5MZWZ0QW5pbTogJ2NoYXJCX3J1bkxlZnQnLFxyXG4gICAgICAgICAgICAgICAgcnVuUmlnaHRBbmltOiAnY2hhckJfcnVuUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAganVtcExlZnRBbmltOiAnY2hhckJfanVtcExlZnQnLFxyXG4gICAgICAgICAgICAgICAganVtcFJpZ2h0QW5pbTogJ2NoYXJCX2p1bXBSaWdodCcsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlTGVmdEFuaW06ICdjaGFyQl9yZWNlaXZlTGVmdCcsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlUmlnaHRBbmltOiAnY2hhckJfcmVjZWl2ZVJpZ2h0JyxcclxuICAgICAgICAgICAgICAgIHZpY3Rvcnk6XCJjaGFyQl92aWN0b3J5XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gZGl2ZXJ0aWRvIHkgYWxnbyBkaXN0cmHDrWRvXHJcbiAgICAgICAgICAgIGNoYXJhY3RlckM6IHtcclxuICAgICAgICAgICAgICAgIHRleHR1cmVLZXk6ICdjaGFyQ19tb3ZlJyxcclxuICAgICAgICAgICAgICAgIHN0YXJ0RnJhbWU6IDAsXHJcbiAgICAgICAgICAgICAgICBpZGxlTGVmdEFuaW06ICdjaGFyQ19pZGxlTGVmdCcsXHJcbiAgICAgICAgICAgICAgICBpZGxlUmlnaHRBbmltOiAnY2hhckNfaWRsZVJpZ2h0JyxcclxuICAgICAgICAgICAgICAgIHJ1bkxlZnRBbmltOiAnY2hhckNfcnVuTGVmdCcsXHJcbiAgICAgICAgICAgICAgICBydW5SaWdodEFuaW06ICdjaGFyQ19ydW5SaWdodCcsXHJcbiAgICAgICAgICAgICAgICBqdW1wTGVmdEFuaW06ICdjaGFyQ19qdW1wTGVmdCcsXHJcbiAgICAgICAgICAgICAgICBqdW1wUmlnaHRBbmltOiAnY2hhckNfanVtcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVMZWZ0QW5pbTogJ2NoYXJDX3JlY2VpdmVMZWZ0JyxcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVSaWdodEFuaW06ICdjaGFyQ19yZWNlaXZlUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgdmljdG9yeTpcImNoYXJDX3ZpY3RvcnlcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gc2kgdmllbmUgdW4gdGlwbyBkZSBwZXJzb25hamUgaW52w6FsaWRvLCBzZSB1c2EgY2hhcmFjdGVyQSBwb3IgZGVmZWN0b1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gQ0hBUkFDVEVSX0NPTkZJR1tjaGFyYWN0ZXJUeXBlXSB8fCBDSEFSQUNURVJfQ09ORklHLmNoYXJhY3RlckE7XHJcblxyXG4gICAgICAgIC8vIHNlIGNyZWEgZWwgc3ByaXRlIGbDrXNpY28gZGVsIGp1Z2Fkb3JcclxuICAgICAgICB0aGlzLnNwcml0ZSA9IHRoaXMuc2NlbmUucGh5c2ljcy5hZGQuc3ByaXRlKFxyXG4gICAgICAgICAgICB4LFxyXG4gICAgICAgICAgICB5LFxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy50ZXh0dXJlS2V5LFxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zdGFydEZyYW1lXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBzZSBoYWNlIHVuIHBvY28gbcOhcyBncmFuZGVcclxuICAgICAgICB0aGlzLnNwcml0ZS5zZXRTY2FsZSgyLjUpO1xyXG4gICAgICAgIC8vIHNlIGFqdXN0YSBsYSBoaXRib3ggYWwgbnVldm8gdGFtYcOxbyBwYXJhIGxhcyBjb2xpc2lvbmVzLCBzZSByZWR1Y2VuXHJcbiAgICAgICAgLy90aGlzLnNwcml0ZS5ib2R5LnNldFNpemUodGhpcy5zcHJpdGUud2lkdGgsIHRoaXMuc3ByaXRlLmhlaWdodCwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5zZXRTaXplKHRoaXMuc3ByaXRlLndpZHRoICogMC45LCB0aGlzLnNwcml0ZS5oZWlnaHQgKiAwLjksIHRydWUpO1xyXG5cclxuICAgICAgICAvLyBzZSBndWFyZGEgdW5hIHJlZmVyZW5jaWEgaGFjaWEgUGxheWVyIGRlbnRybyBkZWwgcHJvcGlvIHNwcml0ZVxyXG4gICAgICAgIC8vIChlcyDDunRpbCBzaSBlbiBjb2xpc2lvbmVzIHNlIHF1aWVyZSBhY2NlZGVyIGEgbGEgbMOzZ2ljYSlcclxuICAgICAgICB0aGlzLnNwcml0ZS5zZXREYXRhKCdwbGF5ZXInLCB0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gcGFyYSBjb250cm9sYXIgZGlyZWNjacOzbiBhY3R1YWxcclxuICAgICAgICB0aGlzLmZhY2luZyA9ICdyaWdodCc7XHJcblxyXG4gICAgICAgIC8vIGVzdGFkbyBzaW1wbGU6IGVuIGVsIGFpcmUgbyBub1xyXG4gICAgICAgIHRoaXMuaXNPbkdyb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGZsYWcgcGFyYSBzYWJlciBzaSBlc3TDoSBlbiBhbmltYWNpw7NuIGRlIHNhbHRvXHJcbiAgICAgICAgdGhpcy5pc0p1bXBpbmcgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyB0aW1lc3RhbXAgcGFyYSBkZXRlY3RhciBzaSBpc0p1bXBpbmcgc2UgcXVlZGEgc3R1Y2sgKHRpbWVvdXQgZGUgMSBzZWd1bmRvKVxyXG4gICAgICAgIHRoaXMuanVtcFN0YXJ0VGltZSA9IDA7XHJcblxyXG4gICAgICAgIC8vIGN1YW5kbyBzZSB0ZXJtaW5lIGxhIGFuaW1hY2nDs24gZGUgcmVjaWJpciwgc2UgZGVqYSBkZSBcImVzdGFyIHJlY2liaWVuZG9cIlxyXG4gICAgICAgIHRoaXMuc3ByaXRlLm9uKCdhbmltYXRpb25jb21wbGV0ZScsIChhbmltKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbS5rZXkgPT09IHRoaXMuY29uZmlnLnJlY2VpdmVMZWZ0QW5pbSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGFuaW0ua2V5ID09PSB0aGlzLmNvbmZpZy5yZWNlaXZlUmlnaHRBbmltXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVjZWl2aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZWwgc2FsdG8gdGVybWluYSBzZWfDum4gbGEgZsOtc2ljYSArIHVwZGF0ZSgpLCBubyBwb3IgbGEgYW5pbWFjacOzbi5cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEFuaW1hdGlvbiBjb21wbGV0ZSBoYW5kbGVyIGVycm9yIGZvciAke2FuaW0ua2V5fTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGVscGVyIHBhcmEgdmVyaWZpY2FyIHNpIGVzdMOhIGVuIGVsIHN1ZWxvIGRlIGZvcm1hIGZpYWJsZVxyXG4gICAgaXNHcm91bmRlZCgpIHtcclxuICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5zcHJpdGUuYm9keTtcclxuICAgICAgICBpZiAoIWJvZHkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gYmxvY2tlZC5kb3duIOKGkiBjb2xpc2lvbmVzIGNvbiBsw61taXRlcyBkZWwgbXVuZG9cclxuICAgICAgICAvLyB0b3VjaGluZy5kb3duIOKGkiBjb2xpc2lvbmVzIGNvbiBvdHJvcyBjdWVycG9zXHJcbiAgICAgICAgcmV0dXJuIGJvZHkuYmxvY2tlZC5kb3duIHx8IGJvZHkudG91Y2hpbmcuZG93bjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb21wcnVlYmEgc2kgbG9zIHBpZXMgZGVsIGp1Z2Fkb3IgZXN0w6FuIGNlcmNhIGRlbCBzdWVsb1xyXG4gICAgaXNOZWFyR3JvdW5kKHRocmVzaG9sZCA9IDEyKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHRoaXMuc3ByaXRlLmJvZHk7XHJcbiAgICAgICAgaWYgKCFib2R5KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjZW5lLmdyb3VuZFkgIT09ICdudW1iZXInKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIHBhcnRlIGluZmVyaW9yIGRlbCBib2R5IChubyBkZWwgc3ByaXRlIGVzY2FsYWRvKVxyXG4gICAgICAgIGNvbnN0IGZlZXRZID0gYm9keS55ICsgYm9keS5oZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKGZlZXRZIC0gdGhpcy5zY2VuZS5ncm91bmRZKSA8PSB0aHJlc2hvbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8vLyBBTklNQUNJT05FUyAvLy8vXHJcbiAgICAvLyBNb3ZpbWllbnRvIGRlbCBwZXJzb25hamUgaGFjaWEgbGEgaXpxdWllcmRhXHJcbiAgICBtb3ZlTGVmdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1BhcmFseXplZCB8fCB0aGlzLmlzUmVjZWl2aW5nKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldFZlbG9jaXR5WCgtdGhpcy5tb3ZlU3BlZWQpO1xyXG4gICAgICAgIHRoaXMuZmFjaW5nID0gJ2xlZnQnO1xyXG4gICAgICAgIHRoaXMucGxheUFuaW1hdGlvbih0aGlzLmNvbmZpZy5ydW5MZWZ0QW5pbSk7XHJcbiAgICB9XHJcbiAgICAvLyBNb3ZpbWllbnRvIGRlbCBwZXJzb25hamUgaGFjaWEgbGEgZGVyZWNoYVxyXG4gICAgbW92ZVJpZ2h0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUGFyYWx5emVkIHx8IHRoaXMuaXNSZWNlaXZpbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5zcHJpdGUuc2V0VmVsb2NpdHlYKHRoaXMubW92ZVNwZWVkKTtcclxuICAgICAgICB0aGlzLmZhY2luZyA9ICdyaWdodCc7XHJcbiAgICAgICAgdGhpcy5wbGF5QW5pbWF0aW9uKHRoaXMuY29uZmlnLnJ1blJpZ2h0QW5pbSk7XHJcbiAgICB9ICAgIFxyXG5cclxuICAgIC8vIFNhbHRvL3JlbWF0ZSBkZWwgcGVyc29uYWplIGhhY2lhIGxhIGl6cXVpZXJkYVxyXG4gICAganVtcExlZnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQYXJhbHl6ZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNHcm91bmRlZCgpIHx8IHRoaXMuaXNOZWFyR3JvdW5kKDIwKSkge1xyXG4gICAgICAgICAgICAvLyBwb3Igc2kgdW5hIHJlY2VwY2nDs24gc2UgcXVlZMOzIGEgbWVkaWFzLCBzZSBjYW5jZWxhXHJcbiAgICAgICAgICAgIHRoaXMuaXNSZWNlaXZpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaXNKdW1waW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5qdW1wU3RhcnRUaW1lID0gdGhpcy5zY2VuZS50aW1lLm5vdztcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGUuc2V0VmVsb2NpdHlZKC10aGlzLmp1bXBTcGVlZCk7XHJcbiAgICAgICAgICAgIHRoaXMuZmFjaW5nID0gJ2xlZnQnO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlBbmltYXRpb24odGhpcy5jb25maWcuanVtcExlZnRBbmltKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZT8ucGxheVNmeD8uKHRoaXMuc2NlbmU/LnNmeD8uanVtcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gU2FsdG8vcmVtYXRlIGRlbCBwZXJzb25hamUgaGFjaWEgbGEgZGVyZWNoYVxyXG4gICAganVtcFJpZ2h0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUGFyYWx5emVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzR3JvdW5kZWQoKSB8fCB0aGlzLmlzTmVhckdyb3VuZCgyMCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pc1JlY2VpdmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pc0p1bXBpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmp1bXBTdGFydFRpbWUgPSB0aGlzLnNjZW5lLnRpbWUubm93O1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZS5zZXRWZWxvY2l0eVkoLXRoaXMuanVtcFNwZWVkKTtcclxuICAgICAgICAgICAgdGhpcy5mYWNpbmcgPSAncmlnaHQnO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlBbmltYXRpb24odGhpcy5jb25maWcuanVtcFJpZ2h0QW5pbSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmU/LnBsYXlTZng/Lih0aGlzLnNjZW5lPy5zZng/Lmp1bXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBSZWNlcGNpw7NuIGRlbCBwZXJzb25hamUgcG9yIGxhIGl6cXVpZXJkYVxyXG4gICAgcmVjZWl2ZUxlZnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQYXJhbHl6ZWQpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5pc1JlY2VpdmluZykgcmV0dXJuOyAvLyBubyBzZSByZWluaWNpYSBzaSB5YSBlc3TDoSByZWNpYmllbmRvIFxyXG5cclxuICAgICAgICAvLyBzaSBlc3TDoSB0b2NhbmRvIGVsIHN1ZWxvLCByZWNpYmUgbGEgcGVsb3RhXHJcbiAgICAgICAgaWYgKHRoaXMuaXNHcm91bmRlZCgpIHx8IHRoaXMuaXNOZWFyR3JvdW5kKDIwKSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzUmVjZWl2aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGUuc2V0VmVsb2NpdHlYKDApO1xyXG4gICAgICAgICAgICB0aGlzLmZhY2luZyA9ICdsZWZ0JztcclxuICAgICAgICAgICAgdGhpcy5wbGF5QW5pbWF0aW9uKHRoaXMuY29uZmlnLnJlY2VpdmVMZWZ0QW5pbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gUmVjZXBjacOzbiBkZWwgcGVyc29uYWplIHBvciBsYSBkZXJlY2hhXHJcbiAgICByZWNlaXZlUmlnaHQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQYXJhbHl6ZWQpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5pc1JlY2VpdmluZykgcmV0dXJuOyAvLyBubyBzZSByZWluaWNpYSBzaSB5YSBlc3TDoSByZWNpYmllbmRvIFxyXG5cclxuICAgICAgICAvLyBzaSBlc3TDoSB0b2NhbmRvIGVsIHN1ZWxvLCByZWNpYmUgbGEgcGVsb3RhXHJcbiAgICAgICAgaWYgKHRoaXMuaXNHcm91bmRlZCgpIHx8IHRoaXMuaXNOZWFyR3JvdW5kKDIwKSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzUmVjZWl2aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGUuc2V0VmVsb2NpdHlYKDApO1xyXG4gICAgICAgICAgICB0aGlzLmZhY2luZyA9ICdyaWdodCc7XHJcbiAgICAgICAgICAgIHRoaXMucGxheUFuaW1hdGlvbih0aGlzLmNvbmZpZy5yZWNlaXZlUmlnaHRBbmltKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUGVyc29uYWplIGlkbGUgaXpkYVxyXG4gICAgaWRsZUxlZnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNlaXZpbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gc2llbXByZSBkZXRlbmVyIGxhIHZlbG9jaWRhZCBob3Jpem9udGFsIGFsIGVudHJhciBlbiBpZGxlXHJcbiAgICAgICAgdGhpcy5zcHJpdGUuc2V0VmVsb2NpdHlYKDApO1xyXG4gICAgICAgIHRoaXMuZmFjaW5nID0gJ2xlZnQnO1xyXG4gICAgICAgIC8vIHJlcHJvZHVjaXIgbGEgYW5pbWFjacOzbiBkZSBpZGxlXHJcbiAgICAgICAgdGhpcy5wbGF5QW5pbWF0aW9uKHRoaXMuY29uZmlnLmlkbGVMZWZ0QW5pbSk7XHJcbiAgICB9XHJcbiAgICAvLyBQZXJzb25hamUgaWRsZSBkY2hhXHJcbiAgICBpZGxlUmlnaHQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNlaXZpbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gc2llbXByZSBkZXRlbmVyIGxhIHZlbG9jaWRhZCBob3Jpem9udGFsIGFsIGVudHJhciBlbiBpZGxlXHJcbiAgICAgICAgdGhpcy5zcHJpdGUuc2V0VmVsb2NpdHlYKDApO1xyXG4gICAgICAgIHRoaXMuZmFjaW5nID0gJ3JpZ2h0JztcclxuICAgICAgICAvLyByZXByb2R1Y2lyIGxhIGFuaW1hY2nDs24gZGUgaWRsZVxyXG4gICAgICAgIHRoaXMucGxheUFuaW1hdGlvbih0aGlzLmNvbmZpZy5pZGxlUmlnaHRBbmltKTtcclxuICAgIH1cclxuICAgIC8vLy8vLy8vXHJcblxyXG4gICAgLy8gRXN0YWJsZWNlciBsb3MgbMOtbWl0ZXMgZGUgbW92aW1pZW50byBkZWwganVnYWRvciAocGFyYSBjb25maW5hciBhIGxhIGNhbmNoYSlcclxuICAgIHNldEJvdW5kcyhsZWZ0LCByaWdodCwgdG9wLCBib3R0b20pIHtcclxuICAgICAgICB0aGlzLmJvdW5kc0xlZnQgPSBsZWZ0O1xyXG4gICAgICAgIHRoaXMuYm91bmRzUmlnaHQgPSByaWdodDtcclxuICAgICAgICB0aGlzLmJvdW5kc1RvcCA9IHRvcDtcclxuICAgICAgICB0aGlzLmJvdW5kc0JvdHRvbSA9IGJvdHRvbTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNYW50ZW5lciBlbCBqdWdhZG9yIGRlbnRybyBkZSBsb3MgbMOtbWl0ZXNcclxuICAgIGNsYW1wV2l0aGluQm91bmRzKCkge1xyXG4gICAgICAgIGNvbnN0IGhhbGZXaWR0aCA9IHRoaXMuc3ByaXRlLndpZHRoIC8gMjtcclxuICAgICAgICAvLyBsaW1pdGFyIHBvc2ljacOzbiBob3Jpem9udGFsIChYKVxyXG4gICAgICAgIGlmICh0aGlzLnNwcml0ZS54IC0gaGFsZldpZHRoIDwgdGhpcy5ib3VuZHNMZWZ0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnggPSB0aGlzLmJvdW5kc0xlZnQgKyBoYWxmV2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnNldFZlbG9jaXR5WCgwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3ByaXRlLnggKyBoYWxmV2lkdGggPiB0aGlzLmJvdW5kc1JpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnggPSB0aGlzLmJvdW5kc1JpZ2h0IC0gaGFsZldpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZS5zZXRWZWxvY2l0eVgoMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1vdmVyIGVsIGp1Z2Fkb3IgYSB1bmEgcG9zaWNpw7NuIGNvbmNyZXRhICh5IGRldGVuZXJsbylcclxuICAgIC8vIChzZSBsbGFtYSBhbCBjYW1iaWFyIGRlIHNldHMpXHJcbiAgICBzZXRQb3NpdGlvbih4LCB5KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNwcml0ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLnNwcml0ZS5zZXRQb3NpdGlvbih4LCB5KTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5zZXRWZWxvY2l0eSgwLCAwKTsgLy8gcG9yIHNpIHZlbsOtYSBjb24gdmVsb2NpZGFkXHJcblxyXG4gICAgICAgIC8vIGFjdHVhbGl6YXIgdGFtYmnDqW4gbGEgcG9zaWNpw7NuIGRlbCB0ZXh0byB4Mi94M1xyXG4gICAgICAgIHRoaXMudXBkYXRlTXVsdGlwbGllclRleHRQb3NpdGlvbigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB1cGRhdGVNdWx0aXBsaWVyVGV4dFBvc2l0aW9uKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5tdWx0aXBsaWVyVGV4dCB8fCAhdGhpcy5zcHJpdGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gYWx0dXJhIOKAnHZpc3VhbOKAnSBkZWwgc3ByaXRlIHBhcmEgY29sb2NhciBlbCB0ZXh0byBlbmNpbWEgZGUgbGEgY2FiZXphXHJcbiAgICAgICAgY29uc3QgZGlzcGxheUggPSB0aGlzLnNwcml0ZS5kaXNwbGF5SGVpZ2h0IHx8IHRoaXMuc3ByaXRlLmhlaWdodCB8fCA0MDtcclxuICAgICAgICBjb25zdCBvZmZzZXRZID0gZGlzcGxheUggKiAwLjY7IC8vIGFqdXN0YSBzaSBxdWllcmVzIG3DoXMgYXJyaWJhL2FiYWpvXHJcblxyXG4gICAgICAgIHRoaXMubXVsdGlwbGllclRleHQuc2V0UG9zaXRpb24oXHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLngsXHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnkgLSBvZmZzZXRZXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXByb2R1Y2UgdW5hIGFuaW1hY2nDs24gc2kgZXhpc3RlIChzb2xvIHNpIG5vIGVzdMOhIHlhIHJlcHJvZHVjacOpbmRvc2UpXHJcbiAgICBwbGF5QW5pbWF0aW9uKGFuaW1LZXkpIHtcclxuICAgICAgICBpZiAoIWFuaW1LZXkpIHJldHVybjtcclxuICAgICAgICBpZiAoIXRoaXMuc3ByaXRlLmFuaW1zKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIHNpIGVzdGFtb3MgZW4gc2FsdG8sIGlnbm9yYXIgY3VhbHF1aWVyIGFuaW1hY2nDs24gcXVlIG5vIHNlYSBkZSBzYWx0b1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5pc0p1bXBpbmcgJiZcclxuICAgICAgICAgICAgYW5pbUtleSAhPT0gdGhpcy5jb25maWcuanVtcExlZnRBbmltICYmXHJcbiAgICAgICAgICAgIGFuaW1LZXkgIT09IHRoaXMuY29uZmlnLmp1bXBSaWdodEFuaW1cclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudEFuaW0gPSB0aGlzLnNwcml0ZS5hbmltcy5jdXJyZW50QW5pbTtcclxuICAgICAgICBpZiAodGhpcy5zcHJpdGUuYW5pbXMuaXNQbGF5aW5nICYmIGN1cnJlbnRBbmltICYmIGN1cnJlbnRBbmltLmtleSA9PT0gYW5pbUtleSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwcml0ZS5hbmltcy5wbGF5KGFuaW1LZXksIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdHVhbGl6YXIgZmxhZ3MgY29tbyBpc09uR3JvdW5kIChzZSBsbGFtYSBhIGVzdG8gZGVzZGUgbGEgZXNjZW5hLCBlbiBjYWRhIGZyYW1lKVxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMuY2xhbXBXaXRoaW5Cb3VuZHMoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZU11bHRpcGxpZXJUZXh0UG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3ByaXRlLmJvZHkpIHtcclxuICAgICAgICAgICAgY29uc3Qgd2FzT25Hcm91bmQgPSB0aGlzLmlzT25Hcm91bmQ7XHJcbiAgICAgICAgICAgIHRoaXMuaXNPbkdyb3VuZCA9IHRoaXMuaXNHcm91bmRlZCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY3VycmVudEFuaW0gPSB0aGlzLnNwcml0ZS5hbmltcy5jdXJyZW50QW5pbTtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudEtleSA9IGN1cnJlbnRBbmltID8gY3VycmVudEFuaW0ua2V5IDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGFyYWx5emVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwcml0ZS5zZXRWZWxvY2l0eVgoMCk7IC8vIHBvciBzaSBhY2Fzb1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBmYWlsc2FmZSByZWNlcGNpw7NuOiBzaSBlbCBmbGFnIGRpY2UgXCJyZWNpYmllbmRvXCIgcGVybyBsYSBhbmltYWNpw7NuIG5vIGxvIGVzXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNSZWNlaXZpbmcgJiZcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRLZXkgIT09IHRoaXMuY29uZmlnLnJlY2VpdmVMZWZ0QW5pbSAmJlxyXG4gICAgICAgICAgICAgICAgY3VycmVudEtleSAhPT0gdGhpcy5jb25maWcucmVjZWl2ZVJpZ2h0QW5pbVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNSZWNlaXZpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gZmFpbHNhZmUgc2FsdG86IHNpIGlzSnVtcGluZyBlcyB0cnVlIHBlcm8gbGEgYW5pbWFjacOzbiBhY3R1YWwgTk8gZXMgZGUgc2FsdG9cclxuICAgICAgICAgICAgLy8gKHkgaGF5IGFuaW1hY2nDs24pLCBzZSBhc3VtZSBxdWUgdGVybWluw7NcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0p1bXBpbmcgJiZcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRLZXkgJiZcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRLZXkgIT09IHRoaXMuY29uZmlnLmp1bXBMZWZ0QW5pbSAmJlxyXG4gICAgICAgICAgICAgICAgY3VycmVudEtleSAhPT0gdGhpcy5jb25maWcuanVtcFJpZ2h0QW5pbVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNKdW1waW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHRpbWVvdXQgZGUgc2FsdG8gcG9yIHNlZ3VyaWRhZFxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0p1bXBpbmcgJiYgKHRoaXMuc2NlbmUudGltZS5ub3cgLSB0aGlzLmp1bXBTdGFydFRpbWUgPiAxNTAwKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0p1bXBpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gYXRlcnJpemFqZSByZWFsXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSnVtcGluZyAmJiAhd2FzT25Hcm91bmQgJiYgdGhpcy5pc09uR3JvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzSnVtcGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmFjaW5nID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlkbGVMZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWRsZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNvIGRlIGxvcyBwb3dlci11cHNcclxuICAgIGFwcGx5UG93ZXJVcCh0eXBlKSB7XHJcbiAgICAgICAgLy8gaW52ZW50YXJpbyBtw6F4aW1vIGRlIDJcclxuICAgICAgICBpZiAodGhpcy5wb3dlclVwSW52ZW50b3J5Lmxlbmd0aCA+PSAyKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMucG93ZXJVcEludmVudG9yeS5wdXNoKHR5cGUpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHVzZU5leHRQb3dlclVwKGZvcmNlZFR5cGUgPSBudWxsKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnBvd2VyVXBJbnZlbnRvcnkpIHx8IHRoaXMucG93ZXJVcEludmVudG9yeS5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIGxldCB0eXBlO1xuXG4gICAgICAgIGlmIChmb3JjZWRUeXBlKSB7XG4gICAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLnBvd2VyVXBJbnZlbnRvcnkuaW5kZXhPZihmb3JjZWRUeXBlKTtcbiAgICAgICAgICAgIGlmIChpZHggPCAwKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHR5cGUgPSBmb3JjZWRUeXBlO1xuICAgICAgICAgICAgdGhpcy5wb3dlclVwSW52ZW50b3J5LnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHlwZSA9IHRoaXMucG93ZXJVcEludmVudG9yeS5zaGlmdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hY3RpdmF0ZVBvd2VyVXAodHlwZSk7XG4gICAgICAgIHRoaXMuc2NlbmU/LnVwZGF0ZVBsYXllckludmVudG9yeVVJPy4odGhpcyk7XG5cbiAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuXHJcbiAgICAvLyBBY3RpdmEgZWwgZWZlY3RvIGRlbCBwb3dlci11cFxyXG4gICAgYWN0aXZhdGVQb3dlclVwKHR5cGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAndmVsb2NpZGFkJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlPclJlZnJlc2hUaW1lZEVmZmVjdCgndmVsb2NpZGFkJywgUE9XRVJVUF9EVVJBVElPTl9NUy52ZWxvY2lkYWQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JhbGVudGl6YXInOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHBvbmVudCA9IHRoaXMuZ2V0T3Bwb25lbnQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wcG9uZW50LmFwcGx5T3JSZWZyZXNoVGltZWRFZmZlY3QoJ3JhbGVudGl6YXInLCBQT1dFUlVQX0RVUkFUSU9OX01TLnJhbGVudGl6YXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAncGFyYWxpemFyJzoge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3Bwb25lbnQgPSB0aGlzLmdldE9wcG9uZW50KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3Bwb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHBvbmVudC5hcHBseU9yUmVmcmVzaFRpbWVkRWZmZWN0KCdwYXJhbGl6YXInLCBQT1dFUlVQX0RVUkFUSU9OX01TLnBhcmFsaXphcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdwb3IyJzpcclxuICAgICAgICAgICAgY2FzZSAncG9yMyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5T3JSZWZyZXNoVGltZWRFZmZlY3QodHlwZSwgUE9XRVJVUF9EVVJBVElPTl9NU1t0eXBlXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWN0dWFsaXphIGxvcyBwb3dlci11cHNcclxuICAgIHVwZGF0ZVBvd2VyVXBzKCkge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IHRoaXMuc2NlbmUudGltZS5ub3c7XHJcblxyXG4gICAgICAgIGxldCBzcGVlZE5lZWRzUmVjYWxjID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHNjb3JlTmVlZHNSZWNhbGMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gc2UgcmV2aXNhbiB0b2RvcyBsb3MgcG93ZXItdXBzIGFjdGl2b3NcclxuICAgICAgICBmb3IgKGNvbnN0IHR5cGUgaW4gdGhpcy5hY3RpdmVQb3dlclVwcykge1xyXG4gICAgICAgICAgICBpZiAobm93IDw9IHRoaXMuYWN0aXZlUG93ZXJVcHNbdHlwZV0pIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtQbGF5ZXJdIEV4cGlyYW5kbyBwb3dlcnVwOiAke3R5cGV9YCk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFjdGl2ZVBvd2VyVXBzW3R5cGVdO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd2ZWxvY2lkYWQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3BlZWRFZmZlY3QoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkTmVlZHNSZWNhbGMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncmFsZW50aXphcic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTbG93RWZmZWN0KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBzcGVlZE5lZWRzUmVjYWxjID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3BhcmFsaXphcic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJhbHl6ZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncG9yMic6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwb3IzJzpcclxuICAgICAgICAgICAgICAgICAgICBzY29yZU5lZWRzUmVjYWxjID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNwZWVkTmVlZHNSZWNhbGMpIHRoaXMucmVjYWxjdWxhdGVNb3ZlU3BlZWQoKTtcclxuICAgICAgICBpZiAoc2NvcmVOZWVkc1JlY2FsYykgdGhpcy5yZWNhbGN1bGF0ZVNjb3JlRWZmZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTcOpdG9kbyBwYXJhIHF1ZSBsYSBlc2NlbmEgY29uc3VsdGUgcXXDqSBoYXkgZW4gbGEgcHJpbWVyYSBwb3NpY2nDs24gZGVsIGludmVudGFyaW9cclxuICAgIGdldE5leHRQb3dlclVwVHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3dlclVwSW52ZW50b3J5Lmxlbmd0aCA+IDAgPyB0aGlzLnBvd2VyVXBJbnZlbnRvcnlbMF0gOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE3DqXRvZG8gcGFyYSBhcGxpY2FyIGVmZWN0b3MgcXVlIHZpZW5lbiBkZXNkZSBlbCBTb2NrZXRcclxuICAgIGFwcGx5UG93ZXJVcEVmZmVjdCh0eXBlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEFwbGljYW5kbyBlZmVjdG86ICR7dHlwZX0gYSAke3RoaXMuaWR9YCk7XHJcbiAgICAgICAgdGhpcy5hcHBseU9yUmVmcmVzaFRpbWVkRWZmZWN0KHR5cGUsIFBPV0VSVVBfRFVSQVRJT05fTVNbdHlwZV0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLy8gRUZFQ1RPUyBWSVNVQUxFUyBERSBMT1MgUE9XRVItVVBTIC8vLy9cclxuICAgIC8vIHBhcmFsaXphciAtPiByb2pvICsgcGFycGFkZW9cclxuICAgIHNldFBhcmFseXplZChpc1BhcmFseXplZCkge1xyXG4gICAgICAgIHRoaXMuaXNQYXJhbHl6ZWQgPSBpc1BhcmFseXplZDtcclxuXHJcbiAgICAgICAgaWYgKGlzUGFyYWx5emVkKSB7XHJcbiAgICAgICAgICAgIC8vIGZlZWRiYWNrIHZpc3VhbDogcm9qbyArIHBhcnBhZGVvXHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnNldFRpbnQoMHhmZjU1NTUpOyAgIC8vIHJvaml6b1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZS5zZXRBbHBoYSgxKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHBvciBzaSB5YSBoYWLDrWEgdW4gdHdlZW4gYW50ZXJpb3JcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyYWx5c2lzVHdlZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyYWx5c2lzVHdlZW4uc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbHlzaXNUd2VlbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucGFyYWx5c2lzVHdlZW4gPSB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5zcHJpdGUsXHJcbiAgICAgICAgICAgICAgICBhbHBoYTogMC4zLFxyXG4gICAgICAgICAgICAgICAgeW95bzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAsXHJcbiAgICAgICAgICAgICAgICByZXBlYXQ6IC0xXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gc2VndXJpZGFkIGV4dHJhOiBxdWUgc2UgcXVlZGUgcXVpZXRvIGhvcml6b250YWxtZW50ZVxyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZS5zZXRWZWxvY2l0eVgoMCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHF1aXRhciBzb2xvIGVsIGVmZWN0byBkZSBwYXJwYWRlbywgZWwgY29sb3Igc2UgcmVjYWxjdWxhXHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnNldEFscGhhKDEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyYWx5c2lzVHdlZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyYWx5c2lzVHdlZW4uc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbHlzaXNUd2VlbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFZvbHZlbW9zIGEgYXBsaWNhciBlbCBjb2xvciBkZSBvdHJvcyBwb3dlci11cHMgYWN0aXZvcyAoc2kgbG9zIGhheSlcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUG93ZXJVcFZpc3VhbHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9ICAgIFxyXG5cclxuICAgIC8vIHZlbG9jaWRhZCAtPiBuYXJhbmphXHJcbiAgICBzZXRTcGVlZEVmZmVjdChhY3RpdmUpIHtcclxuICAgICAgICB0aGlzLnNwZWVkRWZmZWN0QWN0aXZlID0gYWN0aXZlO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFBvd2VyVXBWaXN1YWxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmFsZW50aXphciAtPiBhenVsXHJcbiAgICBzZXRTbG93RWZmZWN0KGFjdGl2ZSkge1xyXG4gICAgICAgIHRoaXMuc2xvd0VmZmVjdEFjdGl2ZSA9IGFjdGl2ZTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hQb3dlclVwVmlzdWFscygpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBSZWNhbGN1bGEgbGEgdmVsb2NpZGFkIGRlIG1vdmltaWVudG8gc2Vnw7puIGxvcyBwb3dlci11cHMgcXVlIGVzdMOpbiBhY3Rpdm9zXHJcbiAgICByZWNhbGN1bGF0ZU1vdmVTcGVlZCgpIHtcclxuICAgICAgICBsZXQgbXVsdCA9IDE7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVBvd2VyVXBzLnZlbG9jaWRhZCkgbXVsdCAqPSBTUEVFRF9NVUxULnZlbG9jaWRhZDtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVQb3dlclVwcy5yYWxlbnRpemFyKSBtdWx0ICo9IFNQRUVEX01VTFQucmFsZW50aXphcjtcclxuXHJcbiAgICAgICAgdGhpcy5tb3ZlU3BlZWQgPSB0aGlzLmJhc2VNb3ZlU3BlZWQgKiBtdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlY2FsY3VsYSBlbCBtdWx0aXBsaWNhZG9yIGRlIHB1bnR1YWNpw7NuIGVuIGZ1bmNpw7NuIGRlIHBvcjIvcG9yMyBhY3Rpdm9zXHJcbiAgICByZWNhbGN1bGF0ZVNjb3JlRWZmZWN0KCkge1xyXG4gICAgICAgIGxldCBtdWx0aXBsaWVyID0gMTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlUG93ZXJVcHNbJ3BvcjInXSkge1xyXG4gICAgICAgICAgICBtdWx0aXBsaWVyID0gTWF0aC5tYXgobXVsdGlwbGllciwgMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVBvd2VyVXBzWydwb3IzJ10pIHtcclxuICAgICAgICAgICAgbXVsdGlwbGllciA9IE1hdGgubWF4KG11bHRpcGxpZXIsIDMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY29yZU11bHRpcGxpZXIgPSBtdWx0aXBsaWVyO1xyXG5cclxuICAgICAgICAvLyBmZWVkYmFjayB2aXN1YWwgY29uIHRleHRvIHgyIC8geDNcclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsaWVyVGV4dCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zY29yZU11bHRpcGxpZXIgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGxpZXJUZXh0LnNldFRleHQoJ3gnICsgdGhpcy5zY29yZU11bHRpcGxpZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsaWVyVGV4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsaWVyVGV4dC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbWFudGVuZXIgbG9zIGNvbG9yZXMgcXVlIHlhIHNlIHRlbsOtYW5cclxuICAgICAgICB0aGlzLnJlZnJlc2hQb3dlclVwVmlzdWFscygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwbGljYSBvIGFjdHVhbGl6YSBsYSBkdXJhY2nDs24gZGUgdW4gcG93ZXItdXBcclxuICAgIGFwcGx5T3JSZWZyZXNoVGltZWRFZmZlY3QodHlwZSwgZHVyYXRpb25Ncykge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IHRoaXMuc2NlbmUudGltZS5ub3c7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVQb3dlclVwc1t0eXBlXSA9IG5vdyArIGR1cmF0aW9uTXM7XHJcblxyXG4gICAgICAgIC8vIHNlIGFjdGl2YSBlbCBmZWVkYmFjay9lc3RhZG9cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ3ZlbG9jaWRhZCcpIHRoaXMuc2V0U3BlZWRFZmZlY3QodHJ1ZSk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdyYWxlbnRpemFyJykgdGhpcy5zZXRTbG93RWZmZWN0KHRydWUpO1xyXG4gICAgICAgIGlmICh0eXBlID09PSAncGFyYWxpemFyJykgdGhpcy5zZXRQYXJhbHl6ZWQodHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIHNlIHJlY2FsY3VsYW4gbG9zIGVmZWN0b3Mgc2kgZXMgbmVjZXNhcmlvXHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICd2ZWxvY2lkYWQnIHx8IHR5cGUgPT09ICdyYWxlbnRpemFyJykge1xyXG4gICAgICAgICAgICB0aGlzLnJlY2FsY3VsYXRlTW92ZVNwZWVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlID09PSAncG9yMicgfHwgdHlwZSA9PT0gJ3BvcjMnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVTY29yZUVmZmVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEZWNpZGUgcXXDqSB0aW50ZSBtb3N0cmFyIHNlZ8O6biBlbCBlc3RhZG8gYWN0dWFsXHJcbiAgICByZWZyZXNoUG93ZXJVcFZpc3VhbHMoKSB7XHJcbiAgICAgICAgLy8gc2kgZXN0w6EgcGFyYWxpemFkbywgbGEgcGFyw6FsaXNpcyBtYW5kYSAoY29sb3IgIHJvam8gKyBwYXJwYWRlbylcclxuICAgICAgICBpZiAodGhpcy5pc1BhcmFseXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQaGFzZXIgc29sbyBwZXJtaXRlIHVuIGNvbG9yIGEgbGEgdmV6IHBvciBzcHJpdGUsIHBvciBlc28gbGFcclxuICAgICAgICAvLyBwcmlvcmlkYWQgdmlzdWFsIGVzOiByYWxlbnRpemFyID4gdmVsb2NpZGFkID4gbXVsdGlwbGljYWRvclxyXG4gICAgICAgIGlmICh0aGlzLnNsb3dFZmZlY3RBY3RpdmUpIHtcclxuICAgICAgICAgICAgLy8gYXp1bCBvc2N1cm8gcGFyYSByYWxlbnRpemFyXHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnNldFRpbnQoMHg1NTU1ZmYpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zcGVlZEVmZmVjdEFjdGl2ZSkge1xyXG4gICAgICAgICAgICAvLyBuYXJhbmphIHBhcmEgdmVsb2NpZGFkXHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnNldFRpbnQoMHhmZjhjMDApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY29yZU11bHRpcGxpZXIgPiAxKSB7XHJcbiAgICAgICAgICAgIC8vIHZlcmRlIHBhcmEgeDIgLyB4M1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZS5zZXRUaW50KDB4MzJjZDMyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzaW4gZWZlY3Rvc1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZS5jbGVhclRpbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLy8vLy8vXHJcblxyXG4gICAgZ2V0T3Bwb25lbnQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNjZW5lLnBsYXllcnMpIHJldHVybiBudWxsO1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuc2NlbmUucGxheWVycy52YWx1ZXMoKSkuZmluZChwID0+IHAgIT09IHRoaXMpO1xyXG4gICAgfVxyXG59XG4iLCJleHBvcnQgY2xhc3MgQXBwbHlQb3dlclVwQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IocGxheWVyLCBwb3dlclVwVHlwZSkge1xuICAgICAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcbiAgICAgICAgdGhpcy5wb3dlclVwVHlwZSA9IHBvd2VyVXBUeXBlO1xuICAgICAgICB0aGlzLnN0b3JlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGV4ZWN1dGUoKSB7XG4gICAgICAgIHRoaXMuc3RvcmVkID0gdGhpcy5wbGF5ZXIuYXBwbHlQb3dlclVwKHRoaXMucG93ZXJVcFR5cGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZWQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQXBwbHlQb3dlclVwQ29tbWFuZCB9IGZyb20gXCIuLi9Db21tYW5kcy9BcHBseVBvd2VyVXBDb21tYW5kXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3dlclVwIHtcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgeCwgeSwgdHlwZSkge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG5cbiAgICAgICAgdGhpcy5pc0NvbGxlY3RlZCA9IGZhbHNlOyAgIC8vIHBhcmEgZXZpdGFyIHJlY29nZXIgdmFyaWFzIHZlY2VzXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IGZhbHNlOyAgICAvLyBwYXJhIGV2aXRhciBkZXN0cnVpciB2YXJpYXMgdmVjZXNcbiAgICAgICAgdGhpcy5fY29vbGRvd25VbnRpbCA9IDA7ICAgIC8vIHRpZW1wbyBoYXN0YSBlbCBxdWUgbm8gc2UgcHVlZGUgcmVjb2dlclxuXG4gICAgICAgIHRoaXMuZmFkZVN0YXJ0ID0gMzAwMDsgICAgICAvLyBtcyBoYXN0YSBlbXBlemFyIGEgZGVzdmFuZWNlcnNlXG4gICAgICAgIHRoaXMubGlmZXRpbWUgPSA1MDAwOyAgICAgICAvLyBtcyBkZSB2aWRhIHRvdGFsXG5cbiAgICAgICAgdGhpcy5fb3ZlcmxhcHMgPSBbXTsgICAgICAgIC8vIGNvbGxpZGVycyBvdmVybGFwc1xuICAgICAgICB0aGlzLmZhZGVUd2VlbiA9IG51bGw7ICAgICAgLy8gdHdlZW4gZGUgZmFkZVxuICAgICAgICB0aGlzLl9saWZldGltZVRpbWVyID0gbnVsbDsgLy8gdGltZXIgZGUgdmlkYVxuXG4gICAgICAgIHRoaXMuc3ByaXRlID0gc2NlbmUucGh5c2ljcy5hZGQuc3RhdGljSW1hZ2UoeCwgeSwgdHlwZSlcbiAgICAgICAgICAgIC5zZXRTY2FsZSgxLjIpXG4gICAgICAgICAgICAuc2V0SW50ZXJhY3RpdmUoKTtcblxuICAgICAgICAvLyBzZSBhY3R1YWxpemEgZWwgYm9keSB0cmFzIGVsIGVzY2FsYWRvXG4gICAgICAgIGlmICh0aGlzLnNwcml0ZS5yZWZyZXNoQm9keSkgdGhpcy5zcHJpdGUucmVmcmVzaEJvZHkoKTtcblxuICAgICAgICAvLyBzZSBndWFyZGEgZWwgdHdlZW4gcGFyYSBwb2RlciBwYXJhcmxvIGVuIGRlc3Ryb3lcbiAgICAgICAgY29uc3QgZmFkZURlbGF5ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5mYWRlU3RhcnQsIHRoaXMubGlmZXRpbWUpKTtcbiAgICAgICAgY29uc3QgZmFkZUR1cmF0aW9uID0gTWF0aC5tYXgoMCwgdGhpcy5saWZldGltZSAtIGZhZGVEZWxheSk7XG5cbiAgICAgICAgaWYgKGZhZGVEdXJhdGlvbiA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuZmFkZVR3ZWVuID0gc2NlbmUudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5zcHJpdGUsXG4gICAgICAgICAgICAgICAgYWxwaGE6IDAsXG4gICAgICAgICAgICAgICAgZGVsYXk6IGZhZGVEZWxheSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogZmFkZUR1cmF0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG92ZXJsYXBzIGNvbiBsb3MganVnYWRvcmVzXG4gICAgICAgIGNvbnN0IHBsYXllcnMgPSBzY2VuZS5wbGF5ZXJzO1xuICAgICAgICBpZiAocGxheWVycyAmJiB0eXBlb2YgcGxheWVycy5mb3JFYWNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBwbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXBsYXllcj8uc3ByaXRlKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjID0gc2NlbmUucGh5c2ljcy5hZGQub3ZlcmxhcChcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnNwcml0ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcHJpdGUsXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHRoaXMuY29sbGVjdChwbGF5ZXIpLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vdmVybGFwcy5wdXNoKGMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aW1lciBkZSB2aWRhXG4gICAgICAgIHRoaXMuX2xpZmV0aW1lVGltZXIgPSBzY2VuZS50aW1lLmRlbGF5ZWRDYWxsKHRoaXMubGlmZXRpbWUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZWNvZ2UgZWwgcG93ZXItdXBcbiAgICBjb2xsZWN0KHBsYXllcikge1xuICAgICAgICBjb25zb2xlLmxvZygnW1Bvd2VyVXBdIG92ZXJsYXAgY29uJywgcGxheWVyLmlkLCAndGlwbycsIHRoaXMudHlwZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2Rlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5pc0NvbGxlY3RlZCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIHNpIGVsIGludmVudGFyaW8gZXN0w6EgbGxlbm8geSBlbCBqdWdhZG9yIHNlIHF1ZWRhIGVuY2ltYSwgc2UgZXZpdGEgZWwgc3BhbVxuICAgICAgICBjb25zdCBub3cgPSB0aGlzLnNjZW5lLnRpbWUubm93O1xuICAgICAgICBpZiAodGhpcy5fY29vbGRvd25VbnRpbCAmJiBub3cgPCB0aGlzLl9jb29sZG93blVudGlsKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5pc0NvbGxlY3RlZCA9IHRydWU7XG5cbiAgICAgICAgY29uc3QgY21kID0gbmV3IEFwcGx5UG93ZXJVcENvbW1hbmQocGxheWVyLCB0aGlzLnR5cGUpO1xuICAgICAgICB0aGlzLnNjZW5lLmNvbW1hbmRQcm9jZXNzb3IucHJvY2VzcyhjbWQpO1xuXG4gICAgICAgIC8vIHNpIE5PIHNlIHB1ZWRlIGd1YXJkYXIgcG9ycXVlIGVsIGludmVudGFyaW8gZXN0w6EgbGxlbm8sIE5PIHNlIGRlc3RydXllXG4gICAgICAgIGlmICghY21kLnN0b3JlZCkge1xuICAgICAgICAgICAgdGhpcy5pc0NvbGxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5fY29vbGRvd25VbnRpbCA9IG5vdyArIDMwMDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnNjZW5lLnVwZGF0ZVBsYXllckludmVudG9yeVVJPy4ocGxheWVyKTtcbiAgICB9XG5cbiAgICAvLyBEZXN0cnV5ZSBlbCBwb3dlci11cFxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLl9kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgdGhpcy5fZGVzdHJveWVkID0gdHJ1ZTtcblxuICAgICAgICAvLyBjb2xsaWRlcnMgb3ZlcmxhcHNcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fb3ZlcmxhcHMpKSB7XG4gICAgICAgICAgICB0aGlzLl9vdmVybGFwcy5mb3JFYWNoKGMgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7IGMuZGVzdHJveSgpOyB9IGNhdGNoIHt9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX292ZXJsYXBzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0d2VlblxuICAgICAgICBpZiAodGhpcy5mYWRlVHdlZW4pIHtcbiAgICAgICAgICAgIHRyeSB7IHRoaXMuZmFkZVR3ZWVuLnN0b3AoKTsgfSBjYXRjaCB7fVxuICAgICAgICAgICAgdGhpcy5mYWRlVHdlZW4gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGltZXJcbiAgICAgICAgaWYgKHRoaXMuX2xpZmV0aW1lVGltZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2xpZmV0aW1lVGltZXIucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuX2xpZmV0aW1lVGltZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3ByaXRlXG4gICAgICAgIGlmICh0aGlzLnNwcml0ZSkge1xuICAgICAgICAgICAgdHJ5IHsgdGhpcy5zcHJpdGUuZGVzdHJveSgpOyB9IGNhdGNoIHt9XG4gICAgICAgICAgICB0aGlzLnNwcml0ZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmaW5hbG1lbnRlLCBzZSBxdWl0YSBkZWwgYXJyYXlcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5zY2VuZS5wb3dlclVwcykpIHtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucG93ZXJVcHMgPSB0aGlzLnNjZW5lLnBvd2VyVXBzLmZpbHRlcihwID0+IHAgIT09IHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBCYWxsIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCB4LCB5KSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jb21tYW5kUHJvY2Vzc29yID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5zcHJpdGUgPSBzY2VuZS5waHlzaWNzLmFkZC5zcHJpdGUoeCwgeSwgJ2JhbGwnKTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5zZXRTY2FsZSgxLjApO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldEJvdW5jZSgwLjgpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5zZXREYXRhKCdiYWxsJywgdGhpcyk7XHJcblxyXG4gICAgICAgIC8vIHNlZ3VpbWllbnRvIGRlbCBlc3RhZG8gZGVsIHJhbGx5XHJcbiAgICAgICAgdGhpcy5sYXN0VG91Y2hlZEJ5ID0gbnVsbDsgICAgICAvLyBpZCBkZWwganVnYWRvciAoJ3BsYXllcjEnIG8gJ3BsYXllcjInKVxyXG4gICAgICAgIHRoaXMudG91Y2hDb3VudCA9IDA7ICAgICAgICAgICAgLy8gdG9xdWVzIGVuIGVsIHJhbGx5IGFjdHVhbCBwb3IgbGFkbyBkZSBsYSBjYW5jaGFcclxuICAgICAgICB0aGlzLmNvdXJ0U2lkZSA9ICdsZWZ0JzsgICAgICAgIC8vIGxhZG8gZGUgbGEgY2FuY2hhIGRvbmRlIGVzdMOhIGxhIHBlbG90YVxyXG4gICAgICAgIHRoaXMuaXNCYWxsTGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIHBvc2ljacOzbiBkZSBsYSByZWQgKGhhcmRjb2RlYWRvIHBhcmEgYW5jaG8gZGUgOTYwcHgpXHJcbiAgICAgICAgdGhpcy5uZXRYID0gNDgwO1xyXG5cclxuICAgICAgICAvLyBwYXJhIGV2aXRhciB0b3F1ZXMgbcO6bHRpcGxlcyBwb3IgZXN0YXIgcGVnYWRhIHkgcXVlIFwiZGVzYXBhcmV6Y2FcIlxyXG4gICAgICAgIHRoaXMubGFzdEhpdFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdEhpdFBsYXllcklkID0gbnVsbDtcclxuXHRcdFxyXG4gICAgICAgIC8vdGhpcy5pc0ZpcnN0U2VydmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBzZW1pbGxhIHBhcmEgZ2VuZXJhciBuw7ptZXJvcyBhbGVhdG9yaW9zIGRldGVybWluaXN0YXNcclxuICAgICAgICB0aGlzLnNlZWQgPSA0MjtcclxuICAgICAgICB0aGlzLnJuZyA9IHRoaXMuX3BzZXVkb1JhbmRvbSh0aGlzLnNlZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYWRvciBkZSBuw7ptZXJvcyBwc2V1ZG9hbGVhdG9yaW9zIHNpbXBsZSAoTENHKVxyXG4gICAgLy8gaHR0cHM6Ly9qYXZhc2NyaXB0LmluZm8vdGFzay9wc2V1ZG8tcmFuZG9tLWdlbmVyYXRvclxyXG4gICAgX3BzZXVkb1JhbmRvbShzZWVkKSB7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gc2VlZDtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gKHZhbHVlICogMzYxNjUyICsgNDkzMzQyMTI1KSAlIDk2OTQ1NDM1OTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlIC8gKDk2OTQ1NDM1OSAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmEgdW4gbsO6bWVybyBhbGVhdG9yaW8gcGFyYSB2YXJpYXIgbGV2ZW1lbnRlIGxhIHZlbG9jaWRhZCBkZSBsYSBwZWxvdGFcclxuICAgIF9nZXRSYW5kb21GYWN0b3IobWluID0gMC45NSwgbWF4ID0gMS4wNSkge1xyXG4gICAgICAgIC8vIHJldHVybiBtaW4gKyAobWF4IC0gbWluKSAqIE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgLy8gbGV0IHJuZ192YWwgPSB0aGlzLnJuZygpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdSTkcgVmFsdWU6Jywgcm5nX3ZhbCwgJ1xcdFNlZWQ6JywgdGhpcy5zZWVkKTtcclxuICAgICAgICAvLyByZXR1cm4gbWluICsgKG1heCAtIG1pbikgKiBybmdfdmFsO1xyXG4gICAgICAgIHJldHVybiBtaW4gKyAobWF4IC0gbWluKSAqIHRoaXMucm5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2UgbGxhbWEgY3VhbmRvIHVuIGp1Z2Fkb3IgZ29scGVhIGxhIHBlbG90YVxyXG4gICAgaGl0KHBsYXllciwgcGxheWVyRmFjaW5nRGlyZWN0aW9uLCBpc0p1bXBpbmcsIGlzUmVjZWl2aW5nID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNCYWxsTGl2ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBub3cgPSB0aGlzLnNjZW5lLnRpbWUubm93O1xyXG5cclxuICAgICAgICAvLyBzaSBlcyBlbCBtaXNtbyBqdWdhZG9yIHkgaGEgcGFzYWRvIG11eSBwb2NvIHRpZW1wbyxcclxuICAgICAgICAvLyBpZ25vcmFtb3MgZXNlIFwidG9xdWVcIiBwYXJhIG5vIHN1bWFyIG3DoXMgZ29scGVzXHJcbiAgICAgICAgaWYgKHRoaXMubGFzdEhpdFBsYXllcklkID09PSBwbGF5ZXIuaWQgJiYgKG5vdyAtIHRoaXMubGFzdEhpdFRpbWUpIDwgMTIwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJlZ2lzdHJhbW9zIGVzdGUgbnVldm8gZ29scGUgdsOhbGlkb1xyXG4gICAgICAgIHRoaXMubGFzdEhpdFBsYXllcklkID0gcGxheWVyLmlkO1xyXG4gICAgICAgIHRoaXMubGFzdEhpdFRpbWUgPSBub3c7XHJcblxyXG4gICAgICAgIC8vIHNlIGluY3JlbWVudGEgZWwgY29udGFkb3IgZGUgdG9xdWVzIHNpIGVsIG1pc21vIGp1Z2Fkb3IgY29udGluw7phLCBzZSByZWluaWNpYSBzaSBlcyBlbCBvdHJvXHJcbiAgICAgICAgaWYgKHRoaXMubGFzdFRvdWNoZWRCeSA9PT0gcGxheWVyLmlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hDb3VudCsrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hDb3VudCA9IDE7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFRvdWNoZWRCeSA9IHBsYXllci5pZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudG91Y2hDb3VudCA+IDMpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkZhbHRhKCd0b3F1ZUV4Y2VkaWRvJywgcGxheWVyKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzZSByZXByb2R1Y2UgZWwgZWZlY3RvIGRlIHNvbmlkbyBzZWfDum4gZWwgdGlwbyBkZSBnb2xwZVxyXG4gICAgICAgIGlmIChpc1JlY2VpdmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lPy5wbGF5U2Z4Py4odGhpcy5zY2VuZT8uc2Z4Py5yZWNlaXZlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzSnVtcGluZykge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lPy5wbGF5U2Z4Py4odGhpcy5zY2VuZT8uc2Z4Py5zcGlrZSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gc2UgY2FsY3VsYSB2ZWxvY2lkYWQgZGUgbGEgcGVsb3RhIHNlZ8O6biBsYSBkaXJlY2Npw7NuIGRlbCBqdWdhZG9yIHkgc2kgZXN0w6Egc2FsdGFuZG8vcmVjaWJpZW5kb1xyXG4gICAgICAgIGxldCB2ZWxvY2l0eVgsIHZlbG9jaXR5WTtcclxuXHJcbiAgICAgICAgaWYgKGlzUmVjZWl2aW5nKSB7XHJcbiAgICAgICAgICAgIC8vIHJlY2VwY2nDs246IHBhcsOhYm9sYSBsYXJnYSB5IGFuY2hhICh0cmF5ZWN0b3JpYSBkZWZlbnNpdmEpXHJcbiAgICAgICAgICAgIC8vIG1lbm9yIHZlbG9jaWRhZCBob3Jpem9udGFsLCBtYXlvciB2ZWxvY2lkYWQgdmVydGljYWwgcGFyYSBlbCBhcmNvXHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VTcGVlZFggPSAxODA7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnRpY2FsU3RyZW5ndGggPSAtMzUwOyAvLyBjb21wb25lbnRlIHZlcnRpY2FsIG1heW9yIHBhcmEgZWwgYXJjb1xyXG4gICAgICAgICAgICBjb25zdCByYW5kb21GYWN0b3JYID0gdGhpcy5fZ2V0UmFuZG9tRmFjdG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbUZhY3RvclkgPSB0aGlzLl9nZXRSYW5kb21GYWN0b3IoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXJGYWNpbmdEaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlYID0gLWJhc2VTcGVlZFggKiByYW5kb21GYWN0b3JYO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlYID0gYmFzZVNwZWVkWCAqIHJhbmRvbUZhY3Rvclg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmVsb2NpdHlZID0gdmVydGljYWxTdHJlbmd0aCAqIHJhbmRvbUZhY3Rvclk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc0p1bXBpbmcpIHtcclxuICAgICAgICAgICAgLy8gc2FsdG8vYXRhcXVlOiBob3Jpem9udGFsIGZ1ZXJ0ZSwgdmVydGljYWwgZMOpYmlsIChyZW1hdGUvc21hc2gpXHJcbiAgICAgICAgICAgIC8vIGFsdGEgdmVsb2NpZGFkIGhvcml6b250YWwsIGJhamEgdmVsb2NpZGFkIHZlcnRpY2FsIHBhcmEgdHJheWVjdG9yaWEgcGxhbmFcclxuICAgICAgICAgICAgY29uc3QgYmFzZVNwZWVkWCA9IDIyMDtcclxuICAgICAgICAgICAgY29uc3QgdmVydGljYWxTdHJlbmd0aCA9IC0xNTA7IC8vIGNvbXBvbmVudGUgdmVydGljYWwgYmFqbyBwYXJhIGF0YXF1ZSBwbGFub1xyXG4gICAgICAgICAgICBjb25zdCByYW5kb21GYWN0b3JYID0gdGhpcy5fZ2V0UmFuZG9tRmFjdG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbUZhY3RvclkgPSB0aGlzLl9nZXRSYW5kb21GYWN0b3IoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXJGYWNpbmdEaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlYID0gLWJhc2VTcGVlZFggKiByYW5kb21GYWN0b3JYO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlYID0gYmFzZVNwZWVkWCAqIHJhbmRvbUZhY3Rvclg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmVsb2NpdHlZID0gdmVydGljYWxTdHJlbmd0aCAqIHJhbmRvbUZhY3Rvclk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZ29scGUgcmVndWxhciBkZXNkZSBlbCBzdWVsb1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlU3BlZWRYID0gMjAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBsYXllckZhY2luZ0RpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eVggPSAtYmFzZVNwZWVkWDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZlbG9jaXR5WCA9IGJhc2VTcGVlZFg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmVsb2NpdHlZID0gLTEwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldFZlbG9jaXR5KHZlbG9jaXR5WCwgdmVsb2NpdHlZKTtcclxuXHJcbiAgICAgICAgLy8gc2UgYWN0dWFsaXphciBlbCBsYWRvIGRlIGxhIGNhbmNoYSBzZWfDum4gbGEgZGlyZWNjacOzbiBkZSBsYSB2ZWxvY2lkYWRcclxuICAgICAgICBpZiAodmVsb2NpdHlYID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvdXJ0U2lkZSA9ICdyaWdodCc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2ZWxvY2l0eVggPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY291cnRTaWRlID0gJ2xlZnQnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTZSBsbGFtYSBjdWFuZG8gbGEgcGVsb3RhIGNydXphIGxhIHJlZFxyXG4gICAgY3Jvc3NOZXQoKSB7XHJcbiAgICAgICAgLy8gc2UgcmVpbmljaWEgZWwgY29udGFkb3IgZGUgdG9xdWVzIHBhcmEgZWwgbnVldm8gbGFkbyBkZSBjYW5jaGFcclxuICAgICAgICB0aGlzLnRvdWNoQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdFRvdWNoZWRCeSA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIHNlIGNhbWJpYSBkZSBsYWRvIGRlIGNhbmNoYVxyXG4gICAgICAgIHRoaXMuY291cnRTaWRlID0gdGhpcy5jb3VydFNpZGUgPT09ICdsZWZ0JyA/ICdyaWdodCcgOiAnbGVmdCc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2UgbGxhbWEgY3VhbmRvIGxhIHBlbG90YSB0b2NhIGVsIHN1ZWxvXHJcbiAgICBvbkdyb3VuZGVkKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0JhbGxMaXZlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGJhbGxPbkxlZnQgPSB0aGlzLnNwcml0ZS54IDwgdGhpcy5uZXRYO1xyXG4gICAgICAgIGNvbnN0IGJhbGxPblJpZ2h0ID0gdGhpcy5zcHJpdGUueCA+IHRoaXMubmV0WDtcclxuXHJcbiAgICAgICAgLy8gZGV0ZXJtaW5hciBxdWnDqW4gYW5vdGFcclxuICAgICAgICBpZiAoYmFsbE9uTGVmdCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUmFsbHlFbmQoJ3BsYXllcjInKTsgLy8gcGxheWVyMiBhbm90YVxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0UmFsbHkoJ3BsYXllcjInKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGJhbGxPblJpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMub25SYWxseUVuZCgncGxheWVyMScpOyAvLyBwbGF5ZXIxIGFub3RhXHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRSYWxseSgncGxheWVyMScpO1xyXG4gICAgICAgIH1cclxuICAgIH0gICAgXHJcblxyXG4gICAgLy8gU2UgbGxhbWEgY3VhbmRvIG9jdXJyZSB1bmEgZmFsdGEgKGRlbWFzaWFkb3MgdG9xdWVzLCBwZWxvdGEgZnVlcmEgZGUgbMOtbWl0ZXMsIGV0Yy4pXHJcbiAgICBvbkZhbHRhKGZhbHRhVHlwZSwgZmFsdGluZ1BsYXllcikge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0JhbGxMaXZlKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIHNlIGRldGVybWluYXIgZWwganVnYWRvciBxdWUgYW5vdGEgKG9wdWVzdG8gYWwgcXVlIGNvbWV0acOzIGZhbHRhKVxyXG4gICAgICAgIGNvbnN0IHNjb3JpbmdQbGF5ZXJJZCA9IGZhbHRpbmdQbGF5ZXIuaWQgPT09ICdwbGF5ZXIxJyA/ICdwbGF5ZXIyJyA6ICdwbGF5ZXIxJztcclxuXHJcbiAgICAgICAgdGhpcy5vblJhbGx5RW5kKHNjb3JpbmdQbGF5ZXJJZCk7XHJcbiAgICAgICAgdGhpcy5yZXNldFJhbGx5KHNjb3JpbmdQbGF5ZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2UgbGxhbWEgY3VhbmRvIGZpbmFsaXphIHVuIHJhbGx5IChhbGd1aWVuIGFub3RhKVxyXG4gICAgb25SYWxseUVuZChzY29yaW5nUGxheWVySWQpIHtcclxuICAgICAgICB0aGlzLmlzQmFsbExpdmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gc2UgbGFuemEgdW4gZXZlbnRvIHBhcmEgcXVlIEdhbWVfU2NlbmUgbWFuZWplIGxhIHB1bnR1YWNpw7NuXHJcbiAgICAgICAgdGhpcy5zY2VuZS5ldmVudHMuZW1pdCgncmFsbHlDb25jbHVkZWQnLCB7XHJcbiAgICAgICAgICAgIHNjb3JpbmdQbGF5ZXJJZDogc2NvcmluZ1BsYXllcklkLFxyXG4gICAgICAgICAgICB0b3VjaENvdW50OiB0aGlzLnRvdWNoQ291bnQsXHJcbiAgICAgICAgICAgIGxhc3RUb3VjaGVkQnk6IHRoaXMubGFzdFRvdWNoZWRCeVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVtcHVqb24gc3V0aWwgYWwgc2FxdWUgcGFyYSBldml0YXIgcXVlIGNhaWdhIHNvYnJlIGxhIHJlZFxyXG4gICAgX2dldFN1YnRsZU51ZGdlKHNwYXduWCwgc2lkZVBhZGRpbmcsIHdvcmxkV2lkdGgpIHtcclxuICAgICAgICAvLyBjb25zdCBzaWduID0gTWF0aC5yYW5kb20oKSA8IDAuNSA/IC0xIDogMTtcclxuICAgICAgICBjb25zdCBzaWduID0gdGhpcy5ybmcoKSA8IDAuNSA/IC0xIDogMTtcclxuICAgICAgICBjb25zdCBvZmZzZXQgPSBzaWduICogMTI7XHJcbiAgICAgICAgY29uc3QgY2xhbXBlZFggPSBNYXRoLm1heChzaWRlUGFkZGluZywgTWF0aC5taW4od29ybGRXaWR0aCAtIHNpZGVQYWRkaW5nLCBzcGF3blggKyBvZmZzZXQpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3Bhd25YOiBjbGFtcGVkWCwgdmVsb2NpdHlYOiBvZmZzZXQgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb2xvY2EgbGEgcGVsb3RhIHBhcmEgZWwgc2FxdWUgc2luIHJlaW5pY2lhciBlbCByYWxseVxyXG4gICAgc2V0U2VydmVQb3NpdGlvbihzY29yaW5nUGxheWVyKSB7XHJcbiAgICAgICAgY29uc3Qgc3Bhd25ZID0gMTAwO1xyXG4gICAgICAgIGNvbnN0IHNpZGVQYWRkaW5nID0gNjA7XHJcbiAgICAgICAgY29uc3Qgd29ybGRXaWR0aCA9IHRoaXMuc2NlbmUud29ybGRXaWR0aCA/PyB0aGlzLnNjZW5lLnNjYWxlPy53aWR0aCA/PyB0aGlzLm5ldFggKiAyO1xyXG4gICAgICAgIGNvbnN0IGNsYW1wID0gKHZhbHVlLCBtaW4sIG1heCkgPT4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSk7XHJcblxyXG4gICAgICAgIGxldCBzcGF3blggPSB0aGlzLm5ldFg7XHJcbiAgICAgICAgbGV0IG51ZGdlVmVsb2NpdHlYID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgaGFzU2NvcmluZ1BsYXllciA9IHNjb3JpbmdQbGF5ZXIgPT09ICdwbGF5ZXIxJyB8fCBzY29yaW5nUGxheWVyID09PSAncGxheWVyMic7XHJcblxyXG4gICAgICAgIGlmIChoYXNTY29yaW5nUGxheWVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IHRoaXMuc2NlbmUucGxheWVycz8uZ2V0ID8gdGhpcy5zY2VuZS5wbGF5ZXJzLmdldChzY29yaW5nUGxheWVyKSA6IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXI/LnNwcml0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3JpbmdQbGF5ZXIgPT09ICdwbGF5ZXIxJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwYXduWCA9IGNsYW1wKHBsYXllci5zcHJpdGUueCwgc2lkZVBhZGRpbmcsIHRoaXMubmV0WCAtIHNpZGVQYWRkaW5nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Bhd25YID0gY2xhbXAocGxheWVyLnNwcml0ZS54LCB0aGlzLm5ldFggKyBzaWRlUGFkZGluZywgd29ybGRXaWR0aCAtIHNpZGVQYWRkaW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNwYXduWCA9IHNjb3JpbmdQbGF5ZXIgPT09ICdwbGF5ZXIxJyA/IHRoaXMubmV0WCAtIDEwMCA6IHRoaXMubmV0WCArIDEwMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbnVkZ2UgPSB0aGlzLl9nZXRTdWJ0bGVOdWRnZShzcGF3blgsIHNpZGVQYWRkaW5nLCB3b3JsZFdpZHRoKTtcclxuICAgICAgICAgICAgc3Bhd25YID0gbnVkZ2Uuc3Bhd25YO1xyXG4gICAgICAgICAgICBudWRnZVZlbG9jaXR5WCA9IG51ZGdlLnZlbG9jaXR5WDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldFBvc2l0aW9uKHNwYXduWCwgc3Bhd25ZKTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5zZXRWZWxvY2l0eShudWRnZVZlbG9jaXR5WCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVpbmljaWEgZWwgZXN0YWRvIGRlbCByYWxseSB5IHJlcG9zaWNpb25hIGxhIHBlbG90YSBwYXJhIGVsIHNhcXVlXHJcbiAgICByZXNldFJhbGx5KHNjb3JpbmdQbGF5ZXIpIHtcclxuICAgICAgICB0aGlzLmlzQmFsbExpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubGFzdFRvdWNoZWRCeSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50b3VjaENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnNldFNlcnZlUG9zaXRpb24oc2NvcmluZ1BsYXllcik7XHJcblxyXG4gICAgICAgIC8vIGxpbXBpYXIgaW5mbyBkZSDDumx0aW1vIGdvbHBlXHJcbiAgICAgICAgdGhpcy5sYXN0SGl0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0SGl0UGxheWVySWQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBBY3R1YWxpemEgZWwgZXN0YWRvIGRlIGxhIHBlbG90YSBjYWRhIGZyYW1lIChzZSByYXN0cmVhIGVsIGxhZG8gZGUgbGEgY2FuY2hhIHNlZ8O6biBsYSBwb3NpY2nDs24pXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQmFsbExpdmUpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gc2UgYWN0dWFsaXphIGVsIGxhZG8gZGUgY2FuY2hhIHNlZ8O6biBwb3NpY2nDs24gYWN0dWFsXHJcbiAgICAgICAgaWYgKHRoaXMuc3ByaXRlLnggPCB0aGlzLm5ldFggLSAyMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvdXJ0U2lkZSA9ICdsZWZ0JztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3ByaXRlLnggPiB0aGlzLm5ldFggKyAyMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvdXJ0U2lkZSA9ICdyaWdodCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBDb21tYW5kUHJvY2Vzc29yIHtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVNjZW5lID0gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc2V0UGxheWVycyhwbGF5ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzID0gcGxheWVycztcclxuICAgIH1cclxuXHJcbiAgICBzZXRHYW1lU2NlbmUoZ2FtZVNjZW5lKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU2NlbmUgPSBnYW1lU2NlbmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2Vzcyhjb21tYW5kKSB7XHJcbiAgICAgICAgY29tbWFuZC5leGVjdXRlKCk7XHJcbiAgICAgICAgLy8gU2VudCBvdmVyIHRoZSB3ZWJzb2NrZXRcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBDb21tYW5kIHtcclxuICAgIFxyXG4gICAgZXhlY3V0ZSgpIHt9XHJcblxyXG4gICAgc2VyaWFsaXplKCkge31cclxuXHJcbiAgICBnZXRQbGF5ZXIoKSB7fVxyXG59IiwiLy8gQ2xhc2UgcXVlIHNlIGVuY2FyZ2EgZGUgbGEgbMOzZ2ljYSBkZWwgbW92aW1pZW50byBkZWwgcGVyc29uYWplXHJcblxyXG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSAnLi9Db21tYW5kLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNb3ZlUGxheWVyQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xyXG4gICAgY29uc3RydWN0b3IocGxheWVyLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyOyAgICAgICAvLyBpbnN0YW5jaWEgZGVsIHBlcnNvbmFqZVxyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uOyAvLyBkaXJlY2Npw7NuIGRlIG1vdm1pZW50b1xyXG4gICAgfVxyXG5cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgIHN3aXRjaCAodGhpcy5kaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgLy8gY29ycmVyIGhhY2lhIGxhIGl6ZGFcclxuICAgICAgICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5tb3ZlTGVmdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIGNvcnJlciBoYWNpYSBsYSBkY2hhXHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLm1vdmVSaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIHNhbHRhci9yZW1hdGFyIGEgbGEgaXpkYVxyXG4gICAgICAgICAgICBjYXNlICdqdW1wTGVmdCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5qdW1wTGVmdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIHNhbHRhci9yZW1hdGEgYSBsYSBkY2hhXHJcbiAgICAgICAgICAgIGNhc2UgJ2p1bXBSaWdodCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5qdW1wUmlnaHQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyByZWNpYmlyIHBvciBsYSBpemRhXHJcbiAgICAgICAgICAgIGNhc2UgJ3JlY2VpdmVMZWZ0JzpcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnJlY2VpdmVMZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gcmVjaWJpciBwb3IgbGEgZGNoYVxyXG4gICAgICAgICAgICBjYXNlICdyZWNlaXZlUmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIucmVjZWl2ZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gcGFyYWRvLCBpZGxlIGl6ZGFcclxuICAgICAgICAgICAgY2FzZSAnaWRsZUxlZnQnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuaWRsZUxlZnQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBwYXJhZG8sIGlkbGUgZGNoYSAoeSBjYXNvIHBvciBkZWZlY3RvKVxyXG4gICAgICAgICAgICAvL2Nhc2UgJ2lkbGVSaWdodCc6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5pZGxlUmlnaHQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBwYXJhIGVsIG1vZG8gRU4gUkVEXHJcbiAgICBnZXRQbGF5ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGxheWVyLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIHNlcmlhbGl6ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0eXBlOiAnTW92ZVBsYXllckNvbW1hbmQnLFxyXG4gICAgICAgICAgICBwbGF5ZXJJZDogdGhpcy5wbGF5ZXIuaWQsXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb25cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIENsYXNlIGRlIGxhIGVzY2VuYSBkZSBqdWVnb1xyXG5cclxuaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuLi9FbnRpdGllcy9QbGF5ZXIuanMnO1xyXG5pbXBvcnQgeyBQb3dlclVwIH0gZnJvbSAnLi4vRW50aXRpZXMvUG93ZXJVcC5qcyc7XHJcbmltcG9ydCB7IEJhbGwgfSBmcm9tICcuLi9FbnRpdGllcy9CYWxsLmpzJztcclxuaW1wb3J0IHsgQ29tbWFuZFByb2Nlc3NvciB9IGZyb20gJy4uL0NvbW1hbmRzL0NvbW1hbmRQcm9jZXNzb3IuanMnO1xyXG5pbXBvcnQgeyBNb3ZlUGxheWVyQ29tbWFuZCB9IGZyb20gJy4uL0NvbW1hbmRzL01vdmVQbGF5ZXJDb21tYW5kLmpzJztcclxuaW1wb3J0IHsgZ2V0U3RvcmVkU2Z4Vm9sdW1lIH0gZnJvbSAnLi4vVUkvQXVkaW8uanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVfU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgdGllbXBvVG90YWwgPSA2MDsgLy8gcGFyYSAyIG1pbiBwb25lciAxMjAgc2VndW5kb3NcclxuICAgIHRpZW1wb1Jlc3RhbnRlO1xyXG4gICAgdGltZXJUZXh0O1xyXG4gICAgdGltZXJFdmVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignR2FtZV9TY2VuZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoZGF0YSkge1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmlucHV0TWFwcGluZ3MgPSBbXTtcclxuICAgICAgICB0aGlzLmNvbW1hbmRQcm9jZXNzb3IgPSBuZXcgQ29tbWFuZFByb2Nlc3NvcigpO1xyXG4gICAgICAgIHRoaXMucGxheWVyMSA9IGRhdGEucGxheWVyMTtcclxuICAgICAgICB0aGlzLnBsYXllcjIgPSBkYXRhLnBsYXllcjI7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNjZW5hcmlvID0gZGF0YS5zZWxlY3RlZFNjZW5hcmlvO1xyXG4gICAgICAgIHRoaXMuYmFsbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zY29yZVAxID0gMDtcclxuICAgICAgICB0aGlzLnNjb3JlUDIgPSAwO1xyXG4gICAgICAgIHRoaXMuc2V0c1AxID0gMDtcclxuICAgICAgICB0aGlzLnNldHNQMiA9IDA7XHJcbiAgICAgICAgdGhpcy5tYXhTZXRzID0gMzsgLy8gbWVqb3IgZGUgM1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNldCA9IDE7IC8vIHNldCBhY3R1YWxcclxuICAgICAgICB0aGlzLmlzR29sZGVuUG9pbnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzU2V0RW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50aWVtcG9SZXN0YW50ZSA9IHRoaXMudGllbXBvVG90YWw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlbG9hZCgpIHtcclxuICAgICAgICAvLyBjaGFyYWN0ZXJBXHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFxyXG4gICAgICAgICAgICAnY2hhckFfbW92ZScsXHJcbiAgICAgICAgICAgICdBU1NFVFMvUEVSU09OQUpFUy9BTklNQUNJT05FUy9QRVJTT05BSkVfQS9BTklNQUNJT05FU19DT1JSRVJfUkVDSUJJUi5wbmcnLFxyXG4gICAgICAgICAgICB7IGZyYW1lV2lkdGg6IDI5LCBmcmFtZUhlaWdodDogNDQgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFxyXG4gICAgICAgICAgICAnY2hhckFfanVtcCcsXHJcbiAgICAgICAgICAgICdBU1NFVFMvUEVSU09OQUpFUy9BTklNQUNJT05FUy9QRVJTT05BSkVfQS9BTklNQUNJT05fUkVNQVRFLnBuZycsXHJcbiAgICAgICAgICAgIHsgZnJhbWVXaWR0aDogMzIsIGZyYW1lSGVpZ2h0OiA0NCB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBjaGFyYWN0ZXJCXHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFxyXG4gICAgICAgICAgICAnY2hhckJfbW92ZScsXHJcbiAgICAgICAgICAgICdBU1NFVFMvUEVSU09OQUpFUy9BTklNQUNJT05FUy9QRVJTT05BSkVfQi9BTklNQUNJT05FU19DT1JSRVJfUkVDSUJJUi5wbmcnLFxyXG4gICAgICAgICAgICB7IGZyYW1lV2lkdGg6IDI5LCBmcmFtZUhlaWdodDogNDQgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFxyXG4gICAgICAgICAgICAnY2hhckJfanVtcCcsXHJcbiAgICAgICAgICAgICdBU1NFVFMvUEVSU09OQUpFUy9BTklNQUNJT05FUy9QRVJTT05BSkVfQi9BTklNQUNJT05fUkVNQVRFLnBuZycsXHJcbiAgICAgICAgICAgIHsgZnJhbWVXaWR0aDogMzIsIGZyYW1lSGVpZ2h0OiA0NCB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBjaGFyYWN0ZXJDXHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFxyXG4gICAgICAgICAgICAnY2hhckNfbW92ZScsXHJcbiAgICAgICAgICAgICdBU1NFVFMvUEVSU09OQUpFUy9BTklNQUNJT05FUy9QRVJTT05BSkVfQy9BTklNQUNJT05FU19DT1JSRVJfUkVDSUJJUi5wbmcnLFxyXG4gICAgICAgICAgICB7IGZyYW1lV2lkdGg6IDI5LCBmcmFtZUhlaWdodDogNDQgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFxyXG4gICAgICAgICAgICAnY2hhckNfanVtcCcsXHJcbiAgICAgICAgICAgICdBU1NFVFMvUEVSU09OQUpFUy9BTklNQUNJT05FUy9QRVJTT05BSkVfQy9BTklNQUNJT05fUkVNQVRFLnBuZycsXHJcbiAgICAgICAgICAgIHsgZnJhbWVXaWR0aDogMzIsIGZyYW1lSGVpZ2h0OiA0NCB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gRXNjZW5hcmlvc1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnR3ltJywgJ0FTU0VUUy9GT05ET1MvR0lNTkFTSU8ucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdQbGF5YScsICdBU1NFVFMvRk9ORE9TL1BMQVlBLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnSmFyZGluJywgJ0FTU0VUUy9GT05ET1MvSkFSRElOLnBuZycpO1xyXG5cclxuICAgICAgICAvLyBQb3dlclVwc1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgncG9yMicsICdBU1NFVFMvSVRFTVMvUE9XRVIgVVBTL01VTFRJUExJQ0FET1IgMi5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3BvcjMnLCAnQVNTRVRTL0lURU1TL1BPV0VSIFVQUy9NVUxUSVBMSUNBRE9SIDMucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdwYXJhbGl6YXInLCAnQVNTRVRTL0lURU1TL1BPV0VSIFVQUy9QQVJBTElaQURPLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgncmFsZW50aXphcicsICdBU1NFVFMvSVRFTVMvUE9XRVIgVVBTL1JFTEVOVElaQVIucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd2ZWxvY2lkYWQnLCAnQVNTRVRTL0lURU1TL1BPV0VSIFVQUy9WRUxPQ0lEQUQucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdtYXJjb1Bvd2VyVXAnLCAnQVNTRVRTL0pVRUdPL0Jhc2VfcG93ZXJVcC5wbmcnKTtcclxuXHJcbiAgICAgICAgLy8gUGVsb3RhXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiYWxsJywgJ0FTU0VUUy9JVEVNUy9QRUxPVEFTL1BfTk9STUFMLnBuZycpO1xyXG4gICAgICAgIC8vIFJlZFxyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgncmVkJywgJ0FTU0VUUy9KVUVHTy9SRUQucG5nJyk7XHJcbiAgICAgICAgLy8gQ3JvbsOzbWV0cm9cclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3JlbG9qJywgJ0FTU0VUUy9KVUVHTy9USU1FUi5wbmcnKTtcclxuICAgICAgICAvLyBNYXJjb1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnbWFyY29HZW5lcmFsJywgJ0FTU0VUUy9KVUVHTy9NQVJDQURPUl9TRVQucG5nJyk7ICAgICAgICBcclxuXHJcbiAgICAgICAgLy8gRWZlY3RvcyBkZSBzb25pZG9cclxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oJ3NmeF9zaWxiYXRvJywgJ0FTU0VUUy9TT05JRE8vU2lsYmF0b19pbmljaW9fcGFydGlkb18xcDRzLm1wMycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc2Z4X3JlbWF0ZScsICdBU1NFVFMvU09OSURPL1RvcXVlX3BlbG90YV9yZW1hdGVfMDNzLm1wMycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc2Z4X3JlY2VwY2lvbicsICdBU1NFVFMvU09OSURPL1RvcXVlX3BlbG90YV9yZWNlcGNpb24ubXAzJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKCdzZnhfc2FsdG8nLCAnQVNTRVRTL1NPTklETy9Tb25pZG9TYWx0b18xcC5tcDMnKTtcclxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oJ3NmeF9wdW50bycsICdBU1NFVFMvU09OSURPL1Nvbmlkb1B1bnRvLm1wMycpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgLy8gc2UgZ3VhcmRhbiBsYXMgZGltZW5zaW9uZXNcclxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XHJcbiAgICAgICAgdGhpcy53b3JsZFdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy53b3JsZEhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMuZ2FtZS5nbG9iYWxzLmRlZmF1bHRUZXh0U3R5bGU7XHJcblxyXG4gICAgICAgIHRoaXMuZXZlbnRzLm9mZigncmFsbHlDb25jbHVkZWQnKTtcclxuICAgICAgICB0aGlzLmV2ZW50cy5vZmYoJ3Jlc3VtZScpO1xyXG5cclxuICAgICAgICAvLyBzZSBkZWZpbmVuIGxvcyBlZmVjdG9zIGRlIHNvbmlkb1xyXG4gICAgICAgIHRoaXMuc2Z4ID0ge1xyXG4gICAgICAgICAgICB3aGlzdGxlOiAnc2Z4X3NpbGJhdG8nLFxyXG4gICAgICAgICAgICBzcGlrZTogJ3NmeF9yZW1hdGUnLFxyXG4gICAgICAgICAgICByZWNlaXZlOiAnc2Z4X3JlY2VwY2lvbicsXHJcbiAgICAgICAgICAgIGp1bXA6ICdzZnhfc2FsdG8nLFxyXG4gICAgICAgICAgICBwb2ludDogJ3NmeF9wdW50bydcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIHNlIHJlcHJvZHVjZSBlbCBzaWxiYXRvIGRlIGluaWNpbyBkZSBwYXJ0aWRvXHJcbiAgICAgICAgdGhpcy5wbGF5U2Z4KHRoaXMuc2Z4LndoaXN0bGUpO1xyXG5cclxuICAgICAgICAvLyBDcm9uw7NtZXRyb1xyXG4gICAgICAgIHRoaXMudGltZXJUZXh0ID0gdGhpcy5hZGQudGV4dCh0aGlzLnNjYWxlLndpZHRoIC8gMiwgMzAsIFwiXCIsIHtcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZXRPcmlnaW4oMC41LCAwKVxyXG4gICAgICAgIC5zZXRTY3JvbGxGYWN0b3IoMClcclxuICAgICAgICAuc2V0RGVwdGgoOTk5OSk7XHJcblxyXG4gICAgICAgIHRoaXMudGltZXJJY29uID0gdGhpcy5hZGQuaW1hZ2UodGhpcy5zY2FsZS53aWR0aCAvIDIsIDQ1LCAncmVsb2onKVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSlcclxuICAgICAgICAgICAgLnNldFNjYWxlKDIpXHJcbiAgICAgICAgICAgIC5zZXRTY3JvbGxGYWN0b3IoMClcclxuICAgICAgICAgICAgLnNldERlcHRoKDkwMDApOyAvLyBkZWJham8gZGVsIHRleHRvXHJcblxyXG4gICAgICAgIC8vIG1hcmNvIGRlIHNldFxyXG4gICAgICAgIHRoaXMuc2V0RnJhbWUgPSB0aGlzLmFkZC5pbWFnZSh0aGlzLnNjYWxlLndpZHRoIC8gMiwgMTIwLCAnbWFyY29HZW5lcmFsJylcclxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUpXHJcbiAgICAgICAgICAgIC5zZXRTY2FsZSgxKVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoOTk5OCk7XHJcblxyXG4gICAgICAgIC8vIHRleHRvIGRlbCBzZXQgYWN0dWFsXHJcbiAgICAgICAgdGhpcy5zZXRUZXh0ID0gdGhpcy5hZGQudGV4dCh0aGlzLnNjYWxlLndpZHRoIC8gMiwgMTIwLCBgU0VUICR7dGhpcy5jdXJyZW50U2V0fWAsIHtcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAgIC5zZXREZXB0aCg5OTk5KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0RnJhbWVXaWR0aCA9IHRoaXMuc2V0RnJhbWUuZGlzcGxheVdpZHRoO1xyXG4gICAgICAgIGNvbnN0IHNldEZyYW1lSGVpZ2h0ID0gdGhpcy5zZXRGcmFtZS5kaXNwbGF5SGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IHNldFNjb3JlWSA9IHRoaXMuc2V0RnJhbWUueSArIE1hdGgucm91bmQoc2V0RnJhbWVIZWlnaHQgLyAyKSArIDEzO1xyXG4gICAgICAgIGNvbnN0IHNldFNjb3JlT2Zmc2V0WCA9IE1hdGgucm91bmQoc2V0RnJhbWVXaWR0aCAqIDAuMjIpO1xyXG4gICAgICAgIGNvbnN0IHNldFNjb3JlRnJhbWVTY2FsZVggPSAwLjQ7XHJcbiAgICAgICAgY29uc3Qgc2V0U2NvcmVGcmFtZVNjYWxlWSA9IDAuMzg7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U2NvcmVGcmFtZUxlZnQgPSB0aGlzLmFkZC5pbWFnZSh0aGlzLnNjYWxlLndpZHRoIC8gMiAtIHNldFNjb3JlT2Zmc2V0WCwgc2V0U2NvcmVZLCAnbWFyY29HZW5lcmFsJylcclxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUpXHJcbiAgICAgICAgICAgIC5zZXRTY2FsZShzZXRTY29yZUZyYW1lU2NhbGVYLCBzZXRTY29yZUZyYW1lU2NhbGVZKVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoOTk5OCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U2NvcmVGcmFtZVJpZ2h0ID0gdGhpcy5hZGQuaW1hZ2UodGhpcy5zY2FsZS53aWR0aCAvIDIgKyBzZXRTY29yZU9mZnNldFgsIHNldFNjb3JlWSwgJ21hcmNvR2VuZXJhbCcpXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAgICAgICAuc2V0U2NhbGUoc2V0U2NvcmVGcmFtZVNjYWxlWCwgc2V0U2NvcmVGcmFtZVNjYWxlWSlcclxuICAgICAgICAgICAgLnNldERlcHRoKDk5OTgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFNjb3JlTGVmdCA9IHRoaXMuYWRkLnRleHQodGhpcy5zY2FsZS53aWR0aCAvIDIgLSBzZXRTY29yZU9mZnNldFgsIHNldFNjb3JlWSwgYCR7dGhpcy5zZXRzUDF9YCwge1xyXG4gICAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNldE9yaWdpbigwLjUpXHJcbiAgICAgICAgLnNldERlcHRoKDk5OTkpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFNjb3JlUmlnaHQgPSB0aGlzLmFkZC50ZXh0KHRoaXMuc2NhbGUud2lkdGggLyAyICsgc2V0U2NvcmVPZmZzZXRYLCBzZXRTY29yZVksIGAke3RoaXMuc2V0c1AyfWAsIHtcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjhweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAgIC5zZXREZXB0aCg5OTk5KTtcclxuXHJcbiAgICAgICAgLy8gdGV4dG8gcGFyYSBtb3N0cmFyIGVsIGdhbmFkb3IgZGVsIHNldFxyXG4gICAgICAgIHRoaXMuc2V0V2lubmVyVGV4dCA9IHRoaXMuYWRkLnRleHQodGhpcy5zY2FsZS53aWR0aCAvIDIsIDIwNSwgJycsIHtcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjhweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXHJcbiAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxyXG4gICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDNcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAgIC5zZXREZXB0aCg5OTk5KVxyXG4gICAgICAgIC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgLy8gaW5pY2lhciBlbCBjb250YWRvciBwYXJhIGVsIGNyb27Ds21ldHJvXHJcbiAgICAgICAgdGhpcy50aW1lckV2ZW50ID0gdGhpcy50aW1lLmFkZEV2ZW50KHtcclxuICAgICAgICAgICAgZGVsYXk6IDEwMDAsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiB0aGlzLnVwZGF0ZVRpbWVyLFxyXG4gICAgICAgICAgICBjYWxsYmFja1Njb3BlOiB0aGlzLFxyXG4gICAgICAgICAgICBsb29wOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlVGltZXIoKTtcclxuXHJcbiAgICAgICAgLy8gRk9ORE8gREVMIEVTQ0VOQVJJTyBTRUxFQ0NJT05BRE9cclxuICAgICAgICB0aGlzLmFkZC5pbWFnZSh3aWR0aCAvIDIsIGhlaWdodCAvIDIsIHRoaXMuc2VsZWN0ZWRTY2VuYXJpbylcclxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUpXHJcbiAgICAgICAgICAgIC5zZXREaXNwbGF5U2l6ZSh3aWR0aCwgaGVpZ2h0KVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoLTEpOyBcclxuXHJcbiAgICAgICAgLy8gUmVkXHJcbiAgICAgICAgY29uc3QgcmVkID0gdGhpcy5waHlzaWNzLmFkZC5zdGF0aWNTcHJpdGUod2lkdGggLyAyLCBoZWlnaHQgLSAxNjAsICdyZWQnKS5zZXRTY2FsZSgwLjYpO1xyXG5cclxuICAgICAgICBjb25zdCByZWRUZXh0dXJlID0gdGhpcy50ZXh0dXJlcy5nZXQoJ3JlZCcpLmdldFNvdXJjZUltYWdlKCk7XHJcbiAgICAgICAgcmVkLmJvZHkuc2V0U2l6ZShyZWRUZXh0dXJlLndpZHRoICogMC41LCByZWRUZXh0dXJlLmhlaWdodCAqIDAuNSk7IC8vIG11bHRpcGxpY2FyIHBvciBlbCBzY2FsZVxyXG4gICAgICAgIHJlZC5ib2R5LnNldE9mZnNldCgtcmVkLmJvZHkud2lkdGgvMiwgLXJlZC5ib2R5LmhlaWdodC8yKTtcclxuICAgICAgICByZWQuYm9keS51cGRhdGVGcm9tR2FtZU9iamVjdCgpO1xyXG4gICAgICAgIHRoaXMucmVkID0gcmVkO1xyXG5cclxuICAgICAgICB0aGlzLl9jcmVhdGVBbmltYXRpb25zKCk7XHJcblxyXG4gICAgICAgIC8vUFVOVFVBQ0lPTiBERSBMT1MgSlVHQURPUkVTXHJcbiAgICAgICAgLy8gTWFyY29zIGRlIHB1bnR1YWNpw7NuXHJcbiAgICAgICAgdGhpcy5wb2ludHNMZWZ0ID0gMDtcclxuICAgICAgICB0aGlzLnBvaW50c1JpZ2h0ID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5zY29yZUZyYW1lTGVmdCA9IHRoaXMuYWRkLmltYWdlKDIwMCwgNTAsICdtYXJjb0dlbmVyYWwnKS5zZXRTY2FsZSgwLjgsIDAuNTUpLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIHRoaXMuc2NvcmVGcmFtZVJpZ2h0ID0gdGhpcy5hZGQuaW1hZ2UodGhpcy53b3JsZFdpZHRoIC0gMjAwLCA1MCwgJ21hcmNvR2VuZXJhbCcpLnNldFNjYWxlKDAuOCwgMC41NSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NvcmVMZWZ0ID0gdGhpcy5hZGQudGV4dCgyMDAsIDQ1LCAnMCcsIHtcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDBweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZmZmJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDk5OTkpO1xyXG5cclxuICAgICAgICB0aGlzLnJpZ2h0U2NvcmUgPSB0aGlzLmFkZC50ZXh0KHRoaXMud29ybGRXaWR0aCAtIDIwMCwgNDUsICcwJywge1xyXG4gICAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgICAgZm9udFNpemU6ICc0MHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmZmYnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoOTk5OSk7XHJcblxyXG4gICAgICAgIC8vIHN1ZWxvIGRlIHBydWViYTogY3JlYXIgdW4gY3VlcnBvIGVzdMOhdGljbyByZWN0YW5ndWxhciBpbnZpc2libGVcclxuICAgICAgICAvLyBDb25maWd1cmFibGU6IGFsdHVyYSB5IGRlc3BsYXphbWllbnRvIGRlc2RlIGVsIGZvbmRvIChgZ3JvdW5kT2Zmc2V0YClcclxuICAgICAgICBjb25zdCBncm91bmRIZWlnaHQgPSAyMDtcclxuICAgICAgICBjb25zdCBncm91bmRPZmZzZXQgPSA5MDsgLy8gZWxldmFyIGVsIHN1ZWxvIDEwMHB4IGRlc2RlIGVsIGZvbmRvXHJcbiAgICAgICAgdGhpcy5ncm91bmRIZWlnaHQgPSBncm91bmRIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5ncm91bmRZID0gdGhpcy53b3JsZEhlaWdodCAtIGdyb3VuZE9mZnNldDtcclxuXHJcbiAgICAgICAgY29uc3QgZ3JvdW5kID0gdGhpcy5hZGQucmVjdGFuZ2xlKFxyXG4gICAgICAgICAgICB0aGlzLndvcmxkV2lkdGggLyAyLFxyXG4gICAgICAgICAgICB0aGlzLmdyb3VuZFksXHJcbiAgICAgICAgICAgIHRoaXMud29ybGRXaWR0aCxcclxuICAgICAgICAgICAgZ3JvdW5kSGVpZ2h0XHJcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41LCAwKS5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICAvLyBhw7FhZGlyIHVuIGN1ZXJwbyBmw61zaWNvIGVzdMOhdGljbyBhbCByZWN0w6FuZ3Vsb1xyXG4gICAgICAgIHRoaXMucGh5c2ljcy5hZGQuZXhpc3RpbmcoZ3JvdW5kLCB0cnVlKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBwcmltZXJvIHNlIGNyZWFuIGxvcyBqdWdhZG9yZXNcclxuICAgICAgICB0aGlzLl9jcmVhdGVQbGF5ZXJzKCk7XHJcbiAgICAgICAgLy8gZGVzcHXDqXMsIHNlIG1vbnRhbiBsYXMgY29saXNpb25lcyBjb24gZWwgc3VlbG8sIHJlZCwgZXRjLlxyXG4gICAgICAgIC8vIG1vbnRhciBjb2xpc2lvbmVzIGbDrXNpY2FzIGVudHJlIGp1Z2Fkb3JlcyB5IHN1ZWxvIHBhcmEgcXVlIGJvZHkuYmxvY2tlZC5kb3duIGZ1bmNpb25lXHJcbiAgICAgICAgdGhpcy5fc2V0dXBQaHlzaWNzV29ybGQoZ3JvdW5kKTtcclxuICAgICAgICAvLyBwb3Igw7psdGltbywgc2UgYXNpZ25hbiBsYXMgdGVjbGFzXHJcbiAgICAgICAgdGhpcy5fc2V0dXBJbnB1dE1hcHBpbmdzKCk7XHJcblxyXG4gICAgICAgIC8vIHBvd2VydXBzXHJcbiAgICAgICAgdGhpcy5wb3dlclVwcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubWF4UG93ZXJVcHMgPSAyO1xyXG4gICAgICAgIC8vIGxhIGFwYXJpY2nDs24gZGUgcG93ZXItdXBzIHNvbiBtZW5vcyBmcmVjdWVudGVzIHkgY29uIHBlc29zLCBwYXJhIHF1ZSB1bm9zIHNhbGdhblxyXG4gICAgICAgIC8vIG3DoXMgcXVlIG90cm9zIChwb3IgZWplbXBsbywgc2UgcmVkdWNlIGxhIGFwYXJpY2nDs24gZGUgcGFyYWxpemFyKVxyXG4gICAgICAgIHRoaXMucG93ZXJVcFNwYXduQ29uZmlnID0ge1xyXG4gICAgICAgICAgICAvLyBlbnRyZSAzLjUgeSA3IHNlZ3VuZG9zXHJcbiAgICAgICAgICAgIG1pbkRlbGF5TXM6IDM1MDAsXHJcbiAgICAgICAgICAgIG1heERlbGF5TXM6IDcwMDAsXHJcbiAgICAgICAgICAgIHdlaWdodHM6IHtcclxuICAgICAgICAgICAgICAgIHZlbG9jaWRhZDogMyxcclxuICAgICAgICAgICAgICAgIHJhbGVudGl6YXI6IDIsXHJcbiAgICAgICAgICAgICAgICBwYXJhbGl6YXI6IDEsXHJcbiAgICAgICAgICAgICAgICBwb3IyOiAzLFxyXG4gICAgICAgICAgICAgICAgcG9yMzogMlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb29sZG93bk1zOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBwYXJhIGV2aXRhciBxdWUgc2FsZ2FuIG11eSBzZWd1aWRvcyB5IHVuIGp1Z2Fkb3Igbm8gcHVlZGEgbW92ZXJzZVxyXG4gICAgICAgICAgICAgICAgLy8gZHVyYW50ZSBtdWNobyB0aWVtcG9cclxuICAgICAgICAgICAgICAgIHBhcmFsaXphcjogMTAwMDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5wb3dlclVwTGFzdFNwYXduQXQgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnZlbnRvcnlVSSA9IHtcclxuICAgICAgICAgICAgcGxheWVyMTogW1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQuaW1hZ2UoNTAsIDUwLCAncG9yMicpLnNldFNjYWxlKDEuNCkuc2V0VmlzaWJsZShmYWxzZSkuc2V0RGVwdGgoMSksXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZC5pbWFnZSgxMTAsIDUwLCAncG9yMicpLnNldFNjYWxlKDEuNCkuc2V0VmlzaWJsZShmYWxzZSkuc2V0RGVwdGgoMSlcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgcGxheWVyMjogW1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQuaW1hZ2UodGhpcy53b3JsZFdpZHRoIC0gMTEwLCA1MCwgJ3BvcjInKS5zZXRTY2FsZSgxLjQpLnNldFZpc2libGUoZmFsc2UpLnNldERlcHRoKDEpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQuaW1hZ2UodGhpcy53b3JsZFdpZHRoIC0gNTAsIDUwLCAncG9yMicpLnNldFNjYWxlKDEuNCkuc2V0VmlzaWJsZShmYWxzZSkuc2V0RGVwdGgoMSlcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVQb3dlclVwU3Bhd24oKTtcclxuXHJcbiAgICAgICAgLy8gTWFyY29zIGRlbCBpbnZlbnRhcmlvXHJcbiAgICAgICAgdGhpcy5pbnZlbnRvcnlGcmFtZXMgPSB7XHJcbiAgICAgICAgICAgIHBsYXllcjE6IFtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkLmltYWdlKDUwLCA1MCwgJ21hcmNvUG93ZXJVcCcpLnNldFNjYWxlKDEpLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDApLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQuaW1hZ2UoMTEwLCA1MCwgJ21hcmNvUG93ZXJVcCcpLnNldFNjYWxlKDEpLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDApXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHBsYXllcjI6IFtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkLmltYWdlKHRoaXMud29ybGRXaWR0aCAtIDExMCwgNTAsICdtYXJjb1Bvd2VyVXAnKS5zZXRTY2FsZSgxKS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgwKSxcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkLmltYWdlKHRoaXMud29ybGRXaWR0aCAtIDUwLCA1MCwgJ21hcmNvUG93ZXJVcCcpLnNldFNjYWxlKDEpLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDApXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBpbmljaWFsaXphY2nDs24gZGUgbGEgcGVsb3RhXHJcbiAgICAgICAgdGhpcy5fY3JlYXRlQmFsbCgpO1xyXG4gICAgICAgIC8vIGVtcHVqw7NuIHN1dMOtbCBwYXJhIGV2aXRhciBxdWUgc2UgcXVlZGUgc29icmUgbGEgcmVkIGFsIGluaWNpb1xyXG4gICAgICAgIHRoaXMuYmFsbC5zZXRTZXJ2ZVBvc2l0aW9uKCk7XHJcbiAgICAgICAgLy8gY29sbGlkZXJzIGRlIGxhIHBlbG90YVxyXG4gICAgICAgIHRoaXMuX3NldHVwQmFsbENvbGxpc2lvbnMoKTtcclxuICAgICAgICAvLyBldmVudG9zIGRlIGxhIHBlbG90YVxyXG4gICAgICAgIHRoaXMuX3NldHVwQmFsbEV2ZW50cygpO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0LmtleWJvYXJkLm9uKFwia2V5ZG93bi1FU0NcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBzZSBkZXRpZW5lIGVsIGdhbWUgbG9vcFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJFdmVudC5wYXVzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmxhdW5jaChcIlBhdXNlX1NjZW5lXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmV2ZW50cy5vbigncmVzdW1lJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyRXZlbnQucGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYSB1biBudWV2byBwb3dlci11cCBlbiB1bmEgcG9zaWNpw7NuIGFsZWF0b3JpYSBjYWRhIGNpZXJ0byB0aWVtcG9cclxuICAgIHNjaGVkdWxlUG93ZXJVcFNwYXduKCkge1xyXG4gICAgICAgIGNvbnN0IHsgbWluRGVsYXlNcywgbWF4RGVsYXlNcyB9ID0gdGhpcy5wb3dlclVwU3Bhd25Db25maWc7XHJcbiAgICAgICAgY29uc3QgZGVsYXkgPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKG1pbkRlbGF5TXMsIG1heERlbGF5TXMpO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoZGVsYXksICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucG93ZXJVcHMubGVuZ3RoIDwgdGhpcy5tYXhQb3dlclVwcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IFBoYXNlci5NYXRoLkJldHdlZW4oODAsIHRoaXMud29ybGRXaWR0aCAtIDgwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKHRoaXMud29ybGRIZWlnaHQgLSAyMjAsIHRoaXMud29ybGRIZWlnaHQgLSAxMjApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLl9nZXRXZWlnaHRlZFBvd2VyVXBUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvd2VyVXAgPSBuZXcgUG93ZXJVcCh0aGlzLCB4LCB5LCB0eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvd2VyVXBzLnB1c2gocG93ZXJVcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3dlclVwTGFzdFNwYXduQXRbdHlwZV0gPSB0aGlzLnRpbWUubm93O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlUG93ZXJVcFNwYXduKCk7IC8vIHJlY3Vyc2l2b1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE9idGllbmUgdW4gdGlwbyBkZSBwb3dlci11cCBiYXNhZG8gZW4gbG9zIHBlc29zIGNvbmZpZ3VyYWRvcyBhbnRlcmlvcm1lbnRlXHJcbiAgICBfZ2V0V2VpZ2h0ZWRQb3dlclVwVHlwZSgpIHtcclxuICAgICAgICBjb25zdCB7IHdlaWdodHMsIGNvb2xkb3duTXMgfSA9IHRoaXMucG93ZXJVcFNwYXduQ29uZmlnO1xyXG5cclxuICAgICAgICBjb25zdCBub3cgPSB0aGlzLnRpbWUubm93O1xyXG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyh3ZWlnaHRzKS5maWx0ZXIoKFt0eXBlLCB3ZWlnaHRdKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHNlIGZpbHRyYW4gbG9zIHRpcG9zIHF1ZSBubyBzZSBwdWVkZW4gdXNhclxyXG4gICAgICAgICAgICAvLyBzaSBlbCBwZXNvIGVzIDBcclxuICAgICAgICAgICAgaWYgKHdlaWdodCA8PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIHNpIHRvZGF2w61hIGVzdMOhIGVuIGNvb2xkb3duIGRlc2RlIGxhIMO6bHRpbWEgYXBhcmljacOzblxyXG4gICAgICAgICAgICBjb25zdCBjb29sZG93biA9IGNvb2xkb3duTXM/Llt0eXBlXTtcclxuICAgICAgICAgICAgaWYgKCFjb29sZG93bikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3QgPSB0aGlzLnBvd2VyVXBMYXN0U3Bhd25BdD8uW3R5cGVdIHx8IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBub3cgLSBsYXN0ID49IGNvb2xkb3duO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBzaSBubyBxdWVkYSBuaW5nw7puIHRpcG8gZGlzcG9uaWJsZSwgc2UgZGV2dWVsdmUgbnVsbFxyXG4gICAgICAgIGlmICghZW50cmllcy5sZW5ndGgpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAvLyBzZSBzdW1hbiB0b2RvcyBsb3MgcGVzb3MsIHNlIGVsaWdlIHVuIG7Dum1lcm8gYWxlYXRvcmlvIGVudHJlIDEgeSBlc2Egc3VtYVxyXG4gICAgICAgIGNvbnN0IHRvdGFsID0gZW50cmllcy5yZWR1Y2UoKHN1bSwgWywgd2VpZ2h0XSkgPT4gc3VtICsgd2VpZ2h0LCAwKTtcclxuICAgICAgICBsZXQgcm9sbCA9IFBoYXNlci5NYXRoLkJldHdlZW4oMSwgdG90YWwpO1xyXG4gICAgICAgIC8vIHNlIHZhbiByZXN0YW5kbyBwZXNvcyBoYXN0YSBxdWUgZWwgY29udGFkb3IgY2FlIGVuIHVuIHRpcG9cclxuICAgICAgICBmb3IgKGNvbnN0IFt0eXBlLCB3ZWlnaHRdIG9mIGVudHJpZXMpIHtcclxuICAgICAgICAgICAgcm9sbCAtPSB3ZWlnaHQ7XHJcbiAgICAgICAgICAgIC8vIHNlIGRldnVlbHZlIGVsIHRpcG9cclxuICAgICAgICAgICAgaWYgKHJvbGwgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tHYW1lX1NjZW5lXSBQb3dlci11cCBhbGVhdG9yaW86ICcsIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNpIHBvciBhbGd1bmEgcmF6w7NuIG5vIGNhZSBlbiBuaW5ndW5vLCBzZSBkZXZ1ZWx2ZSBlbCDDumx0aW1vIHRpcG8gdsOhbGlkb1xyXG4gICAgICAgIHJldHVybiBlbnRyaWVzW2VudHJpZXMubGVuZ3RoIC0gMV1bMF07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVwcm9kdWNlIHVuIGVmZWN0byBkZSBzb25pZG9cclxuICAgIHBsYXlTZngoa2V5KSB7XHJcbiAgICAgICAgaWYgKCFrZXkpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5zb3VuZC5wbGF5KGtleSwgeyB2b2x1bWU6IGdldFN0b3JlZFNmeFZvbHVtZSgpIH0pO1xyXG4gICAgfSAgICBcclxuXHJcbiAgICAvLyBCdWNsZSBwcmluY2lwYWwgZGVsIGp1ZWdvXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgLy8gc2UgcHJvY2VzYW4gbG9zIGlucHV0cyBkZSBsb3MganVnYWRvcmVzXHJcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRGb3JBbGxQbGF5ZXJzKCk7XHJcbiAgICAgICAgLy8gc2UgYWN0dWFsaXphbiBsb3MgcG93ZXItdXBzXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHBsYXllci51cGRhdGVQb3dlclVwcygpKTtcclxuICAgICAgICAvLyBzZSBhY3R1YWxpemEgZWwgZXN0YWRvIGRlIGxhIHBlbG90YVxyXG4gICAgICAgIGlmICh0aGlzLmJhbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWxsLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAvLyB2ZXJpZmljYXIgc2kgbGEgcGVsb3RhIGdvbHBlYSBlbCBzdWVsbyAoY29tcGFyYXIgY29uIGxhIHBvc2ljacOzbiBkZWwgc3VlbG8pXHJcbiAgICAgICAgICAgIC8vIGdyb3VuZFkgZXMgbGEgcGFydGUgc3VwZXJpb3IgZGVsIHN1ZWxvXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJhbGwuaXNCYWxsTGl2ZSAmJiB0aGlzLmJhbGwuc3ByaXRlLnkgPiB0aGlzLmdyb3VuZFkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsbC5vbkdyb3VuZGVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdmVyaWZpY2FyIHNpIGxhIHBlbG90YSBjcnV6YSBsYSByZWQgKHJlZCBlc3TDoSBlbiB4ID0gNDgwKVxyXG4gICAgICAgICAgICBpZiAodGhpcy5iYWxsLnNwcml0ZS54IDwgNDc1ICYmIHRoaXMuYmFsbC5jb3VydFNpZGUgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsbC5jcm9zc05ldCgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYmFsbC5zcHJpdGUueCA+IDQ4NSAmJiB0aGlzLmJhbGwuY291cnRTaWRlID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsbC5jcm9zc05ldCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdHVhbGl6YSBlbCB0ZW1wb3JpemFkb3IgY2FkYSBzZWd1bmRvXHJcbiAgICB1cGRhdGVUaW1lcigpIHtcclxuICAgICAgICB0aGlzLnRpZW1wb1Jlc3RhbnRlLS07XHJcblxyXG4gICAgICAgIC8vIEZvcm1hdG9cclxuICAgICAgICBjb25zdCBtaW51dG9zID0gTWF0aC5mbG9vcih0aGlzLnRpZW1wb1Jlc3RhbnRlIC8gNjApO1xyXG4gICAgICAgIGNvbnN0IHNlZ3VuZG9zID0gdGhpcy50aWVtcG9SZXN0YW50ZSAlIDYwO1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdG8gPSBgJHttaW51dG9zLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtzZWd1bmRvcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lclRleHQuc2V0VGV4dChmb3JtYXRvKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGllbXBvUmVzdGFudGUgPD0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyRXZlbnQucGF1c2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGSU4gREVMIFRJRU1QT1wiKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3JlUDEgPiB0aGlzLnNjb3JlUDIpIHRoaXMuX2VuZFNldChcInBsYXllcjFcIik7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuc2NvcmVQMiA+IHRoaXMuc2NvcmVQMSkgdGhpcy5fZW5kU2V0KFwicGxheWVyMlwiKTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVtcGF0ZSBlbiBlbCBzZXRcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzR29sZGVuUG9pbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0V2lubmVyVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lubmVyVGV4dC5zZXRUZXh0KCdFTVBBVEU6IHB1bnRvIGRlIG9ybycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lubmVyVGV4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNldFNjb3JlVUkoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0U2NvcmVMZWZ0KSB0aGlzLnNldFNjb3JlTGVmdC5zZXRUZXh0KHRoaXMuc2V0c1AxLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIGlmICh0aGlzLnNldFNjb3JlUmlnaHQpIHRoaXMuc2V0U2NvcmVSaWdodC5zZXRUZXh0KHRoaXMuc2V0c1AyLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdHVhbGl6YSBsYSBVSSBkZWwgaW52ZW50YXJpbyBkZSBwb3dlci11cHMgZGUgdW4ganVnYWRvclxyXG4gICAgdXBkYXRlUGxheWVySW52ZW50b3J5VUkocGxheWVyKSB7XHJcbiAgICAgICAgY29uc3QgdWkgPSB0aGlzLmludmVudG9yeVVJW3BsYXllci5pZF07XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIucG93ZXJVcEludmVudG9yeVtpXSkge1xyXG4gICAgICAgICAgICAgICAgdWlbaV0uc2V0VGV4dHVyZShwbGF5ZXIucG93ZXJVcEludmVudG9yeVtpXSk7XHJcbiAgICAgICAgICAgICAgICB1aVtpXS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdWlbaV0uc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vLy8gTcOJVE9ET1MgQVVYSUxJQVJFUyAvLy8vXHJcbiAgICAvLyBDcmVhIGxhcyBhbmltYWNpb25lcyBkZSBsb3MgMyBwZXJzb25hamVzXHJcbiAgICBfY3JlYXRlQW5pbWF0aW9ucygpIHtcclxuICAgICAgICAvLy8vIENoYXJhY3RlckEgLy8vL1xyXG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiAnY2hhckFfaWRsZVJpZ2h0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQV9tb3ZlJywgeyBzdGFydDogMCwgZW5kOiAxIH0pLCAvLyBmaWxhIDBcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiA1LFxyXG4gICAgICAgICAgICByZXBlYXQ6IC0xXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBrZXk6ICdjaGFyQV9pZGxlTGVmdCcsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckFfbW92ZScsIHsgc3RhcnQ6IDIwLCBlbmQ6IDIxIH0pLnJldmVyc2UoKSwgLy8gZmlsYSAwXHJcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogNSxcclxuICAgICAgICAgICAgcmVwZWF0OiAtMVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJBX3JlY2VpdmVSaWdodCcsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckFfbW92ZScsIHsgc3RhcnQ6IDAsIGVuZDogMTAgfSksIC8vIGZpbGEgMFxyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDE3LFxyXG4gICAgICAgICAgICByZXBlYXQ6IDBcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJBX3JlY2VpdmVMZWZ0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQV9tb3ZlJywgeyBzdGFydDogMTEsIGVuZDogMjEgfSkucmV2ZXJzZSgpLCAvLyBmaWxhIDFcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcclxuICAgICAgICAgICAgcmVwZWF0OiAwXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiAnY2hhckFfcnVuUmlnaHQnLFxyXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJBX21vdmUnLCB7IHN0YXJ0OiAyMiwgZW5kOiAzMiB9KSwgLy8gZmlsYSAyXHJcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogMjIsXHJcbiAgICAgICAgICAgIHJlcGVhdDogLTFcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJBX3J1bkxlZnQnLFxyXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJBX21vdmUnLCB7IHN0YXJ0OiAzMywgZW5kOiA0MyB9KS5yZXZlcnNlKCksIC8vIGZpbGEgM1xyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDIyLFxyXG4gICAgICAgICAgICByZXBlYXQ6IC0xXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiAnY2hhckFfanVtcFJpZ2h0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQV9qdW1wJywgeyBzdGFydDogMCwgZW5kOiAxMiB9KSwgLy8gZmlsYSAwXHJcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogMTcsXHJcbiAgICAgICAgICAgIHJlcGVhdDogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiAnY2hhckFfanVtcExlZnQnLFxyXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJBX2p1bXAnLCB7IHN0YXJ0OiAxMywgZW5kOiAyNSB9KS5yZXZlcnNlKCksIC8vIGZpbGEgMVxyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDE3LFxyXG4gICAgICAgICAgICByZXBlYXQ6IDBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLy8vLy8vL1xyXG5cclxuICAgICAgICAvLy8vIENoYXJhY3RlckIgLy8vL1xyXG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiAnY2hhckJfaWRsZVJpZ2h0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQl9tb3ZlJywgeyBzdGFydDogMCwgZW5kOiAxIH0pLCAvLyBmaWxhIDBcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiA1LFxyXG4gICAgICAgICAgICByZXBlYXQ6IC0xXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBrZXk6ICdjaGFyQl9pZGxlTGVmdCcsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckJfbW92ZScsIHsgc3RhcnQ6IDIwLCBlbmQ6IDIxIH0pLnJldmVyc2UoKSwgLy8gZmlsYSAwXHJcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogNSxcclxuICAgICAgICAgICAgcmVwZWF0OiAtMVxyXG4gICAgICAgIH0pOyAgICAgICBcclxuXHJcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBrZXk6ICdjaGFyQl9yZWNlaXZlUmlnaHQnLFxyXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJCX21vdmUnLCB7IHN0YXJ0OiAwLCBlbmQ6IDEwIH0pLCAvLyBmaWxhIDBcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcclxuICAgICAgICAgICAgcmVwZWF0OiAwXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBrZXk6ICdjaGFyQl9yZWNlaXZlTGVmdCcsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckJfbW92ZScsIHsgc3RhcnQ6IDExLCBlbmQ6IDIxIH0pLnJldmVyc2UoKSwgLy8gZmlsYSAxXHJcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogMTcsXHJcbiAgICAgICAgICAgIHJlcGVhdDogMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJCX3J1blJpZ2h0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQl9tb3ZlJywgeyBzdGFydDogMjIsIGVuZDogMzIgfSksIC8vIGZpbGEgMlxyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDIyLFxyXG4gICAgICAgICAgICByZXBlYXQ6IC0xXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBrZXk6ICdjaGFyQl9ydW5MZWZ0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQl9tb3ZlJywgeyBzdGFydDogMzMsIGVuZDogNDMgfSkucmV2ZXJzZSgpLCAvLyBmaWxhIDNcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiAyMixcclxuICAgICAgICAgICAgcmVwZWF0OiAtMVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJCX2p1bXBSaWdodCcsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckJfanVtcCcsIHsgc3RhcnQ6IDAsIGVuZDogMTIgfSksIC8vIGZpbGEgMFxyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDE3LFxyXG4gICAgICAgICAgICByZXBlYXQ6IDBcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJCX2p1bXBMZWZ0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQl9qdW1wJywgeyBzdGFydDogMTMsIGVuZDogMjUgfSkucmV2ZXJzZSgpLCAvLyBmaWxhIDFcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcclxuICAgICAgICAgICAgcmVwZWF0OiAwXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8vLy8vLy9cclxuXHJcbiAgICAgICAgLy8vLyBDaGFyYWN0ZXJDIC8vLy9cclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJDX2lkbGVSaWdodCcsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckNfbW92ZScsIHsgc3RhcnQ6IDAsIGVuZDogMSB9KSwgLy8gZmlsYSAwXHJcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogNSxcclxuICAgICAgICAgICAgcmVwZWF0OiAtMVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiAnY2hhckNfaWRsZUxlZnQnLFxyXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJDX21vdmUnLCB7IHN0YXJ0OiAyMCwgZW5kOiAyMSB9KS5yZXZlcnNlKCksIC8vIGZpbGEgMFxyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDUsXHJcbiAgICAgICAgICAgIHJlcGVhdDogLTFcclxuICAgICAgICB9KTsgICAgICBcclxuXHJcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBrZXk6ICdjaGFyQ19yZWNlaXZlUmlnaHQnLFxyXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJDX21vdmUnLCB7IHN0YXJ0OiAwLCBlbmQ6IDEwIH0pLCAvLyBmaWxhIDBcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcclxuICAgICAgICAgICAgcmVwZWF0OiAwXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBrZXk6ICdjaGFyQ19yZWNlaXZlTGVmdCcsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckNfbW92ZScsIHsgc3RhcnQ6IDExLCBlbmQ6IDIxIH0pLnJldmVyc2UoKSwgLy8gZmlsYSAxXHJcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogMTcsXHJcbiAgICAgICAgICAgIHJlcGVhdDogMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJDX3J1blJpZ2h0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQ19tb3ZlJywgeyBzdGFydDogMjIsIGVuZDogMzIgfSksIC8vIGZpbGEgMlxyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDIyLFxyXG4gICAgICAgICAgICByZXBlYXQ6IC0xXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBrZXk6ICdjaGFyQ19ydW5MZWZ0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQ19tb3ZlJywgeyBzdGFydDogMzMsIGVuZDogNDMgfSkucmV2ZXJzZSgpLCAvLyBmaWxhIDNcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiAyMixcclxuICAgICAgICAgICAgcmVwZWF0OiAtMVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJDX2p1bXBSaWdodCcsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckNfanVtcCcsIHsgc3RhcnQ6IDAsIGVuZDogMTIgfSksIC8vIGZpbGEgMFxyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDE3LFxyXG4gICAgICAgICAgICByZXBlYXQ6IDBcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGtleTogJ2NoYXJDX2p1bXBMZWZ0JyxcclxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQ19qdW1wJywgeyBzdGFydDogMTMsIGVuZDogMjUgfSkucmV2ZXJzZSgpLCAvLyBmaWxhIDFcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcclxuICAgICAgICAgICAgcmVwZWF0OiAwXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8vLy8vLy9cclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhIGxvcyBwZXJzb25hamVzIGRlIGNhZGEganVnYWRvclxyXG4gICAgX2NyZWF0ZVBsYXllcnMoKSB7XHJcbiAgICAgICAgY29uc3QgY2hhclAxID0gdGhpcy5wbGF5ZXIxLmNoYXJhY3RlcjtcclxuICAgICAgICBjb25zdCBjaGFyUDIgPSB0aGlzLnBsYXllcjIuY2hhcmFjdGVyO1xyXG5cclxuICAgICAgICBjb25zdCBwMSA9IG5ldyBQbGF5ZXIoXHJcbiAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICdwbGF5ZXIxJyxcclxuICAgICAgICAgICAgdGhpcy53b3JsZFdpZHRoICogMC4yNSwgICAvLyBpenF1aWVyZGFcclxuICAgICAgICAgICAgdGhpcy5ncm91bmRZIC0gMTAwLCAgICAgICAgLy8gYXJyaWJhIGRlbCBzdWVsbyAobcOhcyBtYXJnZW4pXHJcbiAgICAgICAgICAgIGNoYXJQMVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHAyID0gbmV3IFBsYXllcihcclxuICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgJ3BsYXllcjInLFxyXG4gICAgICAgICAgICB0aGlzLndvcmxkV2lkdGggKiAwLjc1LCAgIC8vIGRlcmVjaGFcclxuICAgICAgICAgICAgdGhpcy5ncm91bmRZIC0gMTAwLCAgICAgICAgLy8gYXJyaWJhIGRlbCBzdWVsbyAobcOhcyBtYXJnZW4pXHJcbiAgICAgICAgICAgIGNoYXJQMlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMucGxheWVycy5zZXQoJ3BsYXllcjEnLCBwMSk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzLnNldCgncGxheWVyMicsIHAyKTtcclxuXHJcbiAgICAgICAgLy8gc2UgZXN0YWJsZWNlbiBsb3MgbMOtbWl0ZXMgZGUgbGEgY2FuY2hhIHBhcmEgY2FkYSBqdWdhZG9yXHJcbiAgICAgICAgY29uc3QgY291cnRUb3AgPSA1MDtcclxuICAgICAgICAvLyBhbGluZWFyIGVsIGzDrW1pdGUgaW5mZXJpb3IganVzdG8gcG9yIGVuY2ltYSBkZWwgc3VlbG9cclxuICAgICAgICAvLyBjb21vIGVsIGdyb3VuZCBhaG9yYSB0aWVuZSBvcmlnaW4gZW4gKDAuNSwgMCksIGdyb3VuZFkgZXMgbGEgcGFydGUgc3VwZXJpb3JcclxuICAgICAgICBjb25zdCBjb3VydEJvdHRvbSA9IE1hdGguZmxvb3IodGhpcy5ncm91bmRZKTtcclxuICAgICAgICBjb25zdCBjb3VydEludGVyaW9yTWFyZ2luID0gMjU7XHJcbiAgICAgICAgY29uc3QgY291cnRFeHRlcmlvcnRNYXJnaW4gPSA4MDtcclxuXHJcbiAgICAgICAgLy8gcGxheWVyMSAoaXpxdWllcmRhKTpcclxuICAgICAgICBwMS5zZXRCb3VuZHMoY291cnRFeHRlcmlvcnRNYXJnaW4sIDQ4MCAtIGNvdXJ0SW50ZXJpb3JNYXJnaW4sIGNvdXJ0VG9wLCBjb3VydEJvdHRvbSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcGxheWVyMiAoZGVyZWNoYSk6XHJcbiAgICAgICAgcDIuc2V0Qm91bmRzKDQ4MCArIGNvdXJ0SW50ZXJpb3JNYXJnaW4sIHRoaXMud29ybGRXaWR0aCAtIGNvdXJ0RXh0ZXJpb3J0TWFyZ2luLCBjb3VydFRvcCwgY291cnRCb3R0b20pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbW1hbmRQcm9jZXNzb3Iuc2V0UGxheWVycyh0aGlzLnBsYXllcnMpO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZFByb2Nlc3Nvci5zZXRHYW1lU2NlbmUodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIHBvciBkZWZlY3RvLCBhbmltYWNpw7NuIGlkbGVcclxuICAgICAgICBwMS5pZGxlUmlnaHQoKTtcclxuICAgICAgICBwMi5pZGxlTGVmdCgpO1xyXG4gICAgfSAgICBcclxuXHJcbiAgICAvLyBDcmVhIGVsIHN1ZWxvLCBsYSByZWQsIGxvcyBsw61taXRlcywgZXRjLlxyXG4gICAgX3NldHVwUGh5c2ljc1dvcmxkKGdyb3VuZCkge1xyXG4gICAgICAgIHRoaXMucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbGlzacOzbiBqdWdhZG9yLXN1ZWxvXHJcbiAgICAgICAgICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIocGxheWVyLnNwcml0ZSwgZ3JvdW5kKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbGlzacOzbiBqdWdhZG9yLXJlZFxyXG4gICAgICAgICAgICB0aGlzLnBoeXNpY3MuYWRkLmNvbGxpZGVyKHBsYXllci5zcHJpdGUsIHRoaXMucmVkLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtwbGF5ZXIuaWR9IHRvY8OzIGxhIHJlZCFgKTtcclxuICAgICAgICAgICAgICAgIHBsYXllci5zcHJpdGUuc2V0VmVsb2NpdHlYKDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBc2lnbmEgbG9zIGNvbnRyb2xlcy90ZWNsYXMgZGUgY2FkYSBqdWdhZG9yXHJcbiAgICBfc2V0dXBJbnB1dE1hcHBpbmdzKCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0Q29uZmlnID0gW1xyXG4gICAgICAgICAgICAvLyBqdWdhZG9yIDFcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGxheWVySWQ6ICdwbGF5ZXIxJyxcclxuICAgICAgICAgICAgICAgIGxlZnRLZXk6ICdBJyxcclxuICAgICAgICAgICAgICAgIHJpZ2h0S2V5OiAnRCcsXHJcbiAgICAgICAgICAgICAgICBqdW1wS2V5OiAnVycsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlS2V5OiAnUycsXHJcbiAgICAgICAgICAgICAgICBwb3dlcktleTogJ0UnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGp1Z2Fkb3IgMlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJJZDogJ3BsYXllcjInLFxyXG4gICAgICAgICAgICAgICAgbGVmdEtleTogJ0onLFxyXG4gICAgICAgICAgICAgICAgcmlnaHRLZXk6ICdMJyxcclxuICAgICAgICAgICAgICAgIGp1bXBLZXk6ICdJJyxcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVLZXk6ICdLJyxcclxuICAgICAgICAgICAgICAgIHBvd2VyS2V5OiAnTydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXRNYXBwaW5ncyA9IGlucHV0Q29uZmlnLm1hcChjb25maWcgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcGxheWVySWQ6IGNvbmZpZy5wbGF5ZXJJZCxcclxuICAgICAgICAgICAgICAgIGxlZnRLZXlPYmo6IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFxyXG4gICAgICAgICAgICAgICAgICAgIFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlc1tjb25maWcubGVmdEtleV1cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICByaWdodEtleU9iajogdGhpcy5pbnB1dC5rZXlib2FyZC5hZGRLZXkoXHJcbiAgICAgICAgICAgICAgICAgICAgUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzW2NvbmZpZy5yaWdodEtleV1cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBqdW1wS2V5T2JqOiB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShcclxuICAgICAgICAgICAgICAgICAgICBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXNbY29uZmlnLmp1bXBLZXldXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZUtleU9iajogdGhpcy5pbnB1dC5rZXlib2FyZC5hZGRLZXkoXHJcbiAgICAgICAgICAgICAgICAgICAgUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzW2NvbmZpZy5yZWNlaXZlS2V5XVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHBvd2VyS2V5T2JqOiB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShcclxuICAgICAgICAgICAgICAgICAgICBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXNbY29uZmlnLnBvd2VyS2V5XVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByb2Nlc2EgZWwgaW5wdXQgZGUgbG9zIGRvcyBqdWdhZG9yZXNcclxuICAgIF9oYW5kbGVJbnB1dEZvckFsbFBsYXllcnMoKSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dE1hcHBpbmdzLmZvckVhY2gobWFwcGluZyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IHRoaXMucGxheWVycy5nZXQobWFwcGluZy5wbGF5ZXJJZCk7XHJcbiAgICAgICAgICAgIGlmICghcGxheWVyKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvLyBzaSBlc3TDoSBwYXJhbGl6YWRvLCBzZSBkZWphIGVuIGlkbGVcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc1BhcmFseXplZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWRsZURpciA9IChwbGF5ZXIuZmFjaW5nID09PSAnbGVmdCcpID8gJ2lkbGVMZWZ0JyA6ICdpZGxlUmlnaHQnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kUHJvY2Vzc29yLnByb2Nlc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE1vdmVQbGF5ZXJDb21tYW5kKHBsYXllciwgaWRsZURpcilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBkaXJlY3Rpb247XHJcblxyXG4gICAgICAgICAgICAvLyBtb3ZpbWllbnRvIGhvcml6b250YWwgbm9ybWFsXHJcbiAgICAgICAgICAgIGlmIChtYXBwaW5nLmxlZnRLZXlPYmouaXNEb3duKSB7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAnbGVmdCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobWFwcGluZy5yaWdodEtleU9iai5pc0Rvd24pIHtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdyaWdodCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbm8gc2UgcHVsc2EgbmFkYSwgYXPDrSBxdWUgc2UgcXVlZGEgaWRsZSBzZWfDum4gaGFjaWEgZMOzbmRlIG1pcmFiYVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IChwbGF5ZXIuZmFjaW5nID09PSAnbGVmdCcpID8gJ2lkbGVMZWZ0JzogJ2lkbGVSaWdodCc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHNlIGFwbGljYSBtb3ZpbWllbnRvL2lkbGUgU09MTyBzaSBubyBlc3TDoSBzYWx0YW5kb1xyXG4gICAgICAgICAgICAvLyBzaSBlc3TDoSBzYWx0YW5kbywgbm8gc2UgcHJvY2VzYSBlbCBtb3ZpbWllbnRvIHBhcmEgbm8gc29icmVzY3JpYmlyIGxhIGFuaW1hY2nDs25cclxuICAgICAgICAgICAgaWYgKCFwbGF5ZXIuaXNKdW1waW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRQcm9jZXNzb3IucHJvY2VzcyhcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTW92ZVBsYXllckNvbW1hbmQocGxheWVyLCBkaXJlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByZWNlcGNpw7NuXHJcbiAgICAgICAgICAgIGlmIChQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuSnVzdERvd24obWFwcGluZy5yZWNlaXZlS2V5T2JqKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjZWl2ZURpciA9IChwbGF5ZXIuZmFjaW5nID09PSAnbGVmdCcpID8gJ3JlY2VpdmVMZWZ0JyA6ICdyZWNlaXZlUmlnaHQnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kUHJvY2Vzc29yLnByb2Nlc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE1vdmVQbGF5ZXJDb21tYW5kKHBsYXllciwgcmVjZWl2ZURpcilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHNhbHRvL3JlbWF0ZVxyXG4gICAgICAgICAgICBpZiAoUGhhc2VyLklucHV0LktleWJvYXJkLkp1c3REb3duKG1hcHBpbmcuanVtcEtleU9iaikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGp1bXBEaXIgPSAocGxheWVyLmZhY2luZyA9PT0gJ2xlZnQnKSA/ICdqdW1wTGVmdCcgOiAnanVtcFJpZ2h0JztcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZFByb2Nlc3Nvci5wcm9jZXNzKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBNb3ZlUGxheWVyQ29tbWFuZChwbGF5ZXIsIGp1bXBEaXIpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQb3dlclVwc1xyXG4gICAgICAgICAgICBpZiAoUGhhc2VyLklucHV0LktleWJvYXJkLkp1c3REb3duKG1hcHBpbmcucG93ZXJLZXlPYmopKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIudXNlTmV4dFBvd2VyVXAoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGxheWVySW52ZW50b3J5VUkocGxheWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBzZSBhY3R1YWxpemEgZWwgZXN0YWRvIGRlIGxvcyBqdWdhZG9yZXMgKHN1ZWxvLCBldGMuKVxyXG4gICAgICAgIHRoaXMucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiBwbGF5ZXIudXBkYXRlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWEgbGEgcGVsb3RhXHJcbiAgICBfY3JlYXRlQmFsbCgpIHtcclxuICAgICAgICB0aGlzLmJhbGwgPSBuZXcgQmFsbCh0aGlzLCB0aGlzLndvcmxkV2lkdGggLyAyLCAxNTApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbmZpZ3VyYSBsYXMgY29saXNpb25lcyBkZSBsYSBwZWxvdGFcclxuICAgIF9zZXR1cEJhbGxDb2xsaXNpb25zKCkge1xyXG4gICAgICAgIC8vIGNvbGlzaW9uZXMgZGUgbGEgcGVsb3RhIGNvbiBsb3MganVnYWRvcmVzXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHtcclxuICAgICAgICAgICAgdGhpcy5waHlzaWNzLmFkZC5vdmVybGFwKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxsLnNwcml0ZSxcclxuICAgICAgICAgICAgICAgIHBsYXllci5zcHJpdGUsXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLl9vbkJhbGxQbGF5ZXJDb2xsaXNpb24odGhpcy5iYWxsLCBwbGF5ZXIpLFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY29saXNpw7NuIHBlbG90YS1yZWRcclxuICAgICAgICB0aGlzLnBoeXNpY3MuYWRkLmNvbGxpZGVyKHRoaXMuYmFsbC5zcHJpdGUsIHRoaXMucmVkLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEVzdG8gc2UgZGlzcGFyYSBhbCB0b2NhciBsYSByZWRcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0xhIHBlbG90YSB0b2NhIGxhIHJlZCEnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFBvciBlamVtcGxvLCBzZSBwdWVkZSBmcmVuYXIgbGEgcGVsb3RhOlxyXG4gICAgICAgICAgICB0aGlzLmJhbGwuc3ByaXRlLnNldFZlbG9jaXR5WCh0aGlzLmJhbGwuc3ByaXRlLmJvZHkudmVsb2NpdHkueCAqIDAuNSk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsbC5zcHJpdGUuc2V0VmVsb2NpdHlZKHRoaXMuYmFsbC5zcHJpdGUuYm9keS52ZWxvY2l0eS55ICogMC41KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY29saXNpw7NuIGRlIGxhIHBlbG90YSBjb24gZWwgc3VlbG8gKGRpc3BhcmEgcHVudHVhY2nDs24pXHJcbiAgICAgICAgY29uc3QgZ3JvdW5kWSA9IHRoaXMud29ybGRIZWlnaHQgLSAxMDtcclxuICAgICAgICB0aGlzLmJhbGwuc3ByaXRlLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTtcclxuICAgICAgICB0aGlzLmJhbGwuc3ByaXRlLnNldEJvdW5jZSgwLjgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbmZpZ3VyYSBsb3MgZXZlbnQgbGlzdGVuZXJzIGRlIGxhIHBlbG90YVxyXG4gICAgX3NldHVwQmFsbEV2ZW50cygpIHtcclxuICAgICAgICB0aGlzLmV2ZW50cy5vZmYoJ3JhbGx5Q29uY2x1ZGVkJyk7XHJcbiAgICAgICAgdGhpcy5ldmVudHMub24oJ3JhbGx5Q29uY2x1ZGVkJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNTZXRFbmRpbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSYWxseSBjb25jbHVkZWQ6ICR7ZGF0YS5zY29yaW5nUGxheWVySWR9IHNjb3JlcyFgKTtcclxuICAgICAgICAgICAgY29uc3Qgc2NvcmVySWQgPSBkYXRhLnNjb3JpbmdQbGF5ZXJJZDtcclxuXHJcbiAgICAgICAgICAgIC8vIHNlIGNvZ2UgZWwgcGxheWVyIHF1ZSBoYSBhbm90YWRvXHJcbiAgICAgICAgICAgIGNvbnN0IHNjb3JpbmdQbGF5ZXIgPSB0aGlzLnBsYXllcnMuZ2V0KHNjb3JlcklkKTtcclxuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IHNjb3JpbmdQbGF5ZXIgPyAoc2NvcmluZ1BsYXllci5zY29yZU11bHRpcGxpZXIgfHwgMSkgOiAxO1xyXG5cclxuICAgICAgICAgICAgLy8gMSBwdW50byBiYXNlICogbXVsdGlwbGljYWRvclxyXG4gICAgICAgICAgICBjb25zdCBwb2ludHNUb0FkZCA9IG11bHRpcGxpZXI7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2NvcmVySWQgPT09ICdwbGF5ZXIxJykge1xyXG4gICAgICAgICAgICAgICAgLy8gbWFyY2Fkb3IgdmlzdWFsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvaW50c0xlZnQgKz0gcG9pbnRzVG9BZGQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlTGVmdC5zZXRUZXh0KHRoaXMucG9pbnRzTGVmdC50b1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBwdW50b3MgZGVsIHNldCAocGFyYSBsw7NnaWNhIGRlIHNldHMpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlUDEgKz0gcG9pbnRzVG9BZGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcmVySWQgPT09ICdwbGF5ZXIyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludHNSaWdodCArPSBwb2ludHNUb0FkZDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmlnaHRTY29yZS5zZXRUZXh0KHRoaXMucG9pbnRzUmlnaHQudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZVAyICs9IHBvaW50c1RvQWRkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNlIHJlcHJvZHVjZSBlbCBlZmVjdG8gZGUgc29uaWRvIGRlIHB1bnRvXHJcbiAgICAgICAgICAgIHRoaXMucGxheVNmeCh0aGlzLnNmeC5wb2ludCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0dvbGRlblBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzR29sZGVuUG9pbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VuZFNldChzY29yZXJJZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAvLyBjb25kaWNpw7NuIGRlIDExIHB1bnRvcyBjb24gMiBkZSBkaWZlcmVuY2lhXHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrV2luQ29uZGl0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmVyaWZpY2Egc2kgbGEgcGVsb3RhIGVzdMOhIGVuIGxhIHpvbmEgdsOhbGlkYSBwYXJhIGdvbHBlYXJsYVxyXG4gICAgX2lzQmFsbEluSGl0Wm9uZShiYWxsU3ByaXRlLCBwbGF5ZXIsIGlzSnVtcGluZywgaXNSZWNlaXZpbmcpIHtcclxuICAgICAgICBjb25zdCBib2R5ID0gcGxheWVyLnNwcml0ZS5ib2R5O1xyXG4gICAgICAgIGlmICghYm9keSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCBiYWxsWCA9IGJhbGxTcHJpdGUueDtcclxuICAgICAgICBjb25zdCBiYWxsWSA9IGJhbGxTcHJpdGUueTtcclxuICAgICAgICBjb25zdCBib2R5VG9wID0gYm9keS55O1xyXG4gICAgICAgIGNvbnN0IGJvZHlIZWlnaHQgPSBib2R5LmhlaWdodDtcclxuICAgICAgICBjb25zdCBib2R5Q2VudGVyWCA9IGJvZHkueCArIGJvZHkud2lkdGggKiAwLjU7XHJcblxyXG4gICAgICAgIGNvbnN0IHpvbmUgPSBpc0p1bXBpbmdcclxuICAgICAgICAgICAgPyB7IHRvcDogLTAuMSwgYm90dG9tOiAwLjYgfVxyXG4gICAgICAgICAgICA6IChpc1JlY2VpdmluZyA/IHsgdG9wOiAwLjM1LCBib3R0b206IDAuODUgfSA6IHsgdG9wOiAwLjI1LCBib3R0b206IDAuODUgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHpvbmVUb3AgPSBib2R5VG9wICsgYm9keUhlaWdodCAqIHpvbmUudG9wO1xyXG4gICAgICAgIGNvbnN0IHpvbmVCb3R0b20gPSBib2R5VG9wICsgYm9keUhlaWdodCAqIHpvbmUuYm90dG9tO1xyXG5cclxuICAgICAgICBpZiAoYmFsbFkgPCB6b25lVG9wIHx8IGJhbGxZID4gem9uZUJvdHRvbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmYWNpbmdSaWdodCA9IHBsYXllci5mYWNpbmcgPT09ICdyaWdodCc7XHJcbiAgICAgICAgY29uc3Qgd2lkZUhpdCA9IGlzUmVjZWl2aW5nIHx8IGlzSnVtcGluZztcclxuICAgICAgICBjb25zdCByZWFjaEZvcndhcmQgPSBib2R5LndpZHRoICogKHdpZGVIaXQgPyAwLjkgOiAwLjc1KTtcclxuICAgICAgICBjb25zdCByZWFjaEJhY2sgPSBib2R5LndpZHRoICogKHdpZGVIaXQgPyAwLjI1IDogMC4xNSk7XHJcbiAgICAgICAgY29uc3QgbWluWCA9IGZhY2luZ1JpZ2h0ID8gYm9keUNlbnRlclggLSByZWFjaEJhY2sgOiBib2R5Q2VudGVyWCAtIHJlYWNoRm9yd2FyZDtcclxuICAgICAgICBjb25zdCBtYXhYID0gZmFjaW5nUmlnaHQgPyBib2R5Q2VudGVyWCArIHJlYWNoRm9yd2FyZCA6IGJvZHlDZW50ZXJYICsgcmVhY2hCYWNrO1xyXG5cclxuICAgICAgICBpZiAoYmFsbFggPCBtaW5YIHx8IGJhbGxYID4gbWF4WCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNYW5lamEgY29saXNpw7NuIGVudHJlIHBlbG90YSB5IGp1Z2Fkb3JcclxuICAgIF9vbkJhbGxQbGF5ZXJDb2xsaXNpb24oYmFsbCwgcGxheWVyKSB7XHJcbiAgICAgICAgaWYgKCFiYWxsLmlzQmFsbExpdmUpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgaXNKdW1waW5nID0gIXBsYXllci5zcHJpdGUuYm9keS5ibG9ja2VkLmRvd247XHJcbiAgICAgICAgY29uc3QgaXNSZWNlaXZpbmcgPSBwbGF5ZXIuaXNSZWNlaXZpbmc7XHJcbiAgICAgICAgY29uc3QgcGxheWVyRGlyZWN0aW9uID0gcGxheWVyLmZhY2luZztcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc0JhbGxJbkhpdFpvbmUoYmFsbC5zcHJpdGUsIHBsYXllciwgaXNKdW1waW5nLCBpc1JlY2VpdmluZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYmFsbC5oaXQocGxheWVyLCBwbGF5ZXJEaXJlY3Rpb24sIGlzSnVtcGluZywgaXNSZWNlaXZpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbnRyb2xhIGVsIGZpbmFsIGRlbCBqdWVnb1xyXG4gICAgX2VuZEdhbWUod2lubmVyKSB7XHJcbiAgICAgICAgLy8gc2UgcGFyYSBlbCB0aW1lciBkZWwgc2V0XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJFdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyRXZlbnQucmVtb3ZlKGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lckV2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNpbGJhdG8gZGUgZmluYWwgZGUgcGFydGlkb1xyXG4gICAgICAgIHRoaXMucGxheVNmeCh0aGlzLnNmeC53aGlzdGxlKTtcclxuXHJcbiAgICAgICAgLy8gc2UgZGV0aWVuZSBsYSBmw61zaWNhIGRlIGVzdGEgZXNjZW5hIGFudGVzIGRlIHNhbGlyXHJcbiAgICAgICAgaWYgKHRoaXMucGh5c2ljcyAmJiB0aGlzLnBoeXNpY3Mud29ybGQpIHtcclxuICAgICAgICAgICAgdGhpcy5waHlzaWNzLndvcmxkLnBhdXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcIlBhcnRpZGEgTG9jYWwgdGVybWluYWRhLiBHYW5hZG9yOlwiLCB3aW5uZXIpO1xyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KFwiRW5kR2FtZV9TY2VuZVwiLCB7XHJcbiAgICAgICAgICAgIHdpbm5lcjogd2lubmVyLFxyXG4gICAgICAgICAgICBwbGF5ZXIxOiB0aGlzLnBsYXllcjEsXHJcbiAgICAgICAgICAgIHBsYXllcjI6IHRoaXMucGxheWVyMixcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZmljYSBzaSBhbGfDum4ganVnYWRvciBoYSBnYW5hZG8gZWwgc2V0XHJcbiAgICBfY2hlY2tXaW5Db25kaXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgbWluUG9pbnRzID0gMTE7ICAgLy8gcHVudG9zIG3DrW5pbW9zIHBhcmEgZ2FuYXJcclxuICAgICAgICBjb25zdCBtaW5EaWZmID0gMjsgICAgICAvLyBkaWZlcmVuY2lhIG3DrW5pbWEgZGUgcHVudG9zIHBhcmEgZ2FuYXJcclxuICAgICAgICBcclxuICAgICAgICAvLyBkaWZlcmVuY2lhIGRlIHB1bnRvc1xyXG4gICAgICAgIGNvbnN0IHNjb3JlRGlmZiA9IHRoaXMuc2NvcmVQMSAtIHRoaXMuc2NvcmVQMjtcclxuICAgICAgICBjb25zdCBtYXhTY29yZSA9IE1hdGgubWF4KHRoaXMuc2NvcmVQMSwgdGhpcy5zY29yZVAyKTtcclxuXHJcbiAgICAgICAgLy8gc2kgbm8gc2UgY3VtcGxlIGFsZ3VuYSBkZSBsYXMgY29uZGljaW9uZXMsIG5vIHNlIHRlcm1pbmEgZWwgc2V0XHJcbiAgICAgICAgaWYgKG1heFNjb3JlIDwgbWluUG9pbnRzIHx8IE1hdGguYWJzKHNjb3JlRGlmZikgPCBtaW5EaWZmKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNpbm8sIHNlIGRldGVybWluYSBlbCBnYW5hZG9yIGRlbCBzZXRcclxuICAgICAgICBjb25zdCB3aW5uZXIgPSBzY29yZURpZmYgPiAwID8gXCJwbGF5ZXIxXCIgOiBcInBsYXllcjJcIjtcclxuICAgICAgICB0aGlzLl9lbmRTZXQod2lubmVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb250cm9sYSBlbCBmaW5hbCBkZSB1biBzZXRcclxuICAgIF9lbmRTZXQod2lubmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTZXRFbmRpbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5pc1NldEVuZGluZyA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuYmFsbD8uc3ByaXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsbC5pc0JhbGxMaXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsbC5zcHJpdGUuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhY3R1YWxpemFyIHNldHMgZ2FuYWRvc1xyXG4gICAgICAgIGlmICh3aW5uZXIgPT09ICdwbGF5ZXIxJykgdGhpcy5zZXRzUDErKztcclxuICAgICAgICBlbHNlIGlmICh3aW5uZXIgPT09ICdwbGF5ZXIyJykgdGhpcy5zZXRzUDIrKztcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYFNldCB0ZXJtaW5hZG8uIFNjb3JlIHNldHM6IFAxPSR7dGhpcy5zZXRzUDF9LCBQMj0ke3RoaXMuc2V0c1AyfWApO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVNldFNjb3JlVUkoKTtcclxuXHJcbiAgICAgICAgLy8gbW9zdHJhciBtZW5zYWplIGRlIGdhbmFkb3IgZGUgc2V0XHJcbiAgICAgICAgY29uc3Qgd2lubmVyTGFiZWwgPSAod2lubmVyID09PSAncGxheWVyMScpID8gJ0p1Z2Fkb3IgMScgOiAnSnVnYWRvciAyJztcclxuICAgICAgICB0aGlzLnNldFdpbm5lclRleHQuc2V0VGV4dChgU0VUIHBhcmEgJHt3aW5uZXJMYWJlbH1gKTtcclxuICAgICAgICB0aGlzLnNldFdpbm5lclRleHQuc2V0VmlzaWJsZSh0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gQXZhbnphciBuw7ptZXJvIGRlIHNldFxyXG4gICAgICAgIHRoaXMuY3VycmVudFNldCsrO1xyXG5cclxuICAgICAgICBjb25zdCBtYXRjaE92ZXIgPSAodGhpcy5zZXRzUDEgPT09IDIgfHwgdGhpcy5zZXRzUDIgPT09IDIpO1xyXG5cclxuICAgICAgICBpZiAobWF0Y2hPdmVyKSB7XHJcbiAgICAgICAgICAgIC8vIMO6bHRpbW8gc2V0OiBtb3N0cmFtb3MgZWwgbWVuc2FqZSAycyB5IGx1ZWdvIHBhc2Ftb3MgYSBsYSBlc2NlbmEgZmluYWxcclxuICAgICAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDIwMDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIChzaSBxdWllcmVzLCBhcXXDrSBwb2Ryw61hcyBvY3VsdGFyIGVsIHRleHRvKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZW5kR2FtZSh3aW5uZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzZXQgaW50ZXJtZWRpbzogbW9zdHJhbW9zIGVsIG1lbnNhamUgMnMsIGxvIG9jdWx0YW1vcyB5IHJlaW5pY2lhbW9zIGVsIHNldFxyXG4gICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMjAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0V2lubmVyVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lubmVyVGV4dC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0U2V0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBSZWluaWNpYSBlbCBlc3RhZG8gcGFyYSB1biBudWV2byBzZXRcclxuICAgIF9yZXNldFNldCgpIHtcclxuICAgICAgICB0aGlzLmlzU2V0RW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc0dvbGRlblBvaW50ID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gc2UgYWN0dWFsaXphIGVsIHRleHRvIGRlbCBzZXQgYWN0dWFsXHJcbiAgICAgICAgdGhpcy5zZXRUZXh0LnNldFRleHQoYFNFVCAke3RoaXMuY3VycmVudFNldH1gKTtcclxuXHJcbiAgICAgICAgLy8gc2UgcmVpbmljaWEgZWwgdGllbXBvXHJcbiAgICAgICAgdGhpcy50aWVtcG9SZXN0YW50ZSA9IHRoaXMudGllbXBvVG90YWw7XHJcbiAgICAgICAgdGhpcy50aW1lckV2ZW50LnBhdXNlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVGltZXIoKTtcclxuXHJcbiAgICAgICAgLy8gc2UgcmVpbmljaWEgbGEgcHVudHVhY2nDs24gZGVsIHNldCAobMOzZ2ljYSlcclxuICAgICAgICB0aGlzLnNjb3JlUDEgPSAwO1xyXG4gICAgICAgIHRoaXMuc2NvcmVQMiA9IDA7XHJcblxyXG4gICAgICAgIC8vIHNlIHJlaW5pY2lhIGVsIG1hcmNhZG9yIHZpc3VhbCBlbiBwYW50YWxsYVxyXG4gICAgICAgIHRoaXMucG9pbnRzTGVmdCA9IDA7XHJcbiAgICAgICAgdGhpcy5wb2ludHNSaWdodCA9IDA7XHJcbiAgICAgICAgdGhpcy5zY29yZUxlZnQuc2V0VGV4dCgnMCcpO1xyXG4gICAgICAgIHRoaXMucmlnaHRTY29yZS5zZXRUZXh0KCcwJyk7XHJcblxyXG4gICAgICAgIC8vIHNlIHJlaW5pY2lhIGxhIHBlbG90YVxyXG4gICAgICAgIHRoaXMuYmFsbC5yZXNldFJhbGx5KCk7XHJcblxyXG4gICAgICAgIC8vIHNlIHJlcG9zaWNpb25hbiBsb3MganVnYWRvcmVzIGEgc3VzIHBvc2ljaW9uZXMgaW5pY2lhbGVzXHJcbiAgICAgICAgY29uc3QgcDEgPSB0aGlzLnBsYXllcnMuZ2V0KCdwbGF5ZXIxJyk7XHJcbiAgICAgICAgY29uc3QgcDIgPSB0aGlzLnBsYXllcnMuZ2V0KCdwbGF5ZXIyJyk7XHJcblxyXG4gICAgICAgIHAxLnNldFBvc2l0aW9uKHRoaXMud29ybGRXaWR0aCAqIDAuMjUsIHRoaXMud29ybGRIZWlnaHQgKiAwLjcpO1xyXG4gICAgICAgIHAyLnNldFBvc2l0aW9uKHRoaXMud29ybGRXaWR0aCAqIDAuNzUsIHRoaXMud29ybGRIZWlnaHQgKiAwLjcpO1xyXG5cclxuICAgICAgICBwMS5pZGxlUmlnaHQoKTtcclxuICAgICAgICBwMi5pZGxlTGVmdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnBsYXlTZngodGhpcy5zZngud2hpc3RsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2h1dGRvd24oKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudHMub2ZmKCdyYWxseUNvbmNsdWRlZCcpO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVyRXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lckV2ZW50LmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLyBQYW50YWxsYSBkZSBUdXRvcmlhbFxyXG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcbmltcG9ydCB7IGFwcGx5U3RvcmVkVm9sdW1lLCBwbGF5Q2xpY2sgfSBmcm9tICcuLi9VSS9BdWRpby5qcyc7XHJcbmltcG9ydCB7IGNyZWF0ZVVJQnV0dG9uLCBjcmVhdGVJY29uQnV0dG9uIH0gZnJvbSAnLi4vVUkvQnV0dG9ucy5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVHV0b3JpYWxfU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ1R1dG9yaWFsX1NjZW5lJyk7XHJcblxyXG4gICAgICAgIC8vIHVuIMO6bmljbyB0dXRvcmlhbCBjb24gcMOhZ2luYXNcclxuICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5yZXR1cm5TY2VuZSA9ICdNZW51X1NjZW5lJztcclxuICAgIH1cclxuXHJcbiAgICBpbml0KGRhdGEpIHtcclxuICAgICAgICAvLyBlc2NlbmEgZGVzZGUgbGEgcXVlIHNlIGFicmnDsyBlbCB0dXRvcmlhbCwgcGFyYSByZWFudWRhcmxhXHJcbiAgICAgICAgdGhpcy5yZXR1cm5TY2VuZSA9IGRhdGE/LnJldHVyblNjZW5lID8/ICdNZW51X1NjZW5lJztcclxuICAgIH1cclxuXHJcbiAgICBwcmVsb2FkKCkge1xyXG4gICAgICAgIC8vIGltw6FnZW5lcyBkZWwgdHV0b3JpYWxcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3R1dDBfY29udHJvbGVzJywgJ0FTU0VUUy9UVVRPUklBTC9UVVQwX0NvbnRyb2xlcy5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3R1dDBfY29udHJvbGVzT25saW5lJywgJ0FTU0VUUy9UVVRPUklBTC9UVVQwX0NvbnRyb2xlc09ubGluZS5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3R1dDFfc2V0JywgJ0FTU0VUUy9UVVRPUklBTC9UVVQxX1NldC5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3R1dDJfcGVsb3RhJywgJ0FTU0VUUy9UVVRPUklBTC9UVVQyX1BlbG90YS5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3R1dDNfcG93ZXJ1cCcsICdBU1NFVFMvVFVUT1JJQUwvVFVUM19Qb3dlcnVwLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgndHV0NF9saXN0YScsICdBU1NFVFMvVFVUT1JJQUwvVFVUNF9MaXN0YS5wbmcnKTtcclxuXHJcbiAgICAgICAgLy8gZm9uZG8geSB1aVxyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnZm9uZG8nLCAnQVNTRVRTL0ZPTkRPUy9GT05ET19CQVNFLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYm90b25Wb2x2ZXInLCAnQVNTRVRTL1VJL0JPVE9ORVMvRkxFQ0hBX1ZPTFZFUi5wbmcnKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlclggPSB3aWR0aCAvIDI7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0eWxlID0ge1xyXG4gICAgICAgICAgICAuLi4odGhpcy5nYW1lLmdsb2JhbHM/LmRlZmF1bHRUZXh0U3R5bGUgPz8ge1xyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ1ZUMzIzJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyMwMDAwMDAnLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFwcGx5U3RvcmVkVm9sdW1lKHRoaXMpO1xyXG5cclxuICAgICAgICAvLyBmb25kb1xyXG4gICAgICAgIHRoaXMuYWRkXHJcbiAgICAgICAgICAgIC5pbWFnZSgwLCAwLCAnZm9uZG8nKVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDApXHJcbiAgICAgICAgICAgIC5zZXREZXB0aCgtMSlcclxuICAgICAgICAgICAgLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyB0w610dWxvXHJcbiAgICAgICAgdGhpcy5tYWluVGl0bGVUZXh0ID0gdGhpcy5hZGRcclxuICAgICAgICAgICAgLnRleHQoY2VudGVyWCwgaGVpZ2h0ICogMC4xLCAnVHV0b3JpYWwnLCB7XHJcbiAgICAgICAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnNDJweCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyM1ZjAwMDBmZicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgLy8gYm90w7NuIFZvbHZlciBhdHLDoXNcclxuICAgICAgICBjcmVhdGVJY29uQnV0dG9uKHRoaXMsIHtcclxuICAgICAgICAgICAgeDogd2lkdGggKiAwLjA2LFxyXG4gICAgICAgICAgICB5OiBoZWlnaHQgKiAwLjA4LFxyXG4gICAgICAgICAgICB0ZXh0dXJlOiAnYm90b25Wb2x2ZXInLFxyXG4gICAgICAgICAgICBzY2FsZTogMSxcclxuICAgICAgICAgICAgaG92ZXJTY2FsZTogMS4xLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLnNjZW5lLnN0YXJ0KHRoaXMucmV0dXJuU2NlbmUpLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBjb250ZW5pZG8gZGVsIHR1dG9yaWFsIChzbGlkZXMpXHJcbiAgICAgICAgdGhpcy5wYWdlSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMucGFnZXMgPSBbXHJcbiAgICAgICAgICAgIHsga2V5OiAndHV0MF9jb250cm9sZXMnLCB0aXRsZTogJ0NvbnRyb2xlcyBMb2NhbCcgfSxcclxuICAgICAgICAgICAgeyBrZXk6ICd0dXQwX2NvbnRyb2xlc09ubGluZScsIHRpdGxlOiAnQ29udHJvbGVzIE9ubGluZScgfSxcclxuICAgICAgICAgICAgeyBrZXk6ICd0dXQxX3NldCcsIHRpdGxlOiAnUmVnbGFzIGLDoXNpY2FzOiBzZXQnIH0sXHJcbiAgICAgICAgICAgIHsga2V5OiAndHV0Ml9wZWxvdGEnLCB0aXRsZTogJ1JlZ2xhcyBiw6FzaWNhczogcGVsb3RhJyB9LFxyXG4gICAgICAgICAgICB7IGtleTogJ3R1dDNfcG93ZXJ1cCcsIHRpdGxlOiAnUmVnbGFzIGLDoXNpY2FzOiBwb3dlci11cHMnIH0sXHJcbiAgICAgICAgICAgIHsga2V5OiAndHV0NF9saXN0YScsIHRpdGxlOiAnTGlzdGEgZGUgcG93ZXItdXBzJyB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgLy8gcGFuZWwgcGFyYSBsYXMgaW3DoWdlbmVzXHJcbiAgICAgICAgY29uc3QgcGFuZWxNYXJnaW4gPSBNYXRoLm1heCg4LCBNYXRoLnJvdW5kKE1hdGgubWluKHdpZHRoLCBoZWlnaHQpICogMC4wMTUpKTtcclxuICAgICAgICBjb25zdCBwYW5lbEdhcCA9IE1hdGgubWF4KDYsIE1hdGgucm91bmQoaGVpZ2h0ICogMC4wMTIpKTtcclxuICAgICAgICBjb25zdCBuYXZZID0gaGVpZ2h0ICogMC45MTtcclxuXHJcbiAgICAgICAgY29uc3QgcGFuZWxUb3AgPSB0aGlzLm1haW5UaXRsZVRleHQueSArIHRoaXMubWFpblRpdGxlVGV4dC5oZWlnaHQgKyBwYW5lbEdhcDtcclxuICAgICAgICBjb25zdCBwYW5lbEJvdHRvbSA9IG5hdlkgLSBwYW5lbEdhcDtcclxuICAgICAgICBjb25zdCBwYW5lbEhlaWdodCA9IE1hdGgubWF4KDAsIHBhbmVsQm90dG9tIC0gcGFuZWxUb3ApO1xyXG4gICAgICAgIGNvbnN0IHBhbmVsV2lkdGggPSBNYXRoLm1heCgwLCB3aWR0aCAtIHBhbmVsTWFyZ2luICogMik7XHJcblxyXG4gICAgICAgIHRoaXMubGF5b3V0ID0ge1xyXG4gICAgICAgICAgICBwYW5lbFRvcCxcclxuICAgICAgICAgICAgcGFuZWxIZWlnaHQsXHJcbiAgICAgICAgICAgIHBhbmVsV2lkdGgsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gaW1hZ2VuIGRlIGxhIHBhZ2luYVxyXG4gICAgICAgIHRoaXMuc2xpZGVJbWFnZSA9IHRoaXMuYWRkLmltYWdlKFxyXG4gICAgICAgICAgICBjZW50ZXJYLFxyXG4gICAgICAgICAgICBwYW5lbFRvcCArIHBhbmVsSGVpZ2h0IC8gMixcclxuICAgICAgICAgICAgdGhpcy5wYWdlc1swXS5rZXlcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuX2ZpdEltYWdlKHRoaXMuc2xpZGVJbWFnZSwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBpbmRpY2Fkb3IgZGUgcGFnaW5hXHJcbiAgICAgICAgdGhpcy5wYWdlSW5kaWNhdG9yID0gdGhpcy5hZGQudGV4dChjZW50ZXJYLCBuYXZZICsgMjAsICcnLCB7XHJcbiAgICAgICAgICAgIC4uLnN0eWxlLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzI4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMDAnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIC8vIEJPVE9ORVMgREUgTkFWRUdBQ0nDk05cclxuICAgICAgICBjb25zdCBidXR0b25UZXh0U3R5bGUgPSB7IC4uLnN0eWxlLCBmb250U2l6ZTogJzI4cHgnLCBjb2xvcjogJyMwMDAwMDAnIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gYm90w7NuIEFudGVyaW9yXHJcbiAgICAgICAgdGhpcy5wcmV2QnRuID0gY3JlYXRlVUlCdXR0b24odGhpcywge1xyXG4gICAgICAgICAgICB4OiBjZW50ZXJYIC0gMTY1LFxyXG4gICAgICAgICAgICB5OiBuYXZZICsgMjAsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnQW50ZXJpb3InLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLnByZXYoKSxcclxuICAgICAgICAgICAgdGV4dFN0eWxlOiBidXR0b25UZXh0U3R5bGUsXHJcbiAgICAgICAgICAgIGNsaWNrU291bmRLZXk6ICdzb25pZG9DbGljaycsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGJvdMOzbiBTaWd1aWVudGVcclxuICAgICAgICB0aGlzLm5leHRCdG4gPSBjcmVhdGVVSUJ1dHRvbih0aGlzLCB7XHJcbiAgICAgICAgICAgIHg6IGNlbnRlclggKyAxNjUsXHJcbiAgICAgICAgICAgIHk6IG5hdlkgKyAyMCxcclxuICAgICAgICAgICAgbGFiZWw6ICdTaWd1aWVudGUnLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLm5leHQoKSxcclxuICAgICAgICAgICAgdGV4dFN0eWxlOiBidXR0b25UZXh0U3R5bGUsXHJcbiAgICAgICAgICAgIGNsaWNrU291bmRLZXk6ICdzb25pZG9DbGljaycsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyUGFnZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9maXRJbWFnZShpbWcsIG1heFcsIG1heEgpIHtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IE1hdGgubWluKG1heFcgLyBpbWcud2lkdGgsIG1heEggLyBpbWcuaGVpZ2h0KTtcclxuICAgICAgICBpbWcuc2V0U2NhbGUoc2NhbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclBhZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgcCA9IHRoaXMucGFnZXNbdGhpcy5wYWdlSW5kZXhdO1xyXG4gICAgICAgIHRoaXMubWFpblRpdGxlVGV4dC5zZXRUZXh0KHAudGl0bGUgPz8gJ1R1dG9yaWFsJyk7XHJcbiAgICAgICAgdGhpcy5zbGlkZUltYWdlLnNldFRleHR1cmUocC5rZXkpO1xyXG4gICAgICAgIHRoaXMuX2ZpdEltYWdlKHRoaXMuc2xpZGVJbWFnZSwgdGhpcy5sYXlvdXQucGFuZWxXaWR0aCwgdGhpcy5sYXlvdXQucGFuZWxIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMucGFnZUluZGljYXRvci5zZXRUZXh0KGAke3RoaXMucGFnZUluZGV4ICsgMX0gZGUgJHt0aGlzLnBhZ2VzLmxlbmd0aH1gKTtcclxuXHJcbiAgICAgICAgLy8gQm90w7NuIEFudGVyaW9yOiBzZSBkZXNoYWJpbGl0YSBzaSBlc3RhbW9zIGVuIGxhIHDDoWdpbmEgMFxyXG4gICAgICAgIGNvbnN0IGlzRmlyc3RQYWdlID0gdGhpcy5wYWdlSW5kZXggPT09IDA7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSh0aGlzLnByZXZCdG4sICFpc0ZpcnN0UGFnZSk7XHJcblxyXG4gICAgICAgIC8vIEJvdMOzbiBTaWd1aWVudGU6IHNlIGRlc2hhYmlsaXRhIHNpIGVzdGFtb3MgZW4gbGEgw7psdGltYSBww6FnaW5hXHJcbiAgICAgICAgY29uc3QgaXNMYXN0UGFnZSA9IHRoaXMucGFnZUluZGV4ID09PSB0aGlzLnBhZ2VzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSh0aGlzLm5leHRCdG4sICFpc0xhc3RQYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBuZXh0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2VJbmRleCA8IHRoaXMucGFnZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VJbmRleCsrO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclBhZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJldigpIHtcclxuICAgICAgICBpZiAodGhpcy5wYWdlSW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZUluZGV4LS07XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUGFnZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVCdXR0b25TdGF0ZShidG5PYmosIGVuYWJsZWQpIHtcclxuICAgICAgICBjb25zdCBzcHJpdGUgPSBidG5PYmouYnV0dG9uO1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBidG5PYmoudGV4dDtcclxuXHJcbiAgICAgICAgaWYgKGVuYWJsZWQpIHtcclxuICAgICAgICAgICAgc3ByaXRlLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgICAgIHNwcml0ZS5zZXRBbHBoYSgxKTtcclxuICAgICAgICAgICAgdGV4dC5zZXRBbHBoYSgxKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzcHJpdGUuZGlzYWJsZUludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgICAgIHNwcml0ZS5zZXRBbHBoYSgwKTtcclxuICAgICAgICAgICAgdGV4dC5zZXRBbHBoYSgwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gUGFudGFsbGEgZGUgQ29uZmlndXJhY2nDs25cclxuaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBlbnN1cmVTdG9yZWRBdWRpb1NldHRpbmdzLCBnZXRTdG9yZWRNdXNpY1ZvbHVtZSwgZ2V0U3RvcmVkU2Z4Vm9sdW1lLCBnZXRTdG9yZWRHbG9iYWxWb2x1bWUsIHNldFN0b3JlZE11c2ljVm9sdW1lLCBzZXRTdG9yZWRTZnhWb2x1bWUsIHNldFN0b3JlZEdsb2JhbFZvbHVtZSwgYXBwbHlTdG9yZWRWb2x1bWUsIHBsYXlDbGljayB9IGZyb20gJy4uL1VJL0F1ZGlvLmpzJztcclxuaW1wb3J0IHsgY3JlYXRlSWNvbkJ1dHRvbiB9IGZyb20gJy4uL1VJL0J1dHRvbnMuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRpb25fU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ0NvbmZpZ3VyYXRpb25fU2NlbmUnKTtcclxuXHJcbiAgICAgICAgdGhpcy5tdXNpY1ZvbHVtZVNsaWRlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZnhWb2x1bWVTbGlkZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2xvYmFsVm9sdW1lU2xpZGVyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwcmVsb2FkKCkge1xyXG4gICAgICAgIC8vIGltw6FnZW5lcyBmb25kbyB5IHVpXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblZvbHZlcicsICdBU1NFVFMvVUkvQk9UT05FUy9GTEVDSEFfVk9MVkVSLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnZm9uZG8nLCAnQVNTRVRTL0ZPTkRPUy9GT05ET19CQVNFLnBuZycpO1xyXG5cclxuICAgICAgICAvLyBzb25pZG9cclxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oJ3Nvbmlkb0NsaWNrJywgJ0FTU0VUUy9TT05JRE8vU29uaWRvQm90b24ubXAzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcclxuICAgICAgICBjb25zdCBjZW50ZXJYID0gd2lkdGggLyAyO1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nYW1lLmdsb2JhbHMuZGVmYXVsdFRleHRTdHlsZTtcclxuXHJcbiAgICAgICAgLy8gRm9uZG9cclxuICAgICAgICB0aGlzLmFkZC5pbWFnZSgwLCAwLCAnZm9uZG8nKVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDApXHJcbiAgICAgICAgICAgIC5zZXREZXB0aCgtMSlcclxuICAgICAgICAgICAgLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBUw610dWxvXHJcbiAgICAgICAgdGhpcy5hZGQudGV4dChjZW50ZXJYLCBoZWlnaHQgKiAwLjEsICdDb25maWd1cmFjacOzbicsIHtcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDJweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzVmMDAwMGZmJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICAvLy8vIFZPTFVNRU5FUyAvLy8vXHJcbiAgICAgICAgZW5zdXJlU3RvcmVkQXVkaW9TZXR0aW5ncygpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxHbG9iYWxWb2x1bWUgPSBnZXRTdG9yZWRHbG9iYWxWb2x1bWUoKTtcclxuICAgICAgICBjb25zdCBpbml0aWFsTXVzaWNWb2x1bWUgPSBnZXRTdG9yZWRNdXNpY1ZvbHVtZSgpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxTZnhWb2x1bWUgPSBnZXRTdG9yZWRTZnhWb2x1bWUoKTtcclxuXHJcbiAgICAgICAgLy8gc2UgYXBsaWNhIGVsIHZvbHVtZW4gbmFkYSBtYXMgY2FyZ2FyXHJcbiAgICAgICAgYXBwbHlTdG9yZWRWb2x1bWUodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIGxheW91dCBkZSBsb3Mgc2xpZGVyc1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25zID0gMztcclxuICAgICAgICBjb25zdCBzZWN0aW9uR2FwID0gaGVpZ2h0ICogMC4xODtcclxuICAgICAgICBjb25zdCBsYWJlbFRvU2xpZGVyR2FwID0gaGVpZ2h0ICogMC4wNTtcclxuICAgICAgICBjb25zdCBncm91cEhlaWdodCA9IChzZWN0aW9ucyAtIDEpICogc2VjdGlvbkdhcCArIGxhYmVsVG9TbGlkZXJHYXA7XHJcbiAgICAgICAgY29uc3QgZ3JvdXBUb3BZID0gKGhlaWdodCAvIDIpIC0gKGdyb3VwSGVpZ2h0IC8gMik7XHJcblxyXG4gICAgICAgIGNvbnN0IGdsb2JhbExhYmVsWSA9IGdyb3VwVG9wWTtcclxuICAgICAgICBjb25zdCBnbG9iYWxTbGlkZXJZID0gZ2xvYmFsTGFiZWxZICsgbGFiZWxUb1NsaWRlckdhcDtcclxuICAgICAgICBjb25zdCBtdXNpY0xhYmVsWSA9IGdyb3VwVG9wWSArIHNlY3Rpb25HYXA7XHJcbiAgICAgICAgY29uc3QgbXVzaWNTbGlkZXJZID0gbXVzaWNMYWJlbFkgKyBsYWJlbFRvU2xpZGVyR2FwO1xyXG4gICAgICAgIGNvbnN0IHNmeExhYmVsWSA9IGdyb3VwVG9wWSArIChzZWN0aW9uR2FwICogMik7XHJcbiAgICAgICAgY29uc3Qgc2Z4U2xpZGVyWSA9IHNmeExhYmVsWSArIGxhYmVsVG9TbGlkZXJHYXA7XHJcblxyXG4gICAgICAgIC8vIFN1YnTDrXR1bG8gZ2xvYmFsXHJcbiAgICAgICAgdGhpcy5hZGQudGV4dChjZW50ZXJYLCBnbG9iYWxMYWJlbFksICdWb2x1bWVuIEdlbmVyYWwnLCB7XHJcbiAgICAgICAgICAgIC4uLnN0eWxlLCBcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JywgXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzAwMCdcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgLy8gYmFycmEgZGUgdm9sdW1lbiAoZ2xvYmFsKVxyXG4gICAgICAgIHRoaXMuZ2xvYmFsVm9sdW1lU2xpZGVyID0gdGhpcy5hZGQuZG9tKGNlbnRlclgsIGdsb2JhbFNsaWRlclkpXHJcbiAgICAgICAgICAgIC5jcmVhdGVGcm9tSFRNTChgPGlucHV0IHR5cGU9XCJyYW5nZVwiIG1pbj1cIjBcIiBtYXg9XCIxXCIgc3RlcD1cIjAuMDFcIiB2YWx1ZT1cIiR7aW5pdGlhbEdsb2JhbFZvbHVtZX1cIiBcclxuICAgICAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6MjIwcHg7IGhlaWdodDoyMHB4OyBhY2NlbnQtY29sb3I6IzAwYWFmZjsgYm9yZGVyLXJhZGl1czo1cHg7XCIvPmApO1xyXG5cclxuICAgICAgICB0aGlzLmdsb2JhbFZvbHVtZVNsaWRlci5hZGRMaXN0ZW5lcignaW5wdXQnKTtcclxuICAgICAgICB0aGlzLmdsb2JhbFZvbHVtZVNsaWRlci5vbignaW5wdXQnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCEoZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkpIHJldHVybjtcclxuICAgICAgICAgICAgc2V0U3RvcmVkR2xvYmFsVm9sdW1lKGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGFwcGx5U3RvcmVkVm9sdW1lKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy8gU3VidMOtdHVsbyBkZSBtw7pzaWNhXHJcbiAgICAgICAgdGhpcy5hZGQudGV4dChjZW50ZXJYLCBtdXNpY0xhYmVsWSwgJ1ZvbHVtZW4gTcO6c2ljYScsIHtcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjhweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzAwMCdcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgLy8gYmFycmEgZGUgdm9sdW1lbiAobcO6c2ljYSlcclxuICAgICAgICB0aGlzLm11c2ljVm9sdW1lU2xpZGVyID0gdGhpcy5hZGRcclxuICAgICAgICAgICAgLmRvbShjZW50ZXJYLCBtdXNpY1NsaWRlclkpXHJcbiAgICAgICAgICAgIC5jcmVhdGVGcm9tSFRNTChgPGlucHV0IHR5cGU9XCJyYW5nZVwiIG1pbj1cIjBcIiBtYXg9XCIxXCIgc3RlcD1cIjAuMDFcIiB2YWx1ZT1cIiR7aW5pdGlhbE11c2ljVm9sdW1lfVwiXHJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIndpZHRoOjIyMHB4OyBoZWlnaHQ6MjBweDsgYWNjZW50LWNvbG9yOiMwMGFhZmY7IGJvcmRlci1yYWRpdXM6NXB4O1wiLz5cclxuICAgICAgICAgICAgYCk7XHJcblxyXG4gICAgICAgIHRoaXMubXVzaWNWb2x1bWVTbGlkZXIuYWRkTGlzdGVuZXIoJ2lucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5tdXNpY1ZvbHVtZVNsaWRlci5vbignaW5wdXQnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgc2V0U3RvcmVkTXVzaWNWb2x1bWUodGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgYXBwbHlTdG9yZWRWb2x1bWUodGhpcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN1YnTDrXR1bG8gZGUgZWZlY3Rvc1xyXG4gICAgICAgIHRoaXMuYWRkLnRleHQoY2VudGVyWCwgc2Z4TGFiZWxZLCAnVm9sdW1lbiBFZmVjdG9zJywge1xyXG4gICAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjMDAwJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICAvLyBiYXJyYSBkZSB2b2x1bWVuIChlZmVjdG9zKVxyXG4gICAgICAgIHRoaXMuc2Z4Vm9sdW1lU2xpZGVyID0gdGhpcy5hZGRcclxuICAgICAgICAgICAgLmRvbShjZW50ZXJYLCBzZnhTbGlkZXJZKVxyXG4gICAgICAgICAgICAuY3JlYXRlRnJvbUhUTUwoYDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBtaW49XCIwXCIgbWF4PVwiMVwiIHN0ZXA9XCIwLjAxXCIgdmFsdWU9XCIke2luaXRpYWxTZnhWb2x1bWV9XCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6MjIwcHg7IGhlaWdodDoyMHB4OyBhY2NlbnQtY29sb3I6IzAwYWFmZjsgYm9yZGVyLXJhZGl1czo1cHg7XCIvPlxyXG4gICAgICAgICAgICBgKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZnhWb2x1bWVTbGlkZXIuYWRkTGlzdGVuZXIoJ2lucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5zZnhWb2x1bWVTbGlkZXIub24oJ2lucHV0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHNldFN0b3JlZFNmeFZvbHVtZSh0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICBhcHBseVN0b3JlZFZvbHVtZSh0aGlzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZnhWb2x1bWVTbGlkZXIuYWRkTGlzdGVuZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgIHRoaXMuc2Z4Vm9sdW1lU2xpZGVyLm9uKCdjaGFuZ2UnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgLy8gc2UgcmVwcm9kdWNlIGFsIHNvbHRhciBwYXJhIGRhciBmZWVkYmFja1xyXG4gICAgICAgICAgICBwbGF5Q2xpY2sodGhpcywgJ3Nvbmlkb0NsaWNrJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8vLy8vLy9cclxuXHJcbiAgICAgICAgLy8gYm90w7NuIFZvbHZlciBhdHLDoXNcclxuICAgICAgICBjcmVhdGVJY29uQnV0dG9uKHRoaXMsIHtcclxuICAgICAgICAgICAgeDogd2lkdGggKiAwLjA2LFxyXG4gICAgICAgICAgICB5OiBoZWlnaHQgKiAwLjA4LFxyXG4gICAgICAgICAgICB0ZXh0dXJlOiAnYm90b25Wb2x2ZXInLFxyXG4gICAgICAgICAgICBzY2FsZTogMSxcclxuICAgICAgICAgICAgaG92ZXJTY2FsZTogMS4xLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLnNjZW5lLnN0YXJ0KCdNZW51X1NjZW5lJyksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHNlIGxpbXBpYSBlbCBzbGlkZXIgYWwgc2FsaXIgZGUgbGEgZXNjZW5hXHJcbiAgICAgICAgLy8gKGFzw60gc2UgZXZpdGEgcXVlIHNlIGFjdW11bGVuIHNpIGVudHJhcyB5IHNhbGVzIHZhcmlhcyB2ZWNlcylcclxuICAgICAgICB0aGlzLmV2ZW50cy5vbmNlKFBoYXNlci5TY2VuZXMuRXZlbnRzLlNIVVRET1dOLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm11c2ljVm9sdW1lU2xpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm11c2ljVm9sdW1lU2xpZGVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tdXNpY1ZvbHVtZVNsaWRlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm11c2ljVm9sdW1lU2xpZGVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZnhWb2x1bWVTbGlkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Z4Vm9sdW1lU2xpZGVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZnhWb2x1bWVTbGlkZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZnhWb2x1bWVTbGlkZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdsb2JhbFZvbHVtZVNsaWRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxWb2x1bWVTbGlkZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbFZvbHVtZVNsaWRlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbFZvbHVtZVNsaWRlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBQYW50YWxsYSBkZSBDcsOpZGl0b3NcclxuaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBjcmVhdGVJY29uQnV0dG9uIH0gZnJvbSAnLi4vVUkvQnV0dG9ucy5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ3JlZGl0c19TY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignQ3JlZGl0c19TY2VuZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZWxvYWQoKSB7XHJcbiAgICAgICAgLy8gaW3DoWdlbmVzIGZvbmRvIHkgdWlcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uVm9sdmVyJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0ZMRUNIQV9WT0xWRVIucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdmb25kb01lbnVQcmluY2lwYWwnLCAnQVNTRVRTL0ZPTkRPUy9NRU5VX1BSSU5DSVBBTC5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2xvZ28nLCAnQVNTRVRTL0xPR08vbG9nb19lbXByZXNhLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnbWFyY28nLCAnQVNTRVRTL1VJL01BUkNPUy9WQUNJT1MvTUFSQ09TX0VTQ0VOQVJJTy5wbmcnKVxyXG5cclxuICAgICAgICAvLyBzb25pZG9cclxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oJ3Nvbmlkb0NsaWNrJywgJ0FTU0VUUy9TT05JRE8vU29uaWRvQm90b24ubXAzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcclxuICAgICAgICBjb25zdCBjZW50ZXJYID0gd2lkdGggLyAyO1xyXG5cclxuICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMuZ2FtZS5nbG9iYWxzPy5kZWZhdWx0VGV4dFN0eWxlID8/IHtcclxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyMHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBmb25kb1xyXG4gICAgICAgIHRoaXMuYWRkLmltYWdlKDAsIDAsICdmb25kb01lbnVQcmluY2lwYWwnKVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDApXHJcbiAgICAgICAgICAgIC5zZXREZXB0aCgtMilcclxuICAgICAgICAgICAgLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBjYXBhIG9zY3VyYSBwb3IgZW5jaW1hIGRlbCBmb25kb1xyXG4gICAgICAgIHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAweDAwMDAwMCwgMC41MClcclxuICAgICAgICAgICAgLnNldE9yaWdpbigwKVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoLTEpO1xyXG5cclxuICAgICAgICAvLyBub21icmUgeSBtaWVtYnJvcyBkZWwgZXF1aXBvXHJcbiAgICAgICAgY29uc3Qgbm9tYnJlc0VxdWlwbyA9IFtcclxuICAgICAgICAgICAgJ0dSVVBPIDUgLSBTVU5TRVQgQVJDQURFJyxcclxuICAgICAgICAgICAgJ1NhcmEgQnVlbm8gRXN0ZWJhbicsXHJcbiAgICAgICAgICAgICdBbnRvbmlvIE1vcsOhbiBCYXJyZXJhJyxcclxuICAgICAgICAgICAgJ0NyaXN0aW5lIE5pb2thIFRld28nLFxyXG4gICAgICAgICAgICAnw4FsdmFybyBJYsOhw7FleiBNb250ZXJvJyxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvL3RhcmpldGEgZG9uZGUgc2UgbXVlc3RyYSBlbCBub21icmUgZGVsIGVxdWlwbyB5IGxvcyBtaWVtYnJvc1xyXG4gICAgICAgIGNvbnN0IGNhcmRXaWR0aCA9IHdpZHRoICogMC4zODtcclxuICAgICAgICBjb25zdCBjYXJkSGVpZ2h0ID0gaGVpZ2h0ICogMC40NjtcclxuICAgICAgICBjb25zdCBjYXJkWCA9IHdpZHRoICogMC43NTtcclxuICAgICAgICBjb25zdCBjYXJkWSA9IGhlaWdodCAqIDAuNDY7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmFkZFxyXG4gICAgICAgICAgICAucmVjdGFuZ2xlKGNhcmRYLCBjYXJkWSwgY2FyZFdpZHRoLCBjYXJkSGVpZ2h0LCAweDExMTExMSwgMC43KVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgICAgY2FyZC5zZXRTdHJva2VTdHlsZSgyLCAweGZmZmZmZiwgMC4yKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGluZVNwYWNpbmcgPSAzNjtcclxuICAgICAgICBjb25zdCBzdGFydFkgPSBjYXJkWSAtICgobm9tYnJlc0VxdWlwby5sZW5ndGggLSAxKSAqIGxpbmVTcGFjaW5nKSAvIDI7XHJcblxyXG4gICAgICAgIG5vbWJyZXNFcXVpcG8uZm9yRWFjaCgobm9tYnJlLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzSGVhZGVyID0gaSA9PT0gMDtcclxuICAgICAgICAgICAgdGhpcy5hZGRcclxuICAgICAgICAgICAgICAgIC50ZXh0KGNhcmRYLCBzdGFydFkgKyBpICogbGluZVNwYWNpbmcsIG5vbWJyZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnN0eWxlLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdWVDMyMycsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IGlzSGVhZGVyID8gJzM2cHgnIDogJzMycHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBpc0hlYWRlciA/ICcjZjVkNzZlJyA6ICcjZmZmZmZmJyxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC8vIHTDrXR1bG9cclxuICAgICAgICB0aGlzLmFkZC50ZXh0KGNhcmRYLCBoZWlnaHQgKiAwLjEsICdDcsOpZGl0b3MnLCB7XHJcbiAgICAgICAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnNDJweCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgLy8gbG9nbyBlbXByZXNhXHJcbiAgICAgICAgY29uc3QgbG9nb1ggPSBjYXJkWDtcclxuICAgICAgICBjb25zdCBsb2dvWSA9IGNhcmRZICsgKGNhcmRIZWlnaHQgLyAyKSArIGhlaWdodCAqIDAuMTYgLSAzO1xyXG4gICAgICAgIHRoaXMuYWRkXHJcbiAgICAgICAgICAgIC5pbWFnZShsb2dvWCwgbG9nb1ksICdsb2dvJylcclxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUpXHJcbiAgICAgICAgICAgIC5zZXRTY2FsZSgwLjcpO1xyXG5cclxuICAgICAgICAvLyBib3TDs24gVm9sdmVyIGF0csOhc1xyXG4gICAgICAgIGNyZWF0ZUljb25CdXR0b24odGhpcywge1xyXG4gICAgICAgICAgICB4OiB3aWR0aCAqIDAuMDYsXHJcbiAgICAgICAgICAgIHk6IGhlaWdodCAqIDAuMDgsXHJcbiAgICAgICAgICAgIHRleHR1cmU6ICdib3RvblZvbHZlcicsXHJcbiAgICAgICAgICAgIHNjYWxlOiAxLFxyXG4gICAgICAgICAgICBob3ZlclNjYWxlOiAxLjEsXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuc2NlbmUuc3RhcnQoJ01lbnVfU2NlbmUnKSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIvL1BhbnRhbGxhIGRlIEZpblxyXG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcbmltcG9ydCB7IGNyZWF0ZVVJQnV0dG9uIH0gZnJvbSAnLi4vVUkvQnV0dG9ucy5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRW5kR2FtZV9TY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignRW5kR2FtZV9TY2VuZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoZGF0YSkge1xyXG4gICAgICAgIHRoaXMud2lubmVyID0gZGF0YS53aW5uZXI7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIxID0gZGF0YS5wbGF5ZXIxO1xyXG4gICAgICAgIHRoaXMucGxheWVyMiA9IGRhdGEucGxheWVyMjtcclxuICAgIH1cclxuXHJcbiAgICBwcmVsb2FkKCkge1xyXG4gICAgICAgIC8vIGltw6FnZW5lcyBmb25kbyB5IHVpXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdmb25kbycsICdBU1NFVFMvRk9ORE9TL0ZPTkRPX0JBU0UucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblNlbGVjY2lvbmFkbycsICdBU1NFVFMvVUkvQk9UT05FUy9CT1RPTl9CQVNFX0dfU0VMRUNDSU9OQURPLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYm90b25TaW5TZWxlY2Npb25hcicsICdBU1NFVFMvVUkvQk9UT05FUy9CT1RPTl9CQVNFX0cucG5nJyk7XHJcblxyXG4gICAgICAgIC8vIHNvbmlkb1xyXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc29uaWRvQ2xpY2snLCAnQVNTRVRTL1NPTklETy9Tb25pZG9Cb3Rvbi5tcDMnKTtcclxuXHJcbiAgICAgICAgLy8gYW5pbWFjaW9uZXMgZGUgdmljdG9yaWFcclxuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXHJcbiAgICAgICAgICAgICd2aWN0b3JpYV9BJywgXHJcbiAgICAgICAgICAgICdBU1NFVFMvUEVSU09OQUpFUy9BTklNQUNJT05FUy9QRVJTT05BSkVfQS9BX1ZJQ1RPUklBLnBuZycsIFxyXG4gICAgICAgICAgICB7ZnJhbWVXaWR0aDoxMjgsZnJhbWVIZWlnaHQ6IDEyOH0pO1xyXG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcclxuICAgICAgICAgICAgJ3ZpY3RvcmlhX0InLCBcclxuICAgICAgICAgICAgJ0FTU0VUUy9QRVJTT05BSkVTL0FOSU1BQ0lPTkVTL1BFUlNPTkFKRV9CL0FfVklDVE9SSUEucG5nJywgXHJcbiAgICAgICAgICAgIHtmcmFtZVdpZHRoOjEyOCxmcmFtZUhlaWdodDogMTI4fSk7XHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFxyXG4gICAgICAgICAgICAndmljdG9yaWFfQycsIFxyXG4gICAgICAgICAgICAnQVNTRVRTL1BFUlNPTkFKRVMvQU5JTUFDSU9ORVMvUEVSU09OQUpFX0MvQV9WSUNUT1JJQS5wbmcnLCBcclxuICAgICAgICAgICAge2ZyYW1lV2lkdGg6MTI4LGZyYW1lSGVpZ2h0OiAxMjh9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoKSB7IFxyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMuZ2FtZS5nbG9iYWxzLmRlZmF1bHRUZXh0U3R5bGU7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoYXJQMSA9IHRoaXMucGxheWVyMS5uYW1lO1xyXG4gICAgICAgIGNvbnN0IHNwcml0ZVAxID0gdGhpcy5wbGF5ZXIxLmNoYXJhY3RlcjtcclxuICAgICAgICBjb25zdCBjaGFyUDIgPSB0aGlzLnBsYXllcjIubmFtZTtcclxuICAgICAgICBjb25zdCBzcHJpdGVQMiA9IHRoaXMucGxheWVyMi5jaGFyYWN0ZXI7XHJcblxyXG4gICAgICAgIC8vIEZvbmRvXHJcbiAgICAgICAgdGhpcy5hZGQuaW1hZ2UoMCwgMCwgJ2ZvbmRvJykuc2V0T3JpZ2luKDApLnNldERlcHRoKC0xKTtcclxuXHJcbiAgICAgICAgLy8gVMOtdHVsb1xyXG4gICAgICAgIHRoaXMuYWRkLnRleHQod2lkdGggLyAyLCBoZWlnaHQgKiAwLjE4LCBcIsKhRmluIGRlbCBwYXJ0aWRvIVwiLCB7XHJcbiAgICAgICAgICAgIC4uLnN0eWxlLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzQycHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyM1ZjAwMDBmZidcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgY29uc3Qgd2lubmVyVGV4dFkgPSBoZWlnaHQgKiAwLjMzO1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvblkgPSBoZWlnaHQgKiAwLjkwO1xyXG4gICAgICAgIGNvbnN0IHNwcml0ZVBhZGRpbmcgPSBoZWlnaHQgKiAwLjA0O1xyXG4gICAgICAgIGNvbnN0IHNwcml0ZUNlbnRlclkgPSBNYXRoLnJvdW5kKCh3aW5uZXJUZXh0WSArIGJ1dHRvblkpIC8gMiAtIGhlaWdodCAqIDAuMDIpO1xyXG5cclxuICAgICAgICAvLyBUZXh0byBpbmRpY2FuZG8gZWwgZ2FuYWRvclxyXG4gICAgICAgIGNvbnN0IHdpbm5lclRleHQgPVxyXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9PT0gXCJwbGF5ZXIxXCJcclxuICAgICAgICAgICAgICAgID8gXCJWaWN0b3JpYSBkZTogXCIgKyBjaGFyUDFcclxuICAgICAgICAgICAgICAgIDogXCJWaWN0b3JpYSBkZTogXCIgKyBjaGFyUDI7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkLnRleHQod2lkdGggLyAyLCB3aW5uZXJUZXh0WSwgd2lubmVyVGV4dCwge1xyXG4gICAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgICAgZm9udFNpemU6ICczMnB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjNWYwMDAwZmYnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIC8vIHNlIGNyZWFuIGxhcyBhbmltYWNpb25lc1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZUFuaW1hdGlvbnMoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgd2lubmVyQ2hhcmFjdGVyID0gdGhpcy53aW5uZXIgPT09IFwicGxheWVyMVwiID8gc3ByaXRlUDEgOiBzcHJpdGVQMjtcclxuXHJcbiAgICAgICAgY29uc3QgdmljdG9yeUNvbmZpZyA9IHtcclxuICAgICAgICAgICAgY2hhcmFjdGVyQTogeyBzcHJpdGVLZXk6ICd2aWN0b3JpYV9BJywgYW5pbUtleTogJ2NoYXJBX3ZpY3RvcnknIH0sXHJcbiAgICAgICAgICAgIGNoYXJhY3RlckI6IHsgc3ByaXRlS2V5OiAndmljdG9yaWFfQicsIGFuaW1LZXk6ICdjaGFyQl92aWN0b3J5JyB9LFxyXG4gICAgICAgICAgICBjaGFyYWN0ZXJDOiB7IHNwcml0ZUtleTogJ3ZpY3RvcmlhX0MnLCBhbmltS2V5OiAnY2hhckNfdmljdG9yeScgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHsgc3ByaXRlS2V5LCBhbmltS2V5IH0gPSB2aWN0b3J5Q29uZmlnW3dpbm5lckNoYXJhY3Rlcl0gfHwgdmljdG9yeUNvbmZpZy5jaGFyYWN0ZXJBO1xyXG5cclxuICAgICAgICAvLyBodWVjbyBwYXJhIGxvcyBzcHJpdGVzIGRlbCBnYW5hZG9yXHJcbiAgICAgICAgdGhpcy53aW5uZXJTcHJpdGVTbG90ID0gdGhpcy5hZGQuY29udGFpbmVyKE1hdGgucm91bmQod2lkdGggLyAyKSwgc3ByaXRlQ2VudGVyWSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpbm5lclNwcml0ZSA9IHRoaXMuYWRkLnNwcml0ZSgwLCAwLCBzcHJpdGVLZXkpO1xyXG4gICAgICAgIHdpbm5lclNwcml0ZS5zZXRDcm9wKDAsIDEsIDEyOCwgMTI3KTtcclxuICAgICAgICBjb25zdCBhdmFpbGFibGVIZWlnaHQgPSAoYnV0dG9uWSAtIHdpbm5lclRleHRZKSAtIHNwcml0ZVBhZGRpbmcgKiAyO1xyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gd2lkdGggKiAwLjY7XHJcbiAgICAgICAgbGV0IHNjYWxlID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUhlaWdodCAvIHdpbm5lclNwcml0ZS5oZWlnaHQsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZVdpZHRoIC8gd2lubmVyU3ByaXRlLndpZHRoXHJcbiAgICAgICAgKSAqIDAuODU7XHJcbiAgICAgICAgc2NhbGUgPSBNYXRoLnJvdW5kKHNjYWxlICogMTApIC8gMTA7XHJcbiAgICAgICAgd2lubmVyU3ByaXRlLnNldFNjYWxlKE1hdGgubWF4KDAuMiwgc2NhbGUpKTtcclxuICAgICAgICB3aW5uZXJTcHJpdGUucGxheShhbmltS2V5KTtcclxuICAgICAgICB0aGlzLndpbm5lclNwcml0ZVNsb3QuYWRkKHdpbm5lclNwcml0ZSk7XHJcblxyXG4gICAgICAgIC8vIGJvdMOzbiBwYXJhIHZvbHZlciBhbCBtZW7DuiBwcmluY2lwYWxcclxuICAgICAgICBjb25zdCBidXR0b25UZXh0U3R5bGUgPSB7XHJcbiAgICAgICAgICAgIC4uLnN0eWxlLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzI4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMDAwMDAnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY3JlYXRlVUlCdXR0b24odGhpcywge1xyXG4gICAgICAgICAgICB4OiB3aWR0aCAvIDIsXHJcbiAgICAgICAgICAgIHk6IGJ1dHRvblksXHJcbiAgICAgICAgICAgIGxhYmVsOiAnVm9sdmVyJyxcclxuICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWVudV9TY2VuZScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZXh0U3R5bGU6IGJ1dHRvblRleHRTdHlsZSxcclxuICAgICAgICAgICAgY2xpY2tTb3VuZEtleTogJ3Nvbmlkb0NsaWNrJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVVc2VyU3RhdHModGhpcy53aW5uZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWEgbGFzIGFuaW1hY2lvbmVzIGRlIHZpY3RvcmlhXHJcbiAgICBfY3JlYXRlQW5pbWF0aW9ucygpe1xyXG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiAnY2hhckFfdmljdG9yeScsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygndmljdG9yaWFfQScsIHsgc3RhcnQ6IDAsIGVuZDogMSB9KSxcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiA0LFxyXG4gICAgICAgICAgICByZXBlYXQ6IC0xXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiAnY2hhckJfdmljdG9yeScsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygndmljdG9yaWFfQicsIHsgc3RhcnQ6IDAsIGVuZDogMSB9KSxcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiA0LFxyXG4gICAgICAgICAgICByZXBlYXQ6IC0xXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiAnY2hhckNfdmljdG9yeScsXHJcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygndmljdG9yaWFfQycsIHsgc3RhcnQ6IDAsIGVuZDogMSB9KSxcclxuICAgICAgICAgICAgZnJhbWVSYXRlOiA0LFxyXG4gICAgICAgICAgICByZXBlYXQ6IC0xXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVXNlclN0YXRzKHdpbm5lcikge1xyXG4gICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy5yZWdpc3RyeS5nZXQoJ3VzZXJuYW1lJyk7XHJcbiAgICAgICAgaWYgKCF1c2VybmFtZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBiYXNlVXJsID0gYCR7d2luZG93LmxvY2F0aW9uLnByb3RvY29sfS8vJHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9OiR7d2luZG93LmxvY2F0aW9uLnBvcnR9YDtcclxuXHJcbiAgICAgICAgZmV0Y2goYCR7YmFzZVVybH0vYXBpL2dhbWUvZmluaXNoYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcclxuICAgICAgICAgICAgICAgIHdpbm5lcjogd2lubmVyXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0VzdGFkw61zdGljYXMgYWN0dWFsaXphZGFzOicsIGRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFjdHVhbGl6YW5kbyBlc3RhZMOtc3RpY2FzJywgZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBQYW50YWxsYSBwYXJhIGVsZWdpciBNb2RvIGRlIEp1ZWdvXHJcbmltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgY3JlYXRlVUlCdXR0b24sIGNyZWF0ZUljb25CdXR0b24gfSBmcm9tICcuLi9VSS9CdXR0b25zLmpzJztcclxuaW1wb3J0IHsgYXBwbHlTdG9yZWRWb2x1bWUgfSBmcm9tICcuLi9VSS9BdWRpby5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTW9kZUdhbWVfU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ01vZGVHYW1lX1NjZW5lJyk7XHJcbiAgICAgICAgdGhpcy5zZXJ2ZXJBY3RpdmUgPSBmYWxzZTsgLy8gaW5pY2lhbGl6YXJcclxuICAgIH1cclxuXHJcbiAgICBwcmVsb2FkKCkge1xyXG4gICAgICAgIC8vIGJvdG9uZXNcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uU2VsZWNjaW9uYWRvJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0JPVE9OX1NFTEVDQ0lPTkRPLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYm90b25TaW5TZWxlY2Npb25hcicsICdBU1NFVFMvVUkvQk9UT05FUy9CT1RPTl9TSU5fU0VMRUNDSU9OQVIucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblZvbHZlcicsICdBU1NFVFMvVUkvQk9UT05FUy9GTEVDSEFfVk9MVkVSLnBuZycpO1xyXG5cclxuICAgICAgICAvLyBmb25kb1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnZm9uZG8nLCAnQVNTRVRTL0ZPTkRPUy9GT05ET19CQVNFLnBuZycpO1xyXG5cclxuICAgICAgICAvLyBzb25pZG9cclxuICAgICAgICB0aGlzLmxvYWQuYXVkaW8oJ3Nvbmlkb0NsaWNrJywgJ0FTU0VUUy9TT05JRE8vU29uaWRvQm90b24ubXAzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcclxuICAgICAgICB0aGlzLnNlcnZlckNoZWNrVGltZXIgPSB0aGlzLnRpbWUuYWRkRXZlbnQoe1xyXG4gICAgICAgICAgICBkZWxheTogNTAwMCxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMuY2hlY2tTZXJ2ZXJTdGF0dXMsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrU2NvcGU6IHRoaXMsXHJcbiAgICAgICAgICAgIGxvb3A6IHRydWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLmdhbWUuZ2xvYmFscz8uZGVmYXVsdFRleHRTdHlsZSA/PyB7XHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzAwMDAwMCcsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gc2UgYXBsaWNhIGVsIHZvbHVtZW5cclxuICAgICAgICBhcHBseVN0b3JlZFZvbHVtZSh0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gZm9uZG9cclxuICAgICAgICB0aGlzLmFkZC5pbWFnZSgwLCAwLCAnZm9uZG8nKVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDApXHJcbiAgICAgICAgICAgIC5zZXREZXB0aCgtMSlcclxuICAgICAgICAgICAgLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyB0w610dWxvXHJcbiAgICAgICAgdGhpcy5hZGRcclxuICAgICAgICAgICAgLnRleHQod2lkdGggLyAyLCBoZWlnaHQgKiAwLjE4LCAnTW9kbyBkZSBKdWVnbycsIHtcclxuICAgICAgICAgICAgICAgIC4uLnN0eWxlLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICc0MnB4JyxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnIzVmMDAwMGZmJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIC8vIGxheW91dFxyXG4gICAgICAgIGNvbnN0IGJ1dHRvblkgPSBoZWlnaHQgKiAwLjY7XHJcbiAgICAgICAgY29uc3Qgc3BhY2luZyA9IE1hdGgubWluKDI4MCwgd2lkdGggKiAwLjMpO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0WCA9IHdpZHRoIC8gMiAtIHNwYWNpbmcgLyAyO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25UZXh0U3R5bGUgPSB7XHJcbiAgICAgICAgICAgIC4uLnN0eWxlLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzI4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMDAwMDAnLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHN0YXJ0TW9kZSA9IChtb2RlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0cnkuc2V0KCdtb2RlJywgbW9kZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNb2RvIHNlbGVjY2lvbmFkbzonLCBtb2RlKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnU2VsZWN0UGxheWVyX1NjZW5lJywgeyBtb2RlIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEJvdMOzbiBMT0NBTFxyXG4gICAgICAgIGNyZWF0ZVVJQnV0dG9uKHRoaXMsIHtcclxuICAgICAgICAgICAgeDogc3RhcnRYLFxyXG4gICAgICAgICAgICB5OiBidXR0b25ZLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0xvY2FsJyxcclxuICAgICAgICAgICAgb25DbGljazogKCkgPT4gc3RhcnRNb2RlKCdsb2NhbCcpLFxyXG4gICAgICAgICAgICBzY2FsZTogMixcclxuICAgICAgICAgICAgdGV4dHVyZU5vcm1hbDogJ2JvdG9uU2luU2VsZWNjaW9uYXInLFxyXG4gICAgICAgICAgICB0ZXh0dXJlSG92ZXI6ICdib3RvblNlbGVjY2lvbmFkbycsXHJcbiAgICAgICAgICAgIHRleHRTdHlsZTogYnV0dG9uVGV4dFN0eWxlLFxyXG4gICAgICAgICAgICBjbGlja1NvdW5kS2V5OiAnc29uaWRvQ2xpY2snLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBCb3TDs24gUkVEXHJcbiAgICAgICAgY3JlYXRlVUlCdXR0b24odGhpcywge1xyXG4gICAgICAgICAgICB4OiBzdGFydFggKyBzcGFjaW5nLFxyXG4gICAgICAgICAgICB5OiBidXR0b25ZLFxyXG4gICAgICAgICAgICBsYWJlbDogJ1JlZCcsXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlcnZlckFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0TW9kZSgnb25saW5lJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWRvciBubyBkaXNwb25pYmxlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNjYWxlOiAyLFxyXG4gICAgICAgICAgICB0ZXh0dXJlTm9ybWFsOiAnYm90b25TaW5TZWxlY2Npb25hcicsXHJcbiAgICAgICAgICAgIHRleHR1cmVIb3ZlcjogJ2JvdG9uU2VsZWNjaW9uYWRvJyxcclxuICAgICAgICAgICAgdGV4dFN0eWxlOiBidXR0b25UZXh0U3R5bGUsXHJcbiAgICAgICAgICAgIGNsaWNrU291bmRLZXk6ICdzb25pZG9DbGljaycsXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAvLyBCb3TDs24gdm9sdmVyXHJcbiAgICAgICAgY3JlYXRlSWNvbkJ1dHRvbih0aGlzLCB7XHJcbiAgICAgICAgICAgIHg6IHdpZHRoICogMC4wNixcclxuICAgICAgICAgICAgeTogaGVpZ2h0ICogMC4wOCxcclxuICAgICAgICAgICAgdGV4dHVyZTogJ2JvdG9uVm9sdmVyJyxcclxuICAgICAgICAgICAgc2NhbGU6IDEsXHJcbiAgICAgICAgICAgIGhvdmVyU2NhbGU6IDEuMSxcclxuICAgICAgICAgICAgY2xpY2tTb3VuZEtleTogJ3Nvbmlkb0NsaWNrJyxcclxuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5zY2VuZS5zdGFydCgnTWVudV9TY2VuZScpLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDT05FWEnDk04gQSBTRVJWSURPUiBZIEpVR0FET1JFUyBDT05FQ1RBRE9TXHJcbiAgICAgICAgLy8gVGV4dG9zXHJcbiAgICAgICAgdGhpcy5zZXJ2ZXJTdGF0dXNUZXh0ID0gdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIGhlaWdodCAqIDAuNDAsICdFc3RhZG8gZGVsIHNlcnZpZG9yOiBjb21wcm9iYW5kby4uLicsIHtcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdWVDMyMycsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMzRweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzU1NTU1NSdcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzQ291bnRUZXh0ID0gdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIGhlaWdodCAqIDAuNDYsICdKdWdhZG9yZXMgY29uZWN0YWRvczogMCcsIHtcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdWVDMyMycsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMzRweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzU1NTU1NSdcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgLy8gTGxhbWFkYXMgaW5pY2lhbGVzXHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gYCR7d2luZG93LmxvY2F0aW9uLnByb3RvY29sfS8vJHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9OiR7d2luZG93LmxvY2F0aW9uLnBvcnR9YDtcclxuICAgICAgICAvL3RoaXMuYmFzZVVybCA9IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0vLyR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfTo4MDgwYDtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja1NlcnZlclN0YXR1cygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUGxheWVyc0NvdW50KCk7XHJcblxyXG4gICAgICAgIC8vIFRpbWVyIHBhcmEgYWN0dWFsaXphciBjYWRhIDNzXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzQ291bnRUaW1lciA9IHRoaXMudGltZS5hZGRFdmVudCh7XHJcbiAgICAgICAgICAgIGRlbGF5OiAzMDAwLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy51cGRhdGVQbGF5ZXJzQ291bnQoKSxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmV2ZW50cy5vbmNlKFBoYXNlci5TY2VuZXMuRXZlbnRzLlNIVVRET1dOLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlcnZlckNoZWNrVGltZXIpIHRoaXMuc2VydmVyQ2hlY2tUaW1lci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyc0NvdW50VGltZXIpIHRoaXMucGxheWVyc0NvdW50VGltZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQbGF5ZXJzQ291bnQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBsYXllcnNDb3VudFRleHQgfHwgIXRoaXMucGxheWVyc0NvdW50VGV4dC5hY3RpdmUpIHJldHVybjtcclxuXHJcbiAgICAgICAgZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9hcGkvcGxheWVycy9jb3VudGApXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyc0NvdW50VGV4dC5zZXRUZXh0KGBKdWdhZG9yZXMgY29uZWN0YWRvczogJHtkYXRhLmNvdW50fWApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJzQ291bnRUZXh0LnNldFRleHQoJ0p1Z2Fkb3JlcyBjb25lY3RhZG9zOiAtJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVzdGFkbyBkZWwgc2Vydmlkb3JcclxuICAgIGNoZWNrU2VydmVyU3RhdHVzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXJ2ZXJTdGF0dXNUZXh0IHx8ICF0aGlzLnNlcnZlclN0YXR1c1RleHQuYWN0aXZlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZldGNoKGAke3RoaXMuYmFzZVVybH0vc3RhdHVzYClcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy50ZXh0KCkpXHJcbiAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gZGF0YSA9PT0gJ2FjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckFjdGl2ZSA9IGFjdGl2ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZlclN0YXR1c1RleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGV4dChgRXN0YWRvIGRlbCBzZXJ2aWRvcjogJHthY3RpdmUgPyAnQUNUSVZPJyA6ICdJTkFDVElWTyd9YClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0Q29sb3IoYWN0aXZlID8gJyMwMEFBMDAnIDogJyNBQTAwMDAnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZlclN0YXR1c1RleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGV4dCgnRXN0YWRvIGRlbCBzZXJ2aWRvcjogTk8gRElTUE9OSUJMRScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldENvbG9yKCcjQUEwMDAwJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vUGFudGFsbGEgZGUgUGF1c2FcclxuaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBjcmVhdGVVSUJ1dHRvbiB9IGZyb20gJy4uL1VJL0J1dHRvbnMuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhdXNlX1NjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdQYXVzZV9TY2VuZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZWxvYWQoKSB7XHJcbiAgICAgICAgLy8gSW3DoWdlbmVzIGZvbmRvIHkgdWlcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uVm9sdmVyJywgJ0FTU0VUUy9VSS9CT1RPTkVTL1ZPTFZFUi5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2ZvbmRvJywgJ0FTU0VUUy9GT05ET1MvRk9ORE9fQkFTRS5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uU2VsZWNjaW9uYWRvJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0JPVE9OX0JBU0VfR19TRUxFQ0NJT05BRE8ucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblNpblNlbGVjY2lvbmFyJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0JPVE9OX0JBU0VfRy5wbmcnKTtcclxuXHJcbiAgICAgICAgLy8gU29uaWRvXHJcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKCdzb25pZG9DbGljaycsICdBU1NFVFMvU09OSURPL1Nvbmlkb0JvdG9uLm1wMycpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMuZ2FtZS5nbG9iYWxzLmRlZmF1bHRUZXh0U3R5bGU7IFxyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcclxuICAgICAgICBjb25zdCBjZW50ZXJYID0gd2lkdGggLyAyO1xyXG5cclxuICAgICAgICB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHgwMDAwMDAsIDAuODgpXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMClcclxuICAgICAgICAgICAgLnNldERlcHRoKC0xKTtcclxuXHJcbiAgICAgICAgLy8gVMOtdHVsb1xyXG4gICAgICAgIHRoaXMuYWRkLnRleHQoY2VudGVyWCwgaGVpZ2h0ICogMC4xOCwgJ1BhdXNhJywge1xyXG4gICAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgICAgZm9udFNpemU6ICc0MnB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25UZXh0U3R5bGUgPSB7XHJcbiAgICAgICAgICAgIC4uLnN0eWxlLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzI4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMDAwMDAnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uU3RhcnRZID0gaGVpZ2h0ICogMC40NjtcclxuICAgICAgICBjb25zdCBidXR0b25TcGFjaW5nID0gaGVpZ2h0ICogMC4xNDtcclxuXHJcbiAgICAgICAgLy8gYm90w7NuIENvbnRpbnVhclxyXG4gICAgICAgIGNyZWF0ZVVJQnV0dG9uKHRoaXMsIHtcclxuICAgICAgICAgICAgeDogY2VudGVyWCxcclxuICAgICAgICAgICAgeTogYnV0dG9uU3RhcnRZLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0NvbnRpbnVhcicsXHJcbiAgICAgICAgICAgIHRleHRTdHlsZTogYnV0dG9uVGV4dFN0eWxlLFxyXG4gICAgICAgICAgICBzY2FsZTogMixcclxuICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnJlc3VtZSgnR2FtZV9TY2VuZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGJvdG9uIFR1dG9yaWFsXHJcbiAgICAgICAgY3JlYXRlVUlCdXR0b24odGhpcywge1xyXG4gICAgICAgICAgICB4OiBjZW50ZXJYLFxyXG4gICAgICAgICAgICB5OiBidXR0b25TdGFydFkgKyBidXR0b25TcGFjaW5nLFxyXG4gICAgICAgICAgICBsYWJlbDogJ1R1dG9yaWFsJyxcclxuICAgICAgICAgICAgdGV4dFN0eWxlOiBidXR0b25UZXh0U3R5bGUsXHJcbiAgICAgICAgICAgIHNjYWxlOiAyLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdUdXRvcmlhbF9TY2VuZScsIHsgcmV0dXJuU2NlbmU6ICdQYXVzZV9TY2VuZScgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gYm90w7NuIE1lbsO6IFByaW5jaXBhbFxyXG4gICAgICAgIGNyZWF0ZVVJQnV0dG9uKHRoaXMsIHtcclxuICAgICAgICAgICAgeDogY2VudGVyWCxcclxuICAgICAgICAgICAgeTogYnV0dG9uU3RhcnRZICsgYnV0dG9uU3BhY2luZyAqIDIsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnTWVuw7ogUHJpbmNpcGFsJyxcclxuICAgICAgICAgICAgdGV4dFN0eWxlOiBidXR0b25UZXh0U3R5bGUsXHJcbiAgICAgICAgICAgIHNjYWxlOiAyLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lU2NlbmUgPSB0aGlzLnNjZW5lLmdldCgnR2FtZV9TY2VuZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWVTY2VuZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVTY2VuZS5pbnB1dC5rZXlib2FyZC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lU2NlbmUuaW5wdXQua2V5Ym9hcmQucmVtb3ZlQWxsS2V5cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RvcCgnR2FtZV9TY2VuZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWVudV9TY2VuZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gUGFudGFsbGEgZGUgU2VsZWNjacOzbiBkZSBqdWdhZG9yXG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBhcHBseVN0b3JlZFZvbHVtZSwgcGxheUNsaWNrIH0gZnJvbSAnLi4vVUkvQXVkaW8uanMnO1xuaW1wb3J0IHsgY3JlYXRlVUlCdXR0b24sIGNyZWF0ZUljb25CdXR0b24gfSBmcm9tICcuLi9VSS9CdXR0b25zLmpzJztcblxuZXhwb3J0IGNsYXNzIFNlbGVjdFBsYXllcl9TY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdTZWxlY3RQbGF5ZXJfU2NlbmUnKTtcblxuICAgICAgICB0aGlzLnBsYXllcnMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50VHVybiA9IDA7ICAgIC8vIHR1cm5vczogMCAtPiBqdWdhZG9yMSwgMSAtPiBqdWdhZG9yMiwgbnVsbCAtPiBhbWJvcyBsaXN0b3NcbiAgICAgICAgdGhpcy5wbGF5ZXJJbnB1dHMgPSBbXTtcbiAgICAgICAgdGhpcy5wbGF5ZXJJbnB1dEVscyA9IFtdO1xuICAgICAgICB0aGlzLnR1cm5UZXh0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpbml0KGRhdGEpIHtcbiAgICAgICAgdGhpcy5tb2RlID0gdGhpcy5yZWdpc3RyeS5nZXQoJ21vZGUnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZG8gZGUgSnVlZ286JywgdGhpcy5tb2RlKTtcbiAgICAgICAgLy90aGlzLmlzSG9zdCA9IHRoaXMucmVnaXN0cnkuZ2V0KCdpc0hvc3QnKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnSG9zdDonLCB0aGlzLmlzSG9zdCk7XG4gICAgfVxuXG4gICAgcHJlbG9hZCgpIHtcbiAgICAgICAgLy8gYm90b25lc1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uU2VsZWNjaW9uYWRvJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0JPVE9OX1NFTEVDQ0lPTkRPLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uU2luU2VsZWNjaW9uYXInLCAnQVNTRVRTL1VJL0JPVE9ORVMvQk9UT05fU0lOX1NFTEVDQ0lPTkFSLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uVm9sdmVyJywgJ0FTU0VUUy9VSS9CT1RPTkVTL1ZPTFZFUi5wbmcnKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblNpbXBsZScsICdBU1NFVFMvVUkvQk9UT05FUy9CT1RPTl9CQVNFX1NJTlNFTEVDQ0lPTkFSLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uU2ltcGxlU2VsZWNjaW9uYWRvJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0JPVE9OX0JBU0UucG5nJyk7XG5cbiAgICAgICAgLy8gZm9uZG9cbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdmb25kbycsICdBU1NFVFMvRk9ORE9TL0ZPTkRPX0JBU0UucG5nJyk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnbWFyY29KdWdhZG9yJywgJ0FTU0VUUy9VSS9NQVJDT1MvVkFDSU9TL01BUkNPX1BFUlNPTkFKRV9TRUxFQ0NJT05BRE8ucG5nJyk7XG5cbiAgICAgICAgLy8gcGVyc29uYWplc1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2NoYXJhY3RlckEnLCAnQVNTRVRTL1BFUlNPTkFKRVMvUEVSU09OQUpFU19QT1NFL3BlcnNvbmFqZXNfYS5wbmcnKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdjaGFyYWN0ZXJCJywgJ0FTU0VUUy9QRVJTT05BSkVTL1BFUlNPTkFKRVNfUE9TRS9wZXJzb25hamVzX2IucG5nJyk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnY2hhcmFjdGVyQycsICdBU1NFVFMvUEVSU09OQUpFUy9QRVJTT05BSkVTX1BPU0UvcGVyc29uYWplX2MucG5nJyk7XG5cbiAgICAgICAgLy8gc29uaWRvXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc29uaWRvQ2xpY2snLCAnQVNTRVRTL1NPTklETy9Tb25pZG9Cb3Rvbi5tcDMnKTtcbiAgICB9XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIC8vIHNlIGxpbXBpYW4gdG9kYXMgbGFzIHRlY2xhcyBjYXB0dXJhZGFzIHBvciBvdHJhcyBlc2NlbmFzXG4gICAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQucmVtb3ZlQWxsS2V5cyh0cnVlKTtcbiAgICAgICAgdGhpcy5pbnB1dC5rZXlib2FyZC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG5cbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLmdhbWUuZ2xvYmFscz8uZGVmYXVsdFRleHRTdHlsZSA/PyB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyMHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gc2UgYXBsaWNhIGVsIHZvbHVtZW5cbiAgICAgICAgYXBwbHlTdG9yZWRWb2x1bWUodGhpcyk7XG5cbiAgICAgICAgLy8gRm9uZG9cbiAgICAgICAgdGhpcy5hZGQuaW1hZ2UoMCwgMCwgJ2ZvbmRvJylcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMClcbiAgICAgICAgICAgIC5zZXREZXB0aCgtMSlcbiAgICAgICAgICAgIC5zZXREaXNwbGF5U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICAvLyBUw610dWxvXG4gICAgICAgIHRoaXMuYWRkLnRleHQod2lkdGggLyAyLCA1MCwgJ1NlbGVjY2lvbmEgUGVyc29uYWplJywge1xuICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICBmb250U2l6ZTogJzQycHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjNWYwMDAwZmYnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIC8vIHNlZ8O6biBlbCBtb2RvIHNlIGNyZWEgdW5hIFVJIHUgb3RyYVxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnbG9jYWwnKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUxvY2FsVUkod2lkdGgsIGhlaWdodCwgc3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdvbmxpbmUnKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU9ubGluZVVJKHdpZHRoLCBoZWlnaHQsIHN0eWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJvdMOzbiB2b2x2ZXJcbiAgICAgICAgY3JlYXRlSWNvbkJ1dHRvbih0aGlzLCB7XG4gICAgICAgICAgICB4OiB3aWR0aCAqIDAuMDYsXG4gICAgICAgICAgICB5OiBoZWlnaHQgKiAwLjA4LFxuICAgICAgICAgICAgdGV4dHVyZTogJ2JvdG9uVm9sdmVyJyxcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgaG92ZXJTY2FsZTogMS4xLFxuICAgICAgICAgICAgY2xpY2tTb3VuZEtleTogJ3Nvbmlkb0NsaWNrJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuc2NlbmUuc3RhcnQoJ01vZGVHYW1lX1NjZW5lJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHNlIGxpbXBpYSBET00gYWwgc2FsaXJcbiAgICAgICAgdGhpcy5ldmVudHMub25jZShQaGFzZXIuU2NlbmVzLkV2ZW50cy5TSFVURE9XTiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJJbnB1dHMuZm9yRWFjaCgoZG9tKSA9PiBkb20/LmRlc3Ryb3koKSk7XG4gICAgICAgICAgICB0aGlzLnBsYXllcklucHV0cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJJbnB1dEVscyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5rZXlib2FyZC5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlTG9jYWxVSSh3aWR0aCwgaGVpZ2h0LCBzdHlsZSkge1xuICAgICAgICAvLyBEYXRvcyBkZSBsb3MganVnYWRvcmVzXG4gICAgICAgIHRoaXMucGxheWVycyA9IFtcbiAgICAgICAgICAgIHsgbmFtZTogJycsIGNoYXJhY3RlcjogbnVsbCwgY29sb3I6IDB4MDBhYWZmLCBiaWdJbWFnZTogbnVsbCwgYmlnRnJhbWU6IG51bGwsIGZyYW1lOiBudWxsIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICcnLCBjaGFyYWN0ZXI6IG51bGwsIGNvbG9yOiAweGZmNTU1NSwgYmlnSW1hZ2U6IG51bGwsIGJpZ0ZyYW1lOiBudWxsLCBmcmFtZTogbnVsbCB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIFRleHRvIGRlIHR1cm5vXG4gICAgICAgIHRoaXMudHVyblRleHQgPSB0aGlzLmFkZC50ZXh0KHdpZHRoIC8gMiwgOTUsICdUVVJOTzogSnVnYWRvciAxJywge1xuICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnVlQzMjMnLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzAwMCcsXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbk9mZnNldFkgPSAyNTtcblxuICAgICAgICAvLyBVSSBqdWdhZG9yZXMgKyBtaW5pYXR1cmFzXG4gICAgICAgIHRoaXMuY3JlYXRlUGxheWVyc1VJKHNlbGVjdGlvbk9mZnNldFkpO1xuICAgICAgICB0aGlzLmNyZWF0ZUNoYXJhY3Rlck1pbmlhdHVyZXMoMCwgc2VsZWN0aW9uT2Zmc2V0WSk7XG4gICAgICAgIHRoaXMudXBkYXRlVHVyblRleHQoKTtcblxuICAgICAgICAvLyBCb3TDs24gU2lndWllbnRlXG4gICAgICAgIGNyZWF0ZVVJQnV0dG9uKHRoaXMsIHtcbiAgICAgICAgICAgIHg6IHdpZHRoIC8gMixcbiAgICAgICAgICAgIHk6IDUwMCxcbiAgICAgICAgICAgIGxhYmVsOiAnU2lndWllbnRlJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlTmV4dCgpLFxuICAgICAgICAgICAgc2NhbGU6IDEuNSxcbiAgICAgICAgICAgIHRleHR1cmVOb3JtYWw6ICdib3RvblNpbXBsZScsXG4gICAgICAgICAgICB0ZXh0dXJlSG92ZXI6ICdib3RvblNpbXBsZVNlbGVjY2lvbmFkbycsXG4gICAgICAgICAgICB0ZXh0U3R5bGU6IHsgLi4uc3R5bGUsIGZvbnRTaXplOiAnMThweCcsIGNvbG9yOiAnIzAwMCcgfSxcbiAgICAgICAgICAgIGNsaWNrU291bmRLZXk6ICdzb25pZG9DbGljaydcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlT25saW5lVUkod2lkdGgsIGhlaWdodCwgc3R5bGUpIHtcbiAgICAgICAgLy8gRGF0b3MgZGVsIGp1Z2Fkb3JcbiAgICAgICAgdGhpcy5wbGF5ZXJzID0gW1xuICAgICAgICAgICAgeyBuYW1lOiB0aGlzLnJlZ2lzdHJ5LmdldCgndXNlcm5hbWUnKSB8fCAnSnVnYWRvclgnLCBjaGFyYWN0ZXI6IG51bGwsIGNvbG9yOiAweDAwYWFmZiwgYmlnSW1hZ2U6IG51bGwsIGJpZ0ZyYW1lOiBudWxsLCBmcmFtZTogbnVsbCB9XG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uT2Zmc2V0WSA9IDQwO1xuXG4gICAgICAgIHRoaXMuYWRkLnRleHQod2lkdGggLyAyLCA2MCArIHNlbGVjdGlvbk9mZnNldFksIGAke3RoaXMucGxheWVyc1swXS5uYW1lfWAsIHtcbiAgICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgICAgZm9udEZhbWlseTogJ1ZUMzIzJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwMDAnLFxuICAgICAgICAgICAgZm9udFN0eWxlOiAnYm9sZCdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgLy8gVGV4dG8gZGUgdHVybm8gKEVzdGFkbyBlbiBlc3RlIGNhc28sIHBlcm8gY29uIGVsIG1pc21vIG5vbWJyZSBwYXJhIG1hbnRlcm5lciBsYSBtaXNtYSBmdW5jaW9uYWxpZGFkKVxuICAgICAgICB0aGlzLnR1cm5UZXh0ID0gdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIDEzMCwgJ05pbmfDum4gcGVyc29uYWplIHNlbGVjY2lvbmFkbycsIHtcbiAgICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgICAgZm9udEZhbWlseTogJ1ZUMzIzJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjhweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwMDAnLFxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICAvLyBVSSBqdWdhZG9yZXMgKyBtaW5pYXR1cmFzXG4gICAgICAgIHRoaXMuY3JlYXRlUGxheWVyT25saW5lVUkoc2VsZWN0aW9uT2Zmc2V0WSk7XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hhcmFjdGVyTWluaWF0dXJlcygxNTAsIHNlbGVjdGlvbk9mZnNldFkpO1xuXG4gICAgICAgIC8vIEJvdMOzbiBTaWd1aWVudGVcbiAgICAgICAgY3JlYXRlVUlCdXR0b24odGhpcywge1xuICAgICAgICAgICAgeDogd2lkdGggLyAyLFxuICAgICAgICAgICAgeTogNTAwLFxuICAgICAgICAgICAgbGFiZWw6ICdTaWd1aWVudGUnLFxuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVOZXh0KCksXG4gICAgICAgICAgICBzY2FsZTogMS41LFxuICAgICAgICAgICAgdGV4dHVyZU5vcm1hbDogJ2JvdG9uU2ltcGxlJyxcbiAgICAgICAgICAgIHRleHR1cmVIb3ZlcjogJ2JvdG9uU2ltcGxlU2VsZWNjaW9uYWRvJyxcbiAgICAgICAgICAgIHRleHRTdHlsZTogeyAuLi5zdHlsZSwgZm9udFNpemU6ICcxOHB4JywgY29sb3I6ICcjMDAwJyB9LFxuICAgICAgICAgICAgY2xpY2tTb3VuZEtleTogJ3Nvbmlkb0NsaWNrJyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYSBsYSBVSSBkZSBzZWxlY2Npw7NuIGRlIGp1Z2Fkb3Jlc1xuICAgIGNyZWF0ZVBsYXllcnNVSShvZmZzZXRZID0gMCkge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nYW1lLmdsb2JhbHMuZGVmYXVsdFRleHRTdHlsZTtcblxuICAgICAgICBjb25zdCBwb3NpdGlvbnNYID0gW3dpZHRoICogMC4yNSwgd2lkdGggKiAwLjc1XTtcblxuICAgICAgICB0aGlzLnBsYXllcnMuZm9yRWFjaCgocGxheWVyLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHggPSBwb3NpdGlvbnNYW2lkeF07XG5cbiAgICAgICAgICAgIC8vIExhYmVsIG5vbWJyZVxuICAgICAgICAgICAgdGhpcy5hZGQudGV4dCh4LCAxMDAgKyBvZmZzZXRZLCAnTm9tYnJlOicsIHsgLi4uc3R5bGUsIGZvbnRTaXplOiAnMjRweCcsIGNvbG9yOiAnIzAwMCcgfSlcbiAgICAgICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgICAgIC8vIElucHV0IG5vbWJyZVxuICAgICAgICAgICAgY29uc3QgZG9tID0gdGhpcy5hZGQuZG9tKHgsIDE0MCArIG9mZnNldFkpLmNyZWF0ZUZyb21IVE1MKGBcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIk5vbWJyZSBqdWdhZG9yXCIgbWF4bGVuZ3RoPVwiMTBcIlxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOjE1MHB4O1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjZweDtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOjE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiR7c3R5bGUuZm9udEZhbWlseX07XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6MTJweDtcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiA2cHggc29saWQgI0ZGQUEwMDtcbiAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6I2YwZjBmMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIDAuMnMsIGJveC1zaGFkb3cgMC4ycztcIlxuICAgICAgICAgICAgICAgIG9uZm9jdXM9XCJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPScjRkY4MzE2JzsgdGhpcy5zdHlsZS5ib3hTaGFkb3c9JzAgMCA1cHggI0ZGODMxNic7XCJcbiAgICAgICAgICAgICAgICBvbmJsdXI9XCJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPScjRkZBQTAwJzsgdGhpcy5zdHlsZS5ib3hTaGFkb3c9J25vbmUnO1wiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGApO1xuXG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsID0gLyoqIEB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqLyAoZG9tLm5vZGUucXVlcnlTZWxlY3RvcignaW5wdXQnKSk7XG5cbiAgICAgICAgICAgIC8vIHBhcmEgcXVlIGVsIHRlY2xhZG8gbm8gaW50ZXJmaWVyYSBjb24gUGhhc2VyXG4gICAgICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0LmtleWJvYXJkLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXG4gICAgICAgICAgICAvLyBMZXRyYXMgKyBlc3BhY2lvc1xuICAgICAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpbnB1dEVsLnZhbHVlID0gaW5wdXRFbC52YWx1ZS5yZXBsYWNlKC9bXmEtekEtWsOALcO/w7HDkSBdL2csICcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVR1cm5UZXh0KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJJbnB1dHNbaWR4XSA9IGRvbTtcbiAgICAgICAgICAgIHRoaXMucGxheWVySW5wdXRFbHNbaWR4XSA9IGlucHV0RWw7XG5cbiAgICAgICAgICAgIC8vIOKAnFNsb3TigJ0gZ3JhbmRlICsgbWFyY29cbiAgICAgICAgICAgIHBsYXllci5iaWdJbWFnZSA9IHRoaXMuYWRkLmltYWdlKHdpZHRoICogKDAuMjUgKyAwLjUgKiBpZHgpLCBoZWlnaHQgKiAwLjYgKyBvZmZzZXRZLCAnY2hhcmFjdGVyQScpXG4gICAgICAgICAgICAgICAgLnNldFNjYWxlKDEuMilcbiAgICAgICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSlcbiAgICAgICAgICAgICAgICAuc2V0VmlzaWJsZShmYWxzZSk7XG5cbiAgICAgICAgICAgIHBsYXllci5iaWdGcmFtZSA9IHRoaXMuYWRkLmltYWdlKHBsYXllci5iaWdJbWFnZS54LCBwbGF5ZXIuYmlnSW1hZ2UueSwgJ21hcmNvSnVnYWRvcicpXG4gICAgICAgICAgICAgICAgLnNldFNjYWxlKDIuOClcbiAgICAgICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSlcbiAgICAgICAgICAgICAgICAuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIHBsYXllci5iaWdGcmFtZS50ZXh0dXJlLnNldEZpbHRlcihQaGFzZXIuVGV4dHVyZXMuRmlsdGVyTW9kZS5ORUFSRVNUKTtcblxuICAgICAgICAgICAgLy8gTWFyY28gc29icmUgbWluaWF0dXJhIChyZWN0w6FuZ3VsbylcbiAgICAgICAgICAgIHBsYXllci5mcmFtZSA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCA2MCwgMTIwKVxuICAgICAgICAgICAgICAgIC5zZXRTdHJva2VTdHlsZSg0LCBwbGF5ZXIuY29sb3IpXG4gICAgICAgICAgICAgICAgLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUdXJubyBlbXBpZXphIGVuIGp1Z2Fkb3IgMVxuICAgICAgICB0aGlzLmN1cnJlbnRUdXJuID0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVUdXJuVGV4dCgpO1xuICAgIH1cblxuICAgIGNyZWF0ZVBsYXllck9ubGluZVVJKG9mZnNldFkgPSAwKSB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcblxuICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLnBsYXllcnNbMF07XG4gICAgICAgIGNvbnN0IGNlbnRlclggPSB3aWR0aCAvIDI7XG5cbiAgICAgICAgLy8g4oCcU2xvdOKAnSBncmFuZGUgKyBtYXJjb1xuICAgICAgICBwbGF5ZXIuYmlnSW1hZ2UgPSB0aGlzLmFkZC5pbWFnZShjZW50ZXJYIC0gMTUwLCBoZWlnaHQgKiAwLjUgKyBvZmZzZXRZLCAnY2hhcmFjdGVyQScpXG4gICAgICAgICAgICAuc2V0U2NhbGUoMS4yKVxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUpXG4gICAgICAgICAgICAuc2V0VmlzaWJsZShmYWxzZSk7XG5cbiAgICAgICAgcGxheWVyLmJpZ0ZyYW1lID0gdGhpcy5hZGQuaW1hZ2UocGxheWVyLmJpZ0ltYWdlLngsIHBsYXllci5iaWdJbWFnZS55LCAnbWFyY29KdWdhZG9yJylcbiAgICAgICAgICAgIC5zZXRTY2FsZSgyLjgpXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSlcbiAgICAgICAgICAgIC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICBwbGF5ZXIuYmlnRnJhbWUudGV4dHVyZS5zZXRGaWx0ZXIoUGhhc2VyLlRleHR1cmVzLkZpbHRlck1vZGUuTkVBUkVTVCk7XG5cbiAgICAgICAgLy8gTWFyY28gc29icmUgbWluaWF0dXJhIChyZWN0w6FuZ3VsbylcbiAgICAgICAgcGxheWVyLmZyYW1lID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIDYwLCAxMjApXG4gICAgICAgICAgICAuc2V0U3Ryb2tlU3R5bGUoNCwgcGxheWVyLmNvbG9yKVxuICAgICAgICAgICAgLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cblxuICAgIC8vIENyZWEgbGFzIG1pbmlhdHVyYXMgZGUgbG9zIHBlcnNvbmFqZXMgc2VsZWNjaW9uYWJsZXNcbiAgICBjcmVhdGVDaGFyYWN0ZXJNaW5pYXR1cmVzKHgsIHkpIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuXG4gICAgICAgIGNvbnN0IHBlcnNvbmFqZXMgPSBbJ2NoYXJhY3RlckEnLCAnY2hhcmFjdGVyQicsICdjaGFyYWN0ZXJDJ107XG4gICAgICAgIGNvbnN0IHNwYWNpbmcgPSAxNTA7XG4gICAgICAgIGNvbnN0IHN0YXJ0WCA9IHdpZHRoIC8gMiAtIHNwYWNpbmcgLyAyO1xuICAgICAgICBjb25zdCBzdGFydFkgPSBoZWlnaHQgKiAwLjQ7XG5cbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gW1xuICAgICAgICAgICAgeyB4OiBzdGFydFggKyB4LCB5OiBzdGFydFkgKyB5IH0sXG4gICAgICAgICAgICB7IHg6IHN0YXJ0WCArIHggKyBzcGFjaW5nLCB5OiBzdGFydFkgKyB5IH0sXG4gICAgICAgICAgICB7IHg6IHN0YXJ0WCArIHggKyBzcGFjaW5nIC8gMiwgeTogc3RhcnRZICsgeSArIHNwYWNpbmcgLyAyIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgcGVyc29uYWplcy5mb3JFYWNoKChub21icmUsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1pbmkgPSB0aGlzLmFkZC5pbWFnZShwb3NpdGlvbnNbaV0ueCwgcG9zaXRpb25zW2ldLnksIG5vbWJyZSlcbiAgICAgICAgICAgICAgICAuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgLnNldFNjYWxlKDAuNDUpXG4gICAgICAgICAgICAgICAgLnNldERhdGEoJ2NoYXJhY3Rlck5hbWUnLCBub21icmUpO1xuXG4gICAgICAgICAgICBtaW5pLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBwbGF5Q2xpY2sodGhpcywgJ3Nvbmlkb0NsaWNrJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbk1pbmlDbGlja2VkKG5vbWJyZSwgbWluaSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTMOzZ2ljYSBhbCBoYWNlciBjbGljayBzb2JyZSB1bmEgbWluaWF0dXJhIChwZXJzb25hamUpXG4gICAgb25NaW5pQ2xpY2tlZChjaGFyYWN0ZXJOYW1lLCBtaW5pKSB7XG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdvbmxpbmUnKSB7XG4gICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLnBsYXllcnNbMF07XG5cbiAgICAgICAgICAgIC8vIFNpIGVsIHBlcnNvbmFqZSB5YSBlcyBlbCBzZWxlY2Npb25hZG8sIHNlIGRlc2VsZWNjaW9uYVxuICAgICAgICAgICAgaWYgKHBsYXllci5jaGFyYWN0ZXIgPT09IGNoYXJhY3Rlck5hbWUpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY2hhcmFjdGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmJpZ0ltYWdlKSBwbGF5ZXIuYmlnSW1hZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5mcmFtZSkgcGxheWVyLmZyYW1lLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBlcyB1bm8gbnVldm8sIHNlIHNlbGVjY2lvbmEgKHkgYXV0b23DoXRpY2FtZW50ZSBkZXNtYXJjYSBlbCBhbnRlcmlvciBzaSBsbyBodWJpZXJhKVxuICAgICAgICAgICAgICAgIHBsYXllci5jaGFyYWN0ZXIgPSBjaGFyYWN0ZXJOYW1lO1xuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuYmlnSW1hZ2UpIHBsYXllci5iaWdJbWFnZS5zZXRUZXh0dXJlKGNoYXJhY3Rlck5hbWUpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5mcmFtZSkgcGxheWVyLmZyYW1lLnNldFBvc2l0aW9uKG1pbmkueCwgbWluaS55KS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVUdXJuVGV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBTYWxpbW9zIHBhcmEgbm8gZWplY3V0YXIgbGEgbMOzZ2ljYSBkZSB0dXJub3MgZGVsIG1vZG8gbG9jYWxcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG93bmVySW5kZXggPSB0aGlzLnBsYXllcnMuZmluZEluZGV4KHAgPT4gcC5jaGFyYWN0ZXIgPT09IGNoYXJhY3Rlck5hbWUpO1xuXG4gICAgICAgIC8vIHNpIGVsIHBlcnNvbmFqZSB5YSBwZXJ0ZW5lY2UgYSBhbGd1aWVuLCBzZSBkZXNlbGVjY2lvbmEgc2llbXByZVxuICAgICAgICBpZiAob3duZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IG93bmVyID0gdGhpcy5wbGF5ZXJzW293bmVySW5kZXhdO1xuXG4gICAgICAgICAgICBvd25lci5jaGFyYWN0ZXIgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAob3duZXIuYmlnSW1hZ2UpIG93bmVyLmJpZ0ltYWdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgaWYgKG93bmVyLmZyYW1lKSBvd25lci5mcmFtZS5zZXRWaXNpYmxlKGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gRWwgdHVybm8gcGFzYSBhIGVzZSBqdWdhZG9yIHBhcmEgcXVlIGVsaWphIGlubWVkaWF0YW1lbnRlIG90cm9cbiAgICAgICAgICAgIHRoaXMuY3VycmVudFR1cm4gPSBvd25lckluZGV4O1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUdXJuVGV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2kgZWwgcGVyc29uYWplIG5vIHBlcnRlbmVjZSBhIG5hZGllLCBsbyBhc2lnbmFtb3Mgc2Vnw7puIGVsIHR1cm5vIChvIHNlZ8O6biBxdWnDqW4gZmFsdGUpXG4gICAgICAgIGNvbnN0IHAxID0gdGhpcy5wbGF5ZXJzWzBdO1xuICAgICAgICBjb25zdCBwMiA9IHRoaXMucGxheWVyc1sxXTtcblxuICAgICAgICBsZXQgdGFyZ2V0SW5kZXggPSB0aGlzLmN1cnJlbnRUdXJuO1xuXG4gICAgICAgIC8vIHNpIGN1cnJlbnRUdXJuIGVzIG51bGwgKGFtYm9zIHlhIHRlbsOtYW4pLCBubyBzZSBkZWphIHJlZW1wbGF6YXIgc2luIGRlc2VsZWNjaW9uYXIgYW50ZXMsXG4gICAgICAgIC8vIHBlcm8gc2kgdW5vIGVzdMOhIHZhY8Otbywgc2UgZWxpZ2UgYXV0b23DoXRpY2FtZW50ZSBlbCB2YWPDrW9cbiAgICAgICAgaWYgKHRhcmdldEluZGV4ID09PSBudWxsIHx8IHRhcmdldEluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICghcDEuY2hhcmFjdGVyICYmIHAyLmNoYXJhY3RlcikgdGFyZ2V0SW5kZXggPSAwO1xuICAgICAgICAgICAgZWxzZSBpZiAoIXAyLmNoYXJhY3RlciAmJiBwMS5jaGFyYWN0ZXIpIHRhcmdldEluZGV4ID0gMTtcbiAgICAgICAgICAgIGVsc2UgaWYgKCFwMS5jaGFyYWN0ZXIgJiYgIXAyLmNoYXJhY3RlcikgdGFyZ2V0SW5kZXggPSAwO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYW1ib3MgdGllbmVuIHBlcnNvbmFqZTogcGFyYSBjYW1iaWFyLCBwcmltZXJvIGRlc2VsZWNjaW9uYSB1bm8gKGNsaWNrIGVuIHN1IG1pbmkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5wbGF5ZXJzW3RhcmdldEluZGV4XTtcbiAgICAgICAgY29uc3Qgb3RoZXIgPSB0aGlzLnBsYXllcnNbMSAtIHRhcmdldEluZGV4XTtcblxuICAgICAgICAvLyBubyBzZSBwZXJtaXRlIGVzY29nZXIgdW5vIHF1ZSB0ZW5nYSBlbCBvdHJvXG4gICAgICAgIGlmIChvdGhlci5jaGFyYWN0ZXIgPT09IGNoYXJhY3Rlck5hbWUpIHJldHVybjtcblxuICAgICAgICAvLyBBc2lnbmFyIHBlcnNvbmFqZVxuICAgICAgICB0YXJnZXQuY2hhcmFjdGVyID0gY2hhcmFjdGVyTmFtZTtcblxuICAgICAgICBpZiAodGFyZ2V0LmJpZ0ltYWdlKSB0YXJnZXQuYmlnSW1hZ2Uuc2V0VGV4dHVyZShjaGFyYWN0ZXJOYW1lKS5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICBpZiAodGFyZ2V0LmZyYW1lKSB0YXJnZXQuZnJhbWUuc2V0UG9zaXRpb24obWluaS54LCBtaW5pLnkpLnNldFZpc2libGUodHJ1ZSk7XG5cbiAgICAgICAgLy8gdHVybm86IHNpIGVsIG90cm8gYcO6biBubyBlbGlnacOzLCBwYXNhIGFsIG90cm87IHNpIHlhIGVsaWdpw7MsIHF1ZWRhIGVuIG51bGwgKGFtYm9zIGxpc3RvcylcbiAgICAgICAgaWYgKCFvdGhlci5jaGFyYWN0ZXIpIHRoaXMuY3VycmVudFR1cm4gPSAxIC0gdGFyZ2V0SW5kZXg7XG4gICAgICAgIGVsc2UgdGhpcy5jdXJyZW50VHVybiA9IG51bGw7XG5cbiAgICAgICAgdGhpcy51cGRhdGVUdXJuVGV4dCgpO1xuICAgIH1cblxuICAgIC8vIENvbnRyb2xhIHF1ZSBwYXNhIGFsIGhhY2VyIGNsaWNrIGVuIGVsIGJvdMOzbiBTaWd1aWVudGVcbiAgICBoYW5kbGVOZXh0KCkge1xuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnbG9jYWwnKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lMSA9IHRoaXMucGxheWVySW5wdXRFbHM/LlswXT8udmFsdWU/LnRyaW0oKSA/PyAnJztcbiAgICAgICAgICAgIGNvbnN0IHAxSGFzQ2hhciA9ICEhdGhpcy5wbGF5ZXJzPy5bMF0/LmNoYXJhY3RlcjtcblxuICAgICAgICAgICAgY29uc3QgbmFtZTIgPSB0aGlzLnBsYXllcklucHV0RWxzPy5bMV0/LnZhbHVlPy50cmltKCkgPz8gJyc7XG4gICAgICAgICAgICBjb25zdCBwMkhhc0NoYXIgPSAhIXRoaXMucGxheWVycz8uWzFdPy5jaGFyYWN0ZXI7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlYWR5ID0gKG5hbWUxLmxlbmd0aCA+IDApICYmIChuYW1lMi5sZW5ndGggPiAwKSAmJiBwMUhhc0NoYXIgJiYgcDJIYXNDaGFyO1xuXG4gICAgICAgICAgICBpZiAoIXJlYWR5KSB7XG4gICAgICAgICAgICAgICAgLy8gc2UgYWN0dWFsaXphIGVsIHRleHRvIGRlIGFycmliYSAodHVyblRleHQpIGNvbiBlbCBtZW5zYWplIGVzcGVjw61maWNvXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUdXJuVGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgLy8gc2UgZGVzdGFjYSBlbCBtZW5zYWplIGVuIHJvam8gZHVyYW50ZSAxc1xuICAgICAgICAgICAgICAgIHRoaXMuZmxhc2hUdXJuVGV4dCgnI2IwMDAwMCcsIDkwMCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNlIGd1YXJkYW4gbm9tYnJlc1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJzWzBdLm5hbWUgPSBuYW1lMTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyc1sxXS5uYW1lID0gbmFtZTI7XG5cbiAgICAgICAgICAgIC8vIHNlIHBhc2EgYSBsYSBzaWd1aWVudGUgZXNjZW5hXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdTZWxlY3RTY2VuYXJpb19TY2VuZScsIHtcbiAgICAgICAgICAgICAgICBtb2RlOiB0aGlzLm1vZGUsXG4gICAgICAgICAgICAgICAgcGxheWVyMTogdGhpcy5wbGF5ZXJzWzBdLFxuICAgICAgICAgICAgICAgIHBsYXllcjI6IHRoaXMucGxheWVyc1sxXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ29ubGluZScpIHtcbiAgICAgICAgICAgIGNvbnN0IHAxSGFzQ2hhciA9ICEhdGhpcy5wbGF5ZXJzPy5bMF0/LmNoYXJhY3RlcjtcblxuICAgICAgICAgICAgaWYgKCFwMUhhc0NoYXIpIHtcbiAgICAgICAgICAgICAgICAvLyBzb2xvIHNlIGF2aXNhIHNpIG5vIGhhIGVsZWdpZG8gcGVyc29uYWplXG4gICAgICAgICAgICAgICAgdGhpcy5mbGFzaFR1cm5UZXh0KCcjYjAwMDAwJywgOTAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnR1cm5UZXh0LnNldFRleHQoJ0RlYmVzIGVsZWdpciB1biBwZXJzb25hamUgcHJpbWVybycpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ215Q2hhcmFjdGVyJywgdGhpcy5wbGF5ZXJzWzBdLmNoYXJhY3Rlcik7XG5cbiAgICAgICAgICAgIC8qaWYgKHRoaXMuaXNIb3N0KSB7XG4gICAgICAgICAgICAgICAgLy8gU295IGVsIGFkbWluOiBwdWVkbyBwYXNhciBhIGVsZWdpciBlc2NlbmFyaW9cbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdTZWxlY3RTY2VuYXJpb19TY2VuZScsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogdGhpcy5tb2RlLFxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIxOiB0aGlzLnBsYXllcnNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGlzSG9zdDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdMb2JieV9TY2VuZScsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogdGhpcy5tb2RlLFxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIyOiB0aGlzLnBsYXllcnNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGlzSG9zdDogZmFsc2UgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9Ki9cbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ0xvYmJ5X1NjZW5lJywge21vZGU6IHRoaXMubW9kZX0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFjZSBwYXJwYWRlYXIgZWwgdGV4dG8gZGUgdHVybm8gY29uIHVuIGNvbG9yIHJvam8gZHVyYW50ZSB1bm9zIG1pbGlzZWd1bmRvc1xuICAgIGZsYXNoVHVyblRleHQoY29sb3IgPSAnI2IwMDAwMCcsIG1zID0gOTAwKSB7XG4gICAgICAgIGlmICghdGhpcy50dXJuVGV4dCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IG9sZENvbG9yID0gdGhpcy50dXJuVGV4dC5zdHlsZS5jb2xvciB8fCAnIzAwMDAwMCc7XG4gICAgICAgIHRoaXMudHVyblRleHQuc2V0Q29sb3IoY29sb3IpO1xuXG4gICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbChtcywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gdnVlbHZlIGFsIGNvbG9yIG5vcm1hbCB5IHJlZnJlc2NhIGVsIHRleHRvIHBvciBzaSBjYW1iacOzIGFsZ29cbiAgICAgICAgICAgIHRoaXMudHVyblRleHQuc2V0Q29sb3Iob2xkQ29sb3IpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUdXJuVGV4dCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBY3R1YWxpemEgZWwgdGV4dG8gZGUgdHVybm8vZXN0YWRvIGFjdHVhbFxuICAgIHVwZGF0ZVR1cm5UZXh0KCkge1xuICAgICAgICBpZiAoIXRoaXMudHVyblRleHQpIHJldHVybjtcblxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnbG9jYWwnKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lMSA9IHRoaXMucGxheWVySW5wdXRFbHM/LlswXT8udmFsdWU/LnRyaW0oKSA/PyAnJztcbiAgICAgICAgICAgIGNvbnN0IG5hbWUyID0gdGhpcy5wbGF5ZXJJbnB1dEVscz8uWzFdPy52YWx1ZT8udHJpbSgpID8/ICcnO1xuXG4gICAgICAgICAgICBjb25zdCBwMUhhc0NoYXIgPSAhIXRoaXMucGxheWVycz8uWzBdPy5jaGFyYWN0ZXI7XG4gICAgICAgICAgICBjb25zdCBwMkhhc0NoYXIgPSAhIXRoaXMucGxheWVycz8uWzFdPy5jaGFyYWN0ZXI7XG5cbiAgICAgICAgICAgIGNvbnN0IHAxSGFzTmFtZSA9IG5hbWUxLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICBjb25zdCBwMkhhc05hbWUgPSBuYW1lMi5sZW5ndGggPiAwO1xuXG4gICAgICAgICAgICBjb25zdCBhbGxDaGFycyA9IHAxSGFzQ2hhciAmJiBwMkhhc0NoYXI7XG4gICAgICAgICAgICBjb25zdCBhbGxOYW1lcyA9IHAxSGFzTmFtZSAmJiBwMkhhc05hbWU7XG5cbiAgICAgICAgICAgIC8vIHNpIHRvZG8gZXN0w6EgY29tcGxldG9cbiAgICAgICAgICAgIGlmIChhbGxDaGFycyAmJiBhbGxOYW1lcykge1xuICAgICAgICAgICAgICAgIHRoaXMudHVyblRleHQuc2V0VGV4dCgnwqFMaXN0byBwYXJhIGNvbnRpbnVhciEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNpIGZhbHRhbiBOT01CUkVTICh5IHlhIGVzdMOhbiBsb3MgcGVyc29uYWplcyksIGVzcGVjaWZpY2EgcXVpw6luXG4gICAgICAgICAgICBpZiAoYWxsQ2hhcnMgJiYgIWFsbE5hbWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwMUhhc05hbWUgJiYgIXAySGFzTmFtZSkgdGhpcy50dXJuVGV4dC5zZXRUZXh0KCdGYWx0YW4gbG9zIG5vbWJyZXMgZGUgSnVnYWRvciAxIHkgSnVnYWRvciAyJyk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXAxSGFzTmFtZSkgdGhpcy50dXJuVGV4dC5zZXRUZXh0KCdGYWx0YSBlbCBub21icmUgZGUgSnVnYWRvciAxJyk7XG4gICAgICAgICAgICAgICAgZWxzZSB0aGlzLnR1cm5UZXh0LnNldFRleHQoJ0ZhbHRhIGVsIG5vbWJyZSBkZSBKdWdhZG9yIDInKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNpIGZhbHRhbiBQRVJTT05BSkVTICh5IHlhIGVzdMOhbiBsb3Mgbm9tYnJlcyksIGVzcGVjaWZpY2EgcXVpw6luXG4gICAgICAgICAgICBpZiAoYWxsTmFtZXMgJiYgIWFsbENoYXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwMUhhc0NoYXIgJiYgIXAySGFzQ2hhcikgdGhpcy50dXJuVGV4dC5zZXRUZXh0KCdGYWx0YW4gbG9zIHBlcnNvbmFqZXMgZGUgSnVnYWRvciAxIHkgSnVnYWRvciAyJyk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXAxSGFzQ2hhcikgdGhpcy50dXJuVGV4dC5zZXRUZXh0KCdGYWx0YSBlbCBwZXJzb25hamUgZGUgSnVnYWRvciAxJyk7XG4gICAgICAgICAgICAgICAgZWxzZSB0aGlzLnR1cm5UZXh0LnNldFRleHQoJ0ZhbHRhIGVsIHBlcnNvbmFqZSBkZSBKdWdhZG9yIDInKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNpIGZhbHRhbiBjb3NhcyBtaXh0YXMgKG5vbWJyZXMgeSBwZXJzb25hamVzKVxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFR1cm4gPT09IG51bGwgfHwgdGhpcy5jdXJyZW50VHVybiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50dXJuVGV4dC5zZXRUZXh0KCdDb21wbGV0YSBub21icmVzIHkgcGVyc29uYWplcycpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50dXJuVGV4dC5zZXRUZXh0KGBUVVJOTzogSnVnYWRvciAke3RoaXMuY3VycmVudFR1cm4gKyAxfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ29ubGluZScpIHtcblxuICAgICAgICAgICAgY29uc3QgcDFIYXNDaGFyID0gISF0aGlzLnBsYXllcnM/LlswXT8uY2hhcmFjdGVyO1xuXG4gICAgICAgICAgICBpZiAoIXAxSGFzQ2hhcikge1xuICAgICAgICAgICAgICAgIHRoaXMudHVyblRleHQuc2V0VGV4dCgnTmluZ8O6biBwZXJzb25hamUgc2VsZWNjaW9uYWRvJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudHVyblRleHQuc2V0VGV4dCgnTGlzdG86IGVsIGp1Z2Fkb3IgdGllbmUgcGVyc29uYWplJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvL1BhbnRhbGxhIGRlIFNlbGVjY2lvbiBkZSBlc2NlbmFyaW9cbmltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IGFwcGx5U3RvcmVkVm9sdW1lLCBwbGF5Q2xpY2sgfSBmcm9tICcuLi9VSS9BdWRpby5qcyc7XG5pbXBvcnQgeyBjcmVhdGVVSUJ1dHRvbiwgY3JlYXRlSWNvbkJ1dHRvbiB9IGZyb20gJy4uL1VJL0J1dHRvbnMuanMnO1xuXG5leHBvcnQgY2xhc3MgU2VsZWN0U2NlbmFyaW9fU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignU2VsZWN0U2NlbmFyaW9fU2NlbmUnKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNjZW5hcmlvID0gJ0d5bSc7XG4gICAgICAgIHRoaXMubW9kZSA9ICdsb2NhbCc7XG4gICAgfVxuXG4gICAgcHJlbG9hZCgpIHtcbiAgICAgICAgLy8gQm90b25lc1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uU2VsZWNjaW9uYWRvJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0JPVE9OX0JBU0UucG5nJyk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYm90b25TaW5TZWxlY2Npb25hcicsICdBU1NFVFMvVUkvQk9UT05FUy9CT1RPTl9CQVNFX1NJTlNFTEVDQ0lPTkFSLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uVm9sdmVyJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0ZMRUNIQV9WT0xWRVIucG5nJyk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYm90b25TaW1wbGUnLCAnQVNTRVRTL1VJL0JPVE9ORVMvQk9UT05fQkFTRV9TSU5TRUxFQ0NJT05BUi5wbmcnKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblNpbXBsZVNlbGVjY2lvbmFkbycsICdBU1NFVFMvVUkvQk9UT05FUy9CT1RPTl9CQVNFLnBuZycpO1xuXG4gICAgICAgIC8vIEZvbmRvXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnZm9uZG8nLCAnQVNTRVRTL0ZPTkRPUy9GT05ET19CQVNFLnBuZycpO1xuXG4gICAgICAgIC8vIEVzY2VuYXJpb3NcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdHeW0nLCAnQVNTRVRTL0ZPTkRPUy9HSU1OQVNJTy5wbmcnKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdQbGF5YScsICdBU1NFVFMvRk9ORE9TL1BMQVlBLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ0phcmRpbicsICdBU1NFVFMvRk9ORE9TL0pBUkRJTi5wbmcnKTtcblxuICAgICAgICAvLyBTb25pZG9cbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKCdzb25pZG9DbGljaycsICdBU1NFVFMvU09OSURPL1Nvbmlkb0JvdG9uLm1wMycpO1xuXG4gICAgICAgIC8vIE1hcmNvXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnbWFyY28nLCAnQVNTRVRTL1VJL01BUkNPUy9WQUNJT1MvTUFSQ09TX0VTQ0VOQVJJTy5wbmcnKVxuICAgIH1cblxuICAgIGluaXQoZGF0YSkge1xuICAgICAgICB0aGlzLnBsYXllcjEgPSBkYXRhLnBsYXllcjE7XG4gICAgICAgIHRoaXMucGxheWVyMiA9IGRhdGEucGxheWVyMjtcbiAgICAgICAgdGhpcy5tb2RlID0gZGF0YS5tb2RlIHx8ICdsb2NhbCc7XG4gICAgICAgIHRoaXMuaXNIb3N0ID0gZGF0YS5pc0hvc3QgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgY3JlYXRlKCkge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nYW1lLmdsb2JhbHMuZGVmYXVsdFRleHRTdHlsZTtcblxuICAgICAgICAvLyBzZSBhcGxpY2EgZWwgdm9sdW1lblxuICAgICAgICBhcHBseVN0b3JlZFZvbHVtZSh0aGlzKTtcblxuICAgICAgICAvLyBGb25kb1xuICAgICAgICB0aGlzLmFkZC5pbWFnZSgwLCAwLCAnZm9uZG8nKVxuICAgICAgICAgICAgLnNldE9yaWdpbigwKVxuICAgICAgICAgICAgLnNldERlcHRoKC0xKVxuICAgICAgICAgICAgLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIC8vIFTDrXR1bG9cbiAgICAgICAgdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIDUwLCAnU2VsZWNjaW9uYSBFc2NlbmFyaW8nLCB7XG4gICAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDJweCcsXG4gICAgICAgICAgICBjb2xvcjogJyM1ZjAwMDBmZidcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgLy8gSW1hZ2VuIGRlbCBlc2NlbmFyaW8gc2VsZWNjaW9uYWRvXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTY2VuYXJpbyA9ICdHeW0nO1xuICAgICAgICB0aGlzLnNlbGVjdGVkSW1hZ2UgPSB0aGlzLmFkZC5pbWFnZSh3aWR0aCAvIDIsIDI0MCwgdGhpcy5zZWxlY3RlZFNjZW5hcmlvKS5zZXRTY2FsZSgwLjUpO1xuXG4gICAgICAgIC8vIEVzY2VuYXJpb3MgKGJvdG9uZXMpXG4gICAgICAgIGNvbnN0IGVzY2VuYXJpb3MgPSBbJ0d5bScsICdQbGF5YScsICdKYXJkaW4nXTtcbiAgICAgICAgY29uc3Qgc3BhY2luZyA9IDIwMDtcbiAgICAgICAgY29uc3Qgc3RhcnRYID0gd2lkdGggLyAyIC0gc3BhY2luZztcblxuICAgICAgICBjb25zdCBzY2VuYXJpb0J1dHRvbnMgPSB7fTtcblxuICAgICAgICAvLyBmdW5jacOzbiBwYXJhIHNlbGVjY2lvbmFyIGVzY2VuYXJpb1xuICAgICAgICBjb25zdCBzZXRTZWxlY3RlZFNjZW5hcmlvID0gKG5vbWJyZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNjZW5hcmlvID0gbm9tYnJlO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEltYWdlLnNldFRleHR1cmUobm9tYnJlKS5zZXRTY2FsZSgwLjUpO1xuXG4gICAgICAgICAgICAvLyBzZSBkZWphIG1hcmNhZG8gZWwgc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICBlc2NlbmFyaW9zLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHNjZW5hcmlvQnV0dG9uc1trZXldLnNldFRleHR1cmUoa2V5ID09PSBub21icmUgPyAnYm90b25TZWxlY2Npb25hZG8nIDogJ2JvdG9uU2luU2VsZWNjaW9uYXInKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGVzY2VuYXJpb3MuZm9yRWFjaCgobm9tYnJlLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBib3RvbiA9IHRoaXMuYWRkLmltYWdlKHN0YXJ0WCArIGkgKiBzcGFjaW5nLCA0NDAsICdib3RvblNpblNlbGVjY2lvbmFyJylcbiAgICAgICAgICAgICAgICAuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgLnNldFNjYWxlKDEuNzUpO1xuXG4gICAgICAgICAgICBzY2VuYXJpb0J1dHRvbnNbbm9tYnJlXSA9IGJvdG9uO1xuXG4gICAgICAgICAgICAvLyB0ZXh0byBlbiBlbCBjZW50cm9cbiAgICAgICAgICAgIGNvbnN0IHRleHRvID0gdGhpcy5hZGQudGV4dCgwLCAwLCBub21icmUsIHsgLi4uc3R5bGUsIGZvbnRTaXplOiAnMjhweCcsIGNvbG9yOiAnIzAwMCcgfSk7XG4gICAgICAgICAgICBQaGFzZXIuRGlzcGxheS5BbGlnbi5Jbi5DZW50ZXIodGV4dG8sIGJvdG9uKTtcblxuICAgICAgICAgICAgLy8gaG92ZXJcbiAgICAgICAgICAgIGJvdG9uLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IGJvdG9uLnNldFRleHR1cmUoJ2JvdG9uU2VsZWNjaW9uYWRvJykpO1xuICAgICAgICAgICAgYm90b24ub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYm90b24uc2V0VGV4dHVyZSh0aGlzLnNlbGVjdGVkU2NlbmFyaW8gPT09IG5vbWJyZSA/ICdib3RvblNlbGVjY2lvbmFkbycgOiAnYm90b25TaW5TZWxlY2Npb25hcicpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGNsaWNrOiBzb25pZG8gKyBzZWxlY2Npb25hclxuICAgICAgICAgICAgYm90b24ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4gcGxheUNsaWNrKHRoaXMsICdzb25pZG9DbGljaycpKTtcbiAgICAgICAgICAgIGJvdG9uLm9uKCdwb2ludGVydXAnLCAocG9pbnRlcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluc2lkZSA9IGJvdG9uLmdldEJvdW5kcygpLmNvbnRhaW5zKHBvaW50ZXIueCwgcG9pbnRlci55KTtcbiAgICAgICAgICAgICAgICBpZiAoIWluc2lkZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkU2NlbmFyaW8obm9tYnJlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBzZSBtYXJjYSBlbCBlc2NlbmFyaW8gcG9yIGRlZmVjdG8gdmlzdWFsbWVudGVcbiAgICAgICAgc2V0U2VsZWN0ZWRTY2VuYXJpbyh0aGlzLnNlbGVjdGVkU2NlbmFyaW8pO1xuXG4gICAgICAgIC8vIE1hcmNvXG4gICAgICAgIGNvbnN0IGZyYW1lWSA9IDI0MDsgLy8gWSBkZSBsYSBpbWFnZW4gZGVsIGVzY2VuYXJpb1xuICAgICAgICBjb25zdCBmcmFtZSA9IHRoaXMuYWRkLmltYWdlKHdpZHRoIC8gMiwgZnJhbWVZLCAnbWFyY28nKS5zZXRPcmlnaW4oMC41KTtcbiAgICAgICAgZnJhbWUudGV4dHVyZS5zZXRGaWx0ZXIoUGhhc2VyLlRleHR1cmVzLkZpbHRlck1vZGUuTkVBUkVTVCk7XG5cbiAgICAgICAgLy8gQWp1c3RlIGRlbCB0YW1hw7FvIGRlbCBtYXJjb1xuICAgICAgICBjb25zdCB0YXJnZXRGcmFtZVdpZHRoID0gNTAwOyBcbiAgICAgICAgY29uc3QgdGFyZ2V0RnJhbWVIZWlnaHQgPSAzMDA7XG4gICAgICAgIGZyYW1lLnNldERpc3BsYXlTaXplKHRhcmdldEZyYW1lV2lkdGgsIHRhcmdldEZyYW1lSGVpZ2h0KTtcblxuICAgICAgICAvLyBib3TDs24gU2lndWllbnRlXG4gICAgICAgIGNyZWF0ZVVJQnV0dG9uKHRoaXMsIHtcbiAgICAgICAgICAgIHg6IHdpZHRoIC8gMixcbiAgICAgICAgICAgIHk6IDUwMCxcbiAgICAgICAgICAgIGxhYmVsOiAnU2lndWllbnRlJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnbG9jYWwnKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnR2FtZV9TY2VuZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjE6IHRoaXMucGxheWVyMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjI6IHRoaXMucGxheWVyMixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU2NlbmFyaW86IHRoaXMuc2VsZWN0ZWRTY2VuYXJpbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6IHRoaXMubW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzSG9zdDogdGhpcy5pc0hvc3RcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTG9iYnlfU2NlbmUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIxOiB0aGlzLnBsYXllcjEsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIyOiB0aGlzLnBsYXllcjIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFNjZW5hcmlvOiB0aGlzLnNlbGVjdGVkU2NlbmFyaW8sXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlOiB0aGlzLm1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0hvc3Q6IHRoaXMuaXNIb3N0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY2FsZTogMS41LFxuICAgICAgICAgICAgdGV4dHVyZU5vcm1hbDogJ2JvdG9uU2ltcGxlJyxcbiAgICAgICAgICAgIHRleHR1cmVIb3ZlcjogJ2JvdG9uU2ltcGxlU2VsZWNjaW9uYWRvJyxcbiAgICAgICAgICAgIHRleHRTdHlsZTogeyAuLi5zdHlsZSwgZm9udFNpemU6ICcxOHB4JywgY29sb3I6ICcjMDAwJyB9LFxuICAgICAgICAgICAgY2xpY2tTb3VuZEtleTogJ3Nvbmlkb0NsaWNrJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gYm90w7NuIFZvbHZlciBhdHLDoXNcbiAgICAgICAgY3JlYXRlSWNvbkJ1dHRvbih0aGlzLCB7XG4gICAgICAgICAgICB4OiB3aWR0aCAqIDAuMDYsXG4gICAgICAgICAgICB5OiBoZWlnaHQgKiAwLjA4LFxuICAgICAgICAgICAgdGV4dHVyZTogJ2JvdG9uVm9sdmVyJyxcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgaG92ZXJTY2FsZTogMS4xLFxuICAgICAgICAgICAgY2xpY2tTb3VuZEtleTogJ3Nvbmlkb0NsaWNrJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdTZWxlY3RQbGF5ZXJfU2NlbmUnLCB7IFxuICAgICAgICAgICAgICAgICAgICBtb2RlOiB0aGlzLm1vZGUsXG4gICAgICAgICAgICAgICAgICAgIGlzSG9zdDogdGhpcy5pc0hvc3RcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsIi8vIFVJIHBhcmEgZWxlZ2lyIGVzY2VuYXJpbyBlbiBlbCBsb2JieVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY2VuYXJpb1BpY2tlclVJIHtcclxuICAgIC8vIGNmZzogeyBjZW50ZXJYLCBmcmFtZVksIGZyYW1lVywgZnJhbWVILCBzdHlsZSwgc2NlbmFyaW9zLCBcclxuICAgIC8vICAgICAgICAgZGVmYXVsdFNjZW5hcmlvLCBidXR0b25UZXh0dXJlcywgb25TZWxlY3QgfVxyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUsIGNmZykge1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuYXJpb3MgPSBjZmcuc2NlbmFyaW9zID8/IFtdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTY2VuYXJpbyA9IGNmZy5kZWZhdWx0U2NlbmFyaW8gPz8gKHRoaXMuc2NlbmFyaW9zWzBdID8/ICdHeW0nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdHlsZSA9IGNmZy5zdHlsZTtcclxuICAgICAgICB0aGlzLmJ1dHRvblRleHR1cmVzID0gY2ZnLmJ1dHRvblRleHR1cmVzID8/IHtcclxuICAgICAgICAgICAgbm9ybWFsOiAnYm90b25TaW5TZWxlY2Npb25hcicsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnYm90b25TZWxlY2Npb25hZG8nLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMub25TZWxlY3QgPSBjZmcub25TZWxlY3QgPz8gKCgpID0+IHsgfSk7XHJcbiAgICAgICAgdGhpcy5pc0hvc3QgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBzY2VuZS5hZGQuY29udGFpbmVyKDAsIDApO1xyXG5cclxuICAgICAgICAvLyBMYXlvdXQgKGxhdGVyYWwpXHJcbiAgICAgICAgdGhpcy5wcmV2aWV3WCA9IGNmZy5wcmV2aWV3WCA/PyBjZmcuY2VudGVyWDtcclxuICAgICAgICB0aGlzLnByZXZpZXdZID0gY2ZnLnByZXZpZXdZID8/IGNmZy5mcmFtZVk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3VyA9IGNmZy5wcmV2aWV3VyA/PyBjZmcuZnJhbWVXO1xyXG4gICAgICAgIHRoaXMucHJldmlld0ggPSBjZmcucHJldmlld0ggPz8gY2ZnLmZyYW1lSDtcclxuXHJcbiAgICAgICAgdGhpcy5idXR0b25zWCA9IGNmZy5idXR0b25zWCA/PyAoY2ZnLmNlbnRlclggPz8gdGhpcy5wcmV2aWV3WCk7XHJcbiAgICAgICAgdGhpcy5idXR0b25zWSA9IGNmZy5idXR0b25zWSA/PyAodGhpcy5wcmV2aWV3WSAtIDcwKTtcclxuICAgICAgICB0aGlzLmJ1dHRvbnNTcGFjaW5nWSA9IGNmZy5idXR0b25zU3BhY2luZ1kgPz8gOTA7XHJcbiAgICAgICAgdGhpcy5idXR0b25zU2NhbGUgPSBjZmcuYnV0dG9uc1NjYWxlID8/IDEuNjtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBzY2VuZS5hZGQuY29udGFpbmVyKDAsIDApO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSBzY2VuZS5hZGQuY29udGFpbmVyKDAsIDApO1xyXG5cclxuICAgICAgICAvLyBQcmV2aWV3XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3ID0gc2NlbmUuYWRkLmltYWdlKHRoaXMucHJldmlld1gsIHRoaXMucHJldmlld1ksIHRoaXMuc2VsZWN0ZWRTY2VuYXJpbykuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3LnNldERpc3BsYXlTaXplKHRoaXMucHJldmlld1cgKiAwLjkyLCB0aGlzLnByZXZpZXdIICogMC45Mik7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb1RleHQgPSBzY2VuZS5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5wcmV2aWV3WCxcclxuICAgICAgICAgICAgdGhpcy5wcmV2aWV3WSArIHRoaXMucHJldmlld0ggLyAyICsgMjIsXHJcbiAgICAgICAgICAgIGBFc2NlbmFyaW86ICR7dGhpcy5zZWxlY3RlZFNjZW5hcmlvfWAsXHJcbiAgICAgICAgICAgIHsgLi4udGhpcy5zdHlsZSwgZm9udFNpemU6ICcyMnB4JywgY29sb3I6ICcjMDAwJyB9XHJcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgdGhpcy5vbmx5SG9zdFRleHQgPSBzY2VuZS5hZGQudGV4dChcclxuICAgICAgICAgICAgdGhpcy5idXR0b25zWCxcclxuICAgICAgICAgICAgdGhpcy5idXR0b25zWSArIHRoaXMuYnV0dG9uc1NwYWNpbmdZICogdGhpcy5zY2VuYXJpb3MubGVuZ3RoICsgNSxcclxuICAgICAgICAgICAgJ0VsIGhvc3QgZWxpZ2UgZWwgZXNjZW5hcmlvJyxcclxuICAgICAgICAgICAgeyAuLi50aGlzLnN0eWxlLCBmb250U2l6ZTogJzIycHgnLCBjb2xvcjogJyM0NDQnIH1cclxuICAgICAgICApLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICAvLyBCb3RvbmVzIGRlIHNlbGVjY2nDs24gKGNvbHVtbmEgZGVyZWNoYSlcclxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuYXJpb3MuZm9yRWFjaCgobmFtZSwgaSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5idXR0b25zWDtcclxuICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuYnV0dG9uc1kgKyBpICogdGhpcy5idXR0b25zU3BhY2luZ1k7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBidG4gPSBzY2VuZS5hZGQuaW1hZ2UoeCwgeSwgdGhpcy5idXR0b25UZXh0dXJlcy5ub3JtYWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0U2NhbGUodGhpcy5idXR0b25zU2NhbGUpXHJcbiAgICAgICAgICAgICAgICAuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBzY2VuZS5hZGQudGV4dCh4LCB5LCBuYW1lLCB7XHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLnN0eWxlLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JyxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnIzAwMCcsXHJcbiAgICAgICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICAgICAgLy8gSG92ZXJcclxuICAgICAgICAgICAgYnRuLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0hvc3QpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGJ0bi5zZXRUZXh0dXJlKHRoaXMuYnV0dG9uVGV4dHVyZXMuc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGJ0bi5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0hvc3QpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlZnJlc2hCdXR0b25zKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2xpY2tcclxuICAgICAgICAgICAgYnRuLm9uKCdwb2ludGVydXAnLCAocG9pbnRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSG9zdCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zaWRlID0gYnRuLmdldEJvdW5kcygpLmNvbnRhaW5zKHBvaW50ZXIueCwgcG9pbnRlci55KTtcclxuICAgICAgICAgICAgICAgIGlmICghaW5zaWRlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zb3VuZD8ucGxheT8uKCdzb25pZG9DbGljaycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTY2VuYXJpbyhuYW1lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZWxlY3QobmFtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5idXR0b25zW25hbWVdID0geyBidG4sIGxhYmVsIH07XHJcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHMuYWRkKFtidG4sIGxhYmVsXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZChbdGhpcy5wcmV2aWV3LCB0aGlzLmluZm9UZXh0LCB0aGlzLmNvbnRyb2xzLCB0aGlzLm9ubHlIb3N0VGV4dF0pO1xyXG5cclxuICAgICAgICB0aGlzLl9yZWZyZXNoQnV0dG9ucygpO1xyXG4gICAgICAgIHRoaXMuc2V0SXNIb3N0KGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYW1iaWEgZWwgZXNjZW5hcmlvIHNlbGVjY2lvbmFkb1xyXG4gICAgc2V0U2NlbmFyaW8obmFtZSkge1xyXG4gICAgICAgIGlmICghbmFtZSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTY2VuYXJpbyA9IG5hbWU7XHJcblxyXG4gICAgICAgIHRoaXMucHJldmlldz8uc2V0VGV4dHVyZShuYW1lKTtcclxuICAgICAgICB0aGlzLmluZm9UZXh0Py5zZXRUZXh0KGBFc2NlbmFyaW86ICR7bmFtZX1gKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVmcmVzaEJ1dHRvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZWZpbmUgc2kgZWwganVnYWRvciBlcyBob3N0IG8gbm9cclxuICAgIHNldElzSG9zdChpc0hvc3QpIHtcclxuICAgICAgICB0aGlzLmlzSG9zdCA9ICEhaXNIb3N0O1xyXG5cclxuICAgICAgICAvLyBob3N0IHZlIGNvbnRyb2xlcyB5IGVsIG5vLWhvc3QgdmUgdGV4dG8gaW5mb3JtYXRpdm9cclxuICAgICAgICB0aGlzLm9ubHlIb3N0VGV4dD8uc2V0VmlzaWJsZSghdGhpcy5pc0hvc3QpO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHsgYnRuLCBsYWJlbCB9IG9mIE9iamVjdC52YWx1ZXModGhpcy5idXR0b25zKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0hvc3QpIHtcclxuICAgICAgICAgICAgICAgIGJ0bi5zZXRBbHBoYSgxKTtcclxuICAgICAgICAgICAgICAgIC8vIHNlIHJlLWhhYmlsaXRhIHNpIGVzdGFiYSBkZXNhY3RpdmFkb1xyXG4gICAgICAgICAgICAgICAgbGFiZWwuc2V0QWxwaGEoMSk7XHJcbiAgICAgICAgICAgICAgICBidG4uc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnRuLmRpc2FibGVJbnRlcmFjdGl2ZSgpO1xyXG4gICAgICAgICAgICAgICAgYnRuLnNldEFscGhhKDAuNik7XHJcbiAgICAgICAgICAgICAgICBsYWJlbC5zZXRBbHBoYSgwLjYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9yZWZyZXNoQnV0dG9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdHVhbGl6YSBlbCBlc3RhZG8gdmlzdWFsIGRlIGxvcyBib3RvbmVzXHJcbiAgICBfcmVmcmVzaEJ1dHRvbnMoKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgeyBidG4gfV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5idXR0b25zKSkge1xyXG4gICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gKG5hbWUgPT09IHRoaXMuc2VsZWN0ZWRTY2VuYXJpbyk7XHJcbiAgICAgICAgICAgIGJ0bi5zZXRUZXh0dXJlKGlzU2VsZWN0ZWQgPyB0aGlzLmJ1dHRvblRleHR1cmVzLnNlbGVjdGVkIDogdGhpcy5idXR0b25UZXh0dXJlcy5ub3JtYWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXN0cnV5ZSBsYSBVSVxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lcj8uZGVzdHJveSh0cnVlKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gVGFyamV0YSBkZWwganVnYWRvciAobWFyY28sIGZvdG8sIG5vbWJyZSB5IHJlYWR5KVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXJDYXJkVUkge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUsIHgsIHksIGNmZyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG5cclxuICAgICAgICB0aGlzLncgPSBjZmcudyA/PyAzMjA7XHJcbiAgICAgICAgdGhpcy5oID0gY2ZnLmggPz8gMjEwO1xyXG5cclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcblxyXG4gICAgICAgIHRoaXMuc3R5bGUgPSBjZmcuc3R5bGUgPz8ge307XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IGNmZy50aXRsZSA/PyAnJztcclxuXHJcbiAgICAgICAgLy8geyBjaGFyYWN0ZXJBOidwb3J0cmFpdEEnLCBjaGFyYWN0ZXJCOidwb3J0cmFpdEInLi4uIH1cclxuICAgICAgICB0aGlzLnBvcnRyYWl0S2V5cyA9IGNmZy5wb3J0cmFpdEtleXMgPz8ge307XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0UG9ydHJhaXRLZXkgPSBjZmcuZGVmYXVsdFBvcnRyYWl0S2V5ID8/IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gc2NlbmUuYWRkLmNvbnRhaW5lcih4LCB5KTtcclxuXHJcbiAgICAgICAgLy8gRm9uZG9cclxuICAgICAgICAvL3RoaXMuYmcgPSBzY2VuZS5hZGQucmVjdGFuZ2xlKDAsIDAsIGNmZy53ID8/IDMyMCwgY2ZnLmggPz8gMjEwLCAweGZmZmZmZiwgMC4zNSlcclxuICAgICAgICAvLyAgICAuc2V0U3Ryb2tlU3R5bGUoMiwgMHgwMDAwMDAsIDAuMjUpO1xyXG5cclxuICAgICAgICAvLyBMYXlvdXRcclxuICAgICAgICB0aGlzLnBhZGRpbmcgPSAxNDtcclxuXHJcbiAgICAgICAgLy8gWm9uYSBkZWwgcmV0cmF0b1xyXG4gICAgICAgIHRoaXMucG9ydHJhaXRCb3hXID0gdGhpcy53ICogMC40MjsgIC8vIGFuY2hvIGRlbCBodWVjbyBkZWwgcmV0cmF0byBkZW50cm8gZGUgbGEgdGFyamV0YVxyXG4gICAgICAgIHRoaXMucG9ydHJhaXRCb3hIID0gdGhpcy5oICogMC44MjsgIC8vIGFsdG8gZGVsIGh1ZWNvIGRlbCByZXRyYXRvXHJcblxyXG4gICAgICAgIHRoaXMucG9ydHJhaXRYID0gLXRoaXMudyAvIDIgKyB0aGlzLnBhZGRpbmcgKyB0aGlzLnBvcnRyYWl0Qm94VyAvIDI7XHJcbiAgICAgICAgdGhpcy5wb3J0cmFpdFkgPSAtNjsgLy8gYWp1c3RhIHVuIHBlbMOtbiBhcnJpYmEvYWJham8gc2kgcXVpZXJlc1xyXG5cclxuICAgICAgICAvLyBab25hIGRlIHRleHRvXHJcbiAgICAgICAgdGhpcy50ZXh0Qm94VyA9IHRoaXMucG9ydHJhaXRYO1xyXG4gICAgICAgIC8vIHRoaXMudGV4dEJveFcgPSB0aGlzLncgLSAodGhpcy5wb3J0cmFpdEJveFcgKyB0aGlzLnBhZGRpbmcgKiAzKTtcclxuICAgICAgICAvL3RoaXMudGV4dEJveFcgPSBNYXRoLm1heCgxMjAsIHRoaXMudGV4dEJveFcpO1xyXG5cclxuICAgICAgICAvLyBBbmNobyB0b3RhbCBkZWwgYmxvcXVlIChyZXRyYXRvICsgZ2FwICsgdGV4dG8pXHJcbiAgICAgICAgY29uc3QgZ2FwID0gdGhpcy5wYWRkaW5nO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRXID0gdGhpcy5wb3J0cmFpdEJveFcgKyBnYXAgKyB0aGlzLnRleHRCb3hXO1xyXG4gICAgICAgIGNvbnN0IGxlZnQgPSAtY29udGVudFcgLyAyO1xyXG5cclxuICAgICAgICAvLyBQb3NpY2lvbmVzIGNlbnRyYWRhc1xyXG4gICAgICAgIHRoaXMucG9ydHJhaXRYID0gbGVmdCArIHRoaXMucG9ydHJhaXRCb3hXIC8gMjtcclxuICAgICAgICB0aGlzLnRleHRYID0gdGhpcy5wb3J0cmFpdFg7XHJcblxyXG4gICAgICAgIHRoaXMucG9ydHJhaXRZID0gLTY7XHJcblxyXG4gICAgICAgIC8vIFJldHJhdG9cclxuICAgICAgICB0aGlzLnBvcnRyYWl0ID0gc2NlbmUuYWRkLmltYWdlKHRoaXMucG9ydHJhaXRYLCB0aGlzLnBvcnRyYWl0WSwgdGhpcy5kZWZhdWx0UG9ydHJhaXRLZXkgPz8gJ3BvcnRyYWl0QScpXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAgICAgICAuc2V0VmlzaWJsZShmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2ZpdFRvQm94KHRoaXMucG9ydHJhaXQsIHRoaXMucG9ydHJhaXRCb3hXLCB0aGlzLnBvcnRyYWl0Qm94SCwgNik7XHJcblxyXG4gICAgICAgIC8vIEVzY2FsYVxyXG4gICAgICAgIC8vIHRoaXMucG9ydHJhaXQuc2V0RGlzcGxheVNpemUoMTIwLCAxMjApO1xyXG5cclxuICAgICAgICBjb25zdCBuYW1lWSA9IHRoaXMucG9ydHJhaXRZICsgdGhpcy5wb3J0cmFpdEJveEggLyAyICsgMTI7XHJcbiAgICAgICAgLy8gTm9tYnJlXHJcbiAgICAgICAgdGhpcy5uYW1lVGV4dCA9IHNjZW5lLmFkZC50ZXh0KHRoaXMudGV4dFgsIG5hbWVZLCAnRXNwZXJhbmRvLi4uJywge1xyXG4gICAgICAgICAgICAuLi50aGlzLnN0eWxlLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMDAnLFxyXG4gICAgICAgICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgLy8gVGV4dG8gZGUgcmVhZHlcclxuICAgICAgICB0aGlzLnJlYWR5VGV4dCA9IHNjZW5lLmFkZC50ZXh0KHRoaXMudGV4dFgsIDU1LCAn4p2MJywge1xyXG4gICAgICAgICAgICAuLi50aGlzLnN0eWxlLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMDAnLFxyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICAvLyBSb2wgKEhPU1QvSlVHQURPUilcclxuICAgICAgICB0aGlzLnJvbGVUZXh0ID0gc2NlbmUuYWRkLnRleHQodGhpcy50ZXh0WCwgLTU1LCB0aGlzLnRpdGxlLCB7XHJcbiAgICAgICAgICAgIC4uLnRoaXMuc3R5bGUsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzMzMycsXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2xheW91dE5hbWVBbmRSZWFkeSgpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZChbLyp0aGlzLmJnLCovIHRoaXMucm9sZVRleHQsIHRoaXMucG9ydHJhaXQsIHRoaXMubmFtZVRleHQsIHRoaXMucmVhZHlUZXh0XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGV2dWVsdmUgbGEga2V5IGRlbCByZXRyYXRvIHNlZ8O6biBlbCBwZXJzb25hamVcclxuICAgIF9wb3J0cmFpdEtleUZyb21DaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XHJcbiAgICAgICAgaWYgKCFjaGFyYWN0ZXIpIHJldHVybiB0aGlzLmRlZmF1bHRQb3J0cmFpdEtleTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3J0cmFpdEtleXNbY2hhcmFjdGVyXSA/PyB0aGlzLmRlZmF1bHRQb3J0cmFpdEtleTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBanVzdGEgbGEgaW1hZ2VuIGFsIHRhbWHDsW8gZGVsIHJlY3VhZHJvXHJcbiAgICBfZml0VG9Cb3goaW1nLCBib3hXLCBib3hILCBwYWRkaW5nID0gMCwgbW9kZSA9ICdjb250YWluJykge1xyXG4gICAgICAgIGlmICghaW1nPy50ZXh0dXJlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IG1heFcgPSBNYXRoLm1heCgxLCBib3hXIC0gcGFkZGluZyAqIDIpO1xyXG4gICAgICAgIGNvbnN0IG1heEggPSBNYXRoLm1heCgxLCBib3hIIC0gcGFkZGluZyAqIDIpO1xyXG5cclxuICAgICAgICBjb25zdCB0dyA9IGltZy53aWR0aDtcclxuICAgICAgICBjb25zdCB0aCA9IGltZy5oZWlnaHQ7XHJcblxyXG4gICAgICAgIC8vIGNvbnRhaW4gPSBlbmNhamEgc2luIHJlY29ydGFyLCB5IGNvdmVyID0gcmVsbGVuYSByZWNvcnRhbmRvXHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSAobW9kZSA9PT0gJ2NvdmVyJylcclxuICAgICAgICAgICAgPyBNYXRoLm1heChtYXhXIC8gdHcsIG1heEggLyB0aClcclxuICAgICAgICAgICAgOiBNYXRoLm1pbihtYXhXIC8gdHcsIG1heEggLyB0aCk7XHJcblxyXG4gICAgICAgIGltZy5zZXRTY2FsZShzY2FsZSk7XHJcblxyXG4gICAgICAgIGlmIChtb2RlID09PSAnY292ZXInKSB7XHJcbiAgICAgICAgICAgIC8vIHJlY29ydGEgYWwgY2VudHJvIHBhcmEgcXVlIFwicmVsbGVuZVwiXHJcbiAgICAgICAgICAgIGNvbnN0IGNyb3BXID0gbWF4VyAvIHNjYWxlO1xyXG4gICAgICAgICAgICBjb25zdCBjcm9wSCA9IG1heEggLyBzY2FsZTtcclxuICAgICAgICAgICAgaW1nLnNldENyb3AoXHJcbiAgICAgICAgICAgICAgICAodHcgLSBjcm9wVykgLyAyLFxyXG4gICAgICAgICAgICAgICAgKHRoIC0gY3JvcEgpIC8gMixcclxuICAgICAgICAgICAgICAgIGNyb3BXLFxyXG4gICAgICAgICAgICAgICAgY3JvcEhcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbWcuc2V0Q3JvcCgpOyAvLyBsaW1waWEgY3JvcFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDb25maWd1cmEgbGEgdGFyamV0YSBjb24gbG9zIGRhdG9zIGRlbCBqdWdhZG9yXHJcbiAgICBzZXRQbGF5ZXIocGxheWVyKSB7XHJcbiAgICAgICAgLy8gcDogeyB1c2VybmFtZSwgcmVhZHksIGNoYXJhY3RlciwgaXNIb3N0IH1cclxuICAgICAgICBpZiAoIXBsYXllcikge1xyXG4gICAgICAgICAgICB0aGlzLnNldFdhaXRpbmcoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jbGVhckFsZXJ0U3R5bGUoKTtcclxuXHJcbiAgICAgICAgY29uc3QgZW1vamkgPSBwbGF5ZXIucmVhZHkgPyAn4pyFJyA6ICfinYwnO1xyXG4gICAgICAgIGNvbnN0IHJvbGUgPSBwbGF5ZXIuaXNIb3N0ID8gJ0hvc3QnIDogJ0p1Z2Fkb3InO1xyXG5cclxuICAgICAgICB0aGlzLnJvbGVUZXh0LnNldFRleHQodGhpcy50aXRsZSB8fCAocGxheWVyLmlzSG9zdCA/ICdIb3N0JyA6ICdSaXZhbCcpKTtcclxuICAgICAgICB0aGlzLm5hbWVUZXh0LnNldFRleHQocGxheWVyLnVzZXJuYW1lID8/ICdKdWdhZG9yJyk7XHJcbiAgICAgICAgdGhpcy5yZWFkeVRleHQuc2V0VGV4dChlbW9qaSk7XHJcbiAgICAgICAgdGhpcy5fbGF5b3V0TmFtZUFuZFJlYWR5KCk7XHJcblxyXG4gICAgICAgIC8vIHJldHJhdG9cclxuICAgICAgICBjb25zdCBwb3J0cmFpdEtleSA9IHRoaXMucG9ydHJhaXRLZXlzPy5bcGxheWVyLmNoYXJhY3Rlcl0gPz8gbnVsbDtcclxuICAgICAgICBpZiAocG9ydHJhaXRLZXkpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3J0cmFpdC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLnBvcnRyYWl0LnNldFRleHR1cmUocG9ydHJhaXRLZXkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZml0VG9Cb3godGhpcy5wb3J0cmFpdCwgdGhpcy5wb3J0cmFpdEJveFcsIHRoaXMucG9ydHJhaXRCb3hILCA2LCAnY29udGFpbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wb3J0cmFpdC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29uZmlndXJhIGxhIHRhcmpldGEgZW4gZXN0YWRvIGRlIGVzcGVyYW5kbyBqdWdhZG9yXHJcbiAgICBzZXRXYWl0aW5nKCkge1xyXG4gICAgICAgIHRoaXMucm9sZVRleHQuc2V0VGV4dCh0aGlzLnRpdGxlIHx8ICcnKTtcclxuICAgICAgICB0aGlzLm5hbWVUZXh0LnNldFRleHQoJ0VzcGVyYW5kby4uLicpO1xyXG4gICAgICAgIHRoaXMucmVhZHlUZXh0LnNldFRleHQoJ+KdjCcpO1xyXG4gICAgICAgIHRoaXMucG9ydHJhaXQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5jbGVhckFsZXJ0U3R5bGUoKTtcclxuICAgICAgICB0aGlzLl9sYXlvdXROYW1lQW5kUmVhZHkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNdWVzdHJhIHVuIG1lbnNhamUgZGUgcXVlIGVsIGp1Z2Fkb3IgaGEgc2FsaWRvXHJcbiAgICBzaG93TGVmdE1lc3NhZ2UodXNlcm5hbWUpIHtcclxuICAgICAgICB0aGlzLnJvbGVUZXh0LnNldFRleHQoJ1JJVkFMJyk7XHJcbiAgICAgICAgdGhpcy5uYW1lVGV4dC5zZXRUZXh0KGDCoSR7dXNlcm5hbWV9IGhhIHNhbGlkbyFgKTtcclxuICAgICAgICB0aGlzLnJlYWR5VGV4dC5zZXRUZXh0KCfinYwnKTtcclxuXHJcbiAgICAgICAgdGhpcy5uYW1lVGV4dC5zZXRDb2xvcignI2IwMDAwMCcpO1xyXG4gICAgICAgIHRoaXMucmVhZHlUZXh0LnNldENvbG9yKCcjYjAwMDAwJyk7XHJcblxyXG4gICAgICAgIHRoaXMucG9ydHJhaXQ/LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuX2xheW91dE5hbWVBbmRSZWFkeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExpbXBpYSBlbCBlc3RpbG8gZGUgYWxlcnRhXHJcbiAgICBjbGVhckFsZXJ0U3R5bGUoKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lVGV4dC5zZXRDb2xvcignIzAwMCcpO1xyXG4gICAgICAgIHRoaXMucmVhZHlUZXh0LnNldENvbG9yKCcjMDAwJyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2xheW91dE5hbWVBbmRSZWFkeSgpIHtcclxuICAgICAgICBjb25zdCBnYXAgPSA2O1xyXG4gICAgICAgIGNvbnN0IG5hbWVXaWR0aCA9IHRoaXMubmFtZVRleHQud2lkdGg7XHJcblxyXG4gICAgICAgIHRoaXMubmFtZVRleHQuc2V0WCh0aGlzLnRleHRYKTtcclxuICAgICAgICB0aGlzLnJlYWR5VGV4dC5zZXRPcmlnaW4oMCwgMC41KTtcclxuICAgICAgICB0aGlzLnJlYWR5VGV4dC5zZXRQYWRkaW5nKDAsIDAsIDAsIDEpO1xyXG4gICAgICAgIHRoaXMucmVhZHlUZXh0LnNldFBvc2l0aW9uKHRoaXMubmFtZVRleHQueCArIG5hbWVXaWR0aCAvIDIgKyBnYXAsIHRoaXMubmFtZVRleHQueSAtIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERlc3RydXllIGxhIFVJXHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyPy5kZXN0cm95KHRydWUpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcclxuICAgIH1cclxufVxyXG4iLCIvLyBQYW50YWxsYSBkZSBMb2JieVxyXG4vLyAocGVybWl0ZSBhbCBob3N0IGVsZWdpciBlc2NlbmFyaW8pXHJcbmltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgY3JlYXRlVUlCdXR0b24sIGNyZWF0ZUljb25CdXR0b24gfSBmcm9tICcuLi9VSS9CdXR0b25zLmpzJztcclxuaW1wb3J0IFNjZW5hcmlvUGlja2VyVUkgZnJvbSAnLi4vVUkvU2NlbmFyaW9QaWNrZXIuanMnO1xyXG5pbXBvcnQgUGxheWVyQ2FyZFVJIGZyb20gJy4uL1VJL1BsYXllckNhcmQuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIExvYmJ5X1NjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdMb2JieV9TY2VuZScpO1xyXG5cclxuICAgICAgICB0aGlzLmlzUGxheWVyUmVhZHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxvYmJ5UGxheWVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0xvYmJ5VXBkYXRlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy53cyA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdChkYXRhKSB7XHJcbiAgICAgICAgLy8gc2UgcmVjdXBlcmEgZWwgbW9kbywgZWwgcm9sIHkgbG9zIGRhdG9zIGRlbCBqdWdhZG9yXHJcbiAgICAgICAgdGhpcy5tb2RlID0gZGF0YS5tb2RlO1xyXG4gICAgICAgIHRoaXMuaXNIb3N0ID0gZmFsc2U7ICAgIC8vIHNlIGFjdHVhbGl6YSBhbCByZWNpYmlyIGxvYmJ5X3VwZGF0ZVxyXG4gICAgICAgIHRoaXMucGxheWVyMSA9IGRhdGEucGxheWVyMTtcclxuICAgICAgICB0aGlzLnBsYXllcjIgPSBkYXRhLnBsYXllcjI7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNjZW5hcmlvID0gZGF0YS5zZWxlY3RlZFNjZW5hcmlvO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnTG9iYnkgaW5pY2lhZG8gY29tbzonLCB0aGlzLmlzSG9zdCA/ICdIb3N0JyA6ICdJbnZpdGFkbycpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZWxvYWQoKSB7XHJcbiAgICAgICAgLy8gaW3DoWdlbmVzLCBmb25kbyB5IHVpXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblZvbHZlcicsICdBU1NFVFMvVUkvQk9UT05FUy9WT0xWRVIucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdmb25kbycsICdBU1NFVFMvRk9ORE9TL0ZPTkRPX0JBU0UucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdtYXJjbycsICdBU1NFVFMvVUkvTUFSQ09TL1ZBQ0lPUy9NQVJDT1NfRVNDRU5BUklPLnBuZycpXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblNpbXBsZScsICdBU1NFVFMvVUkvQk9UT05FUy9CT1RPTl9CQVNFX1NJTlNFTEVDQ0lPTkFSLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYm90b25TaW1wbGVTZWxlY2Npb25hZG8nLCAnQVNTRVRTL1VJL0JPVE9ORVMvQk9UT05fQkFTRS5wbmcnKTtcclxuXHJcbiAgICAgICAgLy8gZXNjZW5hcmlvc1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnR3ltJywgJ0FTU0VUUy9GT05ET1MvR0lNTkFTSU8ucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdQbGF5YScsICdBU1NFVFMvRk9ORE9TL1BMQVlBLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnSmFyZGluJywgJ0FTU0VUUy9GT05ET1MvSkFSRElOLnBuZycpO1xyXG5cclxuICAgICAgICAvLyBib3RvbmVzXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblNpblNlbGVjY2lvbmFyJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0JPVE9OX0JBU0VfU0lOU0VMRUNDSU9OQVIucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblNlbGVjY2lvbmFkbycsICdBU1NFVFMvVUkvQk9UT05FUy9CT1RPTl9CQVNFLnBuZycpO1xyXG5cclxuICAgICAgICAvLyByZXRyYXRvcyBkZSBwZXJzb25hamVzXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdwb3J0cmFpdEEnLCAnQVNTRVRTL1VJL01BUkNPUy9QRVJTT05BSkVTJTIwRU4lMjBNQVJDT1MvUEVSU09OQUpFX0EucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdwb3J0cmFpdEInLCAnQVNTRVRTL1VJL01BUkNPUy9QRVJTT05BSkVTJTIwRU4lMjBNQVJDT1MvUEVSU09OQUpFX0IucG5nJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdwb3J0cmFpdEMnLCAnQVNTRVRTL1VJL01BUkNPUy9QRVJTT05BSkVTJTIwRU4lMjBNQVJDT1MvUEVSU09OQUpFX0MucG5nJyk7XHJcblxyXG4gICAgICAgIC8vIHNvbmlkb1xyXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc29uaWRvQ2xpY2snLCAnQVNTRVRTL1NPTklETy9Tb25pZG9Cb3Rvbi5tcDMnKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLmdhbWUuZ2xvYmFscy5kZWZhdWx0VGV4dFN0eWxlO1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGQuaW1hZ2UoMCwgMCwgJ2ZvbmRvJykuc2V0T3JpZ2luKDApLnNldERlcHRoKC0xKTtcclxuXHJcbiAgICAgICAgLy8gVMOtdHVsbyBhcnJpYmFcclxuICAgICAgICB0aGlzLmFkZC50ZXh0KHdpZHRoIC8gMiwgaGVpZ2h0ICogMC4wOSwgJ0xvYmJ5Jywge1xyXG4gICAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgICAgZm9udFNpemU6ICczOHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjNWYwMDAwZmYnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XHJcblxyXG4gICAgICAgIC8vLy8gWk9OQSBTVVBFUklPUjogRVNDRU5BUklPIC8vLy9cclxuICAgICAgICBjb25zdCBwcmV2aWV3WCA9IHdpZHRoICogMC4zMztcclxuICAgICAgICBjb25zdCBwcmV2aWV3WSA9IGhlaWdodCAqIDAuMzQ7XHJcbiAgICAgICAgY29uc3QgcHJldmlld1cgPSB3aWR0aCAqIDAuNDI7XHJcbiAgICAgICAgY29uc3QgcHJldmlld0ggPSBoZWlnaHQgKiAwLjMwO1xyXG5cclxuICAgICAgICAvLyBNYXJjbyBkZWwgZXNjZW5hcmlvXHJcbiAgICAgICAgY29uc3Qgc2NlbmFyaW9GcmFtZSA9IHRoaXMuYWRkLmltYWdlKHByZXZpZXdYLCBwcmV2aWV3WSwgJ21hcmNvJykuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgICAgc2NlbmFyaW9GcmFtZS50ZXh0dXJlLnNldEZpbHRlcihQaGFzZXIuVGV4dHVyZXMuRmlsdGVyTW9kZS5ORUFSRVNUKTtcclxuICAgICAgICBzY2VuYXJpb0ZyYW1lLnNldERpc3BsYXlTaXplKHByZXZpZXdXLCBwcmV2aWV3SCk7XHJcblxyXG4gICAgICAgIC8vIFNjZW5hcmlvUGlja2VyLCBwcmV2aWV3IGVuY2ltYSBkZWwgbWFyY28gYSBsYSBpenEgKyBib3RvbmVzIGEgbGEgZGNoYVxyXG4gICAgICAgIHRoaXMuc2NlbmFyaW9VSSA9IG5ldyBTY2VuYXJpb1BpY2tlclVJKHRoaXMsIHtcclxuICAgICAgICAgICAgc3R5bGUsXHJcbiAgICAgICAgICAgIHNjZW5hcmlvczogWydHeW0nLCAnUGxheWEnLCAnSmFyZGluJ10sXHJcbiAgICAgICAgICAgIGRlZmF1bHRTY2VuYXJpbzogdGhpcy5zZWxlY3RlZFNjZW5hcmlvID8/ICdHeW0nLFxyXG4gICAgICAgICAgICBidXR0b25UZXh0dXJlczogeyBub3JtYWw6ICdib3RvblNpblNlbGVjY2lvbmFyJywgc2VsZWN0ZWQ6ICdib3RvblNlbGVjY2lvbmFkbycgfSxcclxuXHJcbiAgICAgICAgICAgIHByZXZpZXdYLFxyXG4gICAgICAgICAgICBwcmV2aWV3WSxcclxuICAgICAgICAgICAgcHJldmlld1csXHJcbiAgICAgICAgICAgIHByZXZpZXdILFxyXG5cclxuICAgICAgICAgICAgYnV0dG9uc1g6IHdpZHRoICogMC43MixcclxuICAgICAgICAgICAgYnV0dG9uc1k6IHByZXZpZXdZIC0gcHJldmlld0ggKiAwLjI4LFxyXG4gICAgICAgICAgICBidXR0b25zU3BhY2luZ1k6IHByZXZpZXdIICogMC4zNCxcclxuICAgICAgICAgICAgYnV0dG9uc1NjYWxlOiAxLjU1LFxyXG5cclxuICAgICAgICAgICAgb25TZWxlY3Q6IChzY2VuYXJpb05hbWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbmRXUyh7IHR5cGU6ICdzZWxlY3Rfc2NlbmFyaW8nLCBzZWxlY3RlZFNjZW5hcmlvOiBzY2VuYXJpb05hbWUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8vLyBaT05BIElORkVSSU9SOiBKVUdBRE9SRVMgLy8vLy9cclxuICAgICAgICBjb25zdCBwbGF5ZXJzQ2VudGVyWCA9ICh3aWR0aCAvIDIpIC0gMzA7XHJcbiAgICAgICAgdGhpcy5hZGQudGV4dChwbGF5ZXJzQ2VudGVyWCwgaGVpZ2h0ICogMC42MSwgJ0VzdGFkbyBkZSBsb3MganVnYWRvcmVzJywge1xyXG4gICAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyMnB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjMDAwJyxcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9ydHJhaXRLZXlzID0ge1xyXG4gICAgICAgICAgICBjaGFyYWN0ZXJBOiAncG9ydHJhaXRBJyxcclxuICAgICAgICAgICAgY2hhcmFjdGVyQjogJ3BvcnRyYWl0QicsXHJcbiAgICAgICAgICAgIGNoYXJhY3RlckM6ICdwb3J0cmFpdEMnLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGNhcmRzWSA9IGhlaWdodCAqIDAuNzY7XHJcbiAgICAgICAgY29uc3QgY2FyZFdpZHRoID0gd2lkdGggKiAwLjMwO1xyXG4gICAgICAgIGNvbnN0IGNhcmRzR2FwID0gd2lkdGggKiAwLjA2O1xyXG4gICAgICAgIGNvbnN0IGNhcmRzVG90YWxXaWR0aCA9IGNhcmRXaWR0aCAqIDIgKyBjYXJkc0dhcDtcclxuICAgICAgICBjb25zdCBob3N0Q2FyZFggPSBwbGF5ZXJzQ2VudGVyWCAtIGNhcmRzVG90YWxXaWR0aCAvIDIgKyBjYXJkV2lkdGggLyAyIC0gMzA7XHJcbiAgICAgICAgY29uc3QgZ3Vlc3RDYXJkWCA9IGhvc3RDYXJkWCArIGNhcmRXaWR0aCArIGNhcmRzR2FwO1xyXG5cclxuICAgICAgICB0aGlzLmhvc3RDYXJkID0gbmV3IFBsYXllckNhcmRVSSh0aGlzLCBob3N0Q2FyZFgsIGNhcmRzWSwge1xyXG4gICAgICAgICAgICBzdHlsZSxcclxuICAgICAgICAgICAgdGl0bGU6ICdIb3N0JyxcclxuICAgICAgICAgICAgcG9ydHJhaXRLZXlzLFxyXG4gICAgICAgICAgICBkZWZhdWx0UG9ydHJhaXRLZXk6IG51bGwsXHJcbiAgICAgICAgICAgIHc6IGNhcmRXaWR0aCxcclxuICAgICAgICAgICAgaDogaGVpZ2h0ICogMC4xOCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5ndWVzdENhcmQgPSBuZXcgUGxheWVyQ2FyZFVJKHRoaXMsIGd1ZXN0Q2FyZFgsIGNhcmRzWSwge1xyXG4gICAgICAgICAgICBzdHlsZSxcclxuICAgICAgICAgICAgdGl0bGU6ICdSaXZhbCcsXHJcbiAgICAgICAgICAgIHBvcnRyYWl0S2V5cyxcclxuICAgICAgICAgICAgZGVmYXVsdFBvcnRyYWl0S2V5OiBudWxsLFxyXG4gICAgICAgICAgICB3OiBjYXJkV2lkdGgsXHJcbiAgICAgICAgICAgIGg6IGhlaWdodCAqIDAuMTgsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vLy8vIEJPVE9ORVMgLy8vLy9cclxuICAgICAgICB0aGlzLmJ0bkxpc3RvID0gY3JlYXRlVUlCdXR0b24odGhpcywge1xyXG4gICAgICAgICAgICB4OiBwbGF5ZXJzQ2VudGVyWCxcclxuICAgICAgICAgICAgeTogaGVpZ2h0ICogMC45MixcclxuICAgICAgICAgICAgbGFiZWw6ICfCv0xpc3RvPycsXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMudG9nZ2xlUmVhZHkoKSxcclxuICAgICAgICAgICAgdGV4dHVyZU5vcm1hbDogJ2JvdG9uU2ltcGxlJyxcclxuICAgICAgICAgICAgdGV4dHVyZUhvdmVyOiAnYm90b25TaW1wbGVTZWxlY2Npb25hZG8nLFxyXG4gICAgICAgICAgICB0ZXh0U3R5bGU6IHsgLi4uc3R5bGUsIGZvbnRTaXplOiAnMjJweCcsIGNvbG9yOiAnIzAwMCcgfSxcclxuICAgICAgICAgICAgY2xpY2tTb3VuZEtleTogJ3Nvbmlkb0NsaWNrJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ0bkxpc3RvLmJ1dHRvbi5kaXNhYmxlSW50ZXJhY3RpdmUoKTtcclxuICAgICAgICB0aGlzLmJ0bkxpc3RvLmJ1dHRvbi5zZXRBbHBoYSgwLjcpO1xyXG5cclxuICAgICAgICB0aGlzLmJ0blZvbHZlciA9IGNyZWF0ZUljb25CdXR0b24odGhpcywge1xyXG4gICAgICAgICAgICB4OiB3aWR0aCAqIDAuMDYsXHJcbiAgICAgICAgICAgIHk6IGhlaWdodCAqIDAuMDgsXHJcbiAgICAgICAgICAgIHRleHR1cmU6ICdib3RvblZvbHZlcicsXHJcbiAgICAgICAgICAgIHNjYWxlOiAxLFxyXG4gICAgICAgICAgICBob3ZlclNjYWxlOiAxLjEsXHJcbiAgICAgICAgICAgIGNsaWNrU291bmRLZXk6ICdzb25pZG9DbGljaycsXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQmFjaygpXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAvLyAtLS0tLSBDT05FWEnDk04gQSBXRUJTT0NLRVRTIC0tLS0tXHJcbiAgICAgICAgdGhpcy53cyA9IHRoaXMucmVnaXN0cnkuZ2V0KCd3cycpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMud3MgfHwgdGhpcy53cy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0VEIHx8IHRoaXMud3MucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NJTkcpIHtcclxuICAgICAgICAgICAgdGhpcy53cyA9IG5ldyBXZWJTb2NrZXQodGhpcy5fZ2V0V3NVcmwoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0cnkuc2V0KCd3cycsIHRoaXMud3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g4oCcUmVzZXRlYeKAnSBoYW5kbGVycyBkZWwgd3NcclxuICAgICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbXNnO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbXNnID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignV1MgbWVuc2FqZSBuby1KU09OOicsIGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVdTTWVzc2FnZShtc2cpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGVycm9yZXMgZGVsIHdzXHJcbiAgICAgICAgdGhpcy53cy5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1dTXSBlcnJvcicsIGUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGNpZXJyZSBkZWwgd3NcclxuICAgICAgICB0aGlzLndzLm9uY2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbV1NdIGNvbmV4acOzbiBjZXJyYWRhJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gc2UgZW52w61hIGpvaW5fbG9iYnkgY3VhbmRvIGVsIHNvY2tldCBlc3TDqSBPUEVOXHJcbiAgICAgICAgY29uc3Qgam9pblBheWxvYWQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdqb2luX2xvYmJ5JyxcclxuICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMucmVnaXN0cnkuZ2V0KCd1c2VybmFtZScpLFxyXG4gICAgICAgICAgICBjaGFyYWN0ZXI6IHRoaXMucmVnaXN0cnkuZ2V0KCdteUNoYXJhY3RlcicpLFxyXG4gICAgICAgICAgICBzZWxlY3RlZFNjZW5hcmlvOiB0aGlzLnNlbGVjdGVkU2NlbmFyaW9cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBzaSB5YSBlc3TDoSBhYmllcnRvLCBzZSBlbnbDrWEgeWEsIHNpIG5vLCBlc3BlcmEgYSBvbm9wZW5cclxuICAgICAgICBpZiAodGhpcy53cy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgICAgICB0aGlzLmJ0bkxpc3RvPy5idXR0b24uc2V0SW50ZXJhY3RpdmU/Lih7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbmRXUyh7IHR5cGU6ICdwbGF5ZXJfcmVhZHknLCBpc1JlYWR5OiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgdGhpcy5fc2VuZFdTKGpvaW5QYXlsb2FkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLndzLm9ub3BlbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbV1NdIGNvbmVjdGFkbycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idG5MaXN0bz8uYnV0dG9uLnNldEludGVyYWN0aXZlPy4oeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VuZFdTKHsgdHlwZTogJ3BsYXllcl9yZWFkeScsIGlzUmVhZHk6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VuZFdTKGpvaW5QYXlsb2FkKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBsaW1waWV6YSBhbCBzYWxpciBkZWwgbG9iYnlcclxuICAgICAgICB0aGlzLmV2ZW50cy5vbmNlKFBoYXNlci5TY2VuZXMuRXZlbnRzLlNIVVRET1dOLCB0aGlzLnNodXRkb3duLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50cy5vbmNlKFBoYXNlci5TY2VuZXMuRXZlbnRzLkRFU1RST1ksIHRoaXMuc2h1dGRvd24sIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbWJpYSBlbCBlc3RhZG8gUmVhZHkvTm90UmVhZHkgZGVsIGp1Z2Fkb3JcclxuICAgIHRvZ2dsZVJlYWR5KCkge1xyXG4gICAgICAgIHRoaXMuaXNQbGF5ZXJSZWFkeSA9ICF0aGlzLmlzUGxheWVyUmVhZHk7XHJcblxyXG4gICAgICAgIC8vIHNlIGVudsOtYSBlbCBlc3RhZG8gYWwgc2Vydmlkb3IgdsOtYSBXZWJTb2NrZXRcclxuICAgICAgICB0aGlzLl9zZW5kV1MoeyB0eXBlOiAncGxheWVyX3JlYWR5JywgaXNSZWFkeTogdGhpcy5pc1BsYXllclJlYWR5IH0pO1xyXG5cclxuICAgICAgICAvLyBzZSBhY3R1YWxpemEgZWwgYm90w7NuXHJcbiAgICAgICAgY29uc3QgbnVldm9UZXh0b0JvdG9uID0gdGhpcy5pc1BsYXllclJlYWR5ID8gJ0NhbmNlbGFyJyA6ICfCv0xpc3RvPyc7XHJcbiAgICAgICAgdGhpcy5idG5MaXN0by50ZXh0LnNldFRleHQobnVldm9UZXh0b0JvdG9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5idG5Wb2x2ZXIuc2V0QWxwaGEodGhpcy5pc1BsYXllclJlYWR5ID8gMC4zIDogMSk7XHJcbiAgICAgICAgdGhpcy5pc1BsYXllclJlYWR5ID8gdGhpcy5idG5Wb2x2ZXIuZGlzYWJsZUludGVyYWN0aXZlKCkgOiB0aGlzLmJ0blZvbHZlci5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29udHJvbGEgZWwgYm90w7NuIGRlIHZvbHZlciBhdHLDoXNcclxuICAgIGhhbmRsZUJhY2soKSB7XHJcbiAgICAgICAgLy8gYXZpc2EgcXVlIHlhIG5vIGVzdMOhIGxpc3RvXHJcbiAgICAgICAgdGhpcy5fc2VuZFdTKHsgdHlwZTogJ3BsYXllcl9yZWFkeScsIGlzUmVhZHk6IGZhbHNlIH0pO1xyXG5cclxuICAgICAgICAvLyBhdmlzYSBxdWUgYWJhbmRvbmEgZWwgbG9iYnlcclxuICAgICAgICB0aGlzLl9zZW5kV1MoeyB0eXBlOiAnbGVhdmVfbG9iYnknIH0pO1xyXG5cclxuICAgICAgICAvLyBjaWVycmEgZWwgd3MgeSBsaW1waWEgZWwgcmVnaXN0cnlcclxuICAgICAgICBpZiAodGhpcy53cykge1xyXG4gICAgICAgICAgICB0cnkgeyB0aGlzLndzLmNsb3NlKCk7IH0gY2F0Y2ggeyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVnaXN0cnkucmVtb3ZlKCd3cycpO1xyXG5cclxuICAgICAgICAvLyBuYXZlZ2Egc2Vnw7puIGVsIG1vZG9cclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnb25saW5lJykge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdTZWxlY3RQbGF5ZXJfU2NlbmUnLCB7IG1vZGU6ICdvbmxpbmUnIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmYWxsYmFja1xyXG4gICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ1NlbGVjdFBsYXllcl9TY2VuZScsIHsgbW9kZTogJ2xvY2FsJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gTGltcGlhIGFsIHNhbGlyIGRlbCBsb2JieVxyXG4gICAgc2h1dGRvd24oKSB7XHJcbiAgICAgICAgLy8gZGVzdHJ1eWUgVUlzXHJcbiAgICAgICAgdGhpcy5zY2VuYXJpb1VJPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5zY2VuYXJpb1VJID0gbnVsbDtcclxuICAgICAgICB0aGlzLmhvc3RDYXJkPy5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5ob3N0Q2FyZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ndWVzdENhcmQ/LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLmd1ZXN0Q2FyZCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIGxpbXBpYSBoYW5kbGVycyBkZWwgd3NcclxuICAgICAgICBpZiAodGhpcy53cykge1xyXG4gICAgICAgICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMud3Mub25lcnJvciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMud3Mub25jbG9zZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMud3Mub25vcGVuID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29uc3RydXllIGxhIFVSTCBkZWwgV2ViU29ja2V0IHNlZ8O6biBlbCBwcm90b2NvbG8geSBob3N0IGFjdHVhbGVzXHJcbiAgICBfZ2V0V3NVcmwoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonID8gJ3dzcycgOiAnd3MnO1xyXG4gICAgICAgIC8vIGZyb250ZW5kIGVuIDMwMDAsIGJhY2tlbmQgZW4gODA4MFxyXG4gICAgICAgIGNvbnN0IGJhY2tlbmRQb3J0ID0gKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID09PSAnMzAwMCcpID8gJzgwODAnIDogd2luZG93LmxvY2F0aW9uLnBvcnQ7XHJcblxyXG4gICAgICAgIHJldHVybiBgJHtwcm90b2NvbH06Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZX06JHtiYWNrZW5kUG9ydH1gO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBFbnbDrWEgdW4gb2JqZXRvIEpTT04gdsOtYSBXZWJTb2NrZXRcclxuICAgIF9zZW5kV1Mob2JqKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLndzIHx8IHRoaXMud3MucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHJldHVybjtcclxuICAgICAgICB0aGlzLndzLnNlbmQoSlNPTi5zdHJpbmdpZnkob2JqKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29udHJvbGEgbG9zIG1lbnNhamVzIGVudHJhbnRlcyBkZWwgV2ViU29ja2V0XHJcbiAgICBfaGFuZGxlV1NNZXNzYWdlKG1zZykge1xyXG4gICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHtcclxuICAgICAgICAgICAgLy8gYWN0dWFsaXphY2nDs24gZGVsIGVzdGFkbyBkZWwgbG9iYnlcclxuICAgICAgICAgICAgY2FzZSAnbG9iYnlfdXBkYXRlJzoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGxheWVycyA9IG1zZy5wbGF5ZXJzID8/IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2JieVBsYXllcnMgPSBwbGF5ZXJzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd2luZ0FiYW5kb25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0xvYmJ5VXBkYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFNjZW5hcmlvOiBtc2cuc2VsZWN0ZWRTY2VuYXJpb1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2FwcGx5TG9iYnlVcGRhdGUocGxheWVycywgbXNnLnNlbGVjdGVkU2NlbmFyaW8pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGluaWNpbyBkZSBsYSBwYXJ0aWRhXHJcbiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0X2dhbWUnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGxheWVycyA9IG1zZz8ucGxheWVycyA/PyB0aGlzLmxvYmJ5UGxheWVycztcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZFNjZW5hcmlvID0gbXNnPy5zZWxlY3RlZFNjZW5hcmlvID8/IHRoaXMuc2VsZWN0ZWRTY2VuYXJpbyA/PyAnR3ltJztcbiAgICAgICAgICAgICAgICBjb25zdCBzZWVkID0gbXNnPy5zZWVkID8/IERhdGUubm93KCkudG9TdHJpbmcoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGhvc3QgPSBwbGF5ZXJzLmZpbmQocCA9PiBwLmlzSG9zdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3Vlc3QgPSBwbGF5ZXJzLmZpbmQocCA9PiAhcC5pc0hvc3QpO1xuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWhvc3QgfHwgIWd1ZXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTG9iYnkgc2luIGp1Z2Fkb3JlcyBsaXN0b3MnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGxheWVyMSA9IHsgbmFtZTogaG9zdC51c2VybmFtZSwgY2hhcmFjdGVyOiBob3N0LmNoYXJhY3RlciB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGxheWVyMiA9IHsgbmFtZTogZ3Vlc3QudXNlcm5hbWUsIGNoYXJhY3RlcjogZ3Vlc3QuY2hhcmFjdGVyIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnR2FtZU9ubGluZV9TY2VuZScsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ29ubGluZScsXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcjEsXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcjIsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU2NlbmFyaW8sXG4gICAgICAgICAgICAgICAgICAgIHNlZWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxyXG4gICAgICAgICAgICAvLyB1biBqdWdhZG9yIGhhIGFiYW5kb25hZG8gZWwgbG9iYnlcclxuICAgICAgICAgICAgY2FzZSAncGxheWVyX2FiYW5kb25lZCc6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd2luZ0FiYW5kb25FcnJvciA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEVsIHVzdWFyaW8gJHttc2cudXNlcm5hbWV9IGhhIHNhbGlkbyBkZWwgbG9iYnlgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzZSBwaW50YSBlbCBhdmlzbyBlbiBsYSB0YXJqZXRhIGRlbCByaXZhbFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ndWVzdENhcmQ/LnNob3dMZWZ0TWVzc2FnZT8uKG1zZy51c2VybmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDIwMDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dpbmdBYmFuZG9uRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nTG9iYnlVcGRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwbGF5ZXJzLCBzZWxlY3RlZFNjZW5hcmlvIH0gPSB0aGlzLnBlbmRpbmdMb2JieVVwZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nTG9iYnlVcGRhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBseUxvYmJ5VXBkYXRlKHBsYXllcnMsIHNlbGVjdGVkU2NlbmFyaW8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2UgcXVpdGEgZWwgZXN0aWxvIHJvam9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmd1ZXN0Q2FyZD8uY2xlYXJBbGVydFN0eWxlPy4oKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IGRlbCBib3TDs24gTGlzdG9cclxuICAgICAgICAgICAgICAgIHRoaXMuaXNQbGF5ZXJSZWFkeSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ0bkxpc3RvPy5zZXRMYWJlbCkgdGhpcy5idG5MaXN0by5zZXRMYWJlbCgnwr9MaXN0bz8nKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYnRuTGlzdG8/LnRleHQpIHRoaXMuYnRuTGlzdG8udGV4dC5zZXRUZXh0KCfCv0xpc3RvPycpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNlIHJlLWhhYmlsaXRhIHZvbHZlclxyXG4gICAgICAgICAgICAgICAgdGhpcy5idG5Wb2x2ZXIuc2V0QWxwaGEoMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ0blZvbHZlci5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIG1lbnNhamVzIGRlIGVycm9yXHJcbiAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tXUyBlcnJvcl0nLCBtc2cubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIC8vIHBhcmEgZGVwdXJhclxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tXU10gbXNnIGRlc2Nvbm9jaWRvJywgbXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfYXBwbHlMb2JieVVwZGF0ZShwbGF5ZXJzLCBzZWxlY3RlZFNjZW5hcmlvKSB7XHJcbiAgICAgICAgLy8gZXNjZW5hcmlvICh2aWVuZSBkZWwgc2Vydmlkb3IpXHJcbiAgICAgICAgaWYgKHNlbGVjdGVkU2NlbmFyaW8pIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNjZW5hcmlvID0gc2VsZWN0ZWRTY2VuYXJpbztcclxuICAgICAgICAgICAgdGhpcy5zY2VuYXJpb1VJPy5zZXRTY2VuYXJpbyh0aGlzLnNlbGVjdGVkU2NlbmFyaW8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaG9zdCA9IHBsYXllcnMuZmluZChwID0+IHAuaXNIb3N0KSA/PyBudWxsO1xyXG4gICAgICAgIGNvbnN0IGd1ZXN0ID0gcGxheWVycy5maW5kKHAgPT4gIXAuaXNIb3N0KSA/PyBudWxsO1xyXG5cclxuICAgICAgICAvLyBob3N0XHJcbiAgICAgICAgY29uc3QgbXlVc2VybmFtZSA9IHRoaXMucmVnaXN0cnkuZ2V0KCd1c2VybmFtZScpO1xyXG4gICAgICAgIGNvbnN0IG5ld0lzSG9zdCA9ICEhKGhvc3QgJiYgaG9zdC51c2VybmFtZSA9PT0gbXlVc2VybmFtZSk7XHJcbiAgICAgICAgaWYgKG5ld0lzSG9zdCAhPT0gdGhpcy5pc0hvc3QpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobmV3SXNIb3N0XHJcbiAgICAgICAgICAgICAgICA/IGBbTE9CQlldIEFob3JhIGVyZXMgZWwgSE9TVCAoJHtteVVzZXJuYW1lfSlgXHJcbiAgICAgICAgICAgICAgICA6IGBbTE9CQlldIFlhIE5PIGVyZXMgZWwgaG9zdCAoaG9zdCBhY3R1YWw6ICR7aG9zdD8udXNlcm5hbWUgPz8gJ+KAlCd9KWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaXNIb3N0ID0gbmV3SXNIb3N0O1xyXG4gICAgICAgIHRoaXMuc2NlbmFyaW9VST8uc2V0SXNIb3N0KHRoaXMuaXNIb3N0KTtcclxuXHJcbiAgICAgICAgLy8gVGFyamV0YXNcclxuICAgICAgICB0aGlzLmhvc3RDYXJkPy5zZXRQbGF5ZXIoaG9zdCA/IHsgLi4uaG9zdCwgaXNIb3N0OiB0cnVlIH0gOiBudWxsKTtcclxuICAgICAgICB0aGlzLmd1ZXN0Q2FyZD8uc2V0UGxheWVyKGd1ZXN0ID8geyAuLi5ndWVzdCwgaXNIb3N0OiBmYWxzZSB9IDogbnVsbCk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy9QYW50YWxsYSBkZSBMb2dnaW5nXG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBjcmVhdGVVSUJ1dHRvbiwgY3JlYXRlSWNvbkJ1dHRvbiB9IGZyb20gJy4uL1VJL0J1dHRvbnMuanMnO1xuaW1wb3J0IHsgZmxhdE1hcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBjbGFzcyBMb2dnaW5nX1NjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ0xvZ2dpbmdfU2NlbmUnKTtcbiAgICAgICAgdGhpcy5pc1BsYXllclJlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYXBpVXJsID0gJy9hcGknO1xuICAgICAgICB0aGlzLmlzUmVnaXN0ZXJpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0KGRhdGEpIHtcbiAgICAgICAgY29uc3Qgc2F2ZWROYW1lID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndm9sZXlfdXNlcm5hbWUnKTtcbiAgICAgICAgY29uc3Qgc2F2ZWRQYXNzID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndm9sZXlfcGFzc3dvcmQnKTsgLy8gR3VhcmRhIGxhIHBhc3MgKG8gdW4gdG9rZW4pIHBhcmEgcmUtbG9ndWVhclxuXG4gICAgICAgIGlmIChzYXZlZE5hbWUgJiYgc2F2ZWRQYXNzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5hcGlVcmx9L2xvZ2luYCwge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWU6IHNhdmVkTmFtZSwgcGFzc3dvcmQ6IHNhdmVkUGFzcyB9KVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZSBsaW1waWFuIGxhcyBjcmVkZW5jaWFsZXMgaW52w6FsaWRhc1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd2b2xleV91c2VybmFtZScpO1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd2b2xleV9wYXNzd29yZCcpO1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd2b2xleV9zZXNzaW9uX3Rva2VuJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZXNEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0cnkuc2V0KCd1c2VybmFtZScsIHJlc0RhdGEudXNlcm5hbWUpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMucmVnaXN0cnkuc2V0KCdpc0hvc3QnLCByZXNEYXRhLmlzSG9zdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5sYXVuY2goJ0Nvbm5lY3Rpb25NYW5hZ2VyX1NjZW5lJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWVudV9TY2VuZScpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBdXRvLWxvZ2luIGZhbGxpZG9cIiwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcmVsb2FkKCkge1xuICAgICAgICAvLyBib3RvbmVzXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYm90b25TaW1wbGUnLCAnQVNTRVRTL1VJL0JPVE9ORVMvQk9UT05fQkFTRV9TSU5TRUxFQ0NJT05BUi5wbmcnKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdib3RvblNpbXBsZVNlbGVjY2lvbmFkbycsICdBU1NFVFMvVUkvQk9UT05FUy9CT1RPTl9CQVNFLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvdG9uVm9sdmVyJywgJ0FTU0VUUy9VSS9CT1RPTkVTL0ZMRUNIQV9WT0xWRVIucG5nJyk7XG5cbiAgICAgICAgLy8gZm9uZG9cbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdmb25kbycsICdBU1NFVFMvRk9ORE9TL0ZPTkRPX0JBU0UucG5nJyk7XG5cbiAgICAgICAgLy8gc29uaWRvXG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc29uaWRvQ2xpY2snLCAnQVNTRVRTL1NPTklETy9Tb25pZG9Cb3Rvbi5tcDMnKTtcblxuICAgICAgICAvLyBtYXJjb1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ21hcmNvJywgJ0FTU0VUUy9VSS9NQVJDT1MvVkFDSU9TL01BUkNPU19FU0NFTkFSSU8ucG5nJylcbiAgICB9XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgY29uc3QgY2VudGVyWCA9IHdpZHRoIC8gMjtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLmdhbWUuZ2xvYmFscz8uZGVmYXVsdFRleHRTdHlsZSA/PyB7IGZvbnRGYW1pbHk6ICdBcmlhbCcgfTtcblxuICAgICAgICAvLyBGb25kb1xuICAgICAgICB0aGlzLmFkZC5pbWFnZSgwLCAwLCAnZm9uZG8nKS5zZXRPcmlnaW4oMCkuc2V0RGlzcGxheVNpemUod2lkdGgsIGhlaWdodCkuc2V0RGVwdGgoLTEpO1xuXG4gICAgICAgIC8vIFRpdHVsb1xuICAgICAgICB0aGlzLnRpdGxlVGV4dCA9IHRoaXMuYWRkLnRleHQoY2VudGVyWCwgNjAsICdJbmljaWFyIHNlc2nDs24nLCB7XG4gICAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDJweCcsXG4gICAgICAgICAgICBjb2xvcjogJyM1ZjAwMDBmZidcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgLy8gTWFyY29cbiAgICAgICAgY29uc3QgbWFyY28gPSB0aGlzLmFkZC5pbWFnZShjZW50ZXJYLCBoZWlnaHQgKiAwLjUyLCAnbWFyY28nKS5zZXRPcmlnaW4oMC41KTtcbiAgICAgICAgbWFyY28uc2V0RGlzcGxheVNpemUod2lkdGggKiAwLjQsIGhlaWdodCAqIDAuNjUpO1xuICAgICAgICBtYXJjby50ZXh0dXJlLnNldEZpbHRlcihQaGFzZXIuVGV4dHVyZXMuRmlsdGVyTW9kZS5ORUFSRVNUKTtcblxuICAgICAgICAvLyBJTlBVVFNcbiAgICAgICAgLy8gVXN1YXJpb1xuICAgICAgICB0aGlzLmFkZC50ZXh0KGNlbnRlclgsIGhlaWdodCAqIDAuMjgsICdVc3VhcmlvOicsIHtcbiAgICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyNnB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzAwMCdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG4gICAgICAgIHRoaXMudXNlcklucHV0ID0gdGhpcy5jcmVhdGVIdG1sSW5wdXQoY2VudGVyWCwgaGVpZ2h0ICogMC4zNiwgJ05vbWJyZSBkZSB1c3VhcmlvJywge1xuICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnVlQzMjMnLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyMnB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzAwMCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ29udHJhc2XDsWFcbiAgICAgICAgdGhpcy5hZGQudGV4dChjZW50ZXJYLCBoZWlnaHQgKiAwLjQ1LCAnQ29udHJhc2XDsWE6Jywge1xuICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICBmb250U2l6ZTogJzI2cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMDAwJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcbiAgICAgICAgdGhpcy5wYXNzSW5wdXQgPSB0aGlzLmNyZWF0ZUh0bWxJbnB1dChjZW50ZXJYLCBoZWlnaHQgKiAwLjUzLCAnKioqKioqKionLCB7XG4gICAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdWVDMyMycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzIycHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMDAwJ1xuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICAvLyAtLS0gQk9UT05FUyAtLS1cbiAgICAgICAgLy8gQm90w7NuIFByaW5jaXBhbFxuICAgICAgICB0aGlzLm1haW5CdG4gPSBjcmVhdGVVSUJ1dHRvbih0aGlzLCB7XG4gICAgICAgICAgICB4OiBjZW50ZXJYIC0gODAsXG4gICAgICAgICAgICB5OiBoZWlnaHQgKiAwLjczLFxuICAgICAgICAgICAgbGFiZWw6ICdFbnRyYXInLFxuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVTdWJtaXQoKSxcbiAgICAgICAgICAgIHNjYWxlOiAyLFxuICAgICAgICAgICAgdGV4dHVyZU5vcm1hbDogJ2JvdG9uU2ltcGxlJyxcbiAgICAgICAgICAgIHRleHR1cmVIb3ZlcjogJ2JvdG9uU2ltcGxlU2VsZWNjaW9uYWRvJyxcbiAgICAgICAgICAgIHRleHRTdHlsZToge1xuICAgICAgICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMjJweCcsXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjMDBBQTAwJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsaWNrU291bmRLZXk6ICdzb25pZG9DbGljaydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQm90b24gZGUgQm9ycmFkb1xuICAgICAgICB0aGlzLmRlbGV0ZUJ0biA9IGNyZWF0ZVVJQnV0dG9uKHRoaXMsIHtcbiAgICAgICAgICAgIHg6IGNlbnRlclggKyA4MCxcbiAgICAgICAgICAgIHk6IGhlaWdodCAqIDAuNzMsXG4gICAgICAgICAgICBsYWJlbDogJ0VsaW1pbmFyXFxuY3VlbnRhJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlRGVsZXRlVXNlcigpLFxuICAgICAgICAgICAgc2NhbGU6IDIsXG4gICAgICAgICAgICB0ZXh0dXJlTm9ybWFsOiAnYm90b25TaW1wbGUnLFxuICAgICAgICAgICAgdGV4dHVyZUhvdmVyOiAnYm90b25TaW1wbGVTZWxlY2Npb25hZG8nLFxuICAgICAgICAgICAgdGV4dFN0eWxlOiB7XG4gICAgICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcyMXB4JyxcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNBQTAwMDAnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xpY2tTb3VuZEtleTogJ3Nvbmlkb0NsaWNrJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUZXh0byBwYXJhIGFsdGVybmFyIGVudHJlIExvZ2luIHkgUmVnaXN0cm9cbiAgICAgICAgdGhpcy50b2dnbGVUZXh0ID0gdGhpcy5hZGQudGV4dChjZW50ZXJYLCBoZWlnaHQgKiAwLjY0LCAnwr9Bw7puIG5vIHRpZW5lcyBjdWVudGE/IFJlZ8Otc3RyYXRlIGFxdcOtJywge1xuICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnVlQzMjMnLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyMHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzAwMDBFRScsXG4gICAgICAgICAgICBmb250U3R5bGU6ICdpdGFsaWMnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KTtcblxuICAgICAgICB0aGlzLnRvZ2dsZVRleHQub24oJ3BvaW50ZXJkb3duJywgKCkgPT4gdGhpcy50b2dnbGVNb2RlKCkpO1xuICAgIH1cblxuICAgIC8vIENyZWEgdW4gaW5wdXQgSFRNTCBpbnRlZ3JhZG8gZW4gbGEgZXNjZW5hXG4gICAgY3JlYXRlSHRtbElucHV0KHgsIHksIHBsYWNlaG9sZGVyLCBzdHlsZSwgaXNQYXNzd29yZCA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBpc1Bhc3N3b3JkID8gJ3Bhc3N3b3JkJyA6ICd0ZXh0JztcbiAgICAgICAgY29uc3QgZm9udFNpemUgPSBzdHlsZT8uZm9udFNpemUgPz8gJzE2cHgnO1xuICAgICAgICBjb25zdCBmb250RmFtaWx5ID0gc3R5bGU/LmZvbnRGYW1pbHkgPz8gJ0FyaWFsJztcblxuICAgICAgICBjb25zdCBkb20gPSB0aGlzLmFkZC5kb20oeCwgeSkuY3JlYXRlRnJvbUhUTUwoYFxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCIke3R5cGV9XCIgcGxhY2Vob2xkZXI9XCIke3BsYWNlaG9sZGVyfVwiIFxuICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDoxODBweDsgcGFkZGluZzo4cHg7IGZvbnQtc2l6ZToke2ZvbnRTaXplfTsgZm9udC1mYW1pbHk6JHtmb250RmFtaWx5fTsgXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOjEycHg7IGJvcmRlcjogNnB4IHNvbGlkICNGRkFBMDA7IHRleHQtYWxpZ246Y2VudGVyOyBvdXRsaW5lOm5vbmU7XCIgLz5cbiAgICAgICAgYCk7XG5cbiAgICAgICAgY29uc3QgaW5wdXRFbCA9IGRvbS5ub2RlLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG5cbiAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHRoaXMuaW5wdXQua2V5Ym9hcmQuZW5hYmxlZCA9IGZhbHNlKTtcbiAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4gdGhpcy5pbnB1dC5rZXlib2FyZC5lbmFibGVkID0gdHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIGlucHV0RWw7XG4gICAgfVxuXG4gICAgLy8gQWx0ZXJuYSBlbnRyZSBtb2RvIExvZ2luIHkgUmVnaXN0cm9cbiAgICB0b2dnbGVNb2RlKCkge1xuICAgICAgICB0aGlzLmlzUmVnaXN0ZXJpbmcgPSAhdGhpcy5pc1JlZ2lzdGVyaW5nO1xuICAgICAgICBjb25zdCB7IHdpZHRoIH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCBjZW50ZXJYID0gd2lkdGggLyAyO1xuXG4gICAgICAgIHRoaXMudGl0bGVUZXh0LnNldFRleHQodGhpcy5pc1JlZ2lzdGVyaW5nID8gJ1JlZ2lzdHJhcnNlJyA6ICdJbmljaWFyIHNlc2nDs24nKTtcbiAgICAgICAgdGhpcy5tYWluQnRuLnRleHQuc2V0VGV4dCh0aGlzLmlzUmVnaXN0ZXJpbmcgPyAnQ3JlYXIgY3VlbnRhJyA6ICdFbnRyYXInKTtcbiAgICAgICAgdGhpcy50b2dnbGVUZXh0LnNldFRleHQodGhpcy5pc1JlZ2lzdGVyaW5nID8gJ8K/WWEgdGllbmVzIGN1ZW50YT8gSW5pY2lhIHNlc2nDs24nIDogJ8K/QcO6biBubyB0aWVuZXMgY3VlbnRhPyBSZWfDrXN0cmF0ZSBhcXXDrScpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzUmVnaXN0ZXJpbmcpIHtcbiAgICAgICAgICAgIC8vIE1PRE8gUkVHSVNUUk86IEJvdMOzbiBwcmluY2lwYWwgYWwgY2VudHJvIHkgb2N1bHRhbW9zIGJvcnJhclxuICAgICAgICAgICAgdGhpcy5tYWluQnRuLmJ1dHRvbi5zZXRYKGNlbnRlclgpO1xuICAgICAgICAgICAgdGhpcy5tYWluQnRuLnRleHQuc2V0WChjZW50ZXJYKTtcblxuICAgICAgICAgICAgdGhpcy5kZWxldGVCdG4uYnV0dG9uLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5kZWxldGVCdG4udGV4dC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1PRE8gTE9HSU46IFZvbHZlbW9zIGEgbGEgcG9zaWNpw7NuIG9yaWdpbmFsXG4gICAgICAgICAgICB0aGlzLm1haW5CdG4uYnV0dG9uLnNldFgoY2VudGVyWCAtIDgwKTtcbiAgICAgICAgICAgIHRoaXMubWFpbkJ0bi50ZXh0LnNldFgoY2VudGVyWCAtIDgwKTtcblxuICAgICAgICAgICAgdGhpcy5kZWxldGVCdG4uYnV0dG9uLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUJ0bi50ZXh0LnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDb250cm9sYSBlbCBlbnbDrW8gZGVsIGZvcm11bGFyaW8gZGUgbG9naW4vcmVnaXN0cm9cbiAgICBhc3luYyBoYW5kbGVTdWJtaXQoKSB7XG4gICAgICAgIC8vIE9idGVuZW1vcyBsb3MgdmFsb3JlcyBkZSBsb3MgZWxlbWVudG9zIEhUTUwgcmVhbGVzXG4gICAgICAgIGNvbnN0IHVzZXJuYW1lVmFsdWUgPSB0aGlzLnVzZXJJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgIGNvbnN0IHBhc3N3b3JkVmFsdWUgPSB0aGlzLnBhc3NJbnB1dC52YWx1ZS50cmltKCk7XG5cbiAgICAgICAgaWYgKHVzZXJuYW1lVmFsdWUubGVuZ3RoIDwgMykge1xuICAgICAgICAgICAgYWxlcnQoXCJVc3VhcmlvIGRlbWFzaWFkbyBjb3J0b1wiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXNzd29yZFZhbHVlLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiQ29udHJhc2XDsWEgZGVtYXNpYWRvIGNvcnRhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLmlzUmVnaXN0ZXJpbmcgPyAnL3JlZ2lzdGVyJyA6ICcvbG9naW4nO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYXBpVXJsfSR7ZW5kcG9pbnR9YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1JlZ2lzdGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHJlZ2lzdHJvLCBOTyBlbnRyYW1vcyBhbCBqdWVnb1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIsKhUmVnaXN0cm8gY29tcGxldGFkbyBjb24gw6l4aXRvISBBaG9yYSBwdWVkZXMgaW5pY2lhciBzZXNpw7NuLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVNb2RlKCk7IC8vIENhbWJpbyBhIG1vZG8gbG9naW4gYXV0b23DoXRpY2FtZW50ZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc0lucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBMb2dpbjogR3VhcmRhbW9zIGRhdG9zIGVuIGVsIHJlZ2lzdHJ5XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0cnkuc2V0KCd1c2VybmFtZScsIHVzZXJuYW1lVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdHJ5LnNldCgndXNlclRva2VuJywgZGF0YS50b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMucmVnaXN0cnkuc2V0KCdpc0hvc3QnLCBkYXRhLmlzSG9zdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyc2lzdGVuY2lhIGxvY2FsIHBhcmEgYXV0by1sb2dpblxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd2b2xleV9zZXNzaW9uX3Rva2VuJywgZGF0YS50b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3ZvbGV5X3VzZXJuYW1lJywgdXNlcm5hbWVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3ZvbGV5X3Bhc3N3b3JkJywgcGFzc3dvcmRWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYExvZ2luIGNvcnJlY3RvLiBVc3VhcmlvOiAke3VzZXJuYW1lVmFsdWV9YCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUubGF1bmNoKCdDb25uZWN0aW9uTWFuYWdlcl9TY2VuZScpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdNZW51X1NjZW5lJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbGVydChkYXRhLmVycm9yIHx8ICdFcnJvciBlbiBsYSBhdXRlbnRpY2FjacOzbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb25lY3RhbmRvIGEgbGEgQVBJOlwiLCBlcnIpO1xuICAgICAgICAgICAgYWxlcnQoXCJObyBzZSBwdWRvIGNvbmVjdGFyIGNvbiBlbCBzZXJ2aWRvci5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDb250cm9sYSBsYSBlbGltaW5hY2nDs24gZGUgdW4gdXN1YXJpb1xuICAgIGFzeW5jIGhhbmRsZURlbGV0ZVVzZXIoKSB7XG4gICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy51c2VySW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICBjb25zdCBwYXNzd29yZCA9IHRoaXMucGFzc0lucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgICAgICBpZiAoIXVzZXJuYW1lIHx8ICFwYXNzd29yZCkge1xuICAgICAgICAgICAgYWxlcnQoXCJJbnRyb2R1Y2UgdXN1YXJpbyB5IGNvbnRyYXNlw7FhIHBhcmEgZWxpbWluYXJcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbmZpcm0oYMK/U2VndXJvIHF1ZSBxdWllcmVzIGVsaW1pbmFyIFwiJHt1c2VybmFtZX1cIj9gKSkgcmV0dXJuO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYXBpVXJsfS91c2Vycy8ke3VzZXJuYW1lfWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGFzc3dvcmQgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoYFVzdWFyaW8gXCIke3VzZXJuYW1lfVwiIGVsaW1pbmFkb2ApO1xuICAgICAgICAgICAgICAgIHRoaXMudXNlcklucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnBhc3NJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFsZXJ0KGRhdGEuZXJyb3IgfHwgJ0Vycm9yIGVsaW1pbmFuZG8gZWwgdXN1YXJpbycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb25lY3RhbmRvIGEgbGEgQVBJOlwiLCBlcnIpO1xuICAgICAgICAgICAgYWxlcnQoXCJObyBzZSBwdWRvIGNvbmVjdGFyIGNvbiBlbCBzZXJ2aWRvci5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbiIsIi8vIFBhbnRhbGxhIGRlIERlc2NvbmV4acOzblxuaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xuXG5leHBvcnQgY2xhc3MgTm9Db25uZWN0aW9uX1NjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgXG4gICAgICAgIHN1cGVyKCdOb0Nvbm5lY3Rpb25fU2NlbmUnKTsgXG4gICAgfVxuXG4gICAgY3JlYXRlKCkge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG5cbiAgICAgICAgLy8gRm9uZG8gT3NjdXJvXG4gICAgICAgIHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAweDAwMDAwMCwgMC43KS5zZXRPcmlnaW4oMCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUZXh0b3MgZGUgZXN0YWRvXG4gICAgICAgIHRoaXMuYWRkLnRleHQod2lkdGggLyAyLCBoZWlnaHQgLyAyIC0gMjAsICdDT05FWEnDk04gUEVSRElEQScsIHtcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDBweCcsIGNvbG9yOiAnI2ZmMDAwMCcsIGZvbnRTdHlsZTogJ2JvbGQnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIHRoaXMuYWRkLnRleHQod2lkdGggLyAyLCBoZWlnaHQgLyAyICsgMzAsICdJbnRlbnRhbmRvIHJlY29uZWN0YXIuLi4nLCB7XG4gICAgICAgICAgICBmb250U2l6ZTogJzIwcHgnLCBjb2xvcjogJyNmZmZmZmYnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIC8vIENvbXByb2JhY2nDs24gY29udGludWEgY2FkYSAyIHNlZ3VuZG9zXG4gICAgICAgIHRoaXMudGltZS5hZGRFdmVudCh7XG4gICAgICAgICAgICBkZWxheTogMjAwMCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiB0aGlzLmNoZWNrU2VydmVyLFxuICAgICAgICAgICAgY2FsbGJhY2tTY29wZTogdGhpcyxcbiAgICAgICAgICAgIGxvb3A6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgY2hlY2tTZXJ2ZXIoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnL3N0YXR1cycpO1xuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2Vydmlkb3IgcmVjdXBlcmFkby4gSW50ZW50YW5kbyByZS1sb2dpbiBhdXRvbcOhdGljby4uLlwiKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNhdmVkTmFtZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3ZvbGV5X3VzZXJuYW1lJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2F2ZWRQYXNzID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndm9sZXlfcGFzc3dvcmQnKTtcblxuICAgICAgICAgICAgICAgIGlmIChzYXZlZE5hbWUgJiYgc2F2ZWRQYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ2luUmVzID0gYXdhaXQgZmV0Y2goJy9hcGkvbG9naW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1c2VybmFtZTogc2F2ZWROYW1lLCBwYXNzd29yZDogc2F2ZWRQYXNzIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2dpblJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGxvZ2luUmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0cnkuc2V0KCd1c2VybmFtZScsIGRhdGEudXNlcm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ2lzSG9zdCcsIGRhdGEuaXNIb3N0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmUtYXV0ZW50aWNhY2nDs24gY29tcGxldGFkYSBjb24gw6l4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNpIGVsIHNlcnZpZG9yIHJlc3BvbmRlLCBjZXJyYW1vcyBlc3RlIGF2aXNvIHkgcmVhbnVkYW1vc1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RBY3RpdmUgPSB0aGlzLnJlZ2lzdHJ5LmdldCgnbGFzdEFjdGl2ZVNjZW5lJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAobGFzdEFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRTY2VuZSA9IHRoaXMuc2NlbmUuZ2V0KGxhc3RBY3RpdmUpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUucmVzdW1lKGxhc3RBY3RpdmUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTY2VuZSAmJiB0YXJnZXRTY2VuZS5pbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2NlbmUuaW5wdXQuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTY2VuZS5pbnB1dC5yZXNldFBvaW50ZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZXJ2aWRvciBzaWd1ZSBpbmFjdGl2by4uLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8vIE1hbmFnZXIgZGUgQ29uZXhpw7NuXG5pbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uTWFuYWdlcl9TY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdDb25uZWN0aW9uTWFuYWdlcl9TY2VuZScpO1xuICAgIH1cblxuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgdGhpcy5zdGFydEhlYXJ0YmVhdCgpO1xuICAgIH1cblxuICAgIHN0YXJ0SGVhcnRiZWF0KCkge1xuICAgICAgICB0aGlzLnRpbWUuYWRkRXZlbnQoe1xuICAgICAgICAgICAgZGVsYXk6IDIwMDAsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy5yZWdpc3RyeS5nZXQoJ3VzZXJuYW1lJyk7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VybmFtZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvdXNlcnMva2VlcGFsaXZlLyR7dXNlcm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDAxKSB7IC8vIFNlc2nDs24gZXhwaXJhZGEgZW4gc2VydmVyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlY29ubmVjdGlvbih1c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKFwiT2ZmbGluZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWUuZXZlbnRzLmVtaXQoJ3VwZGF0ZV9vbmxpbmVfY291bnQnLCBkYXRhLmNvdW50KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTZXJ2ZXJEb3duKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxvb3A6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlUmVjb25uZWN0aW9uKHVzZXJuYW1lKSB7XG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndm9sZXlfcGFzc3dvcmQnKTtcbiAgICAgICAgaWYgKHBhc3N3b3JkKSB7XG4gICAgICAgICAgICBhd2FpdCBmZXRjaCgnL2FwaS9sb2dpbicsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVzZXJuYW1lLCBwYXNzd29yZCB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVTZXJ2ZXJEb3duKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2NlbmUuaXNBY3RpdmUoJ05vQ29ubmVjdGlvbl9TY2VuZScpKSB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVTY2VuZXMgPSB0aGlzLmdhbWUuc2NlbmUuZ2V0U2NlbmVzKHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBhY3RpdmVTY2VuZXMuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocy5zY2VuZS5rZXkgIT09ICdDb25uZWN0aW9uTWFuYWdlcl9TY2VuZScgJiYgcy5zY2VuZS5rZXkgIT09ICdOb0Nvbm5lY3Rpb25fU2NlbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGF1c2FuZG8gZXNjZW5hIHBvciBjYcOtZGEgZGUgc2Vydmlkb3I6XCIsIHMuc2NlbmUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ2xhc3RBY3RpdmVTY2VuZScsIHMuc2NlbmUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHMuc2NlbmUucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuaW5wdXQpIHMuaW5wdXQuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmxhdW5jaCgnTm9Db25uZWN0aW9uX1NjZW5lJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvLyBDbGFzZSBkZSBsYSBlc2NlbmEgZGUganVlZ28gb25saW5lXG5cblxuaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi4vRW50aXRpZXMvUGxheWVyLmpzJztcbmltcG9ydCB7IFBvd2VyVXAgfSBmcm9tICcuLi9FbnRpdGllcy9Qb3dlclVwLmpzJztcbmltcG9ydCB7IEJhbGwgfSBmcm9tICcuLi9FbnRpdGllcy9CYWxsLmpzJztcbmltcG9ydCB7IENvbW1hbmRQcm9jZXNzb3IgfSBmcm9tICcuLi9Db21tYW5kcy9Db21tYW5kUHJvY2Vzc29yLmpzJztcbmltcG9ydCB7IE1vdmVQbGF5ZXJDb21tYW5kIH0gZnJvbSAnLi4vQ29tbWFuZHMvTW92ZVBsYXllckNvbW1hbmQuanMnO1xuaW1wb3J0IHsgZ2V0U3RvcmVkU2Z4Vm9sdW1lIH0gZnJvbSAnLi4vVUkvQXVkaW8uanMnO1xuXG5leHBvcnQgY2xhc3MgR2FtZU9ubGluZV9TY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XG4gICAgdGllbXBvVG90YWwgPSA2MDsgLy8gcGFyYSAyIG1pbiBwb25lciAxMjAgc2VndW5kb3NcbiAgICB0aWVtcG9SZXN0YW50ZSA9IHRoaXMudGllbXBvVG90YWw7XG4gICAgdGltZXJUZXh0O1xuICAgIHRpbWVyRXZlbnQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdHYW1lT25saW5lX1NjZW5lJyk7XG4gICAgfVxuXG4gICAgaW5pdChkYXRhKSB7XG4gICAgICAgIHRoaXMucGxheWVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pbnB1dE1hcHBpbmdzID0gW107XG4gICAgICAgIHRoaXMuY29tbWFuZFByb2Nlc3NvciA9IG5ldyBDb21tYW5kUHJvY2Vzc29yKCk7XG4gICAgICAgIHRoaXMucGxheWVyMSA9IGRhdGEucGxheWVyMTtcbiAgICAgICAgdGhpcy5wbGF5ZXIyID0gZGF0YS5wbGF5ZXIyO1xuICAgICAgICB0aGlzLnNlbGVjdGVkU2NlbmFyaW8gPSBkYXRhLnNlbGVjdGVkU2NlbmFyaW87XG4gICAgICAgIHRoaXMuYmFsbCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2NvcmVQMSA9IDA7XG4gICAgICAgIHRoaXMuc2NvcmVQMiA9IDA7XG4gICAgICAgIHRoaXMuc2V0c1AxID0gMDtcbiAgICAgICAgdGhpcy5zZXRzUDIgPSAwO1xuICAgICAgICB0aGlzLm1heFNldHMgPSAzOyAvLyBtZWpvciBkZSAzXG4gICAgICAgIHRoaXMuY3VycmVudFNldCA9IDE7IC8vIHNldCBhY3R1YWxcbiAgICAgICAgdGhpcy5pc0dvbGRlblBvaW50ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTZXRFbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53cyA9IHRoaXMucmVnaXN0cnkuZ2V0KCd3cycpO1xuICAgICAgICB0aGlzLm15VXNlcm5hbWUgPSB0aGlzLnJlZ2lzdHJ5LmdldCgndXNlcm5hbWUnKTtcbiAgICAgICAgdGhpcy5zZWVkID0gZGF0YT8uc2VlZCA/PyBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMucm5nID0gbmV3IFBoYXNlci5NYXRoLlJhbmRvbURhdGFHZW5lcmF0b3IoW1N0cmluZyh0aGlzLnNlZWQpXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbR2FtZU9ubGluZV0gUk5HIHNlZWQ6JywgdGhpcy5zZWVkKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZygncGxheWVyMTonLCB0aGlzLnBsYXllcjEpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygncGxheWVyMjonLCB0aGlzLnBsYXllcjIpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnbXlVc2VybmFtZTonLCB0aGlzLm15VXNlcm5hbWUpO1xuXG4gICAgICAgIC8vIFdFQlNPQ0tFVFNcbiAgICAgICAgLy8gUGVsb3RhXG4gICAgICAgIHRoaXMucmFsbHlJZCA9IDA7XG5cbiAgICAgICAgdGhpcy5iYWxsTmV0ID0ge1xuICAgICAgICAgICAgbGFzdFNlcTogMCxcbiAgICAgICAgICAgIGhhc1RhcmdldDogZmFsc2UsXG4gICAgICAgICAgICB0eDogMCwgdHk6IDAsXG4gICAgICAgICAgICB0dng6IDAsIHR2eTogMCxcbiAgICAgICAgICAgIHNuYXBEaXN0OiAxMjAsICAgLy8gc2kgbGEgcGVsb3RhIHNlIHZhLCBzbmFwXG4gICAgICAgICAgICBsZXJwOiAwLjM1ICAgICAgIC8vIHN1YXZpemFkbyBwb3IgZnJhbWVcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmJhbGxTeW5jU2VxID0gMDtcbiAgICAgICAgdGhpcy5iYWxsU3luY0V2ZW50ID0gbnVsbDtcblxuICAgICAgICAvLyBQb3dlclVwc1xuICAgICAgICB0aGlzLnBvd2VyVXBTZXEgPSAwO1xuICAgICAgICB0aGlzLnBvd2VyVXBzQnlJZCA9IG5ldyBNYXAoKTsgICAgICAvLyBob3N0OiBpZCAtPiBQb3dlclVwXG4gICAgICAgIHRoaXMucG93ZXJVcHNOZXRCeUlkID0gbmV3IE1hcCgpOyAgIC8vIG5vLWhvc3Q6IGlkIC0+IHNwcml0ZSAodmlzdWFsKVxuICAgICAgICB0aGlzLnBvd2VyVXBzTmV0T3ZlcmxhcHNCeUlkID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnBvd2VyVXBFeHBpcnlUaW1lcnMgPSBuZXcgTWFwKCk7ICAgLy8gcGFyYSBwb2RlciBjYW5jZWxhciBsYXMgZGVsYXllZENhbGxzIGRlIGRlc2FwYXJpY2nDs25cblxuICAgICAgICB0aGlzLnBlbmRpbmdDb2xsZWN0UG93ZXJVcHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMucGVuZGluZ1Bvd2VyVXBVc2UgPSBudWxsO1xuICAgICAgICB0aGlzLl9zdXBwcmVzc0NvbGxlY3RCcm9hZGNhc3QgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwcmVsb2FkKCkge1xuICAgICAgICAvLyBjaGFyYWN0ZXJBXG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcbiAgICAgICAgICAgICdjaGFyQV9tb3ZlJyxcbiAgICAgICAgICAgICdBU1NFVFMvUEVSU09OQUpFUy9BTklNQUNJT05FUy9QRVJTT05BSkVfQS9BTklNQUNJT05FU19DT1JSRVJfUkVDSUJJUi5wbmcnLFxuICAgICAgICAgICAgeyBmcmFtZVdpZHRoOiAyOSwgZnJhbWVIZWlnaHQ6IDQ0IH1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFxuICAgICAgICAgICAgJ2NoYXJBX2p1bXAnLFxuICAgICAgICAgICAgJ0FTU0VUUy9QRVJTT05BSkVTL0FOSU1BQ0lPTkVTL1BFUlNPTkFKRV9BL0FOSU1BQ0lPTl9SRU1BVEUucG5nJyxcbiAgICAgICAgICAgIHsgZnJhbWVXaWR0aDogMzIsIGZyYW1lSGVpZ2h0OiA0NCB9XG4gICAgICAgICk7XG4gICAgICAgIC8vIGNoYXJhY3RlckJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KFxuICAgICAgICAgICAgJ2NoYXJCX21vdmUnLFxuICAgICAgICAgICAgJ0FTU0VUUy9QRVJTT05BSkVTL0FOSU1BQ0lPTkVTL1BFUlNPTkFKRV9CL0FOSU1BQ0lPTkVTX0NPUlJFUl9SRUNJQklSLnBuZycsXG4gICAgICAgICAgICB7IGZyYW1lV2lkdGg6IDI5LCBmcmFtZUhlaWdodDogNDQgfVxuICAgICAgICApO1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXG4gICAgICAgICAgICAnY2hhckJfanVtcCcsXG4gICAgICAgICAgICAnQVNTRVRTL1BFUlNPTkFKRVMvQU5JTUFDSU9ORVMvUEVSU09OQUpFX0IvQU5JTUFDSU9OX1JFTUFURS5wbmcnLFxuICAgICAgICAgICAgeyBmcmFtZVdpZHRoOiAzMiwgZnJhbWVIZWlnaHQ6IDQ0IH1cbiAgICAgICAgKTtcbiAgICAgICAgLy8gY2hhcmFjdGVyQ1xuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoXG4gICAgICAgICAgICAnY2hhckNfbW92ZScsXG4gICAgICAgICAgICAnQVNTRVRTL1BFUlNPTkFKRVMvQU5JTUFDSU9ORVMvUEVSU09OQUpFX0MvQU5JTUFDSU9ORVNfQ09SUkVSX1JFQ0lCSVIucG5nJyxcbiAgICAgICAgICAgIHsgZnJhbWVXaWR0aDogMjksIGZyYW1lSGVpZ2h0OiA0NCB9XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldChcbiAgICAgICAgICAgICdjaGFyQ19qdW1wJyxcbiAgICAgICAgICAgICdBU1NFVFMvUEVSU09OQUpFUy9BTklNQUNJT05FUy9QRVJTT05BSkVfQy9BTklNQUNJT05fUkVNQVRFLnBuZycsXG4gICAgICAgICAgICB7IGZyYW1lV2lkdGg6IDMyLCBmcmFtZUhlaWdodDogNDQgfVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEVzY2VuYXJpb3NcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdHeW0nLCAnQVNTRVRTL0ZPTkRPUy9HSU1OQVNJTy5wbmcnKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdQbGF5YScsICdBU1NFVFMvRk9ORE9TL1BMQVlBLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ0phcmRpbicsICdBU1NFVFMvRk9ORE9TL0pBUkRJTi5wbmcnKTtcblxuICAgICAgICAvLyBQb3dlclVwc1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3BvcjInLCAnQVNTRVRTL0lURU1TL1BPV0VSIFVQUy9NVUxUSVBMSUNBRE9SIDIucG5nJyk7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgncG9yMycsICdBU1NFVFMvSVRFTVMvUE9XRVIgVVBTL01VTFRJUExJQ0FET1IgMy5wbmcnKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdwYXJhbGl6YXInLCAnQVNTRVRTL0lURU1TL1BPV0VSIFVQUy9QQVJBTElaQURPLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3JhbGVudGl6YXInLCAnQVNTRVRTL0lURU1TL1BPV0VSIFVQUy9SRUxFTlRJWkFSLnBuZycpO1xuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3ZlbG9jaWRhZCcsICdBU1NFVFMvSVRFTVMvUE9XRVIgVVBTL1ZFTE9DSURBRC5wbmcnKTtcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdtYXJjb1Bvd2VyVXAnLCAnQVNTRVRTL0pVRUdPL0Jhc2VfcG93ZXJVcC5wbmcnKTtcblxuICAgICAgICAvLyBQZWxvdGFcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiYWxsJywgJ0FTU0VUUy9JVEVNUy9QRUxPVEFTL1BfTk9STUFMLnBuZycpO1xuICAgICAgICAvLyBSZWRcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdyZWQnLCAnQVNTRVRTL0pVRUdPL1JFRC5wbmcnKTtcbiAgICAgICAgLy8gQ3JvbsOzbWV0cm9cbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdyZWxvaicsICdBU1NFVFMvSlVFR08vVElNRVIucG5nJyk7XG4gICAgICAgIC8vIE1hcmNvXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnbWFyY29HZW5lcmFsJywgJ0FTU0VUUy9KVUVHTy9NQVJDQURPUl9TRVQucG5nJyk7XG5cbiAgICAgICAgLy8gRWZlY3RvcyBkZSBzb25pZG9cbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKCdzZnhfc2lsYmF0bycsICdBU1NFVFMvU09OSURPL1NpbGJhdG9faW5pY2lvX3BhcnRpZG9fMXA0cy5tcDMnKTtcbiAgICAgICAgdGhpcy5sb2FkLmF1ZGlvKCdzZnhfcmVtYXRlJywgJ0FTU0VUUy9TT05JRE8vVG9xdWVfcGVsb3RhX3JlbWF0ZV8wM3MubXAzJyk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc2Z4X3JlY2VwY2lvbicsICdBU1NFVFMvU09OSURPL1RvcXVlX3BlbG90YV9yZWNlcGNpb24ubXAzJyk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc2Z4X3NhbHRvJywgJ0FTU0VUUy9TT05JRE8vU29uaWRvU2FsdG9fMXAubXAzJyk7XG4gICAgICAgIHRoaXMubG9hZC5hdWRpbygnc2Z4X3B1bnRvJywgJ0FTU0VUUy9TT05JRE8vU29uaWRvUHVudG8ubXAzJyk7XG5cbiAgICB9XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIC8vIHNlIGd1YXJkYW4gbGFzIGRpbWVuc2lvbmVzXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgdGhpcy53b3JsZFdpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMud29ybGRIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nYW1lLmdsb2JhbHMuZGVmYXVsdFRleHRTdHlsZTtcblxuICAgICAgICAvLyBzZSBkZWZpbmVuIGxvcyBlZmVjdG9zIGRlIHNvbmlkb1xuICAgICAgICB0aGlzLnNmeCA9IHtcbiAgICAgICAgICAgIHdoaXN0bGU6ICdzZnhfc2lsYmF0bycsXG4gICAgICAgICAgICBzcGlrZTogJ3NmeF9yZW1hdGUnLFxuICAgICAgICAgICAgcmVjZWl2ZTogJ3NmeF9yZWNlcGNpb24nLFxuICAgICAgICAgICAganVtcDogJ3NmeF9zYWx0bycsXG4gICAgICAgICAgICBwb2ludDogJ3NmeF9wdW50bydcbiAgICAgICAgfTtcbiAgICAgICAgLy8gc2UgcmVwcm9kdWNlIGVsIHNpbGJhdG8gZGUgaW5pY2lvIGRlIHBhcnRpZG9cbiAgICAgICAgdGhpcy5wbGF5U2Z4KHRoaXMuc2Z4LndoaXN0bGUpO1xuXG4gICAgICAgIC8vIENyb27Ds21ldHJvXG4gICAgICAgIHRoaXMudGltZXJUZXh0ID0gdGhpcy5hZGQudGV4dCh0aGlzLnNjYWxlLndpZHRoIC8gMiwgMzAsIFwiXCIsIHtcbiAgICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgICAgZm9udFNpemU6ICczMnB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41LCAwKVxuICAgICAgICAgICAgLnNldFNjcm9sbEZhY3RvcigwKVxuICAgICAgICAgICAgLnNldERlcHRoKDk5OTkpO1xuXG4gICAgICAgIHRoaXMudGltZXJJY29uID0gdGhpcy5hZGQuaW1hZ2UodGhpcy5zY2FsZS53aWR0aCAvIDIsIDQ1LCAncmVsb2onKVxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUpXG4gICAgICAgICAgICAuc2V0U2NhbGUoMilcbiAgICAgICAgICAgIC5zZXRTY3JvbGxGYWN0b3IoMClcbiAgICAgICAgICAgIC5zZXREZXB0aCg5MDAwKTsgLy8gZGViYWpvIGRlbCB0ZXh0b1xuXG4gICAgICAgIC8vIG1hcmNvIGRlIHNldFxuICAgICAgICB0aGlzLnNldEZyYW1lID0gdGhpcy5hZGQuaW1hZ2UodGhpcy5zY2FsZS53aWR0aCAvIDIsIDEyMCwgJ21hcmNvR2VuZXJhbCcpXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSlcbiAgICAgICAgICAgIC5zZXRTY2FsZSgxKVxuICAgICAgICAgICAgLnNldERlcHRoKDk5OTgpO1xuXG4gICAgICAgIC8vIHRleHRvIGRlbCBzZXQgYWN0dWFsXG4gICAgICAgIHRoaXMuc2V0VGV4dCA9IHRoaXMuYWRkLnRleHQodGhpcy5zY2FsZS53aWR0aCAvIDIsIDEyMCwgYFNFVCAke3RoaXMuY3VycmVudFNldH1gLCB7XG4gICAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMzJweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXG4gICAgICAgIH0pXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSlcbiAgICAgICAgICAgIC5zZXREZXB0aCg5OTk5KTtcblxuICAgICAgICBjb25zdCBzZXRGcmFtZVdpZHRoID0gdGhpcy5zZXRGcmFtZS5kaXNwbGF5V2lkdGg7XG4gICAgICAgIGNvbnN0IHNldEZyYW1lSGVpZ2h0ID0gdGhpcy5zZXRGcmFtZS5kaXNwbGF5SGVpZ2h0O1xuICAgICAgICBjb25zdCBzZXRTY29yZVkgPSB0aGlzLnNldEZyYW1lLnkgKyBNYXRoLnJvdW5kKHNldEZyYW1lSGVpZ2h0IC8gMikgKyAxMztcbiAgICAgICAgY29uc3Qgc2V0U2NvcmVPZmZzZXRYID0gTWF0aC5yb3VuZChzZXRGcmFtZVdpZHRoICogMC4yMik7XG4gICAgICAgIGNvbnN0IHNldFNjb3JlRnJhbWVTY2FsZVggPSAwLjQ7XG4gICAgICAgIGNvbnN0IHNldFNjb3JlRnJhbWVTY2FsZVkgPSAwLjM4O1xuXG4gICAgICAgIHRoaXMuc2V0U2NvcmVGcmFtZUxlZnQgPSB0aGlzLmFkZC5pbWFnZSh0aGlzLnNjYWxlLndpZHRoIC8gMiAtIHNldFNjb3JlT2Zmc2V0WCwgc2V0U2NvcmVZLCAnbWFyY29HZW5lcmFsJylcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KVxuICAgICAgICAgICAgLnNldFNjYWxlKHNldFNjb3JlRnJhbWVTY2FsZVgsIHNldFNjb3JlRnJhbWVTY2FsZVkpXG4gICAgICAgICAgICAuc2V0RGVwdGgoOTk5OCk7XG5cbiAgICAgICAgdGhpcy5zZXRTY29yZUZyYW1lUmlnaHQgPSB0aGlzLmFkZC5pbWFnZSh0aGlzLnNjYWxlLndpZHRoIC8gMiArIHNldFNjb3JlT2Zmc2V0WCwgc2V0U2NvcmVZLCAnbWFyY29HZW5lcmFsJylcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KVxuICAgICAgICAgICAgLnNldFNjYWxlKHNldFNjb3JlRnJhbWVTY2FsZVgsIHNldFNjb3JlRnJhbWVTY2FsZVkpXG4gICAgICAgICAgICAuc2V0RGVwdGgoOTk5OCk7XG5cbiAgICAgICAgdGhpcy5zZXRTY29yZUxlZnQgPSB0aGlzLmFkZC50ZXh0KHRoaXMuc2NhbGUud2lkdGggLyAyIC0gc2V0U2NvcmVPZmZzZXRYLCBzZXRTY29yZVksIGAke3RoaXMuc2V0c1AxfWAsIHtcbiAgICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KVxuICAgICAgICAgICAgLnNldERlcHRoKDk5OTkpO1xuXG4gICAgICAgIHRoaXMuc2V0U2NvcmVSaWdodCA9IHRoaXMuYWRkLnRleHQodGhpcy5zY2FsZS53aWR0aCAvIDIgKyBzZXRTY29yZU9mZnNldFgsIHNldFNjb3JlWSwgYCR7dGhpcy5zZXRzUDJ9YCwge1xuICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICBmb250U2l6ZTogJzI4cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUpXG4gICAgICAgICAgICAuc2V0RGVwdGgoOTk5OSk7XG5cbiAgICAgICAgLy8gdGV4dG8gcGFyYSBtb3N0cmFyIGVsIGdhbmFkb3IgZGVsIHNldFxuICAgICAgICB0aGlzLnNldFdpbm5lclRleHQgPSB0aGlzLmFkZC50ZXh0KHRoaXMuc2NhbGUud2lkdGggLyAyLCAyMDUsICcnLCB7XG4gICAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjhweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnLFxuICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDNcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KVxuICAgICAgICAgICAgLnNldERlcHRoKDk5OTkpXG4gICAgICAgICAgICAuc2V0VmlzaWJsZShmYWxzZSk7XG5cbiAgICAgICAgLy8gaW5pY2lhciBlbCBjb250YWRvciBwYXJhIGVsIGNyb27Ds21ldHJvXG4gICAgICAgIC8qdGhpcy50aW1lckV2ZW50ID0gdGhpcy50aW1lLmFkZEV2ZW50KHtcbiAgICAgICAgICAgIGRlbGF5OiAxMDAwLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMudXBkYXRlVGltZXIsXG4gICAgICAgICAgICBjYWxsYmFja1Njb3BlOiB0aGlzLFxuICAgICAgICAgICAgbG9vcDogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVRpbWVyKCk7Ki9cbiAgICAgICAgaWYgKHRoaXMuaXNIb3N0Q2xpZW50KCkpIHtcbiAgICAgICAgICAgIHRoaXMudGltZXJFdmVudCA9IHRoaXMudGltZS5hZGRFdmVudCh7XG4gICAgICAgICAgICAgICAgZGVsYXk6IDEwMDAsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMudXBkYXRlVGltZXIsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tTY29wZTogdGhpcyxcbiAgICAgICAgICAgICAgICBsb29wOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZW5kZXJUaW1lclRleHQoKTtcblxuICAgICAgICAvLyBGT05ETyBERUwgRVNDRU5BUklPIFNFTEVDQ0lPTkFET1xuICAgICAgICB0aGlzLmFkZC5pbWFnZSh3aWR0aCAvIDIsIGhlaWdodCAvIDIsIHRoaXMuc2VsZWN0ZWRTY2VuYXJpbylcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KVxuICAgICAgICAgICAgLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpXG4gICAgICAgICAgICAuc2V0RGVwdGgoLTEpO1xuXG4gICAgICAgIC8vIFJlZFxuICAgICAgICBjb25zdCByZWQgPSB0aGlzLnBoeXNpY3MuYWRkLnN0YXRpY1Nwcml0ZSh3aWR0aCAvIDIsIGhlaWdodCAtIDE2MCwgJ3JlZCcpLnNldFNjYWxlKDAuNik7XG5cbiAgICAgICAgY29uc3QgcmVkVGV4dHVyZSA9IHRoaXMudGV4dHVyZXMuZ2V0KCdyZWQnKS5nZXRTb3VyY2VJbWFnZSgpO1xuICAgICAgICByZWQuYm9keS5zZXRTaXplKHJlZFRleHR1cmUud2lkdGggKiAwLjUsIHJlZFRleHR1cmUuaGVpZ2h0ICogMC41KTsgLy8gbXVsdGlwbGljYXIgcG9yIGVsIHNjYWxlXG4gICAgICAgIHJlZC5ib2R5LnNldE9mZnNldCgtcmVkLmJvZHkud2lkdGggLyAyLCAtcmVkLmJvZHkuaGVpZ2h0IC8gMik7XG4gICAgICAgIHJlZC5ib2R5LnVwZGF0ZUZyb21HYW1lT2JqZWN0KCk7XG4gICAgICAgIHRoaXMucmVkID0gcmVkO1xuXG4gICAgICAgIHRoaXMuX2NyZWF0ZUFuaW1hdGlvbnMoKTtcblxuICAgICAgICAvL1BVTlRVQUNJT04gREUgTE9TIEpVR0FET1JFU1xuICAgICAgICAvLyBNYXJjb3MgZGUgcHVudHVhY2nDs25cbiAgICAgICAgdGhpcy5wb2ludHNMZWZ0ID0gMDtcbiAgICAgICAgdGhpcy5wb2ludHNSaWdodCA9IDA7XG5cbiAgICAgICAgdGhpcy5zY29yZUZyYW1lTGVmdCA9IHRoaXMuYWRkLmltYWdlKDIwMCwgNTAsICdtYXJjb0dlbmVyYWwnKS5zZXRTY2FsZSgwLjgsIDAuNTUpLnNldE9yaWdpbigwLjUpO1xuICAgICAgICB0aGlzLnNjb3JlRnJhbWVSaWdodCA9IHRoaXMuYWRkLmltYWdlKHRoaXMud29ybGRXaWR0aCAtIDIwMCwgNTAsICdtYXJjb0dlbmVyYWwnKS5zZXRTY2FsZSgwLjgsIDAuNTUpLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIHRoaXMuc2NvcmVMZWZ0ID0gdGhpcy5hZGQudGV4dCgyMDAsIDQ1LCAnMCcsIHtcbiAgICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgICAgZm9udFNpemU6ICc0MHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZmZmJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCg5OTk5KTtcblxuICAgICAgICB0aGlzLnJpZ2h0U2NvcmUgPSB0aGlzLmFkZC50ZXh0KHRoaXMud29ybGRXaWR0aCAtIDIwMCwgNDUsICcwJywge1xuICAgICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgICBmb250U2l6ZTogJzQwcHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmZmYnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDk5OTkpO1xuXG4gICAgICAgIC8vIHN1ZWxvIGRlIHBydWViYTogY3JlYXIgdW4gY3VlcnBvIGVzdMOhdGljbyByZWN0YW5ndWxhciBpbnZpc2libGVcbiAgICAgICAgLy8gQ29uZmlndXJhYmxlOiBhbHR1cmEgeSBkZXNwbGF6YW1pZW50byBkZXNkZSBlbCBmb25kbyAoYGdyb3VuZE9mZnNldGApXG4gICAgICAgIGNvbnN0IGdyb3VuZEhlaWdodCA9IDIwO1xuICAgICAgICBjb25zdCBncm91bmRPZmZzZXQgPSA5MDsgLy8gZWxldmFyIGVsIHN1ZWxvIDEwMHB4IGRlc2RlIGVsIGZvbmRvXG4gICAgICAgIHRoaXMuZ3JvdW5kSGVpZ2h0ID0gZ3JvdW5kSGVpZ2h0O1xuICAgICAgICB0aGlzLmdyb3VuZFkgPSB0aGlzLndvcmxkSGVpZ2h0IC0gZ3JvdW5kT2Zmc2V0O1xuXG4gICAgICAgIGNvbnN0IGdyb3VuZCA9IHRoaXMuYWRkLnJlY3RhbmdsZShcbiAgICAgICAgICAgIHRoaXMud29ybGRXaWR0aCAvIDIsXG4gICAgICAgICAgICB0aGlzLmdyb3VuZFksXG4gICAgICAgICAgICB0aGlzLndvcmxkV2lkdGgsXG4gICAgICAgICAgICBncm91bmRIZWlnaHRcbiAgICAgICAgKS5zZXRPcmlnaW4oMC41LCAwKS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgLy8gYcOxYWRpciB1biBjdWVycG8gZsOtc2ljbyBlc3TDoXRpY28gYWwgcmVjdMOhbmd1bG9cbiAgICAgICAgdGhpcy5waHlzaWNzLmFkZC5leGlzdGluZyhncm91bmQsIHRydWUpO1xuXG4gICAgICAgIC8vIHByaW1lcm8gc2UgY3JlYW4gbG9zIGp1Z2Fkb3Jlc1xuICAgICAgICB0aGlzLl9jcmVhdGVQbGF5ZXJzKCk7XG4gICAgICAgIC8vIGRlc3B1w6lzLCBzZSBtb250YW4gbGFzIGNvbGlzaW9uZXMgY29uIGVsIHN1ZWxvLCByZWQsIGV0Yy5cbiAgICAgICAgLy8gbW9udGFyIGNvbGlzaW9uZXMgZsOtc2ljYXMgZW50cmUganVnYWRvcmVzIHkgc3VlbG8gcGFyYSBxdWUgYm9keS5ibG9ja2VkLmRvd24gZnVuY2lvbmVcbiAgICAgICAgdGhpcy5fc2V0dXBQaHlzaWNzV29ybGQoZ3JvdW5kKTtcbiAgICAgICAgLy8gcG9yIMO6bHRpbW8sIHNlIGFzaWduYW4gbGFzIHRlY2xhc1xuICAgICAgICB0aGlzLl9zZXR1cElucHV0TWFwcGluZ3MoKTtcblxuICAgICAgICAvLyBwb3dlcnVwc1xuICAgICAgICB0aGlzLnBvd2VyVXBzID0gW107XG4gICAgICAgIHRoaXMubWF4UG93ZXJVcHMgPSAyO1xuICAgICAgICAvLyBsYSBhcGFyaWNpw7NuIGRlIHBvd2VyLXVwcyBzb24gbWVub3MgZnJlY3VlbnRlcyB5IGNvbiBwZXNvcywgcGFyYSBxdWUgdW5vcyBzYWxnYW5cbiAgICAgICAgLy8gbcOhcyBxdWUgb3Ryb3MgKHBvciBlamVtcGxvLCBzZSByZWR1Y2UgbGEgYXBhcmljacOzbiBkZSBwYXJhbGl6YXIpXG4gICAgICAgIHRoaXMucG93ZXJVcFNwYXduQ29uZmlnID0ge1xuICAgICAgICAgICAgLy8gZW50cmUgMy41IHkgNyBzZWd1bmRvc1xuICAgICAgICAgICAgbWluRGVsYXlNczogMzUwMCxcbiAgICAgICAgICAgIG1heERlbGF5TXM6IDcwMDAsXG4gICAgICAgICAgICB3ZWlnaHRzOiB7XG4gICAgICAgICAgICAgICAgdmVsb2NpZGFkOiAzLFxuICAgICAgICAgICAgICAgIHJhbGVudGl6YXI6IDIsXG4gICAgICAgICAgICAgICAgcGFyYWxpemFyOiAxLFxuICAgICAgICAgICAgICAgIHBvcjI6IDMsXG4gICAgICAgICAgICAgICAgcG9yMzogMlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvb2xkb3duTXM6IHtcbiAgICAgICAgICAgICAgICAvLyBwYXJhIGV2aXRhciBxdWUgc2FsZ2FuIG11eSBzZWd1aWRvcyB5IHVuIGp1Z2Fkb3Igbm8gcHVlZGEgbW92ZXJzZVxuICAgICAgICAgICAgICAgIC8vIGR1cmFudGUgbXVjaG8gdGllbXBvXG4gICAgICAgICAgICAgICAgcGFyYWxpemFyOiAxMDAwMFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvd2VyVXBMYXN0U3Bhd25BdCA9IHt9O1xuXG4gICAgICAgIHRoaXMuaW52ZW50b3J5VUkgPSB7XG4gICAgICAgICAgICBwbGF5ZXIxOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQuaW1hZ2UoNTAsIDUwLCAncG9yMicpLnNldFNjYWxlKDEuNCkuc2V0VmlzaWJsZShmYWxzZSkuc2V0RGVwdGgoMSksXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQuaW1hZ2UoMTEwLCA1MCwgJ3BvcjInKS5zZXRTY2FsZSgxLjQpLnNldFZpc2libGUoZmFsc2UpLnNldERlcHRoKDEpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgcGxheWVyMjogW1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkLmltYWdlKHRoaXMud29ybGRXaWR0aCAtIDExMCwgNTAsICdwb3IyJykuc2V0U2NhbGUoMS40KS5zZXRWaXNpYmxlKGZhbHNlKS5zZXREZXB0aCgxKSxcbiAgICAgICAgICAgICAgICB0aGlzLmFkZC5pbWFnZSh0aGlzLndvcmxkV2lkdGggLSA1MCwgNTAsICdwb3IyJykuc2V0U2NhbGUoMS40KS5zZXRWaXNpYmxlKGZhbHNlKS5zZXREZXB0aCgxKVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHNlIGluaWNpYSBsYSBnZW5lcmFjacOzbiBkZSBwb3dlci11cHMgKGhvc3QpXG4gICAgICAgIGlmICh0aGlzLmlzSG9zdENsaWVudCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlUG93ZXJVcFNwYXduKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYXJjb3MgZGVsIGludmVudGFyaW9cbiAgICAgICAgdGhpcy5pbnZlbnRvcnlGcmFtZXMgPSB7XG4gICAgICAgICAgICBwbGF5ZXIxOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQuaW1hZ2UoNTAsIDUwLCAnbWFyY29Qb3dlclVwJykuc2V0U2NhbGUoMSkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoMCksXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQuaW1hZ2UoMTEwLCA1MCwgJ21hcmNvUG93ZXJVcCcpLnNldFNjYWxlKDEpLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDApXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgcGxheWVyMjogW1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkLmltYWdlKHRoaXMud29ybGRXaWR0aCAtIDExMCwgNTAsICdtYXJjb1Bvd2VyVXAnKS5zZXRTY2FsZSgxKS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgwKSxcbiAgICAgICAgICAgICAgICB0aGlzLmFkZC5pbWFnZSh0aGlzLndvcmxkV2lkdGggLSA1MCwgNTAsICdtYXJjb1Bvd2VyVXAnKS5zZXRTY2FsZSgxKS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgwKVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGFjY3RpdmFyIGxpc3RlbmVycyBkZWwgV2ViU29ja2V0XG4gICAgICAgIC8vIHRoaXMuc2V0dXBXZWJTb2NrZXRMaXN0ZW5lcnMoKTtcblxuICAgICAgICAvLyBpbmljaWFsaXphY2nDs24gZGUgbGEgcGVsb3RhXG4gICAgICAgIHRoaXMuX2NyZWF0ZUJhbGwoKTtcbiAgICAgICAgLy8gZWwgaG9zdCBpbmljaWFsaXphIGxhIHBlbG90YSB5IGxhcyBjb2xpc2lvbmVzXG4gICAgICAgIGlmICh0aGlzLmlzSG9zdENsaWVudCgpKSB7XG4gICAgICAgICAgICAvLyBlbXB1asOzbiBzdXTDrWwgcGFyYSBldml0YXIgcXVlIHNlIHF1ZWRlIHNvYnJlIGxhIHJlZCBhbCBpbmljaW9cbiAgICAgICAgICAgIHRoaXMuYmFsbC5zZXRTZXJ2ZVBvc2l0aW9uKCk7XG4gICAgICAgICAgICAvLyBjb2xsaWRlcnMgZGUgbGEgcGVsb3RhXG4gICAgICAgICAgICB0aGlzLl9zZXR1cEJhbGxDb2xsaXNpb25zKCk7XG4gICAgICAgICAgICAvLyBldmVudG9zIGRlIGxhIHBlbG90YVxuICAgICAgICAgICAgdGhpcy5fc2V0dXBCYWxsRXZlbnRzKCk7XG5cbiAgICAgICAgICAgIC8vIGVsIGhvc3QgbWFuZGEgYmFsbF9zeW5jIHBlcmnDs2RpY29zXG4gICAgICAgICAgICB0aGlzLl9zdGFydEJhbGxTeW5jKDY2KTtcbiAgICAgICAgICAgIC8vIG1hbmRhIHVuIHJlc2V0IGluaWNpYWwgcGFyYSBxdWUgZWwgbm8taG9zdCBoYWdhIHNuYXBcbiAgICAgICAgICAgIHRoaXMuX3NlbmRCYWxsUmVzZXQoJ3N0YXJ0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZWwgbm8taG9zdCBzb2xvIHJlbmRlcml6YS9kZXNhY3RpdmEgZsOtc2ljYXMgYWN0aXZhc1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmFsbC5zcHJpdGUuYm9keS5zZXRBbGxvd0dyYXZpdHkoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5iYWxsLnNwcml0ZS5ib2R5LnNldFZlbG9jaXR5KDAsIDApO1xuICAgICAgICAgICAgLy90aGlzLmJhbGwuc3ByaXRlLmJvZHkuZW5hYmxlID0gZmFsc2U7IC8vIGZ1ZXJhIGRlIGbDrXNpY2FzLCBzb2xvIHJlbmRlclxuICAgICAgICAgICAgdGhpcy5iYWxsLnNwcml0ZS5ib2R5Lm1vdmVzID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIHRhcmdldCBpbmljaWFsIChwYXJhIHF1ZSBubyBoYWdhIHNhbHRvcyBhbCBwcmltZXIgdXBkYXRlKVxuICAgICAgICAgICAgdGhpcy5iYWxsTmV0LnR4ID0gdGhpcy5iYWxsLnNwcml0ZS54O1xuICAgICAgICAgICAgdGhpcy5iYWxsTmV0LnR5ID0gdGhpcy5iYWxsLnNwcml0ZS55O1xuICAgICAgICAgICAgdGhpcy5iYWxsTmV0Lmhhc1RhcmdldCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKnRoaXMuaW5wdXQua2V5Ym9hcmQub24oXCJrZXlkb3duLUVTQ1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzZSBkZXRpZW5lIGVsIGdhbWUgbG9vcFxuICAgICAgICAgICAgdGhpcy5zY2VuZS5wYXVzZSgpO1xuICAgICAgICAgICAgdGhpcy50aW1lckV2ZW50LnBhdXNlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLmxhdW5jaChcIlBhdXNlX1NjZW5lXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhY2Nlc28gZGlyZWN0byBhIGxhIGVzY2VuYSBkZSBmaW4gZGUgcGFydGlkYVxuICAgICAgICB0aGlzLmlucHV0LmtleWJvYXJkLm9uKFwia2V5ZG93bi1GXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdpbm5lciA9IHRoaXMuc2NvcmVQMSA+PSB0aGlzLnNjb3JlUDIgPyBcInBsYXllcjFcIiA6IFwicGxheWVyMlwiO1xuICAgICAgICAgICAgdGhpcy5fZW5kR2FtZSh3aW5uZXIpO1xuICAgICAgICB9KTsqL1xuXG4gICAgICAgIC8vIHNlIGFjdGl2YW4gbG9zIGxpc3RlbmVycyBkZWwgV2ViU29ja2V0XG4gICAgICAgIHRoaXMuc2V0dXBXZWJTb2NrZXRMaXN0ZW5lcnMoKTtcblxuICAgICAgICAvLyBzZSByZWFudWRhIGVsIGNyb27Ds21ldHJvIGFsIHZvbHZlciBkZSBwYXVzYVxuICAgICAgICB0aGlzLmV2ZW50cy5vbigncmVzdW1lJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aW1lckV2ZW50LnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gc2UgZGV0aWVuZSBlbCBlbnbDrW8gZGUgYmFsbF9zeW5jIGFsIGNlcnJhciBsYSBlc2NlbmFcbiAgICAgICAgdGhpcy5ldmVudHMub25jZShQaGFzZXIuU2NlbmVzLkV2ZW50cy5TSFVURE9XTiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fc3RvcEJhbGxTeW5jKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENvbXBydWViYSBzaSBlbCBjbGllbnRlIGVzIGVsIGhvc3QgZGVsIGp1ZWdvXG4gICAgaXNIb3N0Q2xpZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXIxPy5uYW1lID09PSB0aGlzLm15VXNlcm5hbWU7XG4gICAgfVxuXG4gICAgLy8gQ29uZmlndXJhIGxvcyBsaXN0ZW5lcnMgZGVsIFdlYlNvY2tldFxuICAgIHNldHVwV2ViU29ja2V0TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNlcnZlck1lc3NhZ2UoZGF0YSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgc2VydmVyIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMud3Mub25jbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBjbG9zZWQnKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5nYW1lRW5kZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURpc2Nvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLndzLm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2FtZUVuZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQ29udHJvbGEgbG9zIG1lbnNhamVzIHJlY2liaWRvcyBkZWwgc2Vydmlkb3IgKHNlcnZpZG9yIC0+IGNsaWVudGUpXG4gICAgaGFuZGxlU2VydmVyTWVzc2FnZShkYXRhKSB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdvcHBvbmVudF9tb3ZlJzpcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVPcG9uZW50SW5wdXQoZGF0YSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAvLyBjYXNlICdwYWRkbGVVcGRhdGUnOlxuICAgICAgICAgICAgLy8gICAgIC8vIFVwZGF0ZSBvcHBvbmVudCdzIHBhZGRsZSBwb3NpdGlvblxuICAgICAgICAgICAgLy8gICAgIHRoaXMucmVtb3RlUGFkZGxlLnNwcml0ZS55ID0gZGF0YS55O1xuICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAvLyBjYXNlICdzY29yZVVwZGF0ZSc6XG4gICAgICAgICAgICAvLyAgICAgLy8gVXBkYXRlIHNjb3JlcyBmcm9tIHNlcnZlclxuICAgICAgICAgICAgLy8gICAgIHRoaXMubG9jYWxTY29yZSA9IHRoaXMucGxheWVyUm9sZSA9PT0gJ3BsYXllcjEnID8gZGF0YS5wbGF5ZXIxU2NvcmUgOiBkYXRhLnBsYXllcjJTY29yZTtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLnJlbW90ZVNjb3JlID0gdGhpcy5wbGF5ZXJSb2xlID09PSAncGxheWVyMScgPyBkYXRhLnBsYXllcjJTY29yZSA6IGRhdGEucGxheWVyMVNjb3JlO1xuXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5zY29yZUxlZnQuc2V0VGV4dChkYXRhLnBsYXllcjFTY29yZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLnNjb3JlUmlnaHQuc2V0VGV4dChkYXRhLnBsYXllcjJTY29yZS50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgLy8gICAgIC8vIFN0b3AgYmFsbCwgc2VydmVyIHdpbGwgcmVsYXVuY2ggaXRcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmJhbGwuc2V0VmVsb2NpdHkoMCwgMCk7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5iYWxsLnNldFBvc2l0aW9uKDQwMCwgMzAwKTtcbiAgICAgICAgICAgIC8vICAgICBicmVhaztcblxuICAgICAgICAgICAgLy8gY2FzZSAnYmFsbFJlbGF1bmNoJzpcbiAgICAgICAgICAgIC8vICAgICAvLyBTZXJ2ZXIgaXMgcmVsYXVuY2hpbmcgdGhlIGJhbGwgd2l0aCBuZXcgdmVsb2NpdHlcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmJhbGwuc2V0UG9zaXRpb24oZGF0YS5iYWxsLngsIGRhdGEuYmFsbC55KTtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmJhbGwuc2V0VmVsb2NpdHkoZGF0YS5iYWxsLnZ4LCBkYXRhLmJhbGwudnkpO1xuICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAvLyBjYXNlICdnYW1lT3Zlcic6XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5lbmRHYW1lKGRhdGEud2lubmVyLCBkYXRhLnBsYXllcjFTY29yZSwgZGF0YS5wbGF5ZXIyU2NvcmUpO1xuICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdiYWxsX3VwZGF0ZSc6IC8vIGJhbGxfc3luYyBlbiBzZXJ2ZXJcbiAgICAgICAgICAgICAgICAvLyBsbyB1c2EgZWwgbm8taG9zdFxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0hvc3RDbGllbnQoKSkgdGhpcy5fb25CYWxsVXBkYXRlKGRhdGEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdiYWxsX3Jlc2V0JzogIC8vIGJhbGxfcmVzZXQgZW4gc2VydmVyXG4gICAgICAgICAgICAgICAgLy8gZWwgaG9zdCBhY3R1YWxpemEgZWwgcmFsbHlJZCwgZWwgbm8taG9zdCByZXNldGVhIGxhIHBlbG90YSAoc25hcClcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0hvc3RDbGllbnQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5yYWxseUlkICE9IG51bGwpIHRoaXMucmFsbHlJZCA9IGRhdGEucmFsbHlJZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkJhbGxSZXNldChkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NwYXduX3Bvd2VydXAnOiAvLyBjb2luY2lkZSBjb24gc2VydmVyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNIb3N0Q2xpZW50KCkpIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcHUgPSB0aGlzLnBoeXNpY3MuYWRkLnN0YXRpY0ltYWdlKGRhdGEueCwgZGF0YS55LCBkYXRhLnBvd2VyVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgLnNldERlcHRoKDIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRTY2FsZSgxLjIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHB1LnJlZnJlc2hCb2R5KSBwdS5yZWZyZXNoQm9keSgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5wb3dlclVwc05ldEJ5SWQuc2V0KGRhdGEuaWQsIHB1KTtcblxuICAgICAgICAgICAgICAgIC8vIGp1Z2Fkb3IgbG9jYWwgKGVuIGVzdGUgY2xpZW50ZSlcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFBsYXllciA9ICh0aGlzLnBsYXllcjEubmFtZSA9PT0gdGhpcy5teVVzZXJuYW1lKVxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGxheWVycy5nZXQoJ3BsYXllcjEnKVxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMucGxheWVycy5nZXQoJ3BsYXllcjInKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGF0dGFjaE92ZXJsYXAgPSAocGxheWVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGxheWVyPy5zcHJpdGUpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucG93ZXJVcHNOZXRPdmVybGFwc0J5SWQuaGFzKGRhdGEuaWQpKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdmVybGFwID0gdGhpcy5waHlzaWNzLmFkZC5vdmVybGFwKHBsYXllci5zcHJpdGUsIHB1LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nQ29sbGVjdFBvd2VyVXBzLmhhcyhkYXRhLmlkKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdDb2xsZWN0UG93ZXJVcHMuYWRkKGRhdGEuaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZSBwaWRlIGFsIGhvc3QgcXVlIHJlY29nYSBlbCBwb3dlci11cFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbGxlY3RfcG93ZXJ1cCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyTmFtZTogdGhpcy5teVVzZXJuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG93ZXJVcHNOZXRPdmVybGFwc0J5SWQuc2V0KGRhdGEuaWQsIG92ZXJsYXApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFhdHRhY2hPdmVybGFwKGxvY2FsUGxheWVyKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMTAwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucG93ZXJVcHNOZXRCeUlkLmhhcyhkYXRhLmlkKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0cnlQbGF5ZXIgPSAodGhpcy5wbGF5ZXIxLm5hbWUgPT09IHRoaXMubXlVc2VybmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGxheWVycy5nZXQoJ3BsYXllcjEnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5wbGF5ZXJzLmdldCgncGxheWVyMicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNoT3ZlcmxhcChyZXRyeVBsYXllcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAncmVtb3ZlX3Bvd2VydXAnOiAvLyBjb2luY2lkZSBjb24gc2VydmVyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhwaXJ5VGltZXIgPSB0aGlzLnBvd2VyVXBFeHBpcnlUaW1lcnMuZ2V0KGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgIGlmIChleHBpcnlUaW1lcikgZXhwaXJ5VGltZXIucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvd2VyVXBFeHBpcnlUaW1lcnMuZGVsZXRlKGRhdGEuaWQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSG9zdENsaWVudCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNlIGJvcnJhbiBsb3Mgb3ZlcmxhcHMgeSBsb3Mgc3ByaXRlcyBkZSBsb3MgcG93ZXJ1cHNcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHUgPSB0aGlzLnBvd2VyVXBzTmV0QnlJZC5nZXQoZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG92ID0gdGhpcy5wb3dlclVwc05ldE92ZXJsYXBzQnlJZC5nZXQoZGF0YS5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG92KSBvdi5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwdSkgcHUuZGVzdHJveSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG93ZXJVcHNOZXRPdmVybGFwc0J5SWQuZGVsZXRlKGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvd2VyVXBzTmV0QnlJZC5kZWxldGUoZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0NvbGxlY3RQb3dlclVwcy5kZWxldGUoZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdjb2xsZWN0X2RlbmllZCc6XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSG9zdENsaWVudCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhPy5pZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZW5pZWRJZCA9IGRhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMzAwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nQ29sbGVjdFBvd2VyVXBzLmRlbGV0ZShkZW5pZWRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnY29sbGVjdF9wb3dlcnVwJzoge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0hvc3RDbGllbnQoKSkgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAvLyBzZSB2YWxpYW4gaWQgeSBqdWdhZG9yXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBkYXRhLmlkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdobyA9IGRhdGEucGxheWVyTmFtZTtcblxuICAgICAgICAgICAgICAgIC8vIHNlIGludGVudGEgYWxtYWNlbmFyIGVsIHBvd2VydXAocF91KVxuICAgICAgICAgICAgICAgIGNvbnN0IHBfdSA9IHRoaXMucG93ZXJVcHNCeUlkLmdldChpZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFwX3UpIGJyZWFrOyAvLyBzaSB5YSBubyBleGlzdGUsIHNhbGVcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBsYXllciA9ICh0aGlzLnBsYXllcjEubmFtZSA9PT0gd2hvKVxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGxheWVycy5nZXQoJ3BsYXllcjEnKVxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMucGxheWVycy5nZXQoJ3BsYXllcjInKTtcblxuICAgICAgICAgICAgICAgIGlmICghcGxheWVyKSBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vIHNlIGd1YXJkYSBlbiBlbCBpbnZlbnRhcmlvIGRlbCBqdWdhZG9yXG4gICAgICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NDb2xsZWN0QnJvYWRjYXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZWQgPSBwX3UuY29sbGVjdChwbGF5ZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzQ29sbGVjdEJyb2FkY2FzdCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBpcnlUaW1lciA9IHRoaXMucG93ZXJVcEV4cGlyeVRpbWVycy5nZXQoaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwaXJ5VGltZXIpIGV4cGlyeVRpbWVyLnJlbW92ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG93ZXJVcEV4cGlyeVRpbWVycy5kZWxldGUoaWQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBzZSBib3JyYSBzaSBzZSByZWNvZ2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3dlclVwc0J5SWQuZGVsZXRlKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXZpc2EgYWwgb3RybyBjbGllbnRlIHBhcmEgcXVlIGxvIHF1aXRlIGRlbCBjYW1wb1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHsgdHlwZTogJ3JlbW92ZV9wb3dlcnVwJywgaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1hbmRhIGludmVudGFyaW9zIGFjdHVhbGl6YWRvc1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZW5kSW52ZW50b3J5U3luYygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGludmVudGFyaW8gbGxlbm8gLT4gcGVybWl0ZSBxdWUgZWwgb3BvbmVudGUgbG8gaW50ZW50ZSBsdWVnb1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHsgdHlwZTogJ2NvbGxlY3RfZGVuaWVkJywgaWQsIHBsYXllck5hbWU6IHdobyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgJ3VzZV9wb3dlcnVwJzpcbiAgICAgICAgICAgIGNhc2UgJ2FwcGx5X3Bvd2VydXAnOiAgIC8vIHVzZV9wb3dlcnVwIGVuIHNlcnZlclxuICAgICAgICAgICAgICAgIGNvbnN0IHdob1VzZWQgPSBkYXRhLnBsYXllck5hbWU7IC8vIHByaW1lcm8gc2UgZGV0ZXJtaW5hIFFVScOJTiBsbyB1c8OzXG4gICAgICAgICAgICAgICAgY29uc3QgcG93ZXJUeXBlID0gZGF0YS5wb3dlclR5cGU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSAodGhpcy5wbGF5ZXIxLm5hbWUgPT09IHdob1VzZWQpXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5wbGF5ZXJzLmdldCgncGxheWVyMScpXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5wbGF5ZXJzLmdldCgncGxheWVyMicpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFwbGF5ZXIpIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgLy8gaG9zdFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSG9zdENsaWVudCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhcHBsaWVkVHlwZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3dlclR5cGUpIGFwcGxpZWRUeXBlID0gcGxheWVyLnVzZU5leHRQb3dlclVwKHBvd2VyVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXBwbGllZFR5cGUpIGFwcGxpZWRUeXBlID0gcGxheWVyLnVzZU5leHRQb3dlclVwKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhcHBsaWVkVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VuZEludmVudG9yeVN5bmMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQbGF5ZXJJbnZlbnRvcnlVSShwbGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZW5kSW52ZW50b3J5U3luYygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3VzZV9wb3dlcnVwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllck5hbWU6IHdob1VzZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3dlclR5cGU6IGFwcGxpZWRUeXBlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vLWhvc3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZ1Bvd2VyVXBVc2UgJiYgdGhpcy5wZW5kaW5nUG93ZXJVcFVzZS5wbGF5ZXJOYW1lID09PSB3aG9Vc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdQb3dlclVwVXNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3dlclR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcGxpZWRUeXBlID0gcGxheWVyLnVzZU5leHRQb3dlclVwKHBvd2VyVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFwcGxpZWRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmFjdGl2YXRlUG93ZXJVcChwb3dlclR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5hcHBseVBvd2VyVXBFZmZlY3QocG93ZXJUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGxheWVySW52ZW50b3J5VUkocGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc2V0X21lc3NhZ2UnOlxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0hvc3RDbGllbnQoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpbm5lclRleHQuc2V0VGV4dChkYXRhLnRleHQgPz8gJycpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpbm5lclRleHQuc2V0VmlzaWJsZSghIWRhdGEudmlzaWJsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdpbnZfc3luYyc6XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSG9zdENsaWVudCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG9idGllbmUgbG9zIGp1Z2Fkb3Jlc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwMSA9IHRoaXMucGxheWVycy5nZXQoJ3BsYXllcjEnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcDIgPSB0aGlzLnBsYXllcnMuZ2V0KCdwbGF5ZXIyJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc3VzdGl0dXllIHN1cyBpbnZlbnRhcmlvc1xuICAgICAgICAgICAgICAgICAgICBpZiAocDEpIHsgcDEucG93ZXJVcEludmVudG9yeSA9IGRhdGEucDFJbnYgPz8gW107IHRoaXMudXBkYXRlUGxheWVySW52ZW50b3J5VUkocDEpOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwMikgeyBwMi5wb3dlclVwSW52ZW50b3J5ID0gZGF0YS5wMkludiA/PyBbXTsgdGhpcy51cGRhdGVQbGF5ZXJJbnZlbnRvcnlVSShwMik7IH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdQb3dlclVwVXNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3Njb3JlX3N5bmMnOlxuICAgICAgICAgICAgICAgIC8vIGlmICghdGhpcy5pc0hvc3RDbGllbnQoKSkgdGhpcy5fYXBwbHlTY29yZVN5bmMoZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXBwbHlTY29yZVN5bmMoZGF0YSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3RpbWVyX3N5bmMnOlxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0hvc3RDbGllbnQoKSAmJiB0eXBlb2YgZGF0YS50aWVtcG9SZXN0YW50ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aWVtcG9SZXN0YW50ZSA9IGRhdGEudGllbXBvUmVzdGFudGU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlclRpbWVyVGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAncGxheWVyRGlzY29ubmVjdGVkJzpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURpc2Nvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVW5rbm93biBtZXNzYWdlIHR5cGU6JywgZGF0YS50eXBlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZURpc2Nvbm5lY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZ2FtZUVuZGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gRGV0ZW5lciBjcm9uw7NtZXRybyB5IGbDrXNpY2FzXG4gICAgICAgIGlmICh0aGlzLnRpbWVyRXZlbnQpIHRoaXMudGltZXJFdmVudC5wYXVzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnBoeXNpY3Mud29ybGQucGF1c2UoKTtcblxuICAgICAgICAvLyBGZWVkYmFjayB2aXN1YWxcbiAgICAgICAgY29uc3QgYWJhbmRvblRleHQgPSBgRWwgb3BvbmVudGUgaGEgYWJhbmRvbmFkby5gO1xuICAgICAgICBjb25zb2xlLmxvZyhhYmFuZG9uVGV4dCk7XG5cbiAgICAgICAgdGhpcy5hZGQudGV4dCg0MDAsIDI1MCwgYWJhbmRvblRleHQsIHtcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDhweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmZjAwMDAnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIC8vIExpbXBpZXphIHkgc2FsaWRhXG4gICAgICAgIHRoaXMuc2h1dGRvd24oKTtcbiAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWVudV9TY2VuZScpO1xuICAgIH1cblxuICAgIHNodXRkb3duKCkge1xuICAgICAgICBpZiAodGhpcy5wb3dlclVwRXhwaXJ5VGltZXJzICYmIHRoaXMucG93ZXJVcEV4cGlyeVRpbWVycy5zaXplID4gMCkge1xuICAgICAgICAgICAgdGhpcy5wb3dlclVwRXhwaXJ5VGltZXJzLmZvckVhY2godGltZXIgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aW1lcikgdGltZXIucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wb3dlclVwRXhwaXJ5VGltZXJzLmNsZWFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy53cyAmJiB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgICAgICB0aGlzLndzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNYW5kYSB1biBtZW5zYWplIGFsIHNlcnZpZG9yXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICBpZiAodGhpcy53cyAmJiB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgICAgICB0aGlzLndzLnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhIHVuIG51ZXZvIHBvd2VyLXVwIGVuIHVuYSBwb3NpY2nDs24gYWxlYXRvcmlhIGNhZGEgY2llcnRvIHRpZW1wb1xuICAgIHNjaGVkdWxlUG93ZXJVcFNwYXduKCkge1xuICAgICAgICBjb25zdCB7IG1pbkRlbGF5TXMsIG1heERlbGF5TXMgfSA9IHRoaXMucG93ZXJVcFNwYXduQ29uZmlnO1xuICAgICAgICBjb25zdCBybmcgPSB0aGlzLnJuZyA/PyBQaGFzZXIuTWF0aC5STkQ7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gcm5nLmJldHdlZW4obWluRGVsYXlNcywgbWF4RGVsYXlNcyk7XG5cbiAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKGRlbGF5LCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3dlclVwcy5sZW5ndGggPCB0aGlzLm1heFBvd2VyVXBzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV0WCA9IHRoaXMucmVkLng7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFyZ2luID0gODA7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSAyNTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNwYXduTGVmdCA9IHJuZy5iZXR3ZWVuKDAsIDEpID09PSAwO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgeE1pbiA9IHNwYXduTGVmdCA/IG1hcmdpbiA6IChuZXRYICsgaW5uZXIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHhNYXggPSBzcGF3bkxlZnQgPyAobmV0WCAtIGlubmVyKSA6ICh0aGlzLndvcmxkV2lkdGggLSBtYXJnaW4pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IHJuZy5iZXR3ZWVuKE1hdGguZmxvb3IoeE1pbiksIE1hdGguZmxvb3IoeE1heCkpO1xuXG4gICAgICAgICAgICAgICAgLy9jb25zdCB4ID0gUGhhc2VyLk1hdGguQmV0d2Vlbig4MCwgdGhpcy53b3JsZFdpZHRoIC0gODApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBybmcuYmV0d2Vlbih0aGlzLndvcmxkSGVpZ2h0IC0gMjIwLCB0aGlzLndvcmxkSGVpZ2h0IC0gMTIwKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLl9nZXRXZWlnaHRlZFBvd2VyVXBUeXBlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSArK3RoaXMucG93ZXJVcFNlcTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG93ZXJVcCA9IG5ldyBQb3dlclVwKHRoaXMsIHgsIHksIHR5cGUvKmlkKi8pO1xuICAgICAgICAgICAgICAgICAgICAvL3Bvd2VyVXAuaWQgPSBpZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxDb2xsZWN0ID0gcG93ZXJVcC5jb2xsZWN0LmJpbmQocG93ZXJVcCk7XG4gICAgICAgICAgICAgICAgICAgIHBvd2VyVXAuY29sbGVjdCA9IChwbGF5ZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJlZm9yZSA9IEFycmF5LmlzQXJyYXkocGxheWVyPy5wb3dlclVwSW52ZW50b3J5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcGxheWVyLnBvd2VyVXBJbnZlbnRvcnkubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxDb2xsZWN0KHBsYXllcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhZnRlciA9IEFycmF5LmlzQXJyYXkocGxheWVyPy5wb3dlclVwSW52ZW50b3J5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcGxheWVyLnBvd2VyVXBJbnZlbnRvcnkubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVkID0gYWZ0ZXIgPiBiZWZvcmU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZWQgJiYgdGhpcy5pc0hvc3RDbGllbnQoKSAmJiAhdGhpcy5fc3VwcHJlc3NDb2xsZWN0QnJvYWRjYXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJ5VGltZXIgPSB0aGlzLnBvd2VyVXBFeHBpcnlUaW1lcnMuZ2V0KGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwaXJ5VGltZXIpIGV4cGlyeVRpbWVyLnJlbW92ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3dlclVwRXhwaXJ5VGltZXJzLmRlbGV0ZShpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3dlclVwc0J5SWQuZGVsZXRlKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHsgdHlwZTogJ3JlbW92ZV9wb3dlcnVwJywgaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VuZEludmVudG9yeVN5bmMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlZDtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvd2VyVXBzLnB1c2gocG93ZXJVcCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG93ZXJVcExhc3RTcGF3bkF0W3R5cGVdID0gdGhpcy50aW1lLm5vdztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3dlclVwc0J5SWQuc2V0KGlkLCBwb3dlclVwKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzcGF3bl9wb3dlcnVwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgeCwgeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvd2VyVHlwZTogdHlwZVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjb250cm9sYSBsYSBkZXNhcGFyaWNpw7NuIGRlbCBwb3dlcnVwIHBvciB0aWVtcG8gKHNlIHF1ZWRhIHNpbiByZWNvZ2VyKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaWZldGltZU1zID0gTnVtYmVyLmlzRmluaXRlKHBvd2VyVXA/LmxpZmV0aW1lKSA/IHBvd2VyVXAubGlmZXRpbWUgOiA1MDAwO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBpcnlUaW1lciA9IHRoaXMudGltZS5kZWxheWVkQ2FsbChsaWZldGltZU1zLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvd2VyVXBFeHBpcnlUaW1lcnMuZGVsZXRlKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLnBvd2VyVXBzQnlJZC5nZXQoaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50KSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5pc0NvbGxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG93ZXJVcHNCeUlkLmRlbGV0ZShpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHsgdHlwZTogJ3JlbW92ZV9wb3dlcnVwJywgaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvd2VyVXBzQnlJZC5kZWxldGUoaWQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3dlclVwRXhwaXJ5VGltZXJzLnNldChpZCwgZXhwaXJ5VGltZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVBvd2VyVXBTcGF3bigpOyAvLyByZWN1cnNpdm9cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gT2J0aWVuZSB1biB0aXBvIGRlIHBvd2VyLXVwIGJhc2FkbyBlbiBsb3MgcGVzb3MgY29uZmlndXJhZG9zIGFudGVyaW9ybWVudGVcbiAgICBfZ2V0V2VpZ2h0ZWRQb3dlclVwVHlwZSgpIHtcbiAgICAgICAgY29uc3QgeyB3ZWlnaHRzLCBjb29sZG93bk1zIH0gPSB0aGlzLnBvd2VyVXBTcGF3bkNvbmZpZztcblxuICAgICAgICBjb25zdCBub3cgPSB0aGlzLnRpbWUubm93O1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMod2VpZ2h0cykuZmlsdGVyKChbdHlwZSwgd2VpZ2h0XSkgPT4ge1xuICAgICAgICAgICAgLy8gc2UgZmlsdHJhbiBsb3MgdGlwb3MgcXVlIG5vIHNlIHB1ZWRlbiB1c2FyXG4gICAgICAgICAgICAvLyBzaSBlbCBwZXNvIGVzIDBcbiAgICAgICAgICAgIGlmICh3ZWlnaHQgPD0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgLy8gc2kgdG9kYXbDrWEgZXN0w6EgZW4gY29vbGRvd24gZGVzZGUgbGEgw7psdGltYSBhcGFyaWNpw7NuXG4gICAgICAgICAgICBjb25zdCBjb29sZG93biA9IGNvb2xkb3duTXM/Llt0eXBlXTtcbiAgICAgICAgICAgIGlmICghY29vbGRvd24pIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY29uc3QgbGFzdCA9IHRoaXMucG93ZXJVcExhc3RTcGF3bkF0Py5bdHlwZV0gfHwgMDtcbiAgICAgICAgICAgIHJldHVybiBub3cgLSBsYXN0ID49IGNvb2xkb3duO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBzaSBubyBxdWVkYSBuaW5nw7puIHRpcG8gZGlzcG9uaWJsZSwgc2UgZGV2dWVsdmUgbnVsbFxuICAgICAgICBpZiAoIWVudHJpZXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAvLyBzZSBzdW1hbiB0b2RvcyBsb3MgcGVzb3MsIHNlIGVsaWdlIHVuIG7Dum1lcm8gYWxlYXRvcmlvIGVudHJlIDEgeSBlc2Egc3VtYVxuICAgICAgICBjb25zdCB0b3RhbCA9IGVudHJpZXMucmVkdWNlKChzdW0sIFssIHdlaWdodF0pID0+IHN1bSArIHdlaWdodCwgMCk7XG4gICAgICAgIGNvbnN0IHJuZyA9IHRoaXMucm5nID8/IFBoYXNlci5NYXRoLlJORDtcbiAgICAgICAgbGV0IHJvbGwgPSBybmcuYmV0d2VlbigxLCB0b3RhbCk7XG4gICAgICAgIC8vIHNlIHZhbiByZXN0YW5kbyBwZXNvcyBoYXN0YSBxdWUgZWwgY29udGFkb3IgY2FlIGVuIHVuIHRpcG9cbiAgICAgICAgZm9yIChjb25zdCBbdHlwZSwgd2VpZ2h0XSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgICByb2xsIC09IHdlaWdodDtcbiAgICAgICAgICAgIC8vIHNlIGRldnVlbHZlIGVsIHRpcG9cbiAgICAgICAgICAgIGlmIChyb2xsIDw9IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0dhbWVfU2NlbmVdIFBvd2VyLXVwIGFsZWF0b3JpbzogJywgdHlwZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaSBwb3IgYWxndW5hIHJhesOzbiBubyBjYWUgZW4gbmluZ3Vubywgc2UgZGV2dWVsdmUgZWwgw7psdGltbyB0aXBvIHbDoWxpZG9cbiAgICAgICAgcmV0dXJuIGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXVswXTtcbiAgICB9XG5cbiAgICAvLyBSZXByb2R1Y2UgdW4gZWZlY3RvIGRlIHNvbmlkb1xuICAgIHBsYXlTZngoa2V5KSB7XG4gICAgICAgIGlmICgha2V5KSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5zb3VuZC5wbGF5KGtleSwgeyB2b2x1bWU6IGdldFN0b3JlZFNmeFZvbHVtZSgpIH0pO1xuICAgIH1cblxuICAgIC8vIEJ1Y2xlIHByaW5jaXBhbCBkZWwganVlZ29cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIC8vIHNlIHByb2Nlc2FuIGxvcyBpbnB1dHMgZGUgbG9zIGp1Z2Fkb3Jlc1xuICAgICAgICAvLyB0aGlzLl9oYW5kbGVJbnB1dEZvckFsbFBsYXllcnMoKTtcbiAgICAgICAgdGhpcy5faGFuZGxlTXlJbnB1dCgpO1xuICAgICAgICAvLyBzZSBhY3R1YWxpemFuIGxvcyBwb3dlci11cHNcbiAgICAgICAgdGhpcy5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHBsYXllci51cGRhdGVQb3dlclVwcygpKTtcblxuICAgICAgICBpZiAoIXRoaXMuYmFsbCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIGVsIGhvc3QgYWN0dWFsaXphIGVsIGVzdGFkbyBkZSBsYSBwZWxvdGFcbiAgICAgICAgaWYgKHRoaXMuaXNIb3N0Q2xpZW50KCkpIHtcbiAgICAgICAgICAgIHRoaXMuYmFsbC51cGRhdGUoKTtcbiAgICAgICAgICAgIC8vIHZlcmlmaWNhIHNpIGxhIHBlbG90YSBnb2xwZWEgZWwgc3VlbG8gKGdyb3VuZFkgZXMgbGEgcGFydGUgc3VwZXJpb3IgZGVsIHN1ZWxvKVxuICAgICAgICAgICAgaWYgKHRoaXMuYmFsbC5pc0JhbGxMaXZlICYmIHRoaXMuYmFsbC5zcHJpdGUueSA+IHRoaXMuZ3JvdW5kWSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFsbC5vbkdyb3VuZGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2ZXJpZmljYSBzaSBsYSBwZWxvdGEgY3J1emEgbGEgcmVkIChyZWQgZXN0w6EgZW4geCA9IDQ4MClcbiAgICAgICAgICAgIGlmICh0aGlzLmJhbGwuc3ByaXRlLnggPCA0NzUgJiYgdGhpcy5iYWxsLmNvdXJ0U2lkZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFsbC5jcm9zc05ldCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJhbGwuc3ByaXRlLnggPiA0ODUgJiYgdGhpcy5iYWxsLmNvdXJ0U2lkZSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iYWxsLmNyb3NzTmV0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZWwgbm8taG9zdCByZW5kZXJpemEgbG8gcXVlIGxsZWdhIHBvciByZWRcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9hcHBseUJhbGxOZXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFjdHVhbGl6YSBlbCB0ZW1wb3JpemFkb3IgY2FkYSBzZWd1bmRvXG4gICAgdXBkYXRlVGltZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0hvc3RDbGllbnQoKSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMudGllbXBvUmVzdGFudGUtLTtcbiAgICAgICAgdGhpcy5fcmVuZGVyVGltZXJUZXh0KCk7XG5cbiAgICAgICAgLy8gRm9ybWF0b1xuICAgICAgICAvL2NvbnN0IG1pbnV0b3MgPSBNYXRoLmZsb29yKHRoaXMudGllbXBvUmVzdGFudGUgLyA2MCk7XG4gICAgICAgIC8vY29uc3Qgc2VndW5kb3MgPSB0aGlzLnRpZW1wb1Jlc3RhbnRlICUgNjA7XG4gICAgICAgIC8vY29uc3QgZm9ybWF0byA9IGAke21pbnV0b3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3NlZ3VuZG9zLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuXG4gICAgICAgIC8vdGhpcy50aW1lclRleHQuc2V0VGV4dChmb3JtYXRvKTtcblxuICAgICAgICAvLyBtYW5kYSBlbCB0aWVtcG8gYWwgb3RybyBjbGllbnRlXG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoeyB0eXBlOiAndGltZXJfc3luYycsIHRpZW1wb1Jlc3RhbnRlOiB0aGlzLnRpZW1wb1Jlc3RhbnRlIH0pO1xuXG4gICAgICAgIC8vIHNlIGNvbXBydWViYSBlbCBmaW4gZGVsIHRpZW1wb1xuICAgICAgICBpZiAodGhpcy50aWVtcG9SZXN0YW50ZSA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVyRXZlbnQucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRklOIERFTCBUSUVNUE9cIik7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3JlUDEgPiB0aGlzLnNjb3JlUDIpIHRoaXMuX2VuZFNldChcInBsYXllcjFcIik7XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNjb3JlUDIgPiB0aGlzLnNjb3JlUDEpIHRoaXMuX2VuZFNldChcInBsYXllcjJcIik7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVtcGF0ZSBlbiBlbCBzZXRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0dvbGRlblBvaW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXRXaW5uZXJUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lubmVyVGV4dC5zZXRUZXh0KCdFTVBBVEU6IHB1bnRvIGRlIG9ybycpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpbm5lclRleHQuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTZXRTY29yZVVJKCkge1xuICAgICAgICBpZiAodGhpcy5zZXRTY29yZUxlZnQpIHRoaXMuc2V0U2NvcmVMZWZ0LnNldFRleHQodGhpcy5zZXRzUDEudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmICh0aGlzLnNldFNjb3JlUmlnaHQpIHRoaXMuc2V0U2NvcmVSaWdodC5zZXRUZXh0KHRoaXMuc2V0c1AyLnRvU3RyaW5nKCkpO1xuICAgIH1cblxuICAgIC8vIEFjdHVhbGl6YSBsYSBVSSBkZWwgaW52ZW50YXJpbyBkZSBwb3dlci11cHMgZGUgdW4ganVnYWRvclxuICAgIHVwZGF0ZVBsYXllckludmVudG9yeVVJKHBsYXllcikge1xuICAgICAgICBjb25zdCB1aSA9IHRoaXMuaW52ZW50b3J5VUlbcGxheWVyLmlkXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgICAgICAgICAgaWYgKHBsYXllci5wb3dlclVwSW52ZW50b3J5W2ldKSB7XG4gICAgICAgICAgICAgICAgdWlbaV0uc2V0VGV4dHVyZShwbGF5ZXIucG93ZXJVcEludmVudG9yeVtpXSk7XG4gICAgICAgICAgICAgICAgdWlbaV0uc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWlbaV0uc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLy8vIE3DiVRPRE9TIEFVWElMSUFSRVMgLy8vL1xuICAgIC8vIENyZWEgbGFzIGFuaW1hY2lvbmVzIGRlIGxvcyAzIHBlcnNvbmFqZXNcbiAgICBfY3JlYXRlQW5pbWF0aW9ucygpIHtcbiAgICAgICAgLy8vLyBDaGFyYWN0ZXJBIC8vLy9cbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckFfaWRsZVJpZ2h0JyxcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckFfbW92ZScsIHsgc3RhcnQ6IDAsIGVuZDogMSB9KSwgLy8gZmlsYSAwXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDUsXG4gICAgICAgICAgICByZXBlYXQ6IC0xXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQV9pZGxlTGVmdCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJBX21vdmUnLCB7IHN0YXJ0OiAyMCwgZW5kOiAyMSB9KS5yZXZlcnNlKCksIC8vIGZpbGEgMFxuICAgICAgICAgICAgZnJhbWVSYXRlOiA1LFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQV9yZWNlaXZlUmlnaHQnLFxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQV9tb3ZlJywgeyBzdGFydDogMCwgZW5kOiAxMCB9KSwgLy8gZmlsYSAwXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDE3LFxuICAgICAgICAgICAgcmVwZWF0OiAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQV9yZWNlaXZlTGVmdCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJBX21vdmUnLCB7IHN0YXJ0OiAxMSwgZW5kOiAyMSB9KS5yZXZlcnNlKCksIC8vIGZpbGEgMVxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcbiAgICAgICAgICAgIHJlcGVhdDogMFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQV9ydW5SaWdodCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJBX21vdmUnLCB7IHN0YXJ0OiAyMiwgZW5kOiAzMiB9KSwgLy8gZmlsYSAyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDIyLFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckFfcnVuTGVmdCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJBX21vdmUnLCB7IHN0YXJ0OiAzMywgZW5kOiA0MyB9KS5yZXZlcnNlKCksIC8vIGZpbGEgM1xuICAgICAgICAgICAgZnJhbWVSYXRlOiAyMixcbiAgICAgICAgICAgIHJlcGVhdDogLTFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckFfanVtcFJpZ2h0JyxcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckFfanVtcCcsIHsgc3RhcnQ6IDAsIGVuZDogMTIgfSksIC8vIGZpbGEgMFxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcbiAgICAgICAgICAgIHJlcGVhdDogMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckFfanVtcExlZnQnLFxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQV9qdW1wJywgeyBzdGFydDogMTMsIGVuZDogMjUgfSkucmV2ZXJzZSgpLCAvLyBmaWxhIDFcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogMTcsXG4gICAgICAgICAgICByZXBlYXQ6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vLy8vLy8vXG5cbiAgICAgICAgLy8vLyBDaGFyYWN0ZXJCIC8vLy9cbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckJfaWRsZVJpZ2h0JyxcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckJfbW92ZScsIHsgc3RhcnQ6IDAsIGVuZDogMSB9KSwgLy8gZmlsYSAwXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDUsXG4gICAgICAgICAgICByZXBlYXQ6IC0xXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQl9pZGxlTGVmdCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJCX21vdmUnLCB7IHN0YXJ0OiAyMCwgZW5kOiAyMSB9KS5yZXZlcnNlKCksIC8vIGZpbGEgMFxuICAgICAgICAgICAgZnJhbWVSYXRlOiA1LFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQl9yZWNlaXZlUmlnaHQnLFxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQl9tb3ZlJywgeyBzdGFydDogMCwgZW5kOiAxMCB9KSwgLy8gZmlsYSAwXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDE3LFxuICAgICAgICAgICAgcmVwZWF0OiAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQl9yZWNlaXZlTGVmdCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJCX21vdmUnLCB7IHN0YXJ0OiAxMSwgZW5kOiAyMSB9KS5yZXZlcnNlKCksIC8vIGZpbGEgMVxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcbiAgICAgICAgICAgIHJlcGVhdDogMFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQl9ydW5SaWdodCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJCX21vdmUnLCB7IHN0YXJ0OiAyMiwgZW5kOiAzMiB9KSwgLy8gZmlsYSAyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDIyLFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckJfcnVuTGVmdCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJCX21vdmUnLCB7IHN0YXJ0OiAzMywgZW5kOiA0MyB9KS5yZXZlcnNlKCksIC8vIGZpbGEgM1xuICAgICAgICAgICAgZnJhbWVSYXRlOiAyMixcbiAgICAgICAgICAgIHJlcGVhdDogLTFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckJfanVtcFJpZ2h0JyxcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckJfanVtcCcsIHsgc3RhcnQ6IDAsIGVuZDogMTIgfSksIC8vIGZpbGEgMFxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcbiAgICAgICAgICAgIHJlcGVhdDogMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckJfanVtcExlZnQnLFxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQl9qdW1wJywgeyBzdGFydDogMTMsIGVuZDogMjUgfSkucmV2ZXJzZSgpLCAvLyBmaWxhIDFcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogMTcsXG4gICAgICAgICAgICByZXBlYXQ6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vLy8vLy8vXG5cbiAgICAgICAgLy8vLyBDaGFyYWN0ZXJDIC8vLy9cbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckNfaWRsZVJpZ2h0JyxcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckNfbW92ZScsIHsgc3RhcnQ6IDAsIGVuZDogMSB9KSwgLy8gZmlsYSAwXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDUsXG4gICAgICAgICAgICByZXBlYXQ6IC0xXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQ19pZGxlTGVmdCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJDX21vdmUnLCB7IHN0YXJ0OiAyMCwgZW5kOiAyMSB9KS5yZXZlcnNlKCksIC8vIGZpbGEgMFxuICAgICAgICAgICAgZnJhbWVSYXRlOiA1LFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQ19yZWNlaXZlUmlnaHQnLFxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQ19tb3ZlJywgeyBzdGFydDogMCwgZW5kOiAxMCB9KSwgLy8gZmlsYSAwXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDE3LFxuICAgICAgICAgICAgcmVwZWF0OiAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQ19yZWNlaXZlTGVmdCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJDX21vdmUnLCB7IHN0YXJ0OiAxMSwgZW5kOiAyMSB9KS5yZXZlcnNlKCksIC8vIGZpbGEgMVxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcbiAgICAgICAgICAgIHJlcGVhdDogMFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyQ19ydW5SaWdodCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJDX21vdmUnLCB7IHN0YXJ0OiAyMiwgZW5kOiAzMiB9KSwgLy8gZmlsYSAyXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDIyLFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckNfcnVuTGVmdCcsXG4gICAgICAgICAgICBmcmFtZXM6IHRoaXMuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ2NoYXJDX21vdmUnLCB7IHN0YXJ0OiAzMywgZW5kOiA0MyB9KS5yZXZlcnNlKCksIC8vIGZpbGEgM1xuICAgICAgICAgICAgZnJhbWVSYXRlOiAyMixcbiAgICAgICAgICAgIHJlcGVhdDogLTFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckNfanVtcFJpZ2h0JyxcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhckNfanVtcCcsIHsgc3RhcnQ6IDAsIGVuZDogMTIgfSksIC8vIGZpbGEgMFxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxNyxcbiAgICAgICAgICAgIHJlcGVhdDogMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAnY2hhckNfanVtcExlZnQnLFxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyQ19qdW1wJywgeyBzdGFydDogMTMsIGVuZDogMjUgfSkucmV2ZXJzZSgpLCAvLyBmaWxhIDFcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogMTcsXG4gICAgICAgICAgICByZXBlYXQ6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vLy8vLy8vXG4gICAgfVxuXG4gICAgLy8gQ3JlYSBsb3MgcGVyc29uYWplcyBkZSBjYWRhIGp1Z2Fkb3JcbiAgICBfY3JlYXRlUGxheWVycygpIHtcbiAgICAgICAgY29uc3QgY2hhclAxID0gdGhpcy5wbGF5ZXIxLmNoYXJhY3RlcjtcbiAgICAgICAgY29uc3QgY2hhclAyID0gdGhpcy5wbGF5ZXIyLmNoYXJhY3RlcjtcblxuICAgICAgICBjb25zdCBwMSA9IG5ldyBQbGF5ZXIoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgJ3BsYXllcjEnLFxuICAgICAgICAgICAgdGhpcy53b3JsZFdpZHRoICogMC4yNSwgICAvLyBpenF1aWVyZGFcbiAgICAgICAgICAgIHRoaXMuZ3JvdW5kWSAtIDEwMCwgICAgICAgIC8vIGFycmliYSBkZWwgc3VlbG8gKG3DoXMgbWFyZ2VuKVxuICAgICAgICAgICAgY2hhclAxXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcDIgPSBuZXcgUGxheWVyKFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICdwbGF5ZXIyJyxcbiAgICAgICAgICAgIHRoaXMud29ybGRXaWR0aCAqIDAuNzUsICAgLy8gZGVyZWNoYVxuICAgICAgICAgICAgdGhpcy5ncm91bmRZIC0gMTAwLCAgICAgICAgLy8gYXJyaWJhIGRlbCBzdWVsbyAobcOhcyBtYXJnZW4pXG4gICAgICAgICAgICBjaGFyUDJcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnBsYXllcnMuc2V0KCdwbGF5ZXIxJywgcDEpO1xuICAgICAgICB0aGlzLnBsYXllcnMuc2V0KCdwbGF5ZXIyJywgcDIpO1xuXG4gICAgICAgIC8vIHNlIGVzdGFibGVjZW4gbG9zIGzDrW1pdGVzIGRlIGxhIGNhbmNoYSBwYXJhIGNhZGEganVnYWRvclxuICAgICAgICBjb25zdCBjb3VydFRvcCA9IDUwO1xuICAgICAgICAvLyBhbGluZWFyIGVsIGzDrW1pdGUgaW5mZXJpb3IganVzdG8gcG9yIGVuY2ltYSBkZWwgc3VlbG9cbiAgICAgICAgLy8gY29tbyBlbCBncm91bmQgYWhvcmEgdGllbmUgb3JpZ2luIGVuICgwLjUsIDApLCBncm91bmRZIGVzIGxhIHBhcnRlIHN1cGVyaW9yXG4gICAgICAgIGNvbnN0IGNvdXJ0Qm90dG9tID0gTWF0aC5mbG9vcih0aGlzLmdyb3VuZFkpO1xuICAgICAgICBjb25zdCBjb3VydEludGVyaW9yTWFyZ2luID0gMjU7XG4gICAgICAgIGNvbnN0IGNvdXJ0RXh0ZXJpb3J0TWFyZ2luID0gODA7XG5cbiAgICAgICAgLy8gcGxheWVyMSAoaXpxdWllcmRhKTpcbiAgICAgICAgcDEuc2V0Qm91bmRzKGNvdXJ0RXh0ZXJpb3J0TWFyZ2luLCA0ODAgLSBjb3VydEludGVyaW9yTWFyZ2luLCBjb3VydFRvcCwgY291cnRCb3R0b20pO1xuXG4gICAgICAgIC8vIHBsYXllcjIgKGRlcmVjaGEpOlxuICAgICAgICBwMi5zZXRCb3VuZHMoNDgwICsgY291cnRJbnRlcmlvck1hcmdpbiwgdGhpcy53b3JsZFdpZHRoIC0gY291cnRFeHRlcmlvcnRNYXJnaW4sIGNvdXJ0VG9wLCBjb3VydEJvdHRvbSk7XG5cbiAgICAgICAgdGhpcy5jb21tYW5kUHJvY2Vzc29yLnNldFBsYXllcnModGhpcy5wbGF5ZXJzKTtcbiAgICAgICAgdGhpcy5jb21tYW5kUHJvY2Vzc29yLnNldEdhbWVTY2VuZSh0aGlzKTtcblxuICAgICAgICAvLyBwb3IgZGVmZWN0bywgYW5pbWFjacOzbiBpZGxlXG4gICAgICAgIHAxLmlkbGVSaWdodCgpO1xuICAgICAgICBwMi5pZGxlTGVmdCgpO1xuICAgIH1cblxuICAgIC8vIENyZWEgZWwgc3VlbG8sIGxhIHJlZCwgbG9zIGzDrW1pdGVzLCBldGMuXG4gICAgX3NldHVwUGh5c2ljc1dvcmxkKGdyb3VuZCkge1xuICAgICAgICB0aGlzLnBsYXllcnMuZm9yRWFjaChwbGF5ZXIgPT4ge1xuICAgICAgICAgICAgLy8gY29saXNpw7NuIGp1Z2Fkb3Itc3VlbG9cbiAgICAgICAgICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIocGxheWVyLnNwcml0ZSwgZ3JvdW5kKTtcblxuICAgICAgICAgICAgLy8gY29saXNpw7NuIGp1Z2Fkb3ItcmVkXG4gICAgICAgICAgICB0aGlzLnBoeXNpY3MuYWRkLmNvbGxpZGVyKHBsYXllci5zcHJpdGUsIHRoaXMucmVkLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7cGxheWVyLmlkfSB0b2PDsyBsYSByZWQhYCk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnNwcml0ZS5zZXRWZWxvY2l0eVgoMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQXNpZ25hIGxvcyBjb250cm9sZXMvdGVjbGFzIGRlIGNhZGEganVnYWRvclxuICAgIF9zZXR1cElucHV0TWFwcGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0Q29uZmlnID0gW1xuICAgICAgICAgICAgLy8ganVnYWRvciAxXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGxheWVySWQ6ICdwbGF5ZXIxJyxcbiAgICAgICAgICAgICAgICBsZWZ0S2V5OiAnQScsXG4gICAgICAgICAgICAgICAgcmlnaHRLZXk6ICdEJyxcbiAgICAgICAgICAgICAgICBqdW1wS2V5OiAnVycsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZUtleTogJ1MnLFxuICAgICAgICAgICAgICAgIHBvd2VyS2V5OiAnRSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBqdWdhZG9yIDJcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXJJZDogJ3BsYXllcjInLFxuICAgICAgICAgICAgICAgIGxlZnRLZXk6ICdKJyxcbiAgICAgICAgICAgICAgICByaWdodEtleTogJ0wnLFxuICAgICAgICAgICAgICAgIGp1bXBLZXk6ICdJJyxcbiAgICAgICAgICAgICAgICByZWNlaXZlS2V5OiAnSycsXG4gICAgICAgICAgICAgICAgcG93ZXJLZXk6ICdPJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuaW5wdXRNYXBwaW5ncyA9IGlucHV0Q29uZmlnLm1hcChjb25maWcgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXJJZDogY29uZmlnLnBsYXllcklkLFxuICAgICAgICAgICAgICAgIGxlZnRLZXlPYmo6IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFxuICAgICAgICAgICAgICAgICAgICBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXNbY29uZmlnLmxlZnRLZXldXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICByaWdodEtleU9iajogdGhpcy5pbnB1dC5rZXlib2FyZC5hZGRLZXkoXG4gICAgICAgICAgICAgICAgICAgIFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlc1tjb25maWcucmlnaHRLZXldXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBqdW1wS2V5T2JqOiB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShcbiAgICAgICAgICAgICAgICAgICAgUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzW2NvbmZpZy5qdW1wS2V5XVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZUtleU9iajogdGhpcy5pbnB1dC5rZXlib2FyZC5hZGRLZXkoXG4gICAgICAgICAgICAgICAgICAgIFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlc1tjb25maWcucmVjZWl2ZUtleV1cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHBvd2VyS2V5T2JqOiB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShcbiAgICAgICAgICAgICAgICAgICAgUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzW2NvbmZpZy5wb3dlcktleV1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBUT0RPIG1hbmRhciBjb21vIG1lbnNhamUgYWwgc2Vydmlkb3IgZWwgY29tbWFuZCBwYXJhIHF1ZSBsbyBlamVjdXRlIHRhbWJpw6luIGVsIG90cm8ganVnYWRvclxuICAgIC8vIFByb2Nlc2Egc29sbyBlbCBpbnB1dCBkZWwganVnYWRvciBsb2NhbFxuICAgIF9oYW5kbGVNeUlucHV0KCkge1xuICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLnBsYXllcjEubmFtZSA9PT0gdGhpcy5teVVzZXJuYW1lID8gdGhpcy5wbGF5ZXJzLmdldCgncGxheWVyMScpIDogdGhpcy5wbGF5ZXJzLmdldCgncGxheWVyMicpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnW0dhbWVPbmxpbmVfU2NlbmVdW19oYW5kbGVNeUlucHV0XSBwbGF5ZXI6JywgcGxheWVyKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1tHYW1lT25saW5lX1NjZW5lXVtfaGFuZGxlTXlJbnB1dF0gbXlVc2VybmFtZTonLCB0aGlzLm15VXNlcm5hbWUpO1xuICAgICAgICBjb25zdCBtYXBwaW5nID0gdGhpcy5pbnB1dE1hcHBpbmdzLmZpbmQobWFwcGluZyA9PiBtYXBwaW5nLnBsYXllcklkID09PSBwbGF5ZXIuaWQpO1xuICAgICAgICAvLyBzaSBlc3TDoSBwYXJhbGl6YWRvLCBzZSBkZWphIGVuIGlkbGVcbiAgICAgICAgaWYgKHBsYXllci5pc1BhcmFseXplZCkge1xuICAgICAgICAgICAgY29uc3QgaWRsZURpciA9IChwbGF5ZXIuZmFjaW5nID09PSAnbGVmdCcpID8gJ2lkbGVMZWZ0JyA6ICdpZGxlUmlnaHQnO1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kUHJvY2Vzc29yLnByb2Nlc3MoXG4gICAgICAgICAgICAgICAgbmV3IE1vdmVQbGF5ZXJDb21tYW5kKHBsYXllciwgaWRsZURpcilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvL3RoaXMuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgLy8gICAgdHlwZTogJ3BsYXllcl9tb3ZlJywgcGxheWVyTmFtZTogdGhpcy5teVVzZXJuYW1lLCBjb21tYW5kOiBpZGxlRGlyXG4gICAgICAgICAgICAvL30pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRpcmVjdGlvbjtcblxuICAgICAgICAvLyBtb3ZpbWllbnRvIGhvcml6b250YWwgbm9ybWFsXG4gICAgICAgIGlmIChtYXBwaW5nLmxlZnRLZXlPYmouaXNEb3duKSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAnbGVmdCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWFwcGluZy5yaWdodEtleU9iai5pc0Rvd24pIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdyaWdodCc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gc2UgcHVsc2EgbmFkYSwgYXPDrSBxdWUgc2UgcXVlZGEgaWRsZSBzZWfDum4gaGFjaWEgZMOzbmRlIG1pcmFiYVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IChwbGF5ZXIuZmFjaW5nID09PSAnbGVmdCcpID8gJ2lkbGVMZWZ0JyA6ICdpZGxlUmlnaHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2UgYXBsaWNhIG1vdmltaWVudG8vaWRsZSBTT0xPIHNpIG5vIGVzdMOhIHNhbHRhbmRvXG4gICAgICAgIC8vIHNpIGVzdMOhIHNhbHRhbmRvLCBubyBzZSBwcm9jZXNhIGVsIG1vdmltaWVudG8gcGFyYSBubyBzb2JyZXNjcmliaXIgbGEgYW5pbWFjacOzblxuICAgICAgICBpZiAoIXBsYXllci5pc0p1bXBpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZFByb2Nlc3Nvci5wcm9jZXNzKFxuICAgICAgICAgICAgICAgIG5ldyBNb3ZlUGxheWVyQ29tbWFuZChwbGF5ZXIsIGRpcmVjdGlvbilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncGxheWVyX21vdmUnLCBwbGF5ZXJOYW1lOiB0aGlzLm15VXNlcm5hbWUsIGNvbW1hbmQ6IGRpcmVjdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZWNlcGNpw7NuXG4gICAgICAgIGlmIChQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuSnVzdERvd24obWFwcGluZy5yZWNlaXZlS2V5T2JqKSkge1xuICAgICAgICAgICAgY29uc3QgcmVjZWl2ZURpciA9IChwbGF5ZXIuZmFjaW5nID09PSAnbGVmdCcpID8gJ3JlY2VpdmVMZWZ0JyA6ICdyZWNlaXZlUmlnaHQnO1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kUHJvY2Vzc29yLnByb2Nlc3MoXG4gICAgICAgICAgICAgICAgbmV3IE1vdmVQbGF5ZXJDb21tYW5kKHBsYXllciwgcmVjZWl2ZURpcilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncGxheWVyX21vdmUnLCBwbGF5ZXJOYW1lOiB0aGlzLm15VXNlcm5hbWUsIGNvbW1hbmQ6IHJlY2VpdmVEaXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2FsdG8vcmVtYXRlXG4gICAgICAgIGlmIChQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuSnVzdERvd24obWFwcGluZy5qdW1wS2V5T2JqKSkge1xuICAgICAgICAgICAgY29uc3QganVtcERpciA9IChwbGF5ZXIuZmFjaW5nID09PSAnbGVmdCcpID8gJ2p1bXBMZWZ0JyA6ICdqdW1wUmlnaHQnO1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kUHJvY2Vzc29yLnByb2Nlc3MoXG4gICAgICAgICAgICAgICAgbmV3IE1vdmVQbGF5ZXJDb21tYW5kKHBsYXllciwganVtcERpcilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncGxheWVyX21vdmUnLCBwbGF5ZXJOYW1lOiB0aGlzLm15VXNlcm5hbWUsIGNvbW1hbmQ6IGp1bXBEaXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcbiAgICAgICAgLy8gUG93ZXJVcHNcbiAgICAgICAgaWYgKFBoYXNlci5JbnB1dC5LZXlib2FyZC5KdXN0RG93bihtYXBwaW5nLnBvd2VyS2V5T2JqKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNIb3N0Q2xpZW50KCkpIHtcbiAgICAgICAgICAgICAgICAvLyBob3N0OiBhcGxpY2EgbG9jYWwgeSBsbyByZXBsaWNhXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlZFR5cGUgPSBwbGF5ZXIudXNlTmV4dFBvd2VyVXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZWRUeXBlKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1Bvd2VyVXBdIEhvc3QgdXNlZDonLCB1c2VkVHlwZSwgJ2ludjonLCBwbGF5ZXIucG93ZXJVcEludmVudG9yeSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBsYXllckludmVudG9yeVVJKHBsYXllcik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3VzZV9wb3dlcnVwJyxcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyTmFtZTogdGhpcy5teVVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICBwb3dlclR5cGU6IHVzZWRUeXBlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9zZW5kSW52ZW50b3J5U3luYygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBuby1ob3N0OiBwaWRlIGFsIGhvc3QgcXVlIGFwbGlxdWUgZWwgc2lndWllbnRlIHBvd2VydXBcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nUG93ZXJVcFVzZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkVHlwZSA9IHBsYXllci5nZXROZXh0UG93ZXJVcFR5cGU/LigpO1xuICAgICAgICAgICAgICAgIGlmICghcmVxdWVzdGVkVHlwZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nUG93ZXJVcFVzZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyTmFtZTogdGhpcy5teVVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICBwb3dlclR5cGU6IHJlcXVlc3RlZFR5cGVcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1c2VfcG93ZXJ1cCcsXG4gICAgICAgICAgICAgICAgICAgIHBsYXllck5hbWU6IHRoaXMubXlVc2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJUeXBlOiByZXF1ZXN0ZWRUeXBlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgKi9cblxuICAgICAgICBpZiAoUGhhc2VyLklucHV0LktleWJvYXJkLkp1c3REb3duKG1hcHBpbmcucG93ZXJLZXlPYmopKSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbUG93ZXJVcF0ga2V5IHByZXNzZWQuIGlzSG9zdD8nLCB0aGlzLmlzSG9zdENsaWVudCgpLFxuICAgICAgICAgICAgICAgICdwbGF5ZXI6JywgcGxheWVyLmlkLFxuICAgICAgICAgICAgICAgICdpbnY6JywgcGxheWVyLnBvd2VyVXBJbnZlbnRvcnkpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pc0hvc3RDbGllbnQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZWRUeXBlID0gcGxheWVyLnVzZU5leHRQb3dlclVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VkVHlwZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQb3dlclVwXSBIb3N0IHVzZWQ6JywgdXNlZFR5cGUsICdpbnY6JywgcGxheWVyLnBvd2VyVXBJbnZlbnRvcnkpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQbGF5ZXJJbnZlbnRvcnlVSShwbGF5ZXIpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1c2VfcG93ZXJ1cCcsXG4gICAgICAgICAgICAgICAgICAgIHBsYXllck5hbWU6IHRoaXMubXlVc2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJUeXBlOiB1c2VkVHlwZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VuZEludmVudG9yeVN5bmMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbm8taG9zdFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdQb3dlclVwVXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbUG93ZXJVcF0gYmxvY2tlZDogcGVuZGluZ1Bvd2VyVXBVc2U9JywgdGhpcy5wZW5kaW5nUG93ZXJVcFVzZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRUeXBlID0gcGxheWVyLnBvd2VyVXBJbnZlbnRvcnk/LlswXTsgICAvLyDinIUgQ0xBVkVcbiAgICAgICAgICAgICAgICBpZiAoIXJlcXVlc3RlZFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQb3dlclVwXSBubyBwb3dlcnVwcyBpbiBpbnZlbnRvcnkgLT4gaWdub3JlJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdQb3dlclVwVXNlID0ge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJOYW1lOiB0aGlzLm15VXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyVHlwZTogcmVxdWVzdGVkVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgdDogdGhpcy50aW1lLm5vd1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1Bvd2VyVXBdIHJlcXVlc3RpbmcgdXNlOicsIHJlcXVlc3RlZFR5cGUpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1c2VfcG93ZXJ1cCcsXG4gICAgICAgICAgICAgICAgICAgIHBsYXllck5hbWU6IHRoaXMubXlVc2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJUeXBlOiByZXF1ZXN0ZWRUeXBlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZSBhY3R1YWxpemEgZWwgZXN0YWRvIGRlbCBqdWdhZG9yIGxvY2FsXG4gICAgICAgIHBsYXllci51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlT3BvbmVudElucHV0KGRhdGEpIHtcbiAgICAgICAgY29uc3Qgb3Bwb25lbnQgPSB0aGlzLnBsYXllcjEubmFtZSA9PT0gZGF0YS5wbGF5ZXJOYW1lID8gdGhpcy5wbGF5ZXJzLmdldCgncGxheWVyMScpIDogdGhpcy5wbGF5ZXJzLmdldCgncGxheWVyMicpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnW0dhbWVPbmxpbmVfU2NlbmVdW19oYW5kbGVPcG9uZW50SW5wdXRdIGRhdGE6JywgZGF0YSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdbR2FtZU9ubGluZV9TY2VuZV1bX2hhbmRsZU9wb25lbnRJbnB1dF0gb3Bwb25lbnQ6Jywgb3Bwb25lbnQpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnW0dhbWVPbmxpbmVfU2NlbmVdW19oYW5kbGVPcG9uZW50SW5wdXRdIHVzZXJuYW1lOicsIGRhdGEucGxheWVyTmFtZSk7XG4gICAgICAgIGlmIChkYXRhLmNvbW1hbmQgPT09ICdwb3dlclVwJykge1xuICAgICAgICAgICAgb3Bwb25lbnQudXNlTmV4dFBvd2VyVXAoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGxheWVySW52ZW50b3J5VUkob3Bwb25lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kUHJvY2Vzc29yLnByb2Nlc3MoXG4gICAgICAgICAgICAgICAgbmV3IE1vdmVQbGF5ZXJDb21tYW5kKG9wcG9uZW50LCBkYXRhLmNvbW1hbmQpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIG9wcG9uZW50LnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIC8vIENyZWEgbGEgcGVsb3RhXG4gICAgX2NyZWF0ZUJhbGwoKSB7XG4gICAgICAgIHRoaXMuYmFsbCA9IG5ldyBCYWxsKHRoaXMsIHRoaXMud29ybGRXaWR0aCAvIDIsIDE1MCk7XG4gICAgfVxuXG4gICAgLy8gQ29uZmlndXJhIGxhcyBjb2xpc2lvbmVzIGRlIGxhIHBlbG90YVxuICAgIF9zZXR1cEJhbGxDb2xsaXNpb25zKCkge1xuICAgICAgICAvLyBjb2xpc2lvbmVzIGRlIGxhIHBlbG90YSBjb24gbG9zIGp1Z2Fkb3Jlc1xuICAgICAgICB0aGlzLnBsYXllcnMuZm9yRWFjaChwbGF5ZXIgPT4ge1xuICAgICAgICAgICAgdGhpcy5waHlzaWNzLmFkZC5vdmVybGFwKFxuICAgICAgICAgICAgICAgIHRoaXMuYmFsbC5zcHJpdGUsXG4gICAgICAgICAgICAgICAgcGxheWVyLnNwcml0ZSxcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLl9vbkJhbGxQbGF5ZXJDb2xsaXNpb24odGhpcy5iYWxsLCBwbGF5ZXIpLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gY29saXNpw7NuIHBlbG90YS1yZWRcbiAgICAgICAgdGhpcy5waHlzaWNzLmFkZC5jb2xsaWRlcih0aGlzLmJhbGwuc3ByaXRlLCB0aGlzLnJlZCwgKCkgPT4ge1xuICAgICAgICAgICAgLy8gRXN0byBzZSBkaXNwYXJhIGFsIHRvY2FyIGxhIHJlZFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0xhIHBlbG90YSB0b2NhIGxhIHJlZCEnKTtcblxuICAgICAgICAgICAgLy8gUG9yIGVqZW1wbG8sIHNlIHB1ZWRlIGZyZW5hciBsYSBwZWxvdGE6XG4gICAgICAgICAgICB0aGlzLmJhbGwuc3ByaXRlLnNldFZlbG9jaXR5WCh0aGlzLmJhbGwuc3ByaXRlLmJvZHkudmVsb2NpdHkueCAqIDAuNSk7XG4gICAgICAgICAgICB0aGlzLmJhbGwuc3ByaXRlLnNldFZlbG9jaXR5WSh0aGlzLmJhbGwuc3ByaXRlLmJvZHkudmVsb2NpdHkueSAqIDAuNSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNvbGlzacOzbiBkZSBsYSBwZWxvdGEgY29uIGVsIHN1ZWxvIChkaXNwYXJhIHB1bnR1YWNpw7NuKVxuICAgICAgICBjb25zdCBncm91bmRZID0gdGhpcy53b3JsZEhlaWdodCAtIDEwO1xuICAgICAgICB0aGlzLmJhbGwuc3ByaXRlLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTtcbiAgICAgICAgdGhpcy5iYWxsLnNwcml0ZS5zZXRCb3VuY2UoMC44KTtcbiAgICB9XG5cbiAgICAvLyBDb25maWd1cmEgbG9zIGV2ZW50IGxpc3RlbmVycyBkZSBsYSBwZWxvdGFcbiAgICBfc2V0dXBCYWxsRXZlbnRzKCkge1xuICAgICAgICB0aGlzLmV2ZW50cy5vbigncmFsbHlDb25jbHVkZWQnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTZXRFbmRpbmcpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coYFJhbGx5IGNvbmNsdWRlZDogJHtkYXRhLnNjb3JpbmdQbGF5ZXJJZH0gc2NvcmVzIWApO1xuICAgICAgICAgICAgY29uc3Qgc2NvcmVySWQgPSBkYXRhLnNjb3JpbmdQbGF5ZXJJZDtcblxuICAgICAgICAgICAgLy8gc2UgY29nZSBlbCBwbGF5ZXIgcXVlIGhhIGFub3RhZG9cbiAgICAgICAgICAgIGNvbnN0IHNjb3JpbmdQbGF5ZXIgPSB0aGlzLnBsYXllcnMuZ2V0KHNjb3JlcklkKTtcbiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBzY29yaW5nUGxheWVyID8gKHNjb3JpbmdQbGF5ZXIuc2NvcmVNdWx0aXBsaWVyIHx8IDEpIDogMTtcblxuICAgICAgICAgICAgLy8gMSBwdW50byBiYXNlICogbXVsdGlwbGljYWRvclxuICAgICAgICAgICAgY29uc3QgcG9pbnRzVG9BZGQgPSBtdWx0aXBsaWVyO1xuXG4gICAgICAgICAgICBpZiAoc2NvcmVySWQgPT09ICdwbGF5ZXIxJykge1xuICAgICAgICAgICAgICAgIC8vIG1hcmNhZG9yIHZpc3VhbFxuICAgICAgICAgICAgICAgIHRoaXMucG9pbnRzTGVmdCArPSBwb2ludHNUb0FkZDtcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlTGVmdC5zZXRUZXh0KHRoaXMucG9pbnRzTGVmdC50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgICAgIC8vIHB1bnRvcyBkZWwgc2V0IChwYXJhIGzDs2dpY2EgZGUgc2V0cylcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlUDEgKz0gcG9pbnRzVG9BZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29yZXJJZCA9PT0gJ3BsYXllcjInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludHNSaWdodCArPSBwb2ludHNUb0FkZDtcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0U2NvcmUuc2V0VGV4dCh0aGlzLnBvaW50c1JpZ2h0LnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZVAyICs9IHBvaW50c1RvQWRkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc2UgcmVwcm9kdWNlIGVsIGVmZWN0byBkZSBzb25pZG8gZGUgcHVudG9cbiAgICAgICAgICAgIHRoaXMucGxheVNmeCh0aGlzLnNmeC5wb2ludCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzR29sZGVuUG9pbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzR29sZGVuUG9pbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbmRTZXQoc2NvcmVySWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY29uZGljacOzbiBkZSAxMSBwdW50b3MgY29uIDIgZGUgZGlmZXJlbmNpYVxuICAgICAgICAgICAgdGhpcy5fY2hlY2tXaW5Db25kaXRpb24oKTtcblxuICAgICAgICAgICAgLy8gc2kgTk8gc2UgZXN0w6EgdGVybWluYW5kbyBlbCBzZXQsIHJlc2V0ZWEgcmFsbHkgeSBhdmlzYVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzU2V0RW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iYWxsLnJlc2V0UmFsbHkoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJhbGwuc2V0U2VydmVQb3NpdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VuZEJhbGxSZXNldCgncG9pbnQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc2luY3Jvbml6YSBlbCBtYXJjYWRvclxuICAgICAgICAgICAgdGhpcy5fc2VuZFNjb3JlU3luYygpO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhIHNpIGxhIHBlbG90YSBlc3TDoSBlbiBsYSB6b25hIHbDoWxpZGEgcGFyYSBnb2xwZWFybGFcbiAgICBfaXNCYWxsSW5IaXRab25lKGJhbGxTcHJpdGUsIHBsYXllciwgaXNKdW1waW5nLCBpc1JlY2VpdmluZykge1xuICAgICAgICBjb25zdCBib2R5ID0gcGxheWVyLnNwcml0ZS5ib2R5O1xuICAgICAgICBpZiAoIWJvZHkpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBjb25zdCBiYWxsWCA9IGJhbGxTcHJpdGUueDtcbiAgICAgICAgY29uc3QgYmFsbFkgPSBiYWxsU3ByaXRlLnk7XG4gICAgICAgIGNvbnN0IGJvZHlUb3AgPSBib2R5Lnk7XG4gICAgICAgIGNvbnN0IGJvZHlIZWlnaHQgPSBib2R5LmhlaWdodDtcbiAgICAgICAgY29uc3QgYm9keUNlbnRlclggPSBib2R5LnggKyBib2R5LndpZHRoICogMC41O1xuXG4gICAgICAgIGNvbnN0IHpvbmUgPSBpc0p1bXBpbmdcbiAgICAgICAgICAgID8geyB0b3A6IC0wLjEsIGJvdHRvbTogMC42IH1cbiAgICAgICAgICAgIDogKGlzUmVjZWl2aW5nID8geyB0b3A6IDAuMzUsIGJvdHRvbTogMC44NSB9IDogeyB0b3A6IDAuMjUsIGJvdHRvbTogMC44NSB9KTtcblxuICAgICAgICBjb25zdCB6b25lVG9wID0gYm9keVRvcCArIGJvZHlIZWlnaHQgKiB6b25lLnRvcDtcbiAgICAgICAgY29uc3Qgem9uZUJvdHRvbSA9IGJvZHlUb3AgKyBib2R5SGVpZ2h0ICogem9uZS5ib3R0b207XG5cbiAgICAgICAgaWYgKGJhbGxZIDwgem9uZVRvcCB8fCBiYWxsWSA+IHpvbmVCb3R0b20pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZhY2luZ1JpZ2h0ID0gcGxheWVyLmZhY2luZyA9PT0gJ3JpZ2h0JztcbiAgICAgICAgY29uc3Qgd2lkZUhpdCA9IGlzUmVjZWl2aW5nIHx8IGlzSnVtcGluZztcbiAgICAgICAgY29uc3QgcmVhY2hGb3J3YXJkID0gYm9keS53aWR0aCAqICh3aWRlSGl0ID8gMC45IDogMC43NSk7XG4gICAgICAgIGNvbnN0IHJlYWNoQmFjayA9IGJvZHkud2lkdGggKiAod2lkZUhpdCA/IDAuMjUgOiAwLjE1KTtcbiAgICAgICAgY29uc3QgbWluWCA9IGZhY2luZ1JpZ2h0ID8gYm9keUNlbnRlclggLSByZWFjaEJhY2sgOiBib2R5Q2VudGVyWCAtIHJlYWNoRm9yd2FyZDtcbiAgICAgICAgY29uc3QgbWF4WCA9IGZhY2luZ1JpZ2h0ID8gYm9keUNlbnRlclggKyByZWFjaEZvcndhcmQgOiBib2R5Q2VudGVyWCArIHJlYWNoQmFjaztcblxuICAgICAgICBpZiAoYmFsbFggPCBtaW5YIHx8IGJhbGxYID4gbWF4WCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIE1hbmVqYSBjb2xpc2nDs24gZW50cmUgcGVsb3RhIHkganVnYWRvclxuICAgIF9vbkJhbGxQbGF5ZXJDb2xsaXNpb24oYmFsbCwgcGxheWVyKSB7XG4gICAgICAgIGlmICghYmFsbC5pc0JhbGxMaXZlKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgaXNKdW1waW5nID0gIXBsYXllci5zcHJpdGUuYm9keS5ibG9ja2VkLmRvd247XG4gICAgICAgIGNvbnN0IGlzUmVjZWl2aW5nID0gcGxheWVyLmlzUmVjZWl2aW5nO1xuICAgICAgICBjb25zdCBwbGF5ZXJEaXJlY3Rpb24gPSBwbGF5ZXIuZmFjaW5nO1xuXG4gICAgICAgIGlmICghdGhpcy5faXNCYWxsSW5IaXRab25lKGJhbGwuc3ByaXRlLCBwbGF5ZXIsIGlzSnVtcGluZywgaXNSZWNlaXZpbmcpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBiYWxsLmhpdChwbGF5ZXIsIHBsYXllckRpcmVjdGlvbiwgaXNKdW1waW5nLCBpc1JlY2VpdmluZyk7XG4gICAgfVxuXG4gICAgLy8gQ29udHJvbGEgZWwgZmluYWwgZGVsIGp1ZWdvXG4gICAgX2VuZEdhbWUod2lubmVyKSB7XG4gICAgICAgIHRoaXMuX3N0b3BCYWxsU3luYygpO1xuXG4gICAgICAgIC8vIHNlIHBhcmEgZWwgdGltZXIgZGVsIHNldFxuICAgICAgICBpZiAodGhpcy50aW1lckV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVyRXZlbnQucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMudGltZXJFdmVudCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaWxiYXRvIGRlIGZpbmFsIGRlIHBhcnRpZG9cbiAgICAgICAgdGhpcy5wbGF5U2Z4KHRoaXMuc2Z4LndoaXN0bGUpO1xuXG4gICAgICAgIC8vIHNlIGRldGllbmUgbGEgZsOtc2ljYSBkZSBlc3RhIGVzY2VuYSBhbnRlcyBkZSBzYWxpclxuICAgICAgICBpZiAodGhpcy5waHlzaWNzICYmIHRoaXMucGh5c2ljcy53b3JsZCkge1xuICAgICAgICAgICAgdGhpcy5waHlzaWNzLndvcmxkLnBhdXNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhcIlBhcnRpZGEgTG9jYWwgdGVybWluYWRhLiBHYW5hZG9yOlwiLCB3aW5uZXIpO1xuXG4gICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoXCJFbmRHYW1lX1NjZW5lXCIsIHtcbiAgICAgICAgICAgIHdpbm5lcjogd2lubmVyLFxuICAgICAgICAgICAgcGxheWVyMTogdGhpcy5wbGF5ZXIxLFxuICAgICAgICAgICAgcGxheWVyMjogdGhpcy5wbGF5ZXIyLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYSBzaSBhbGfDum4ganVnYWRvciBoYSBnYW5hZG8gZWwgc2V0XG4gICAgX2NoZWNrV2luQ29uZGl0aW9uKCkge1xuICAgICAgICBjb25zdCBtaW5Qb2ludHMgPSAxMTsgICAvLyBwdW50b3MgbcOtbmltb3MgcGFyYSBnYW5hclxuICAgICAgICBjb25zdCBtaW5EaWZmID0gMjsgICAgICAvLyBkaWZlcmVuY2lhIG3DrW5pbWEgZGUgcHVudG9zIHBhcmEgZ2FuYXJcblxuICAgICAgICAvLyBkaWZlcmVuY2lhIGRlIHB1bnRvc1xuICAgICAgICBjb25zdCBzY29yZURpZmYgPSB0aGlzLnNjb3JlUDEgLSB0aGlzLnNjb3JlUDI7XG4gICAgICAgIGNvbnN0IG1heFNjb3JlID0gTWF0aC5tYXgodGhpcy5zY29yZVAxLCB0aGlzLnNjb3JlUDIpO1xuXG4gICAgICAgIC8vIHNpIG5vIHNlIGN1bXBsZSBhbGd1bmEgZGUgbGFzIGNvbmRpY2lvbmVzLCBubyBzZSB0ZXJtaW5hIGVsIHNldFxuICAgICAgICBpZiAobWF4U2NvcmUgPCBtaW5Qb2ludHMgfHwgTWF0aC5hYnMoc2NvcmVEaWZmKSA8IG1pbkRpZmYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNpbm8sIHNlIGRldGVybWluYSBlbCBnYW5hZG9yIGRlbCBzZXRcbiAgICAgICAgY29uc3Qgd2lubmVyID0gc2NvcmVEaWZmID4gMCA/IFwicGxheWVyMVwiIDogXCJwbGF5ZXIyXCI7XG4gICAgICAgIHRoaXMuX2VuZFNldCh3aW5uZXIpO1xuICAgIH1cblxuICAgIC8vIENvbnRyb2xhIGVsIGZpbmFsIGRlIHVuIHNldFxuICAgIF9lbmRTZXQod2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzU2V0RW5kaW5nKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5pc1NldEVuZGluZyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmJhbGw/LnNwcml0ZSkge1xuICAgICAgICAgICAgdGhpcy5iYWxsLmlzQmFsbExpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYmFsbC5zcHJpdGUuc2V0VmVsb2NpdHkoMCwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhY3R1YWxpemFyIHNldHMgZ2FuYWRvc1xuICAgICAgICBpZiAod2lubmVyID09PSAncGxheWVyMScpIHRoaXMuc2V0c1AxKys7XG4gICAgICAgIGVsc2UgaWYgKHdpbm5lciA9PT0gJ3BsYXllcjInKSB0aGlzLnNldHNQMisrO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGBTZXQgdGVybWluYWRvLiBTY29yZSBzZXRzOiBQMT0ke3RoaXMuc2V0c1AxfSwgUDI9JHt0aGlzLnNldHNQMn1gKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVNldFNjb3JlVUkoKTtcbiAgICAgICAgLy8gc2luY3Jvbml6YSBlbCBtYXJjYWRvclxuICAgICAgICB0aGlzLl9zZW5kU2NvcmVTeW5jKCk7XG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoeyB0eXBlOiAnc2V0X21lc3NhZ2UnLCB0ZXh0OiBgU0VUIHBhcmEgJHt3aW5uZXJ9YCwgdmlzaWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBtb3N0cmFyIG1lbnNhamUgZGUgZ2FuYWRvciBkZSBzZXRcbiAgICAgICAgY29uc3Qgd2lubmVyTGFiZWwgPSAod2lubmVyID09PSAncGxheWVyMScpID8gJ0p1Z2Fkb3IgMScgOiAnSnVnYWRvciAyJztcbiAgICAgICAgdGhpcy5zZXRXaW5uZXJUZXh0LnNldFRleHQoYFNFVCBwYXJhICR7d2lubmVyTGFiZWx9YCk7XG4gICAgICAgIHRoaXMuc2V0V2lubmVyVGV4dC5zZXRWaXNpYmxlKHRydWUpO1xuXG4gICAgICAgIC8vIEF2YW56YXIgbsO6bWVybyBkZSBzZXRcbiAgICAgICAgdGhpcy5jdXJyZW50U2V0Kys7XG5cbiAgICAgICAgY29uc3QgbWF0Y2hPdmVyID0gKHRoaXMuc2V0c1AxID09PSAyIHx8IHRoaXMuc2V0c1AyID09PSAyKTtcblxuICAgICAgICBpZiAobWF0Y2hPdmVyKSB7XG4gICAgICAgICAgICAvLyDDumx0aW1vIHNldDogbW9zdHJhbW9zIGVsIG1lbnNhamUgMnMgeSBsdWVnbyBwYXNhbW9zIGEgbGEgZXNjZW5hIGZpbmFsXG4gICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMjAwMCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIChzaSBxdWllcmVzLCBhcXXDrSBwb2Ryw61hcyBvY3VsdGFyIGVsIHRleHRvKVxuICAgICAgICAgICAgICAgIHRoaXMuX2VuZEdhbWUod2lubmVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc2V0IGludGVybWVkaW86IG1vc3RyYW1vcyBlbCBtZW5zYWplIDJzLCBsbyBvY3VsdGFtb3MgeSByZWluaWNpYW1vcyBlbCBzZXRcbiAgICAgICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCgyMDAwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0V2lubmVyVGV4dCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpbm5lclRleHQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0U2V0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlaW5pY2lhIGVsIGVzdGFkbyBwYXJhIHVuIG51ZXZvIHNldFxuICAgIF9yZXNldFNldCgpIHtcbiAgICAgICAgdGhpcy5pc1NldEVuZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzR29sZGVuUG9pbnQgPSBmYWxzZTtcblxuICAgICAgICAvLyBzZSBhY3R1YWxpemEgZWwgdGV4dG8gZGVsIHNldCBhY3R1YWxcbiAgICAgICAgdGhpcy5zZXRUZXh0LnNldFRleHQoYFNFVCAke3RoaXMuY3VycmVudFNldH1gKTtcblxuICAgICAgICAvLyBzZSByZWluaWNpYSBlbCB0aWVtcG9cbiAgICAgICAgdGhpcy50aWVtcG9SZXN0YW50ZSA9IHRoaXMudGllbXBvVG90YWw7XG4gICAgICAgIHRoaXMudGltZXJFdmVudC5wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lcigpO1xuXG4gICAgICAgIC8vIHNlIHJlaW5pY2lhIGxhIHB1bnR1YWNpw7NuIGRlbCBzZXQgKGzDs2dpY2EpXG4gICAgICAgIHRoaXMuc2NvcmVQMSA9IDA7XG4gICAgICAgIHRoaXMuc2NvcmVQMiA9IDA7XG5cbiAgICAgICAgLy8gc2UgcmVpbmljaWEgZWwgbWFyY2Fkb3IgdmlzdWFsIGVuIHBhbnRhbGxhXG4gICAgICAgIHRoaXMucG9pbnRzTGVmdCA9IDA7XG4gICAgICAgIHRoaXMucG9pbnRzUmlnaHQgPSAwO1xuICAgICAgICB0aGlzLnNjb3JlTGVmdC5zZXRUZXh0KCcwJyk7XG4gICAgICAgIHRoaXMucmlnaHRTY29yZS5zZXRUZXh0KCcwJyk7XG5cbiAgICAgICAgLy8gc2Ugc2luY3Jvbml6YSBlbCBtYXJjYWRvclxuICAgICAgICB0aGlzLl9zZW5kU2NvcmVTeW5jKCk7XG5cbiAgICAgICAgLy8gc2UgcmVpbmljaWEgbGEgcGVsb3RhXG4gICAgICAgIC8vdGhpcy5iYWxsLnJlc2V0UmFsbHkoKTtcblxuICAgICAgICAvLyBzZSByZXBvc2ljaW9uYW4gbG9zIGp1Z2Fkb3JlcyBhIHN1cyBwb3NpY2lvbmVzIGluaWNpYWxlc1xuICAgICAgICBjb25zdCBwMSA9IHRoaXMucGxheWVycy5nZXQoJ3BsYXllcjEnKTtcbiAgICAgICAgY29uc3QgcDIgPSB0aGlzLnBsYXllcnMuZ2V0KCdwbGF5ZXIyJyk7XG5cbiAgICAgICAgcDEuc2V0UG9zaXRpb24odGhpcy53b3JsZFdpZHRoICogMC4yNSwgdGhpcy53b3JsZEhlaWdodCAqIDAuNyk7XG4gICAgICAgIHAyLnNldFBvc2l0aW9uKHRoaXMud29ybGRXaWR0aCAqIDAuNzUsIHRoaXMud29ybGRIZWlnaHQgKiAwLjcpO1xuXG4gICAgICAgIHAxLmlkbGVSaWdodCgpO1xuICAgICAgICBwMi5pZGxlTGVmdCgpO1xuXG4gICAgICAgIC8vIHNlIHJlc2V0ZWEgbGEgcGVsb3RhIHkgc2UgYXZpc2EgYWwgb3RybyBjbGllbnRlXG4gICAgICAgIHRoaXMuYmFsbC5yZXNldFJhbGx5KCk7XG4gICAgICAgIHRoaXMuYmFsbC5zZXRTZXJ2ZVBvc2l0aW9uKCk7XG4gICAgICAgIHRoaXMuX3NlbmRCYWxsUmVzZXQoJ3NldF9yZXNldCcpO1xuXG4gICAgICAgIHRoaXMucGxheVNmeCh0aGlzLnNmeC53aGlzdGxlKTtcbiAgICB9XG5cbiAgICAvLyBBY3R1YWxpemEgZWwgdGV4dG8gZGVsIHRlbXBvcml6YWRvciBlbiBwYW50YWxsYVxuICAgIF9yZW5kZXJUaW1lclRleHQoKSB7XG4gICAgICAgIGNvbnN0IG1pbnV0b3MgPSBNYXRoLmZsb29yKHRoaXMudGllbXBvUmVzdGFudGUgLyA2MCk7XG4gICAgICAgIGNvbnN0IHNlZ3VuZG9zID0gdGhpcy50aWVtcG9SZXN0YW50ZSAlIDYwO1xuICAgICAgICBjb25zdCBmb3JtYXRvID0gYCR7bWludXRvcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7c2VndW5kb3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gICAgICAgIHRoaXMudGltZXJUZXh0LnNldFRleHQoZm9ybWF0byk7XG4gICAgfVxuXG5cbiAgICAvLyAgV0VCU09DS0VUIC0gU0lOQ1JPTklaQUNJw5NOIFBFTE9UQVxuICAgIC8vIEluaWNpYSBlbCBlbnbDrW8gcGVyacOzZGljbyBkZSBsYSBwb3NpY2nDs24vdmVsb2NpZGFkIGRlIGxhIHBlbG90YSAoc29sbyBob3N0KVxuICAgIF9zdGFydEJhbGxTeW5jKGludGVydmFsTXMgPSA2Nikge1xuICAgICAgICBpZiAoIXRoaXMuaXNIb3N0Q2xpZW50KCkpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuYmFsbFN5bmNFdmVudCkgdGhpcy5iYWxsU3luY0V2ZW50LnJlbW92ZShmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5iYWxsU3luY0V2ZW50ID0gdGhpcy50aW1lLmFkZEV2ZW50KHtcbiAgICAgICAgICAgIGRlbGF5OiBpbnRlcnZhbE1zLFxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndzIHx8IHRoaXMud3MucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYmFsbD8uc3ByaXRlPy5ib2R5KSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBjb25zdCBiID0gdGhpcy5iYWxsLnNwcml0ZS5ib2R5O1xuICAgICAgICAgICAgICAgIHRoaXMuYmFsbFN5bmNTZXErKztcblxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYmFsbF9zeW5jJyxcbiAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5iYWxsLnNwcml0ZS54LFxuICAgICAgICAgICAgICAgICAgICB5OiB0aGlzLmJhbGwuc3ByaXRlLnksXG4gICAgICAgICAgICAgICAgICAgIHZ4OiBiLnZlbG9jaXR5Py54ID8/IDAsXG4gICAgICAgICAgICAgICAgICAgIHZ5OiBiLnZlbG9jaXR5Py55ID8/IDAsXG4gICAgICAgICAgICAgICAgICAgIHNlcTogdGhpcy5iYWxsU3luY1NlcVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBEZXRpZW5lIGVsIGVudsOtbyBwZXJpw7NkaWNvIGRlIGxhIHBvc2ljacOzbi92ZWxvY2lkYWQgZGUgbGEgcGVsb3RhIChzb2xvIGhvc3QpXG4gICAgX3N0b3BCYWxsU3luYygpIHtcbiAgICAgICAgaWYgKHRoaXMuYmFsbFN5bmNFdmVudCkge1xuICAgICAgICAgICAgdGhpcy5iYWxsU3luY0V2ZW50LnJlbW92ZShmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmJhbGxTeW5jRXZlbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRW52w61hIHVuIG1lbnNhamUgZGUgcmVzZXRlbyBkZSBsYSBwZWxvdGEgKHNvbG8gaG9zdClcbiAgICBfc2VuZEJhbGxSZXNldChyZWFzb24gPSAncG9pbnQnKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0hvc3RDbGllbnQoKSkgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMud3MgfHwgdGhpcy53cy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMuYmFsbD8uc3ByaXRlPy5ib2R5KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgYiA9IHRoaXMuYmFsbC5zcHJpdGUuYm9keTtcbiAgICAgICAgdGhpcy5iYWxsU3luY1NlcSsrO1xuXG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogJ2JhbGxfcmVzZXQnLFxuICAgICAgICAgICAgcmVhc29uLFxuICAgICAgICAgICAgeDogdGhpcy5iYWxsLnNwcml0ZS54LFxuICAgICAgICAgICAgeTogdGhpcy5iYWxsLnNwcml0ZS55LFxuICAgICAgICAgICAgdng6IGIudmVsb2NpdHk/LnggPz8gMCxcbiAgICAgICAgICAgIHZ5OiBiLnZlbG9jaXR5Py55ID8/IDAsXG4gICAgICAgICAgICBzZXE6IHRoaXMuYmFsbFN5bmNTZXFcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ29udHJvbGEgbGEgYWN0dWFsaXphY2nDs24gZGUgbGEgcGVsb3RhIHJlY2liaWRhIHBvciByZWQgKHNvbG8gbm8taG9zdClcbiAgICBfb25CYWxsVXBkYXRlKG1zZykge1xuICAgICAgICAvLyBwYXJhIGV2aXRhciB1cGRhdGVzIHZpZWpvc1xuICAgICAgICBpZiAobXNnLnJhbGx5SWQgIT0gbnVsbCAmJiBtc2cucmFsbHlJZCAhPT0gdGhpcy5yYWxseUlkKSByZXR1cm47XG5cbiAgICAgICAgY29uc3Qgc2VxID0gbXNnLnNlcSA/PyAwO1xuICAgICAgICBpZiAoc2VxICYmIHNlcSA8PSB0aGlzLmJhbGxOZXQubGFzdFNlcSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuYmFsbE5ldC5sYXN0U2VxID0gc2VxO1xuICAgICAgICB0aGlzLmJhbGxOZXQudHggPSBtc2cueDtcbiAgICAgICAgdGhpcy5iYWxsTmV0LnR5ID0gbXNnLnk7XG4gICAgICAgIHRoaXMuYmFsbE5ldC50dnggPSBtc2cudnggPz8gMDtcbiAgICAgICAgdGhpcy5iYWxsTmV0LnR2eSA9IG1zZy52eSA/PyAwO1xuICAgICAgICB0aGlzLmJhbGxOZXQuaGFzVGFyZ2V0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBDb250cm9sYSBlbCByZXNldGVvIGRlIGxhIHBlbG90YSByZWNpYmlkbyBwb3IgcmVkIChhbWJvcyBjbGllbnRlcylcbiAgICBfb25CYWxsUmVzZXQobXNnKSB7XG4gICAgICAgIGlmIChtc2cucmFsbHlJZCAhPSBudWxsKSB0aGlzLnJhbGx5SWQgPSBtc2cucmFsbHlJZDtcbiAgICAgICAgdGhpcy5iYWxsTmV0Lmxhc3RTZXEgPSBtc2cuc2VxID8/IHRoaXMuYmFsbE5ldC5sYXN0U2VxO1xuXG4gICAgICAgIGlmICghdGhpcy5iYWxsPy5zcHJpdGUpIHJldHVybjtcblxuICAgICAgICAvLyBzbmFwXG4gICAgICAgIHRoaXMuYmFsbC5zcHJpdGUuc2V0UG9zaXRpb24obXNnLngsIG1zZy55KTtcblxuICAgICAgICAvLyB0YXJnZXQgaWd1YWwgcGFyYSBxdWUgZWwgc21vb3RoaW5nIG5vIHZ1ZWx2YSBhdHLDoXNcbiAgICAgICAgdGhpcy5iYWxsTmV0LnR4ID0gbXNnLng7XG4gICAgICAgIHRoaXMuYmFsbE5ldC50eSA9IG1zZy55O1xuICAgICAgICB0aGlzLmJhbGxOZXQuaGFzVGFyZ2V0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBBcGxpY2EgbGEgaW50ZXJwb2xhY2nDs24gZGUgbGEgcGVsb3RhIChzb2xvIG5vLWhvc3QpXG4gICAgX2FwcGx5QmFsbE5ldCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJhbGxOZXQuaGFzVGFyZ2V0IHx8ICF0aGlzLmJhbGw/LnNwcml0ZSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHN4ID0gdGhpcy5iYWxsLnNwcml0ZS54O1xuICAgICAgICBjb25zdCBzeSA9IHRoaXMuYmFsbC5zcHJpdGUueTtcblxuICAgICAgICBjb25zdCBkeCA9IHRoaXMuYmFsbE5ldC50eCAtIHN4O1xuICAgICAgICBjb25zdCBkeSA9IHRoaXMuYmFsbE5ldC50eSAtIHN5O1xuICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5oeXBvdChkeCwgZHkpO1xuXG4gICAgICAgIGlmIChkaXN0ID4gdGhpcy5iYWxsTmV0LnNuYXBEaXN0KSB7XG4gICAgICAgICAgICAvLyBzaSBlc3TDoSBkZW1hc2lhZG8gbGVqb3MsIHNuYXBcbiAgICAgICAgICAgIHRoaXMuYmFsbC5zcHJpdGUuc2V0UG9zaXRpb24odGhpcy5iYWxsTmV0LnR4LCB0aGlzLmJhbGxOZXQudHkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3Vhdml6YWRvXG4gICAgICAgIHRoaXMuYmFsbC5zcHJpdGUueCA9IFBoYXNlci5NYXRoLkxpbmVhcihzeCwgdGhpcy5iYWxsTmV0LnR4LCB0aGlzLmJhbGxOZXQubGVycCk7XG4gICAgICAgIHRoaXMuYmFsbC5zcHJpdGUueSA9IFBoYXNlci5NYXRoLkxpbmVhcihzeSwgdGhpcy5iYWxsTmV0LnR5LCB0aGlzLmJhbGxOZXQubGVycCk7XG4gICAgfVxuXG4gICAgLy8gQXBsaWNhIGxhIHNpbmNyb25pemFjacOzbiBkZSBwdW50dWFjacOzbiByZWNpYmlkYSBwb3IgcmVkXG4gICAgX2FwcGx5U2NvcmVTeW5jKGRhdGEpIHtcbiAgICAgICAgLy8gYWRhcHRhIG5vbWJyZXMgc2Vnw7puIGxvIHF1ZSBtYW5kZXMgdMO6XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5zY29yZVAxID09PSAnbnVtYmVyJykgdGhpcy5zY29yZVAxID0gZGF0YS5zY29yZVAxO1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEuc2NvcmVQMiA9PT0gJ251bWJlcicpIHRoaXMuc2NvcmVQMiA9IGRhdGEuc2NvcmVQMjtcblxuICAgICAgICBpZiAodHlwZW9mIGRhdGEucG9pbnRzTGVmdCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRoaXMucG9pbnRzTGVmdCA9IGRhdGEucG9pbnRzTGVmdDtcbiAgICAgICAgICAgIHRoaXMuc2NvcmVMZWZ0LnNldFRleHQoU3RyaW5nKHRoaXMucG9pbnRzTGVmdCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5wb2ludHNSaWdodCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRoaXMucG9pbnRzUmlnaHQgPSBkYXRhLnBvaW50c1JpZ2h0O1xuICAgICAgICAgICAgdGhpcy5yaWdodFNjb3JlLnNldFRleHQoU3RyaW5nKHRoaXMucG9pbnRzUmlnaHQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5zZXRzUDEgPT09ICdudW1iZXInKSB0aGlzLnNldHNQMSA9IGRhdGEuc2V0c1AxO1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEuc2V0c1AyID09PSAnbnVtYmVyJykgdGhpcy5zZXRzUDIgPSBkYXRhLnNldHNQMjtcbiAgICAgICAgdGhpcy51cGRhdGVTZXRTY29yZVVJKCk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmN1cnJlbnRTZXQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZXQgPSBkYXRhLmN1cnJlbnRTZXQ7XG4gICAgICAgICAgICB0aGlzLnNldFRleHQuc2V0VGV4dChgU0VUICR7dGhpcy5jdXJyZW50U2V0fWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmlzR29sZGVuUG9pbnQgPT09ICdib29sZWFuJykgdGhpcy5pc0dvbGRlblBvaW50ID0gZGF0YS5pc0dvbGRlblBvaW50O1xuICAgIH1cblxuICAgIC8vIEVudsOtYSBsYSBzaW5jcm9uaXphY2nDs24gZGUgcHVudHVhY2nDs24gKHNvbG8gaG9zdClcbiAgICBfc2VuZFNjb3JlU3luYygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzSG9zdENsaWVudCgpKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICB0eXBlOiAndXBkYXRlX3Njb3JlJywgLy8gY29pbmNpZGUgY29uIHNlcnZlclxuICAgICAgICAgICAgc2NvcmVQMTogdGhpcy5zY29yZVAxLFxuICAgICAgICAgICAgc2NvcmVQMjogdGhpcy5zY29yZVAyLFxuICAgICAgICAgICAgcG9pbnRzTGVmdDogdGhpcy5wb2ludHNMZWZ0LFxuICAgICAgICAgICAgcG9pbnRzUmlnaHQ6IHRoaXMucG9pbnRzUmlnaHQsXG4gICAgICAgICAgICBzZXRzUDE6IHRoaXMuc2V0c1AxLFxuICAgICAgICAgICAgc2V0c1AyOiB0aGlzLnNldHNQMixcbiAgICAgICAgICAgIGN1cnJlbnRTZXQ6IHRoaXMuY3VycmVudFNldCxcbiAgICAgICAgICAgIGlzR29sZGVuUG9pbnQ6IHRoaXMuaXNHb2xkZW5Qb2ludFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBFbnbDrWEgbGEgc2luY3Jvbml6YWNpw7NuIGRlbCBpbnZlbnRhcmlvIGRlIHBvd2VyLXVwcyAoc29sbyBob3N0KVxuICAgIF9zZW5kSW52ZW50b3J5U3luYygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzSG9zdENsaWVudCgpKSByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW0dBTUVPTkxJTkVdIEVudmlhbmRvIG1lbnNhamUgZGUgc2luY3Jvbml6YXIgaW52ZW50YXJpb3MuLi5cIik7XG5cbiAgICAgICAgY29uc3QgcDEgPSB0aGlzLnBsYXllcnMuZ2V0KCdwbGF5ZXIxJyk7XG4gICAgICAgIGNvbnN0IHAyID0gdGhpcy5wbGF5ZXJzLmdldCgncGxheWVyMicpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiW0dBTUVPTkxJTkVdIEVudmlhbmRvIG1lbnNhamUgcGFyYSBlbCBzZXJ2ZXIuLi5cIik7XG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogJ2ludl9zeW5jJyxcbiAgICAgICAgICAgIHAxSW52OiBwMT8ucG93ZXJVcEludmVudG9yeSA/PyBbXSxcbiAgICAgICAgICAgIHAySW52OiBwMj8ucG93ZXJVcEludmVudG9yeSA/PyBbXVxuICAgICAgICB9KTtcbiAgICB9XG5cbn1cbiIsIi8vIFJhbmtpbmdfU2NlbmUuanNcbmltcG9ydCBQaGFzZXIgZnJvbSBcInBoYXNlclwiO1xuaW1wb3J0IHsgY3JlYXRlSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi9VSS9CdXR0b25zLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBSYW5raW5nX1NjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJSYW5raW5nX1NjZW5lXCIpO1xuICAgIHRoaXMucmFua2luZ0xpbmVzID0gW107ICBcbiAgfVxuXG4gIHByZWxvYWQoKSB7XG4gICAgdGhpcy5sb2FkLmltYWdlKFwiYm90b25Wb2x2ZXJcIiwgXCJBU1NFVFMvVUkvQk9UT05FUy9GTEVDSEFfVk9MVkVSLnBuZ1wiKTtcbiAgICB0aGlzLmxvYWQuaW1hZ2UoXCJmb25kb01lbnVQcmluY2lwYWxcIiwgXCJBU1NFVFMvRk9ORE9TL01FTlVfUFJJTkNJUEFMLnBuZ1wiKTtcbiAgICB0aGlzLmxvYWQuYXVkaW8oXCJzb25pZG9DbGlja1wiLCBcIkFTU0VUUy9TT05JRE8vU29uaWRvQm90b24ubXAzXCIpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlKCkge1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcblxuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nYW1lLmdsb2JhbHM/LmRlZmF1bHRUZXh0U3R5bGUgPz8ge1xuICAgICAgZm9udEZhbWlseTogXCJBcmlhbFwiLFxuICAgICAgZm9udFNpemU6IFwiMjBweFwiLFxuICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiLFxuICAgIH07XG5cbiAgICAvLyBmb25kb1xuICAgIHRoaXMuYWRkXG4gICAgICAuaW1hZ2UoMCwgMCwgXCJmb25kb01lbnVQcmluY2lwYWxcIilcbiAgICAgIC5zZXRPcmlnaW4oMClcbiAgICAgIC5zZXREZXB0aCgtMilcbiAgICAgIC5zZXREaXNwbGF5U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgIC8vIGNhcGEgb3NjdXJhIHBvciBlbmNpbWFcbiAgICB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHgwMDAwMDAsIDAuNSkuc2V0T3JpZ2luKDApLnNldERlcHRoKC0xKTtcblxuICAgIC8vIHRhcmpldGEgZGVsIHJhbmtpbmdcbiAgICBjb25zdCBjYXJkV2lkdGggPSB3aWR0aCAqIDAuNDI7XG4gICAgY29uc3QgY2FyZEhlaWdodCA9IGhlaWdodCAqIDAuNTY7XG4gICAgY29uc3QgY2FyZFggPSB3aWR0aCAqIDAuNzU7XG4gICAgY29uc3QgY2FyZFkgPSBoZWlnaHQgKiAwLjUwO1xuXG4gICAgY29uc3QgY2FyZCA9IHRoaXMuYWRkLnJlY3RhbmdsZShjYXJkWCwgY2FyZFksIGNhcmRXaWR0aCwgY2FyZEhlaWdodCwgMHgxMTExMTEsIDAuNykuc2V0T3JpZ2luKDAuNSk7XG4gICAgY2FyZC5zZXRTdHJva2VTdHlsZSgyLCAweGZmZmZmZiwgMC4yKTtcblxuICAgIC8vIHTDrXR1bG9cbiAgICB0aGlzLmFkZCBcbiAgICAgIC50ZXh0KGNhcmRYLCBoZWlnaHQgKiAwLjEsIFwiUmFua2luZ1wiLCB7XG4gICAgICAgIC4uLnN0eWxlLFxuICAgICAgICBmb250U2l6ZTogXCI0MnB4XCIsXG4gICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIixcbiAgICAgIH0pXG4gICAgICAuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAvLyBzdWJ0w610dWxvXG4gICAgdGhpcy5hZGRcbiAgICAgIC50ZXh0KGNhcmRYLCBjYXJkWSAtIGNhcmRIZWlnaHQgKiAwLjQyLCBcIlRPUCA1IHBvciBwYXJ0aWRhcyBnYW5hZGFzXCIsIHtcbiAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgIGZvbnRGYW1pbHk6IFwiVlQzMjNcIixcbiAgICAgICAgZm9udFNpemU6IFwiMzRweFwiLFxuICAgICAgICBjb2xvcjogXCIjZjVkNzZlXCIsXG4gICAgICB9KVxuICAgICAgLnNldE9yaWdpbigwLjUpO1xuXG4gICAgLy8gdGV4dG8gZGVsIHJhbmtpbmcgKHNlIGFjdHVhbGl6YSB0cmFzIGVsIGZldGNoKVxuICAgIHRoaXMucmFua2luZ1RleHQgPSB0aGlzLmFkZFxuICAgICAgLnRleHQoY2FyZFgsIGNhcmRZIC0gY2FyZEhlaWdodCAqIDAuMzAsIFwiQ2FyZ2FuZG8uLi5cIiwge1xuICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgZm9udEZhbWlseTogXCJWVDMyM1wiLFxuICAgICAgICBmb250U2l6ZTogXCIzMHB4XCIsXG4gICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIixcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGxpbmVTcGFjaW5nOiAxMCxcbiAgICAgIH0pXG4gICAgICAuc2V0T3JpZ2luKDAuNSwgMCk7XG5cbiAgICAvLyBib3TDs24gdm9sdmVyIFxuICAgIGNyZWF0ZUljb25CdXR0b24odGhpcywge1xuICAgICAgeDogd2lkdGggKiAwLjA2LFxuICAgICAgeTogaGVpZ2h0ICogMC4wOCxcbiAgICAgIHRleHR1cmU6IFwiYm90b25Wb2x2ZXJcIixcbiAgICAgIHNjYWxlOiAxLFxuICAgICAgaG92ZXJTY2FsZTogMS4xLFxuICAgICAgb25DbGljazogKCkgPT4gdGhpcy5zY2VuZS5zdGFydChcIk1lbnVfU2NlbmVcIiksXG4gICAgfSk7XG5cbiAgICB0aGlzLmV2ZW50cy5vbmNlKFBoYXNlci5TY2VuZXMuRXZlbnRzLlNIVVRET1dOLCB0aGlzLnNodXRkb3duLCB0aGlzKTtcblxuICAgIC8vIGNhcmdhciByYW5raW5nXG4gICAgYXdhaXQgdGhpcy5sb2FkUmFua2luZygpO1xuXG4gICAgLy8gUmVmcmVzY28gYXV0b23DoXRpY28gY2FkYSAxMCBzZWd1bmRvcyBcbiAgICB0aGlzLnJhbmtpbmdUaW1lciA9IHRoaXMudGltZS5hZGRFdmVudCh7XG4gICAgICBkZWxheTogMTAwMDAsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5sb2FkUmFua2luZygpLFxuICAgICAgbG9vcDogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgbG9hZFJhbmtpbmcoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcIi9hcGkvdG9wUGxheWVyc1wiLCB7IGNhY2hlOiBcIm5vLXN0b3JlXCIgfSk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgY29uc3QgdG9wUGxheWVycyA9IGRhdGEudG9wUGxheWVycyA/PyBbXTtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0b3BQbGF5ZXJzKSB8fCB0b3BQbGF5ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnJhbmtpbmdUZXh0LnNldFRleHQoXCJUb2RhdsOtYSBubyBoYXkgZGF0b3MuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEZvcm1hdG8gdGlwbzogXCIxLiBNYXJjbyDigJQgNVcgKDEwSiAvIDVMKVwiXG4gICAgICBjb25zdCBsaW5lcyA9IHRvcFBsYXllcnMubWFwKChwLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpbnMgPSBwLnBhcnRpZGFzR2FuYWRhcyA/PyAwO1xuICAgICAgICBjb25zdCBwbGF5ZWQgPSBwLnBhcnRpZGFKdWdhZGFzID8/IDA7XG4gICAgICAgIGNvbnN0IGxvc3NlcyA9IHAucGFydGlkYXNQZXJkaWRhcyA/PyAwO1xuXG4gICAgICAgIHJldHVybiBgJHtpICsgMX0uICR7cC51c2VybmFtZX0g4oCUICR7d2luc31XICgke3BsYXllZH1KIC8gJHtsb3NzZXN9TClgO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMucmFua2luZ1RleHQuc2V0VGV4dChsaW5lcy5qb2luKFwiXFxuXCIpKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjYXJnYW5kbyByYW5raW5nOlwiLCBlcnIpO1xuICAgICAgdGhpcy5yYW5raW5nVGV4dC5zZXRUZXh0KFwiRXJyb3IgY2FyZ2FuZG8gcmFua2luZy5cIik7XG4gICAgfVxuICB9XG5cbiAgc2h1dGRvd24oKSB7XG4gICAgaWYgKHRoaXMucmFua2luZ1RpbWVyKSB7XG4gICAgICB0aGlzLnJhbmtpbmdUaW1lci5yZW1vdmUoZmFsc2UpO1xuICAgICAgdGhpcy5yYW5raW5nVGltZXIgPSBudWxsO1xuICAgIH1cbiAgfVxufSIsIi8vIEJhc2UgZGVsIGp1ZWdvLCBlc3RydWN0dXJhIHkgYWNjZXNvIGEgdG9kb3MgbG9zIGFyY2hpdm9zXHJcbmltcG9ydCBQaGFzZXIgZnJvbSBcInBoYXNlclwiO1xyXG5pbXBvcnQgeyBNZW51X1NjZW5lIH0gZnJvbSBcIi4vU2NlbmVzL01lbnVfU2NlbmUuanNcIjtcclxuaW1wb3J0IHsgR2FtZV9TY2VuZSB9IGZyb20gXCIuL1NjZW5lcy9HYW1lX1NjZW5lLmpzXCI7XHJcbmltcG9ydCB7IFR1dG9yaWFsX1NjZW5lIH0gZnJvbSBcIi4vU2NlbmVzL1R1dG9yaWFsX1NjZW5lLmpzXCI7XHJcbmltcG9ydCB7IENvbmZpZ3VyYXRpb25fU2NlbmUgfSBmcm9tIFwiLi9TY2VuZXMvQ29uZmlndXJhdGlvbl9TY2VuZS5qc1wiO1xyXG5pbXBvcnQgeyBDcmVkaXRzX1NjZW5lIH0gZnJvbSBcIi4vU2NlbmVzL0NyZWRpdHNfU2NlbmUuanNcIjtcclxuaW1wb3J0IHsgRW5kR2FtZV9TY2VuZSB9IGZyb20gXCIuL1NjZW5lcy9FbmRHYW1lX1NjZW5lLmpzXCI7XHJcbmltcG9ydCB7IE1vZGVHYW1lX1NjZW5lIH0gZnJvbSBcIi4vU2NlbmVzL01vZGVHYW1lX1NjZW5lLmpzXCI7XHJcbmltcG9ydCB7IFBhdXNlX1NjZW5lIH0gZnJvbSBcIi4vU2NlbmVzL1BhdXNlX1NjZW5lLmpzXCI7XHJcbmltcG9ydCB7IFNlbGVjdFBsYXllcl9TY2VuZSB9IGZyb20gXCIuL1NjZW5lcy9TZWxlY3RQbGF5ZXJfU2NlbmUuanNcIjtcclxuaW1wb3J0IHsgU2VsZWN0U2NlbmFyaW9fU2NlbmUgfSBmcm9tIFwiLi9TY2VuZXMvU2VsZWN0U2NlbmFyaW9fU2NlbmUuanNcIjtcclxuaW1wb3J0IHsgTG9iYnlfU2NlbmUgfSBmcm9tIFwiLi9TY2VuZXMvTG9iYnlfU2NlbmUuanNcIjtcclxuaW1wb3J0IHsgTG9nZ2luZ19TY2VuZSB9IGZyb20gXCIuL1NjZW5lcy9Mb2dnaW5nX1NjZW5lLmpzXCI7XHJcbmltcG9ydCB7IE5vQ29ubmVjdGlvbl9TY2VuZSB9IGZyb20gXCIuL1NjZW5lcy9Ob0NvbmVjdGlvbl9TY2VuZS5qc1wiO1xyXG5pbXBvcnQgeyBDb25uZWN0aW9uTWFuYWdlcl9TY2VuZSB9IGZyb20gXCIuL1NjZW5lcy9Db25lY3Rpb25NYW5hZ2VyX1NjZW5lLmpzXCI7XHJcbmltcG9ydCB7IEdhbWVPbmxpbmVfU2NlbmUgfSBmcm9tIFwiLi9TY2VuZXMvR2FtZU9ubGluZV9TY2VuZS5qc1wiO1xyXG5pbXBvcnQgeyBSYW5raW5nX1NjZW5lIH0gZnJvbSBcIi4vU2NlbmVzL1JhbmtpbmdfU2NlbmUuanNcIjtcclxuXHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gZmFsbGJhY2sgcGFyYSBldml0YXIgcHJvYmxlbWFzIGNvbiBsYXMgZnVlbnRlcyBwZXJzb25hbGl6YWRhc1xyXG4gICAgaWYgKGRvY3VtZW50LmZvbnRzICYmIGRvY3VtZW50LmZvbnRzLmxvYWQpIHtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmxvYWQoJzIwcHggXCJNaUZ1ZW50ZVwiJyksXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmxvYWQoJzIwcHggXCJWVDMyM1wiJylcclxuICAgICAgICBdKTtcclxuICAgICAgICBhd2FpdCBkb2N1bWVudC5mb250cy5yZWFkeTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBnbG9iYWxzID0ge1xyXG4gICAgICAgIGRlZmF1bHRUZXh0U3R5bGU6IHsgZm9udEZhbWlseTogJ01pRnVlbnRlJywgZm9udFNpemU6ICcyMHB4JywgY29sb3I6ICcjZmZmZmZmJyB9LFxyXG4gICAgICAgIG11c2ljOiBudWxsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgICB0eXBlOiBQaGFzZXIuQVVUTyxcclxuICAgICAgICB3aWR0aDogOTYwLFxyXG4gICAgICAgIGhlaWdodDogNTQwLFxyXG4gICAgICAgIHBhcmVudDogJ2dhbWUtY29udGFpbmVyJyxcclxuICAgICAgICBwaHlzaWNzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdhcmNhZGUnLFxyXG4gICAgICAgICAgICBhcmNhZGU6IHtcclxuICAgICAgICAgICAgICAgIGdyYXZpdHk6IHt4OiAwLCB5OiAzMDB9LFxyXG4gICAgICAgICAgICAgICAgZGVidWc6IGZhbHNlIC8vIHBvbmVyIGEgdHJ1ZSBwYXJhIHZlciBsYXMgbMOtbmVhcyBkZSBsb3MgY3VlcnBvcyBmw61zaWNvc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkb206IHtcclxuICAgICAgICAgICAgY3JlYXRlQ29udGFpbmVyOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjYWxsYmFja3M6IHtcclxuICAgICAgICAgICAgcHJlQm9vdDogKGdhbWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGdhbWUuZ2xvYmFscyA9IGdsb2JhbHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNjZW5lOiBbTG9nZ2luZ19TY2VuZSwgTWVudV9TY2VuZSwgR2FtZV9TY2VuZSwgR2FtZU9ubGluZV9TY2VuZSwgVHV0b3JpYWxfU2NlbmUsIENvbmZpZ3VyYXRpb25fU2NlbmUsIFJhbmtpbmdfU2NlbmUsIENyZWRpdHNfU2NlbmUsIEVuZEdhbWVfU2NlbmUsIFBhdXNlX1NjZW5lLCBNb2RlR2FtZV9TY2VuZSwgU2VsZWN0UGxheWVyX1NjZW5lLCBTZWxlY3RTY2VuYXJpb19TY2VuZSwgTG9iYnlfU2NlbmUsIE5vQ29ubmVjdGlvbl9TY2VuZSwgQ29ubmVjdGlvbk1hbmFnZXJfU2NlbmVdLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjonIzg2NzVmMScsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGdhbWUgPW5ldyBQaGFzZXIuR2FtZShjb25maWcpO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBnYW1lLnJlZ2lzdHJ5LmdldCgndXNlcm5hbWUnKTtcclxuICAgICAgICBpZiAodXNlcm5hbWUpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xyXG4gICAgICAgICAgICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbignL2FwaS9sb2dvdXQnLCBibG9iKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSkoKTtcclxuIl0sIm5hbWVzIjpbInVuZGVmaW5lZCIsIkZVTkNfRVJST1JfVEVYVCIsIkhBU0hfVU5ERUZJTkVEIiwiUExBQ0VIT0xERVIiLCJXUkFQX1BBUlRJQUxfRkxBRyIsIldSQVBfQVJZX0ZMQUciLCJJTkZJTklUWSIsIk1BWF9TQUZFX0lOVEVHRVIiLCJOQU4iLCJNQVhfQVJSQVlfTEVOR1RIIiwid3JhcEZsYWdzIiwiYXJnc1RhZyIsImFycmF5VGFnIiwiYm9vbFRhZyIsImRhdGVUYWciLCJlcnJvclRhZyIsImZ1bmNUYWciLCJnZW5UYWciLCJtYXBUYWciLCJudW1iZXJUYWciLCJvYmplY3RUYWciLCJwcm9taXNlVGFnIiwicmVnZXhwVGFnIiwic2V0VGFnIiwic3RyaW5nVGFnIiwic3ltYm9sVGFnIiwid2Vha01hcFRhZyIsImFycmF5QnVmZmVyVGFnIiwiZGF0YVZpZXdUYWciLCJmbG9hdDMyVGFnIiwiZmxvYXQ2NFRhZyIsImludDhUYWciLCJpbnQxNlRhZyIsImludDMyVGFnIiwidWludDhUYWciLCJ1aW50OENsYW1wZWRUYWciLCJ1aW50MTZUYWciLCJ1aW50MzJUYWciLCJyZUVtcHR5U3RyaW5nTGVhZGluZyIsInJlRW1wdHlTdHJpbmdNaWRkbGUiLCJyZUVtcHR5U3RyaW5nVHJhaWxpbmciLCJyZUVzY2FwZWRIdG1sIiwicmVVbmVzY2FwZWRIdG1sIiwicmVIYXNFc2NhcGVkSHRtbCIsIlJlZ0V4cCIsInNvdXJjZSIsInJlSGFzVW5lc2NhcGVkSHRtbCIsInJlRXNjYXBlIiwicmVFdmFsdWF0ZSIsInJlSW50ZXJwb2xhdGUiLCJyZUlzRGVlcFByb3AiLCJyZUlzUGxhaW5Qcm9wIiwicmVQcm9wTmFtZSIsInJlUmVnRXhwQ2hhciIsInJlSGFzUmVnRXhwQ2hhciIsInJlVHJpbVN0YXJ0IiwicmVXaGl0ZXNwYWNlIiwicmVXcmFwQ29tbWVudCIsInJlV3JhcERldGFpbHMiLCJyZVNwbGl0RGV0YWlscyIsInJlQXNjaWlXb3JkIiwicmVGb3JiaWRkZW5JZGVudGlmaWVyQ2hhcnMiLCJyZUVzY2FwZUNoYXIiLCJyZUVzVGVtcGxhdGUiLCJyZUZsYWdzIiwicmVJc0JhZEhleCIsInJlSXNCaW5hcnkiLCJyZUlzSG9zdEN0b3IiLCJyZUlzT2N0YWwiLCJyZUlzVWludCIsInJlTGF0aW4iLCJyZU5vTWF0Y2giLCJyZVVuZXNjYXBlZFN0cmluZyIsInJzQXN0cmFsUmFuZ2UiLCJyc0NvbWJvUmFuZ2UiLCJyc0NvbWJvTWFya3NSYW5nZSIsInJzRGluZ2JhdFJhbmdlIiwicnNMb3dlclJhbmdlIiwicnNVcHBlclJhbmdlIiwicnNWYXJSYW5nZSIsInJzQnJlYWtSYW5nZSIsInJzTWF0aE9wUmFuZ2UiLCJyc0FzdHJhbCIsInJzQnJlYWsiLCJyc0NvbWJvIiwicnNEaWdpdHMiLCJyc0RpbmdiYXQiLCJyc0xvd2VyIiwicnNNaXNjIiwicnNGaXR6IiwicnNOb25Bc3RyYWwiLCJyc1JlZ2lvbmFsIiwicnNTdXJyUGFpciIsInJzVXBwZXIiLCJyc1pXSiIsInJzTWlzY0xvd2VyIiwicnNNaXNjVXBwZXIiLCJyc09wdENvbnRyTG93ZXIiLCJyc09wdENvbnRyVXBwZXIiLCJyZU9wdE1vZCIsInJzTW9kaWZpZXIiLCJyc09wdFZhciIsInJzU2VxIiwiam9pbiIsInJzRW1vamkiLCJyc1N5bWJvbCIsInJlQXBvcyIsInJlQ29tYm9NYXJrIiwicmVVbmljb2RlIiwicmVVbmljb2RlV29yZCIsInJlSGFzVW5pY29kZSIsInJlSGFzVW5pY29kZVdvcmQiLCJjb250ZXh0UHJvcHMiLCJ0ZW1wbGF0ZUNvdW50ZXIiLCJ0eXBlZEFycmF5VGFncyIsImNsb25lYWJsZVRhZ3MiLCJzdHJpbmdFc2NhcGVzIiwiZnJlZVBhcnNlRmxvYXQiLCJwYXJzZUZsb2F0IiwiZnJlZVBhcnNlSW50IiwicGFyc2VJbnQiLCJmcmVlR2xvYmFsIiwiZyIsIk9iamVjdCIsImZyZWVTZWxmIiwic2VsZiIsInJvb3QiLCJGdW5jdGlvbiIsImZyZWVFeHBvcnRzIiwiZXhwb3J0cyIsIm5vZGVUeXBlIiwiZnJlZU1vZHVsZSIsIm1vZHVsZSIsIm1vZHVsZUV4cG9ydHMiLCJmcmVlUHJvY2VzcyIsInByb2Nlc3MiLCJub2RlVXRpbCIsInJlcXVpcmUiLCJ0eXBlcyIsImJpbmRpbmciLCJlIiwibm9kZUlzQXJyYXlCdWZmZXIiLCJpc0FycmF5QnVmZmVyIiwibm9kZUlzRGF0ZSIsImlzRGF0ZSIsIm5vZGVJc01hcCIsImlzTWFwIiwibm9kZUlzUmVnRXhwIiwiaXNSZWdFeHAiLCJub2RlSXNTZXQiLCJpc1NldCIsIm5vZGVJc1R5cGVkQXJyYXkiLCJpc1R5cGVkQXJyYXkiLCJhcHBseSIsImZ1bmMiLCJ0aGlzQXJnIiwiYXJncyIsImxlbmd0aCIsImNhbGwiLCJhcnJheUFnZ3JlZ2F0b3IiLCJhcnJheSIsInNldHRlciIsIml0ZXJhdGVlIiwiYWNjdW11bGF0b3IiLCJpbmRleCIsInZhbHVlIiwiYXJyYXlFYWNoIiwiYXJyYXlFYWNoUmlnaHQiLCJhcnJheUV2ZXJ5IiwicHJlZGljYXRlIiwiYXJyYXlGaWx0ZXIiLCJyZXNJbmRleCIsInJlc3VsdCIsImFycmF5SW5jbHVkZXMiLCJiYXNlSW5kZXhPZiIsImFycmF5SW5jbHVkZXNXaXRoIiwiY29tcGFyYXRvciIsImFycmF5TWFwIiwiQXJyYXkiLCJhcnJheVB1c2giLCJ2YWx1ZXMiLCJvZmZzZXQiLCJhcnJheVJlZHVjZSIsImluaXRBY2N1bSIsImFycmF5UmVkdWNlUmlnaHQiLCJhcnJheVNvbWUiLCJhc2NpaVNpemUiLCJiYXNlUHJvcGVydHkiLCJiYXNlRmluZEtleSIsImNvbGxlY3Rpb24iLCJlYWNoRnVuYyIsImtleSIsImJhc2VGaW5kSW5kZXgiLCJmcm9tSW5kZXgiLCJmcm9tUmlnaHQiLCJzdHJpY3RJbmRleE9mIiwiYmFzZUlzTmFOIiwiYmFzZUluZGV4T2ZXaXRoIiwiYmFzZU1lYW4iLCJiYXNlU3VtIiwib2JqZWN0IiwiYmFzZVByb3BlcnR5T2YiLCJiYXNlUmVkdWNlIiwiY3VycmVudCIsImJhc2VUaW1lcyIsIm4iLCJiYXNlVHJpbSIsInN0cmluZyIsInNsaWNlIiwidHJpbW1lZEVuZEluZGV4IiwicmVwbGFjZSIsImJhc2VVbmFyeSIsImJhc2VWYWx1ZXMiLCJwcm9wcyIsImNhY2hlSGFzIiwiY2FjaGUiLCJoYXMiLCJjaGFyc1N0YXJ0SW5kZXgiLCJzdHJTeW1ib2xzIiwiY2hyU3ltYm9scyIsImNoYXJzRW5kSW5kZXgiLCJkZWJ1cnJMZXR0ZXIiLCJlc2NhcGVIdG1sQ2hhciIsImVzY2FwZVN0cmluZ0NoYXIiLCJjaHIiLCJoYXNVbmljb2RlIiwidGVzdCIsIm1hcFRvQXJyYXkiLCJtYXAiLCJzaXplIiwiZm9yRWFjaCIsIm92ZXJBcmciLCJ0cmFuc2Zvcm0iLCJhcmciLCJyZXBsYWNlSG9sZGVycyIsInBsYWNlaG9sZGVyIiwic2V0VG9BcnJheSIsInNldCIsInNldFRvUGFpcnMiLCJzdHJpbmdTaXplIiwibGFzdEluZGV4IiwidW5pY29kZVNpemUiLCJzdHJpbmdUb0FycmF5IiwibWF0Y2giLCJ1bmljb2RlVG9BcnJheSIsInNwbGl0IiwiYXNjaWlUb0FycmF5IiwiY2hhckF0IiwidW5lc2NhcGVIdG1sQ2hhciIsIl8iLCJydW5JbkNvbnRleHQiLCJjb250ZXh0IiwidWlkIiwiZGVmYXVsdHMiLCJwaWNrIiwiRGF0ZSIsIkVycm9yIiwiTWF0aCIsIlN0cmluZyIsIlR5cGVFcnJvciIsImFycmF5UHJvdG8iLCJwcm90b3R5cGUiLCJmdW5jUHJvdG8iLCJvYmplY3RQcm90byIsImNvcmVKc0RhdGEiLCJmdW5jVG9TdHJpbmciLCJ0b1N0cmluZyIsImhhc093blByb3BlcnR5IiwiaWRDb3VudGVyIiwibWFza1NyY0tleSIsImV4ZWMiLCJrZXlzIiwiSUVfUFJPVE8iLCJuYXRpdmVPYmplY3RUb1N0cmluZyIsIm9iamVjdEN0b3JTdHJpbmciLCJvbGREYXNoIiwicmVJc05hdGl2ZSIsIkJ1ZmZlciIsIlN5bWJvbCIsIlVpbnQ4QXJyYXkiLCJhbGxvY1Vuc2FmZSIsImdldFByb3RvdHlwZSIsImdldFByb3RvdHlwZU9mIiwib2JqZWN0Q3JlYXRlIiwiY3JlYXRlIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJzcGxpY2UiLCJzcHJlYWRhYmxlU3ltYm9sIiwiaXNDb25jYXRTcHJlYWRhYmxlIiwic3ltSXRlcmF0b3IiLCJpdGVyYXRvciIsInN5bVRvU3RyaW5nVGFnIiwidG9TdHJpbmdUYWciLCJkZWZpbmVQcm9wZXJ0eSIsImdldE5hdGl2ZSIsImN0eENsZWFyVGltZW91dCIsImNsZWFyVGltZW91dCIsImN0eE5vdyIsIm5vdyIsImN0eFNldFRpbWVvdXQiLCJzZXRUaW1lb3V0IiwibmF0aXZlQ2VpbCIsImNlaWwiLCJuYXRpdmVGbG9vciIsImZsb29yIiwibmF0aXZlR2V0U3ltYm9scyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm5hdGl2ZUlzQnVmZmVyIiwiaXNCdWZmZXIiLCJuYXRpdmVJc0Zpbml0ZSIsImlzRmluaXRlIiwibmF0aXZlSm9pbiIsIm5hdGl2ZUtleXMiLCJuYXRpdmVNYXgiLCJtYXgiLCJuYXRpdmVNaW4iLCJtaW4iLCJuYXRpdmVOb3ciLCJuYXRpdmVQYXJzZUludCIsIm5hdGl2ZVJhbmRvbSIsInJhbmRvbSIsIm5hdGl2ZVJldmVyc2UiLCJyZXZlcnNlIiwiRGF0YVZpZXciLCJNYXAiLCJQcm9taXNlIiwiU2V0IiwiV2Vha01hcCIsIm5hdGl2ZUNyZWF0ZSIsIm1ldGFNYXAiLCJyZWFsTmFtZXMiLCJkYXRhVmlld0N0b3JTdHJpbmciLCJ0b1NvdXJjZSIsIm1hcEN0b3JTdHJpbmciLCJwcm9taXNlQ3RvclN0cmluZyIsInNldEN0b3JTdHJpbmciLCJ3ZWFrTWFwQ3RvclN0cmluZyIsInN5bWJvbFByb3RvIiwic3ltYm9sVmFsdWVPZiIsInZhbHVlT2YiLCJzeW1ib2xUb1N0cmluZyIsImxvZGFzaCIsImlzT2JqZWN0TGlrZSIsImlzQXJyYXkiLCJMYXp5V3JhcHBlciIsIkxvZGFzaFdyYXBwZXIiLCJ3cmFwcGVyQ2xvbmUiLCJiYXNlQ3JlYXRlIiwicHJvdG8iLCJpc09iamVjdCIsImJhc2VMb2Rhc2giLCJjaGFpbkFsbCIsInRoaXMiLCJfX3dyYXBwZWRfXyIsIl9fYWN0aW9uc19fIiwiX19jaGFpbl9fIiwiX19pbmRleF9fIiwiX192YWx1ZXNfXyIsIl9fZGlyX18iLCJfX2ZpbHRlcmVkX18iLCJfX2l0ZXJhdGVlc19fIiwiX190YWtlQ291bnRfXyIsIl9fdmlld3NfXyIsIkhhc2giLCJlbnRyaWVzIiwiY2xlYXIiLCJlbnRyeSIsIkxpc3RDYWNoZSIsIk1hcENhY2hlIiwiU2V0Q2FjaGUiLCJfX2RhdGFfXyIsImFkZCIsIlN0YWNrIiwiZGF0YSIsImFycmF5TGlrZUtleXMiLCJpbmhlcml0ZWQiLCJpc0FyciIsImlzQXJnIiwiaXNBcmd1bWVudHMiLCJpc0J1ZmYiLCJpc1R5cGUiLCJza2lwSW5kZXhlcyIsImlzSW5kZXgiLCJwdXNoIiwiYXJyYXlTYW1wbGUiLCJiYXNlUmFuZG9tIiwiYXJyYXlTYW1wbGVTaXplIiwic2h1ZmZsZVNlbGYiLCJjb3B5QXJyYXkiLCJiYXNlQ2xhbXAiLCJhcnJheVNodWZmbGUiLCJhc3NpZ25NZXJnZVZhbHVlIiwiZXEiLCJiYXNlQXNzaWduVmFsdWUiLCJhc3NpZ25WYWx1ZSIsIm9ialZhbHVlIiwiYXNzb2NJbmRleE9mIiwiYmFzZUFnZ3JlZ2F0b3IiLCJiYXNlRWFjaCIsImJhc2VBc3NpZ24iLCJjb3B5T2JqZWN0IiwiYmFzZUF0IiwicGF0aHMiLCJza2lwIiwiZ2V0IiwibnVtYmVyIiwibG93ZXIiLCJ1cHBlciIsImJhc2VDbG9uZSIsImJpdG1hc2siLCJjdXN0b21pemVyIiwic3RhY2siLCJpc0RlZXAiLCJpc0ZsYXQiLCJpc0Z1bGwiLCJjb25zdHJ1Y3RvciIsImlucHV0IiwiaW5pdENsb25lQXJyYXkiLCJ0YWciLCJnZXRUYWciLCJpc0Z1bmMiLCJjbG9uZUJ1ZmZlciIsImluaXRDbG9uZU9iamVjdCIsImdldFN5bWJvbHNJbiIsImNvcHlTeW1ib2xzSW4iLCJrZXlzSW4iLCJiYXNlQXNzaWduSW4iLCJnZXRTeW1ib2xzIiwiY29weVN5bWJvbHMiLCJzeW1ib2wiLCJDdG9yIiwiY2xvbmVBcnJheUJ1ZmZlciIsImRhdGFWaWV3IiwiYnVmZmVyIiwiYnl0ZU9mZnNldCIsImJ5dGVMZW5ndGgiLCJjbG9uZURhdGFWaWV3IiwiY2xvbmVUeXBlZEFycmF5IiwicmVnZXhwIiwiY2xvbmVSZWdFeHAiLCJpbml0Q2xvbmVCeVRhZyIsInN0YWNrZWQiLCJzdWJWYWx1ZSIsImdldEFsbEtleXNJbiIsImdldEFsbEtleXMiLCJiYXNlQ29uZm9ybXNUbyIsImJhc2VEZWxheSIsIndhaXQiLCJiYXNlRGlmZmVyZW5jZSIsImluY2x1ZGVzIiwiaXNDb21tb24iLCJ2YWx1ZXNMZW5ndGgiLCJvdXRlciIsImNvbXB1dGVkIiwidmFsdWVzSW5kZXgiLCJ0ZW1wbGF0ZVNldHRpbmdzIiwicG9wIiwiZ2V0TWFwRGF0YSIsInBhaXJzIiwiTEFSR0VfQVJSQVlfU0laRSIsImNyZWF0ZUJhc2VFYWNoIiwiYmFzZUZvck93biIsImJhc2VFYWNoUmlnaHQiLCJiYXNlRm9yT3duUmlnaHQiLCJiYXNlRXZlcnkiLCJiYXNlRXh0cmVtdW0iLCJpc1N5bWJvbCIsImJhc2VGaWx0ZXIiLCJiYXNlRmxhdHRlbiIsImRlcHRoIiwiaXNTdHJpY3QiLCJpc0ZsYXR0ZW5hYmxlIiwiYmFzZUZvciIsImNyZWF0ZUJhc2VGb3IiLCJiYXNlRm9yUmlnaHQiLCJiYXNlRnVuY3Rpb25zIiwiaXNGdW5jdGlvbiIsImJhc2VHZXQiLCJwYXRoIiwiY2FzdFBhdGgiLCJ0b0tleSIsImJhc2VHZXRBbGxLZXlzIiwia2V5c0Z1bmMiLCJzeW1ib2xzRnVuYyIsImJhc2VHZXRUYWciLCJpc093biIsInVubWFza2VkIiwiZ2V0UmF3VGFnIiwib2JqZWN0VG9TdHJpbmciLCJiYXNlR3QiLCJvdGhlciIsImJhc2VIYXMiLCJiYXNlSGFzSW4iLCJiYXNlSW50ZXJzZWN0aW9uIiwiYXJyYXlzIiwib3RoTGVuZ3RoIiwib3RoSW5kZXgiLCJjYWNoZXMiLCJtYXhMZW5ndGgiLCJJbmZpbml0eSIsInNlZW4iLCJiYXNlSW52b2tlIiwicGFyZW50IiwibGFzdCIsImJhc2VJc0FyZ3VtZW50cyIsImJhc2VJc0VxdWFsIiwiZXF1YWxGdW5jIiwib2JqSXNBcnIiLCJvdGhJc0FyciIsIm9ialRhZyIsIm90aFRhZyIsIm9iaklzT2JqIiwib3RoSXNPYmoiLCJpc1NhbWVUYWciLCJlcXVhbEFycmF5cyIsIm5hbWUiLCJtZXNzYWdlIiwiY29udmVydCIsImlzUGFydGlhbCIsImVxdWFsQnlUYWciLCJvYmpJc1dyYXBwZWQiLCJvdGhJc1dyYXBwZWQiLCJvYmpVbndyYXBwZWQiLCJvdGhVbndyYXBwZWQiLCJvYmpQcm9wcyIsIm9iakxlbmd0aCIsIm9ialN0YWNrZWQiLCJvdGhTdGFja2VkIiwic2tpcEN0b3IiLCJvdGhWYWx1ZSIsImNvbXBhcmVkIiwib2JqQ3RvciIsIm90aEN0b3IiLCJlcXVhbE9iamVjdHMiLCJiYXNlSXNFcXVhbERlZXAiLCJiYXNlSXNNYXRjaCIsIm1hdGNoRGF0YSIsIm5vQ3VzdG9taXplciIsInNyY1ZhbHVlIiwiQ09NUEFSRV9QQVJUSUFMX0ZMQUciLCJiYXNlSXNOYXRpdmUiLCJiYXNlSXRlcmF0ZWUiLCJpZGVudGl0eSIsImJhc2VNYXRjaGVzUHJvcGVydHkiLCJiYXNlTWF0Y2hlcyIsInByb3BlcnR5IiwiYmFzZUtleXMiLCJpc1Byb3RvdHlwZSIsImJhc2VMdCIsImJhc2VNYXAiLCJpc0FycmF5TGlrZSIsImdldE1hdGNoRGF0YSIsIm1hdGNoZXNTdHJpY3RDb21wYXJhYmxlIiwiaXNLZXkiLCJpc1N0cmljdENvbXBhcmFibGUiLCJoYXNJbiIsImJhc2VNZXJnZSIsInNyY0luZGV4IiwibWVyZ2VGdW5jIiwic2FmZUdldCIsIm5ld1ZhbHVlIiwiaXNUeXBlZCIsImlzQXJyYXlMaWtlT2JqZWN0IiwiaXNQbGFpbk9iamVjdCIsInRvUGxhaW5PYmplY3QiLCJiYXNlTWVyZ2VEZWVwIiwiYmFzZU50aCIsImJhc2VPcmRlckJ5IiwiaXRlcmF0ZWVzIiwib3JkZXJzIiwiZ2V0SXRlcmF0ZWUiLCJjcml0ZXJpYSIsInNvcnQiLCJvYmpDcml0ZXJpYSIsIm90aENyaXRlcmlhIiwib3JkZXJzTGVuZ3RoIiwiY29tcGFyZUFzY2VuZGluZyIsImNvbXBhcmVNdWx0aXBsZSIsImJhc2VTb3J0QnkiLCJiYXNlUGlja0J5IiwiYmFzZVNldCIsImJhc2VQdWxsQWxsIiwiaW5kZXhPZiIsImJhc2VQdWxsQXQiLCJpbmRleGVzIiwicHJldmlvdXMiLCJiYXNlVW5zZXQiLCJiYXNlUmVwZWF0IiwiYmFzZVJlc3QiLCJzdGFydCIsInNldFRvU3RyaW5nIiwib3ZlclJlc3QiLCJiYXNlU2FtcGxlIiwiYmFzZVNhbXBsZVNpemUiLCJuZXN0ZWQiLCJiYXNlU2V0RGF0YSIsImJhc2VTZXRUb1N0cmluZyIsImNvbnN0YW50IiwiYmFzZVNodWZmbGUiLCJiYXNlU2xpY2UiLCJlbmQiLCJiYXNlU29tZSIsImJhc2VTb3J0ZWRJbmRleCIsInJldEhpZ2hlc3QiLCJsb3ciLCJoaWdoIiwibWlkIiwiYmFzZVNvcnRlZEluZGV4QnkiLCJ2YWxJc05hTiIsInZhbElzTnVsbCIsInZhbElzU3ltYm9sIiwidmFsSXNVbmRlZmluZWQiLCJvdGhJc0RlZmluZWQiLCJvdGhJc051bGwiLCJvdGhJc1JlZmxleGl2ZSIsIm90aElzU3ltYm9sIiwic2V0TG93IiwiYmFzZVNvcnRlZFVuaXEiLCJiYXNlVG9OdW1iZXIiLCJiYXNlVG9TdHJpbmciLCJiYXNlVW5pcSIsImNyZWF0ZVNldCIsInNlZW5JbmRleCIsImJhc2VVcGRhdGUiLCJ1cGRhdGVyIiwiYmFzZVdoaWxlIiwiaXNEcm9wIiwiYmFzZVdyYXBwZXJWYWx1ZSIsImFjdGlvbnMiLCJhY3Rpb24iLCJiYXNlWG9yIiwiYmFzZVppcE9iamVjdCIsImFzc2lnbkZ1bmMiLCJ2YWxzTGVuZ3RoIiwiY2FzdEFycmF5TGlrZU9iamVjdCIsImNhc3RGdW5jdGlvbiIsInN0cmluZ1RvUGF0aCIsImNhc3RSZXN0IiwiY2FzdFNsaWNlIiwiaWQiLCJjb3B5IiwiYXJyYXlCdWZmZXIiLCJ0eXBlZEFycmF5IiwidmFsSXNEZWZpbmVkIiwidmFsSXNSZWZsZXhpdmUiLCJjb21wb3NlQXJncyIsInBhcnRpYWxzIiwiaG9sZGVycyIsImlzQ3VycmllZCIsImFyZ3NJbmRleCIsImFyZ3NMZW5ndGgiLCJob2xkZXJzTGVuZ3RoIiwibGVmdEluZGV4IiwibGVmdExlbmd0aCIsInJhbmdlTGVuZ3RoIiwiaXNVbmN1cnJpZWQiLCJjb21wb3NlQXJnc1JpZ2h0IiwiaG9sZGVyc0luZGV4IiwicmlnaHRJbmRleCIsInJpZ2h0TGVuZ3RoIiwiaXNOZXciLCJjcmVhdGVBZ2dyZWdhdG9yIiwiaW5pdGlhbGl6ZXIiLCJjcmVhdGVBc3NpZ25lciIsImFzc2lnbmVyIiwic291cmNlcyIsImd1YXJkIiwiaXNJdGVyYXRlZUNhbGwiLCJpdGVyYWJsZSIsImNyZWF0ZUNhc2VGaXJzdCIsIm1ldGhvZE5hbWUiLCJ0cmFpbGluZyIsImNyZWF0ZUNvbXBvdW5kZXIiLCJjYWxsYmFjayIsIndvcmRzIiwiZGVidXJyIiwiY3JlYXRlQ3RvciIsImFyZ3VtZW50cyIsInRoaXNCaW5kaW5nIiwiY3JlYXRlRmluZCIsImZpbmRJbmRleEZ1bmMiLCJjcmVhdGVGbG93IiwiZmxhdFJlc3QiLCJmdW5jcyIsInByZXJlcSIsInRocnUiLCJ3cmFwcGVyIiwiZ2V0RnVuY05hbWUiLCJmdW5jTmFtZSIsImdldERhdGEiLCJpc0xhemlhYmxlIiwicGxhbnQiLCJjcmVhdGVIeWJyaWQiLCJwYXJ0aWFsc1JpZ2h0IiwiaG9sZGVyc1JpZ2h0IiwiYXJnUG9zIiwiYXJ5IiwiYXJpdHkiLCJpc0FyeSIsImlzQmluZCIsImlzQmluZEtleSIsImlzRmxpcCIsImdldEhvbGRlciIsImhvbGRlcnNDb3VudCIsImNvdW50SG9sZGVycyIsIm5ld0hvbGRlcnMiLCJjcmVhdGVSZWN1cnJ5IiwiZm4iLCJhcnJMZW5ndGgiLCJvbGRBcnJheSIsInJlb3JkZXIiLCJjcmVhdGVJbnZlcnRlciIsInRvSXRlcmF0ZWUiLCJiYXNlSW52ZXJ0ZXIiLCJjcmVhdGVNYXRoT3BlcmF0aW9uIiwib3BlcmF0b3IiLCJkZWZhdWx0VmFsdWUiLCJjcmVhdGVPdmVyIiwiYXJyYXlGdW5jIiwiY3JlYXRlUGFkZGluZyIsImNoYXJzIiwiY2hhcnNMZW5ndGgiLCJjcmVhdGVSYW5nZSIsInN0ZXAiLCJ0b0Zpbml0ZSIsImJhc2VSYW5nZSIsImNyZWF0ZVJlbGF0aW9uYWxPcGVyYXRpb24iLCJ0b051bWJlciIsIndyYXBGdW5jIiwiaXNDdXJyeSIsIm5ld0RhdGEiLCJzZXREYXRhIiwic2V0V3JhcFRvU3RyaW5nIiwiY3JlYXRlUm91bmQiLCJwcmVjaXNpb24iLCJ0b0ludGVnZXIiLCJwYWlyIiwibm9vcCIsImNyZWF0ZVRvUGFpcnMiLCJiYXNlVG9QYWlycyIsImNyZWF0ZVdyYXAiLCJzcmNCaXRtYXNrIiwibmV3Qml0bWFzayIsImlzQ29tYm8iLCJtZXJnZURhdGEiLCJjcmVhdGVDdXJyeSIsImNyZWF0ZVBhcnRpYWwiLCJjcmVhdGVCaW5kIiwiY3VzdG9tRGVmYXVsdHNBc3NpZ25JbiIsImN1c3RvbURlZmF1bHRzTWVyZ2UiLCJjdXN0b21PbWl0Q2xvbmUiLCJhcnJTdGFja2VkIiwiYXJyVmFsdWUiLCJmbGF0dGVuIiwib3RoZXJGdW5jIiwidHlwZSIsImdldFZhbHVlIiwic3R1YkFycmF5IiwiaGFzUGF0aCIsImhhc0Z1bmMiLCJpc0xlbmd0aCIsIkFycmF5QnVmZmVyIiwicmVzb2x2ZSIsImN0b3JTdHJpbmciLCJpc01hc2thYmxlIiwic3R1YkZhbHNlIiwib3RoZXJBcmdzIiwic2hvcnRPdXQiLCJyZWZlcmVuY2UiLCJkZXRhaWxzIiwiaW5zZXJ0V3JhcERldGFpbHMiLCJ1cGRhdGVXcmFwRGV0YWlscyIsImdldFdyYXBEZXRhaWxzIiwiY291bnQiLCJsYXN0Q2FsbGVkIiwic3RhbXAiLCJyZW1haW5pbmciLCJyYW5kIiwibWVtb2l6ZSIsImNoYXJDb2RlQXQiLCJxdW90ZSIsInN1YlN0cmluZyIsImNsb25lIiwiZGlmZmVyZW5jZSIsImRpZmZlcmVuY2VCeSIsImRpZmZlcmVuY2VXaXRoIiwiZmluZEluZGV4IiwiZmluZExhc3RJbmRleCIsImhlYWQiLCJpbnRlcnNlY3Rpb24iLCJtYXBwZWQiLCJpbnRlcnNlY3Rpb25CeSIsImludGVyc2VjdGlvbldpdGgiLCJwdWxsIiwicHVsbEFsbCIsInB1bGxBdCIsInVuaW9uIiwidW5pb25CeSIsInVuaW9uV2l0aCIsInVuemlwIiwiZ3JvdXAiLCJ1bnppcFdpdGgiLCJ3aXRob3V0IiwieG9yIiwieG9yQnkiLCJ4b3JXaXRoIiwiemlwIiwiemlwV2l0aCIsImNoYWluIiwiaW50ZXJjZXB0b3IiLCJ3cmFwcGVyQXQiLCJjb3VudEJ5IiwiZmluZCIsImZpbmRMYXN0IiwiZm9yRWFjaFJpZ2h0IiwiZ3JvdXBCeSIsImludm9rZU1hcCIsImtleUJ5IiwicGFydGl0aW9uIiwic29ydEJ5IiwiYmVmb3JlIiwiYmluZCIsImJpbmRLZXkiLCJXUkFQX0JJTkRfRkxBRyIsImRlYm91bmNlIiwib3B0aW9ucyIsImxhc3RBcmdzIiwibGFzdFRoaXMiLCJtYXhXYWl0IiwidGltZXJJZCIsImxhc3RDYWxsVGltZSIsImxhc3RJbnZva2VUaW1lIiwibGVhZGluZyIsIm1heGluZyIsImludm9rZUZ1bmMiLCJ0aW1lIiwic2hvdWxkSW52b2tlIiwidGltZVNpbmNlTGFzdENhbGwiLCJ0aW1lckV4cGlyZWQiLCJ0cmFpbGluZ0VkZ2UiLCJ0aW1lV2FpdGluZyIsInJlbWFpbmluZ1dhaXQiLCJkZWJvdW5jZWQiLCJpc0ludm9raW5nIiwibGVhZGluZ0VkZ2UiLCJjYW5jZWwiLCJmbHVzaCIsImRlZmVyIiwiZGVsYXkiLCJyZXNvbHZlciIsIm1lbW9pemVkIiwiQ2FjaGUiLCJuZWdhdGUiLCJvdmVyQXJncyIsInRyYW5zZm9ybXMiLCJmdW5jc0xlbmd0aCIsInBhcnRpYWwiLCJwYXJ0aWFsUmlnaHQiLCJyZWFyZyIsImd0IiwiZ3RlIiwiaXNFcnJvciIsImlzSW50ZWdlciIsImlzTnVtYmVyIiwiaXNTdHJpbmciLCJsdCIsImx0ZSIsInRvQXJyYXkiLCJuZXh0IiwiZG9uZSIsIml0ZXJhdG9yVG9BcnJheSIsInJlbWFpbmRlciIsInRvTGVuZ3RoIiwiaXNCaW5hcnkiLCJhc3NpZ24iLCJhc3NpZ25JbiIsImFzc2lnbkluV2l0aCIsImFzc2lnbldpdGgiLCJhdCIsInByb3BzSW5kZXgiLCJwcm9wc0xlbmd0aCIsImRlZmF1bHRzRGVlcCIsIm1lcmdlV2l0aCIsImludmVydCIsImludmVydEJ5IiwiaW52b2tlIiwibmF0aXZlS2V5c0luIiwiaXNQcm90byIsImJhc2VLZXlzSW4iLCJtZXJnZSIsIm9taXQiLCJDTE9ORV9ERUVQX0ZMQUciLCJiYXNlUGljayIsInBpY2tCeSIsInByb3AiLCJ0b1BhaXJzIiwidG9QYWlyc0luIiwiY2FtZWxDYXNlIiwid29yZCIsInRvTG93ZXJDYXNlIiwiY2FwaXRhbGl6ZSIsInVwcGVyRmlyc3QiLCJrZWJhYkNhc2UiLCJsb3dlckNhc2UiLCJsb3dlckZpcnN0Iiwic25ha2VDYXNlIiwic3RhcnRDYXNlIiwidXBwZXJDYXNlIiwidG9VcHBlckNhc2UiLCJwYXR0ZXJuIiwiaGFzVW5pY29kZVdvcmQiLCJ1bmljb2RlV29yZHMiLCJhc2NpaVdvcmRzIiwiYXR0ZW1wdCIsImJpbmRBbGwiLCJtZXRob2ROYW1lcyIsImZsb3ciLCJmbG93UmlnaHQiLCJtZXRob2QiLCJtZXRob2RPZiIsIm1peGluIiwib3ZlciIsIm92ZXJFdmVyeSIsIm92ZXJTb21lIiwiYmFzZVByb3BlcnR5RGVlcCIsInJhbmdlIiwicmFuZ2VSaWdodCIsImF1Z2VuZCIsImFkZGVuZCIsImRpdmlkZSIsImRpdmlkZW5kIiwiZGl2aXNvciIsIm11bHRpcGx5IiwibXVsdGlwbGllciIsIm11bHRpcGxpY2FuZCIsInJvdW5kIiwic3VidHJhY3QiLCJtaW51ZW5kIiwic3VidHJhaGVuZCIsImFmdGVyIiwiY2FzdEFycmF5IiwiY2h1bmsiLCJjb21wYWN0IiwiY29uY2F0IiwiY29uZCIsImNvbmZvcm1zIiwiYmFzZUNvbmZvcm1zIiwicHJvcGVydGllcyIsImN1cnJ5IiwiY3VycnlSaWdodCIsImRyb3AiLCJkcm9wUmlnaHQiLCJkcm9wUmlnaHRXaGlsZSIsImRyb3BXaGlsZSIsImZpbGwiLCJiYXNlRmlsbCIsImZpbHRlciIsImZsYXRNYXAiLCJmbGF0TWFwRGVlcCIsImZsYXRNYXBEZXB0aCIsImZsYXR0ZW5EZWVwIiwiZmxhdHRlbkRlcHRoIiwiZmxpcCIsImZyb21QYWlycyIsImZ1bmN0aW9ucyIsImZ1bmN0aW9uc0luIiwiaW5pdGlhbCIsIm1hcEtleXMiLCJtYXBWYWx1ZXMiLCJtYXRjaGVzIiwibWF0Y2hlc1Byb3BlcnR5IiwibnRoQXJnIiwib21pdEJ5Iiwib25jZSIsIm9yZGVyQnkiLCJwcm9wZXJ0eU9mIiwicHVsbEFsbEJ5IiwicHVsbEFsbFdpdGgiLCJyZWplY3QiLCJyZW1vdmUiLCJyZXN0Iiwic2FtcGxlU2l6ZSIsInNldFdpdGgiLCJzaHVmZmxlIiwic29ydGVkVW5pcSIsInNvcnRlZFVuaXFCeSIsInNlcGFyYXRvciIsImxpbWl0Iiwic3ByZWFkIiwidGFpbCIsInRha2UiLCJ0YWtlUmlnaHQiLCJ0YWtlUmlnaHRXaGlsZSIsInRha2VXaGlsZSIsInRhcCIsInRocm90dGxlIiwidG9QYXRoIiwiaXNBcnJMaWtlIiwidW5hcnkiLCJ1bmlxIiwidW5pcUJ5IiwidW5pcVdpdGgiLCJ1bnNldCIsInVwZGF0ZSIsInVwZGF0ZVdpdGgiLCJ2YWx1ZXNJbiIsIndyYXAiLCJ6aXBPYmplY3QiLCJ6aXBPYmplY3REZWVwIiwiZW50cmllc0luIiwiZXh0ZW5kIiwiZXh0ZW5kV2l0aCIsImNsYW1wIiwiY2xvbmVEZWVwIiwiY2xvbmVEZWVwV2l0aCIsImNsb25lV2l0aCIsImNvbmZvcm1zVG8iLCJkZWZhdWx0VG8iLCJlbmRzV2l0aCIsInRhcmdldCIsInBvc2l0aW9uIiwiZXNjYXBlIiwiZXNjYXBlUmVnRXhwIiwiZXZlcnkiLCJmaW5kS2V5IiwiZmluZExhc3RLZXkiLCJmb3JJbiIsImZvckluUmlnaHQiLCJmb3JPd24iLCJmb3JPd25SaWdodCIsImluUmFuZ2UiLCJiYXNlSW5SYW5nZSIsImlzQm9vbGVhbiIsImlzRWxlbWVudCIsImlzRW1wdHkiLCJpc0VxdWFsIiwiaXNFcXVhbFdpdGgiLCJpc01hdGNoIiwiaXNNYXRjaFdpdGgiLCJpc05hTiIsImlzTmF0aXZlIiwiaXNOaWwiLCJpc051bGwiLCJpc1NhZmVJbnRlZ2VyIiwiaXNVbmRlZmluZWQiLCJpc1dlYWtNYXAiLCJpc1dlYWtTZXQiLCJsYXN0SW5kZXhPZiIsInN0cmljdExhc3RJbmRleE9mIiwibWF4QnkiLCJtZWFuIiwibWVhbkJ5IiwibWluQnkiLCJzdHViT2JqZWN0Iiwic3R1YlN0cmluZyIsInN0dWJUcnVlIiwibnRoIiwibm9Db25mbGljdCIsInBhZCIsInN0ckxlbmd0aCIsInBhZEVuZCIsInBhZFN0YXJ0IiwicmFkaXgiLCJmbG9hdGluZyIsInRlbXAiLCJyZWR1Y2UiLCJyZWR1Y2VSaWdodCIsInJlcGVhdCIsInNhbXBsZSIsInNvbWUiLCJzb3J0ZWRJbmRleCIsInNvcnRlZEluZGV4QnkiLCJzb3J0ZWRJbmRleE9mIiwic29ydGVkTGFzdEluZGV4Iiwic29ydGVkTGFzdEluZGV4QnkiLCJzb3J0ZWRMYXN0SW5kZXhPZiIsInN0YXJ0c1dpdGgiLCJzdW0iLCJzdW1CeSIsInRlbXBsYXRlIiwic2V0dGluZ3MiLCJpc0VzY2FwaW5nIiwiaXNFdmFsdWF0aW5nIiwiaW1wb3J0cyIsImltcG9ydHNLZXlzIiwiaW1wb3J0c1ZhbHVlcyIsImludGVycG9sYXRlIiwicmVEZWxpbWl0ZXJzIiwiZXZhbHVhdGUiLCJzb3VyY2VVUkwiLCJlc2NhcGVWYWx1ZSIsImludGVycG9sYXRlVmFsdWUiLCJlc1RlbXBsYXRlVmFsdWUiLCJldmFsdWF0ZVZhbHVlIiwidmFyaWFibGUiLCJ0aW1lcyIsInRvTG93ZXIiLCJ0b1NhZmVJbnRlZ2VyIiwidG9VcHBlciIsInRyaW0iLCJ0cmltRW5kIiwidHJpbVN0YXJ0IiwidHJ1bmNhdGUiLCJvbWlzc2lvbiIsInNlYXJjaCIsInN1YnN0cmluZyIsImdsb2JhbCIsIm5ld0VuZCIsInVuZXNjYXBlIiwidW5pcXVlSWQiLCJwcmVmaXgiLCJlYWNoIiwiZWFjaFJpZ2h0IiwiZmlyc3QiLCJWRVJTSU9OIiwiaXNGaWx0ZXIiLCJ0YWtlTmFtZSIsImRyb3BOYW1lIiwiY2hlY2tJdGVyYXRlZSIsImlzVGFrZXIiLCJsb2Rhc2hGdW5jIiwicmV0VW53cmFwcGVkIiwiaXNMYXp5IiwidXNlTGF6eSIsImlzSHlicmlkIiwiaXNVbndyYXBwZWQiLCJvbmx5TGF6eSIsImNoYWluTmFtZSIsImRpciIsImlzUmlnaHQiLCJ2aWV3IiwiZ2V0VmlldyIsIml0ZXJMZW5ndGgiLCJ0YWtlQ291bnQiLCJpdGVySW5kZXgiLCJjb21taXQiLCJ3cmFwcGVkIiwidG9KU09OIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibG9hZGVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJvIiwiZW51bWVyYWJsZSIsImdsb2JhbFRoaXMiLCJ3aW5kb3ciLCJvYmoiLCJubWQiLCJjaGlsZHJlbiIsIlBoYXNlciIsIlNGWF9WT0xVTUVfS0VZIiwiTVVTSUNfVk9MVU1FX0tFWSIsIkdMT0JBTF9WT0xVTUVfS0VZIiwiTEVHQUNZX1ZPTFVNRV9LRVkiLCJwYXJzZVN0b3JlZFZvbHVtZSIsInJhdyIsInYiLCJOdW1iZXIiLCJDbGFtcCIsImdldFN0b3JlZFZvbHVtZUJ5S2V5IiwiZmFsbGJhY2tLZXkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZmFsbGJhY2tSYXciLCJnZXRTdG9yZWRTZnhWb2x1bWUiLCJnZXRTdG9yZWRNdXNpY1ZvbHVtZSIsImdldFN0b3JlZEdsb2JhbFZvbHVtZSIsImFwcGx5U3RvcmVkVm9sdW1lIiwic2NlbmUiLCJnbG9iYWxWb2wiLCJzZnhWb2x1bWUiLCJtdXNpY1ZvbHVtZSIsInNvdW5kIiwidm9sdW1lIiwibXVzaWMiLCJnYW1lIiwiZ2xvYmFscyIsInNldFZvbHVtZSIsInBsYXlDbGljayIsInBsYXkiLCJjcmVhdGVVSUJ1dHRvbiIsIngiLCJ5IiwibGFiZWwiLCJvbkNsaWNrIiwidGV4dHVyZU5vcm1hbCIsInRleHR1cmVIb3ZlciIsInNjYWxlIiwidGV4dFN0eWxlIiwiY2xpY2tTb3VuZEtleSIsImJ1dHRvbiIsInNwcml0ZSIsInNldFNjYWxlIiwic2V0SW50ZXJhY3RpdmUiLCJ1c2VIYW5kQ3Vyc29yIiwidGV4dCIsInNldE9yaWdpbiIsInNldE5vcm1hbCIsInNldFRleHR1cmUiLCJzZXRIb3ZlciIsIm9uIiwicG9pbnRlciIsImdldEJvdW5kcyIsImNvbnRhaW5zIiwiY3JlYXRlSWNvbkJ1dHRvbiIsInRleHR1cmUiLCJob3ZlclNjYWxlIiwiTWVudV9TY2VuZSIsInN1cGVyIiwicHJlbG9hZCIsImxvYWQiLCJpbWFnZSIsImF1ZGlvIiwic291bmRLZXkiLCJsb29wIiwidHJ5UGxheSIsImlzUGxheWluZyIsImVyciIsImNvbnNvbGUiLCJ3YXJuIiwiYXN5bmMiLCJjdHgiLCJzdGF0ZSIsInJlc3VtZSIsImVuc3VyZUxvb3BpbmdNdXNpYyIsInN0eWxlIiwiZGVmYXVsdFRleHRTdHlsZSIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwid2lkdGgiLCJoZWlnaHQiLCJjZW50ZXJYIiwicmlnaHRIYWxmWCIsInNldERlcHRoIiwic2V0RGlzcGxheVNpemUiLCJmaXJzdEJ1dHRvblkiLCJidXR0b25UZXh0U3R5bGUiLCJyZXR1cm5TY2VuZSIsImJ1dHRvblNwYWNpbmciLCJoYW5kbGVMb2dvdXQiLCJjb25uZWN0aW9uVGV4dCIsIm9uVXBkYXRlQ291bnQiLCJhY3RpdmUiLCJzZXRUZXh0IiwiZXZlbnRzIiwib2ZmIiwidXNlcm5hbWUiLCJyZWdpc3RyeSIsImZldGNoIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJzZXNzaW9uU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJkZXN0cm95Iiwic3RvcCIsIlBPV0VSVVBfRFVSQVRJT05fTVMiLCJ2ZWxvY2lkYWQiLCJyYWxlbnRpemFyIiwicGFyYWxpemFyIiwicG9yMiIsInBvcjMiLCJQbGF5ZXIiLCJjaGFyYWN0ZXJUeXBlIiwiYmFzZU1vdmVTcGVlZCIsIm1vdmVTcGVlZCIsImp1bXBTcGVlZCIsImFjdGl2ZVBvd2VyVXBzIiwiaXNQYXJhbHl6ZWQiLCJwYXJhbHlzaXNUd2VlbiIsInNwZWVkRWZmZWN0QWN0aXZlIiwic2xvd0VmZmVjdEFjdGl2ZSIsInNjb3JlTXVsdGlwbGllciIsIm11bHRpcGxpZXJUZXh0Iiwic3Ryb2tlIiwic3Ryb2tlVGhpY2tuZXNzIiwic2V0VmlzaWJsZSIsInBvd2VyVXBJbnZlbnRvcnkiLCJpc1JlY2VpdmluZyIsImJvdW5kc0xlZnQiLCJib3VuZHNSaWdodCIsImJvdW5kc1RvcCIsImJvdW5kc0JvdHRvbSIsIkNIQVJBQ1RFUl9DT05GSUciLCJjaGFyYWN0ZXJBIiwidGV4dHVyZUtleSIsInN0YXJ0RnJhbWUiLCJpZGxlTGVmdEFuaW0iLCJpZGxlUmlnaHRBbmltIiwicnVuTGVmdEFuaW0iLCJydW5SaWdodEFuaW0iLCJqdW1wTGVmdEFuaW0iLCJqdW1wUmlnaHRBbmltIiwicmVjZWl2ZUxlZnRBbmltIiwicmVjZWl2ZVJpZ2h0QW5pbSIsInZpY3RvcnkiLCJjaGFyYWN0ZXJCIiwiY2hhcmFjdGVyQyIsImNvbmZpZyIsInBoeXNpY3MiLCJzZXRTaXplIiwiZmFjaW5nIiwiaXNPbkdyb3VuZCIsImlzSnVtcGluZyIsImp1bXBTdGFydFRpbWUiLCJhbmltIiwiaXNHcm91bmRlZCIsImJsb2NrZWQiLCJkb3duIiwidG91Y2hpbmciLCJpc05lYXJHcm91bmQiLCJ0aHJlc2hvbGQiLCJncm91bmRZIiwiZmVldFkiLCJhYnMiLCJtb3ZlTGVmdCIsInNldFZlbG9jaXR5WCIsInBsYXlBbmltYXRpb24iLCJtb3ZlUmlnaHQiLCJqdW1wTGVmdCIsInNldFZlbG9jaXR5WSIsInBsYXlTZngiLCJzZngiLCJqdW1wIiwianVtcFJpZ2h0IiwicmVjZWl2ZUxlZnQiLCJyZWNlaXZlUmlnaHQiLCJpZGxlTGVmdCIsImlkbGVSaWdodCIsInNldEJvdW5kcyIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNsYW1wV2l0aGluQm91bmRzIiwiaGFsZldpZHRoIiwic2V0UG9zaXRpb24iLCJzZXRWZWxvY2l0eSIsInVwZGF0ZU11bHRpcGxpZXJUZXh0UG9zaXRpb24iLCJvZmZzZXRZIiwiZGlzcGxheUhlaWdodCIsImFuaW1LZXkiLCJhbmltcyIsImN1cnJlbnRBbmltIiwid2FzT25Hcm91bmQiLCJjdXJyZW50S2V5IiwiYXBwbHlQb3dlclVwIiwidXNlTmV4dFBvd2VyVXAiLCJmb3JjZWRUeXBlIiwiaWR4Iiwic2hpZnQiLCJhY3RpdmF0ZVBvd2VyVXAiLCJ1cGRhdGVQbGF5ZXJJbnZlbnRvcnlVSSIsImFwcGx5T3JSZWZyZXNoVGltZWRFZmZlY3QiLCJvcHBvbmVudCIsImdldE9wcG9uZW50IiwidXBkYXRlUG93ZXJVcHMiLCJzcGVlZE5lZWRzUmVjYWxjIiwic2NvcmVOZWVkc1JlY2FsYyIsImxvZyIsInNldFNwZWVkRWZmZWN0Iiwic2V0U2xvd0VmZmVjdCIsInNldFBhcmFseXplZCIsInJlY2FsY3VsYXRlTW92ZVNwZWVkIiwicmVjYWxjdWxhdGVTY29yZUVmZmVjdCIsImdldE5leHRQb3dlclVwVHlwZSIsImFwcGx5UG93ZXJVcEVmZmVjdCIsInNldFRpbnQiLCJzZXRBbHBoYSIsInR3ZWVucyIsInRhcmdldHMiLCJhbHBoYSIsInlveW8iLCJkdXJhdGlvbiIsInJlZnJlc2hQb3dlclVwVmlzdWFscyIsIm11bHQiLCJkdXJhdGlvbk1zIiwiY2xlYXJUaW50IiwicGxheWVycyIsImZyb20iLCJwIiwiQXBwbHlQb3dlclVwQ29tbWFuZCIsInBsYXllciIsInBvd2VyVXBUeXBlIiwic3RvcmVkIiwiZXhlY3V0ZSIsIlBvd2VyVXAiLCJpc0NvbGxlY3RlZCIsIl9kZXN0cm95ZWQiLCJfY29vbGRvd25VbnRpbCIsImZhZGVTdGFydCIsImxpZmV0aW1lIiwiX292ZXJsYXBzIiwiZmFkZVR3ZWVuIiwiX2xpZmV0aW1lVGltZXIiLCJzdGF0aWNJbWFnZSIsInJlZnJlc2hCb2R5IiwiZmFkZURlbGF5IiwiZmFkZUR1cmF0aW9uIiwiYyIsIm92ZXJsYXAiLCJjb2xsZWN0IiwiZGVsYXllZENhbGwiLCJjbWQiLCJjb21tYW5kUHJvY2Vzc29yIiwicG93ZXJVcHMiLCJCYWxsIiwic2V0Qm91bmNlIiwic2V0Q29sbGlkZVdvcmxkQm91bmRzIiwibGFzdFRvdWNoZWRCeSIsInRvdWNoQ291bnQiLCJjb3VydFNpZGUiLCJpc0JhbGxMaXZlIiwibmV0WCIsImxhc3RIaXRUaW1lIiwibGFzdEhpdFBsYXllcklkIiwic2VlZCIsInJuZyIsIl9wc2V1ZG9SYW5kb20iLCJfZ2V0UmFuZG9tRmFjdG9yIiwiaGl0IiwicGxheWVyRmFjaW5nRGlyZWN0aW9uIiwib25GYWx0YSIsInZlbG9jaXR5WCIsInZlbG9jaXR5WSIsInJlY2VpdmUiLCJzcGlrZSIsImJhc2VTcGVlZFgiLCJ2ZXJ0aWNhbFN0cmVuZ3RoIiwicmFuZG9tRmFjdG9yWCIsImNyb3NzTmV0Iiwib25Hcm91bmRlZCIsImJhbGxPbkxlZnQiLCJiYWxsT25SaWdodCIsIm9uUmFsbHlFbmQiLCJyZXNldFJhbGx5IiwiZmFsdGFUeXBlIiwiZmFsdGluZ1BsYXllciIsInNjb3JpbmdQbGF5ZXJJZCIsImVtaXQiLCJfZ2V0U3VidGxlTnVkZ2UiLCJzcGF3blgiLCJzaWRlUGFkZGluZyIsIndvcmxkV2lkdGgiLCJzZXRTZXJ2ZVBvc2l0aW9uIiwic2NvcmluZ1BsYXllciIsIm51ZGdlVmVsb2NpdHlYIiwibnVkZ2UiLCJDb21tYW5kUHJvY2Vzc29yIiwiZ2FtZVNjZW5lIiwic2V0UGxheWVycyIsInNldEdhbWVTY2VuZSIsImNvbW1hbmQiLCJDb21tYW5kIiwic2VyaWFsaXplIiwiZ2V0UGxheWVyIiwiTW92ZVBsYXllckNvbW1hbmQiLCJkaXJlY3Rpb24iLCJwbGF5ZXJJZCIsIkdhbWVfU2NlbmUiLCJ0aWVtcG9Ub3RhbCIsInRpZW1wb1Jlc3RhbnRlIiwidGltZXJUZXh0IiwidGltZXJFdmVudCIsImluaXQiLCJpbnB1dE1hcHBpbmdzIiwicGxheWVyMSIsInBsYXllcjIiLCJzZWxlY3RlZFNjZW5hcmlvIiwiYmFsbCIsInNjb3JlUDEiLCJzY29yZVAyIiwic2V0c1AxIiwic2V0c1AyIiwibWF4U2V0cyIsImN1cnJlbnRTZXQiLCJpc0dvbGRlblBvaW50IiwiaXNTZXRFbmRpbmciLCJzcHJpdGVzaGVldCIsImZyYW1lV2lkdGgiLCJmcmFtZUhlaWdodCIsIndvcmxkSGVpZ2h0Iiwid2hpc3RsZSIsInBvaW50Iiwic2V0U2Nyb2xsRmFjdG9yIiwidGltZXJJY29uIiwic2V0RnJhbWUiLCJzZXRGcmFtZVdpZHRoIiwiZGlzcGxheVdpZHRoIiwic2V0RnJhbWVIZWlnaHQiLCJzZXRTY29yZVkiLCJzZXRTY29yZU9mZnNldFgiLCJzZXRTY29yZUZyYW1lTGVmdCIsInNldFNjb3JlRnJhbWVSaWdodCIsInNldFNjb3JlTGVmdCIsInNldFNjb3JlUmlnaHQiLCJzZXRXaW5uZXJUZXh0IiwiYWRkRXZlbnQiLCJ1cGRhdGVUaW1lciIsImNhbGxiYWNrU2NvcGUiLCJyZWQiLCJzdGF0aWNTcHJpdGUiLCJyZWRUZXh0dXJlIiwidGV4dHVyZXMiLCJnZXRTb3VyY2VJbWFnZSIsInNldE9mZnNldCIsInVwZGF0ZUZyb21HYW1lT2JqZWN0IiwiX2NyZWF0ZUFuaW1hdGlvbnMiLCJwb2ludHNMZWZ0IiwicG9pbnRzUmlnaHQiLCJzY29yZUZyYW1lTGVmdCIsInNjb3JlRnJhbWVSaWdodCIsInNjb3JlTGVmdCIsInJpZ2h0U2NvcmUiLCJncm91bmRIZWlnaHQiLCJncm91bmQiLCJyZWN0YW5nbGUiLCJleGlzdGluZyIsIl9jcmVhdGVQbGF5ZXJzIiwiX3NldHVwUGh5c2ljc1dvcmxkIiwiX3NldHVwSW5wdXRNYXBwaW5ncyIsIm1heFBvd2VyVXBzIiwicG93ZXJVcFNwYXduQ29uZmlnIiwibWluRGVsYXlNcyIsIm1heERlbGF5TXMiLCJ3ZWlnaHRzIiwiY29vbGRvd25NcyIsInBvd2VyVXBMYXN0U3Bhd25BdCIsImludmVudG9yeVVJIiwic2NoZWR1bGVQb3dlclVwU3Bhd24iLCJpbnZlbnRvcnlGcmFtZXMiLCJfY3JlYXRlQmFsbCIsIl9zZXR1cEJhbGxDb2xsaXNpb25zIiwiX3NldHVwQmFsbEV2ZW50cyIsImtleWJvYXJkIiwicGF1c2UiLCJwYXVzZWQiLCJsYXVuY2giLCJCZXR3ZWVuIiwiX2dldFdlaWdodGVkUG93ZXJVcFR5cGUiLCJwb3dlclVwIiwid2VpZ2h0IiwiY29vbGRvd24iLCJ0b3RhbCIsInJvbGwiLCJfaGFuZGxlSW5wdXRGb3JBbGxQbGF5ZXJzIiwibWludXRvcyIsInNlZ3VuZG9zIiwiZm9ybWF0byIsIl9lbmRTZXQiLCJ1cGRhdGVTZXRTY29yZVVJIiwidWkiLCJpIiwiZnJhbWVzIiwiZ2VuZXJhdGVGcmFtZU51bWJlcnMiLCJmcmFtZVJhdGUiLCJjaGFyUDEiLCJjaGFyYWN0ZXIiLCJjaGFyUDIiLCJwMSIsInAyIiwiY291cnRCb3R0b20iLCJjb2xsaWRlciIsImxlZnRLZXkiLCJyaWdodEtleSIsImp1bXBLZXkiLCJyZWNlaXZlS2V5IiwicG93ZXJLZXkiLCJsZWZ0S2V5T2JqIiwiYWRkS2V5IiwiS2V5Ym9hcmQiLCJLZXlDb2RlcyIsInJpZ2h0S2V5T2JqIiwianVtcEtleU9iaiIsInJlY2VpdmVLZXlPYmoiLCJwb3dlcktleU9iaiIsIm1hcHBpbmciLCJpZGxlRGlyIiwiaXNEb3duIiwiSnVzdERvd24iLCJyZWNlaXZlRGlyIiwianVtcERpciIsIl9vbkJhbGxQbGF5ZXJDb2xsaXNpb24iLCJ2ZWxvY2l0eSIsInNjb3JlcklkIiwicG9pbnRzVG9BZGQiLCJfY2hlY2tXaW5Db25kaXRpb24iLCJfaXNCYWxsSW5IaXRab25lIiwiYmFsbFNwcml0ZSIsImJhbGxYIiwiYmFsbFkiLCJib2R5VG9wIiwiYm9keUhlaWdodCIsImJvZHlDZW50ZXJYIiwiem9uZSIsImZhY2luZ1JpZ2h0Iiwid2lkZUhpdCIsInJlYWNoRm9yd2FyZCIsInJlYWNoQmFjayIsInBsYXllckRpcmVjdGlvbiIsIl9lbmRHYW1lIiwid2lubmVyIiwid29ybGQiLCJzY29yZURpZmYiLCJ3aW5uZXJMYWJlbCIsIl9yZXNldFNldCIsInNodXRkb3duIiwiVHV0b3JpYWxfU2NlbmUiLCJwYWdlSW5kZXgiLCJtYWluVGl0bGVUZXh0IiwicGFnZXMiLCJ0aXRsZSIsInBhbmVsTWFyZ2luIiwicGFuZWxHYXAiLCJuYXZZIiwicGFuZWxUb3AiLCJwYW5lbEJvdHRvbSIsInBhbmVsSGVpZ2h0IiwicGFuZWxXaWR0aCIsImxheW91dCIsInNsaWRlSW1hZ2UiLCJfZml0SW1hZ2UiLCJwYWdlSW5kaWNhdG9yIiwicHJldkJ0biIsInByZXYiLCJuZXh0QnRuIiwicmVuZGVyUGFnZSIsImltZyIsIm1heFciLCJtYXhIIiwiaXNGaXJzdFBhZ2UiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlzTGFzdFBhZ2UiLCJidG5PYmoiLCJlbmFibGVkIiwiZGlzYWJsZUludGVyYWN0aXZlIiwiQ29uZmlndXJhdGlvbl9TY2VuZSIsIm11c2ljVm9sdW1lU2xpZGVyIiwic2Z4Vm9sdW1lU2xpZGVyIiwiZ2xvYmFsVm9sdW1lU2xpZGVyIiwiaGFzU2Z4IiwiaGFzTXVzaWMiLCJsZWdhY3lWb2x1bWUiLCJnZXRMZWdhY3lWb2x1bWUiLCJpbml0aWFsVm9sdW1lIiwic2V0SXRlbSIsImVuc3VyZVN0b3JlZEF1ZGlvU2V0dGluZ3MiLCJpbml0aWFsR2xvYmFsVm9sdW1lIiwiaW5pdGlhbE11c2ljVm9sdW1lIiwiaW5pdGlhbFNmeFZvbHVtZSIsInNlY3Rpb25HYXAiLCJsYWJlbFRvU2xpZGVyR2FwIiwiZ3JvdXBUb3BZIiwiZ2xvYmFsTGFiZWxZIiwiZ2xvYmFsU2xpZGVyWSIsIm11c2ljTGFiZWxZIiwibXVzaWNTbGlkZXJZIiwic2Z4TGFiZWxZIiwic2Z4U2xpZGVyWSIsImRvbSIsImNyZWF0ZUZyb21IVE1MIiwiYWRkTGlzdGVuZXIiLCJldmVudCIsIkhUTUxJbnB1dEVsZW1lbnQiLCJzZXRTdG9yZWRHbG9iYWxWb2x1bWUiLCJzZXRTdG9yZWRNdXNpY1ZvbHVtZSIsInNldFN0b3JlZFNmeFZvbHVtZSIsIkV2ZW50cyIsIlNIVVRET1dOIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiQ3JlZGl0c19TY2VuZSIsIm5vbWJyZXNFcXVpcG8iLCJjYXJkV2lkdGgiLCJjYXJkSGVpZ2h0IiwiY2FyZFgiLCJjYXJkWSIsInNldFN0cm9rZVN0eWxlIiwic3RhcnRZIiwibm9tYnJlIiwiaXNIZWFkZXIiLCJsb2dvWCIsImxvZ29ZIiwiRW5kR2FtZV9TY2VuZSIsInNwcml0ZVAxIiwic3ByaXRlUDIiLCJ3aW5uZXJUZXh0WSIsImJ1dHRvblkiLCJzcHJpdGVQYWRkaW5nIiwic3ByaXRlQ2VudGVyWSIsIndpbm5lclRleHQiLCJ3aW5uZXJDaGFyYWN0ZXIiLCJ2aWN0b3J5Q29uZmlnIiwic3ByaXRlS2V5Iiwid2lubmVyU3ByaXRlU2xvdCIsImNvbnRhaW5lciIsIndpbm5lclNwcml0ZSIsInNldENyb3AiLCJhdmFpbGFibGVIZWlnaHQiLCJhdmFpbGFibGVXaWR0aCIsInVwZGF0ZVVzZXJTdGF0cyIsImJhc2VVcmwiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdG5hbWUiLCJwb3J0IiwidGhlbiIsInJlcyIsImpzb24iLCJjYXRjaCIsIk1vZGVHYW1lX1NjZW5lIiwic2VydmVyQWN0aXZlIiwic2VydmVyQ2hlY2tUaW1lciIsImNoZWNrU2VydmVyU3RhdHVzIiwic3BhY2luZyIsInN0YXJ0WCIsInN0YXJ0TW9kZSIsIm1vZGUiLCJzZXJ2ZXJTdGF0dXNUZXh0IiwicGxheWVyc0NvdW50VGV4dCIsInVwZGF0ZVBsYXllcnNDb3VudCIsInBsYXllcnNDb3VudFRpbWVyIiwic2V0Q29sb3IiLCJQYXVzZV9TY2VuZSIsImJ1dHRvblN0YXJ0WSIsInJlbW92ZUFsbEtleXMiLCJTZWxlY3RQbGF5ZXJfU2NlbmUiLCJjdXJyZW50VHVybiIsInBsYXllcklucHV0cyIsInBsYXllcklucHV0RWxzIiwidHVyblRleHQiLCJjcmVhdGVMb2NhbFVJIiwiY3JlYXRlT25saW5lVUkiLCJiaWdJbWFnZSIsImJpZ0ZyYW1lIiwiZnJhbWUiLCJjcmVhdGVQbGF5ZXJzVUkiLCJjcmVhdGVDaGFyYWN0ZXJNaW5pYXR1cmVzIiwidXBkYXRlVHVyblRleHQiLCJoYW5kbGVOZXh0IiwiZm9udFN0eWxlIiwiY3JlYXRlUGxheWVyT25saW5lVUkiLCJwb3NpdGlvbnNYIiwiaW5wdXRFbCIsIm5vZGUiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0b3BQcm9wYWdhdGlvbiIsInNldEZpbHRlciIsIkZpbHRlck1vZGUiLCJORUFSRVNUIiwicG9zaXRpb25zIiwibWluaSIsIm9uTWluaUNsaWNrZWQiLCJjaGFyYWN0ZXJOYW1lIiwib3duZXJJbmRleCIsIm93bmVyIiwidGFyZ2V0SW5kZXgiLCJuYW1lMSIsInAxSGFzQ2hhciIsIm5hbWUyIiwicDJIYXNDaGFyIiwiZmxhc2hUdXJuVGV4dCIsIm1zIiwib2xkQ29sb3IiLCJwMUhhc05hbWUiLCJwMkhhc05hbWUiLCJhbGxDaGFycyIsImFsbE5hbWVzIiwiU2VsZWN0U2NlbmFyaW9fU2NlbmUiLCJpc0hvc3QiLCJzZWxlY3RlZEltYWdlIiwiZXNjZW5hcmlvcyIsInNjZW5hcmlvQnV0dG9ucyIsInNldFNlbGVjdGVkU2NlbmFyaW8iLCJib3RvbiIsInRleHRvIiwiQWxpZ24iLCJJbiIsIkNlbnRlciIsIlNjZW5hcmlvUGlja2VyVUkiLCJjZmciLCJzY2VuYXJpb3MiLCJkZWZhdWx0U2NlbmFyaW8iLCJidXR0b25UZXh0dXJlcyIsIm5vcm1hbCIsInNlbGVjdGVkIiwib25TZWxlY3QiLCJwcmV2aWV3WCIsInByZXZpZXdZIiwiZnJhbWVZIiwicHJldmlld1ciLCJmcmFtZVciLCJwcmV2aWV3SCIsImZyYW1lSCIsImJ1dHRvbnNYIiwiYnV0dG9uc1kiLCJidXR0b25zU3BhY2luZ1kiLCJidXR0b25zU2NhbGUiLCJjb250cm9scyIsInByZXZpZXciLCJpbmZvVGV4dCIsIm9ubHlIb3N0VGV4dCIsImJ1dHRvbnMiLCJidG4iLCJfcmVmcmVzaEJ1dHRvbnMiLCJzZXRTY2VuYXJpbyIsInNldElzSG9zdCIsImlzU2VsZWN0ZWQiLCJQbGF5ZXJDYXJkVUkiLCJ3IiwiaCIsInBvcnRyYWl0S2V5cyIsImRlZmF1bHRQb3J0cmFpdEtleSIsInBhZGRpbmciLCJwb3J0cmFpdEJveFciLCJwb3J0cmFpdEJveEgiLCJwb3J0cmFpdFgiLCJwb3J0cmFpdFkiLCJ0ZXh0Qm94VyIsImdhcCIsInRleHRYIiwicG9ydHJhaXQiLCJfZml0VG9Cb3giLCJuYW1lWSIsIm5hbWVUZXh0IiwicmVhZHlUZXh0Iiwicm9sZVRleHQiLCJfbGF5b3V0TmFtZUFuZFJlYWR5IiwiX3BvcnRyYWl0S2V5RnJvbUNoYXJhY3RlciIsImJveFciLCJib3hIIiwidHciLCJ0aCIsImNyb3BXIiwiY3JvcEgiLCJzZXRQbGF5ZXIiLCJzZXRXYWl0aW5nIiwiY2xlYXJBbGVydFN0eWxlIiwiZW1vamkiLCJyZWFkeSIsInBvcnRyYWl0S2V5Iiwic2hvd0xlZnRNZXNzYWdlIiwibmFtZVdpZHRoIiwic2V0WCIsInNldFBhZGRpbmciLCJMb2JieV9TY2VuZSIsImlzUGxheWVyUmVhZHkiLCJsb2JieVBsYXllcnMiLCJwZW5kaW5nTG9iYnlVcGRhdGUiLCJ3cyIsInNjZW5hcmlvRnJhbWUiLCJzY2VuYXJpb1VJIiwic2NlbmFyaW9OYW1lIiwiX3NlbmRXUyIsInBsYXllcnNDZW50ZXJYIiwiY2FyZHNZIiwiY2FyZHNHYXAiLCJob3N0Q2FyZFgiLCJndWVzdENhcmRYIiwiaG9zdENhcmQiLCJndWVzdENhcmQiLCJidG5MaXN0byIsInRvZ2dsZVJlYWR5IiwiYnRuVm9sdmVyIiwiaGFuZGxlQmFjayIsInJlYWR5U3RhdGUiLCJXZWJTb2NrZXQiLCJDTE9TRUQiLCJDTE9TSU5HIiwiX2dldFdzVXJsIiwib25tZXNzYWdlIiwibXNnIiwicGFyc2UiLCJfaGFuZGxlV1NNZXNzYWdlIiwib25lcnJvciIsIm9uY2xvc2UiLCJqb2luUGF5bG9hZCIsIk9QRU4iLCJpc1JlYWR5Iiwib25vcGVuIiwiREVTVFJPWSIsIm51ZXZvVGV4dG9Cb3RvbiIsImNsb3NlIiwiYmFja2VuZFBvcnQiLCJzZW5kIiwic2hvd2luZ0FiYW5kb25FcnJvciIsIl9hcHBseUxvYmJ5VXBkYXRlIiwiaG9zdCIsImd1ZXN0Iiwic2V0TGFiZWwiLCJteVVzZXJuYW1lIiwibmV3SXNIb3N0IiwiTG9nZ2luZ19TY2VuZSIsImFwaVVybCIsImlzUmVnaXN0ZXJpbmciLCJzYXZlZE5hbWUiLCJzYXZlZFBhc3MiLCJyZXNwb25zZSIsInBhc3N3b3JkIiwib2siLCJyZXNEYXRhIiwidGl0bGVUZXh0IiwibWFyY28iLCJ1c2VySW5wdXQiLCJjcmVhdGVIdG1sSW5wdXQiLCJwYXNzSW5wdXQiLCJtYWluQnRuIiwiaGFuZGxlU3VibWl0IiwiZGVsZXRlQnRuIiwiaGFuZGxlRGVsZXRlVXNlciIsInRvZ2dsZVRleHQiLCJ0b2dnbGVNb2RlIiwiaXNQYXNzd29yZCIsInVzZXJuYW1lVmFsdWUiLCJwYXNzd29yZFZhbHVlIiwiYWxlcnQiLCJlbmRwb2ludCIsInRva2VuIiwiY29uZmlybSIsIk5vQ29ubmVjdGlvbl9TY2VuZSIsImNoZWNrU2VydmVyIiwibG9naW5SZXMiLCJsYXN0QWN0aXZlIiwidGFyZ2V0U2NlbmUiLCJyZXNldFBvaW50ZXJzIiwiQ29ubmVjdGlvbk1hbmFnZXJfU2NlbmUiLCJzdGFydEhlYXJ0YmVhdCIsInN0YXR1cyIsImhhbmRsZVJlY29ubmVjdGlvbiIsImhhbmRsZVNlcnZlckRvd24iLCJpc0FjdGl2ZSIsImdldFNjZW5lcyIsInMiLCJHYW1lT25saW5lX1NjZW5lIiwiUmFuZG9tRGF0YUdlbmVyYXRvciIsInJhbGx5SWQiLCJiYWxsTmV0IiwibGFzdFNlcSIsImhhc1RhcmdldCIsInR4IiwidHkiLCJ0dngiLCJ0dnkiLCJzbmFwRGlzdCIsImxlcnAiLCJiYWxsU3luY1NlcSIsImJhbGxTeW5jRXZlbnQiLCJwb3dlclVwU2VxIiwicG93ZXJVcHNCeUlkIiwicG93ZXJVcHNOZXRCeUlkIiwicG93ZXJVcHNOZXRPdmVybGFwc0J5SWQiLCJwb3dlclVwRXhwaXJ5VGltZXJzIiwicGVuZGluZ0NvbGxlY3RQb3dlclVwcyIsInBlbmRpbmdQb3dlclVwVXNlIiwiX3N1cHByZXNzQ29sbGVjdEJyb2FkY2FzdCIsImlzSG9zdENsaWVudCIsIl9yZW5kZXJUaW1lclRleHQiLCJfc3RhcnRCYWxsU3luYyIsIl9zZW5kQmFsbFJlc2V0Iiwic2V0QWxsb3dHcmF2aXR5IiwibW92ZXMiLCJzZXR1cFdlYlNvY2tldExpc3RlbmVycyIsIl9zdG9wQmFsbFN5bmMiLCJoYW5kbGVTZXJ2ZXJNZXNzYWdlIiwiZ2FtZUVuZGVkIiwiaGFuZGxlRGlzY29ubmVjdGlvbiIsIl9oYW5kbGVPcG9uZW50SW5wdXQiLCJfb25CYWxsVXBkYXRlIiwiX29uQmFsbFJlc2V0IiwicHUiLCJwb3dlclR5cGUiLCJsb2NhbFBsYXllciIsImF0dGFjaE92ZXJsYXAiLCJzZW5kTWVzc2FnZSIsInBsYXllck5hbWUiLCJyZXRyeVBsYXllciIsImV4cGlyeVRpbWVyIiwiZGVsZXRlIiwib3YiLCJkZW5pZWRJZCIsIndobyIsInBfdSIsIl9zZW5kSW52ZW50b3J5U3luYyIsIndob1VzZWQiLCJhcHBsaWVkVHlwZSIsInZpc2libGUiLCJwMUludiIsInAySW52IiwiX2FwcGx5U2NvcmVTeW5jIiwiYWJhbmRvblRleHQiLCJ0aW1lciIsIlJORCIsImJldHdlZW4iLCJtYXJnaW4iLCJpbm5lciIsInNwYXduTGVmdCIsInhNaW4iLCJ4TWF4Iiwib3JpZ2luYWxDb2xsZWN0IiwibGlmZXRpbWVNcyIsIl9oYW5kbGVNeUlucHV0IiwiX2FwcGx5QmFsbE5ldCIsInVzZWRUeXBlIiwicmVxdWVzdGVkVHlwZSIsInQiLCJfc2VuZFNjb3JlU3luYyIsImludGVydmFsTXMiLCJiIiwidngiLCJ2eSIsInNlcSIsInJlYXNvbiIsInN4Iiwic3kiLCJkeCIsImR5IiwiaHlwb3QiLCJMaW5lYXIiLCJSYW5raW5nX1NjZW5lIiwicmFua2luZ0xpbmVzIiwicmFua2luZ1RleHQiLCJhbGlnbiIsImxpbmVTcGFjaW5nIiwibG9hZFJhbmtpbmciLCJyYW5raW5nVGltZXIiLCJ0b3BQbGF5ZXJzIiwibGluZXMiLCJ3aW5zIiwicGFydGlkYXNHYW5hZGFzIiwicGxheWVkIiwicGFydGlkYUp1Z2FkYXMiLCJsb3NzZXMiLCJwYXJ0aWRhc1BlcmRpZGFzIiwiZG9jdW1lbnQiLCJmb250cyIsImFsbCIsImRlZmF1bHQiLCJhcmNhZGUiLCJncmF2aXR5IiwiZGVidWciLCJjcmVhdGVDb250YWluZXIiLCJjYWxsYmFja3MiLCJwcmVCb290IiwiYmFja2dyb3VuZENvbG9yIiwiYmxvYiIsIkJsb2IiLCJuYXZpZ2F0b3IiLCJzZW5kQmVhY29uIl0sInNvdXJjZVJvb3QiOiIifQ==